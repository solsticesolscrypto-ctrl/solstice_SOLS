const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-0LXP-xcN.js","assets/index-SGQOorzG.css"])))=>i.map(i=>d[i]);
import{r,j as e,B as R,_ as q}from"./index-0LXP-xcN.js";async function H(t=5){const s="3qxa32hbFKMTAesrtUBykqRcNnzGpix3F3QHQR5JcPBT",h="https://mainnet.helius-rpc.com/?api-key=b4aa694f-00a7-49e2-8e19-83e793d508c1",i=await(await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"recent-txs",method:"getSignaturesForAddress",params:[s,{limit:t}]})})).json();return i.result?(await Promise.all(i.result.map(async d=>{const y={jsonrpc:"2.0",id:"tx-details",method:"getTransaction",params:[d.signature,{encoding:"jsonParsed"}]},u=(await(await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).json()).result?.transaction?.message?.instructions||[];let c="",x=0;for(const m of u)m.parsed&&m.parsed.type==="transfer"&&m.parsed.info?.destination===s&&(c=m.parsed.info.source,x=Number(m.parsed.info.lamports)/1e9);if(!c||x===0)return null;const S=x*1e4;return{wallet:c.slice(0,4)+"..."+c.slice(-3),tokens:Math.round(S),sol:x}}))).filter(Boolean):[]}const z="3qxa32hbFKMTAesrtUBykqRcNnzGpix3F3QHQR5JcPBT",V=({t})=>{const[s,T]=r.useState(""),h=4e6,[b,w]=r.useState(""),[i,o]=r.useState(""),[d,y]=r.useState(null),[f,E]=r.useState(""),[u,c]=r.useState(!1),[x,S]=r.useState([]),[N,m]=r.useState(!0);r.useEffect(()=>{let a=!0;return m(!0),H(7).then(n=>{a&&(S(n),m(!1))}),()=>{a=!1}},[]);const L=1e6,[j,A]=r.useState(0),l=Math.min(100,Math.round(j/L*100));function K(a){return a<20?.5:a<50?.25:a<80?.1:.01}const P=K(l),C=j*.01,B=async()=>{o("");try{if(window.solana&&window.solana.isPhantom){c(!0),console.log("[Phantom] Intentando conectar...");const a=await window.solana.connect({onlyIfTrusted:!1});console.log("[Phantom] Conectado:",a),y("phantom"),E(a.publicKey.toString())}else console.error("[Phantom] No se detectó la extensión Phantom."),o("phantom-not-found")}catch(a){console.error("[Phantom] Error al conectar:",a),o("phantom-connect-error")}finally{c(!1)}},I=async a=>{if(a.preventDefault(),w(""),o(""),!d||d!=="phantom"||!f){o("presale-connect-required");return}if(!s||isNaN(s)||Number(s)<P){o("min-solana-rent");return}if(Number(s)*1e4>h){o("presale-max-tokens-wallet");return}c(!0);try{const{solana:n}=window;if(!n||!n.isPhantom)throw new Error("phantom-not-found");const p=await q(()=>import("./index-0LXP-xcN.js").then(k=>k.i),__vite__mapDeps([0,1])),O=new p.Connection("https://mainnet.helius-rpc.com/?api-key=b4aa694f-00a7-49e2-8e19-83e793d508c1"),$=new p.PublicKey(z),v=n.publicKey?.toString()||f;if(v!==f)throw new Error("phantom-connect-error");const _=new p.PublicKey(v),D=Math.floor(Number(s)*1e9),g=new p.Transaction().add(p.SystemProgram.transfer({fromPubkey:_,toPubkey:$,lamports:D}));g.feePayer=_;const{blockhash:F}=await O.getLatestBlockhash();g.recentBlockhash=F,console.log("[Phantom] Solicitando firma de transacción:",g);const M=await n.signTransaction(g);console.log("[Phantom] Transacción firmada:",M);const U=await O.sendRawTransaction(M.serialize());console.log("[Phantom] Transacción enviada. Signature:",U),w("presale-success"),A(k=>Math.min(L,k+Number(s)))}catch(n){console.error("[Phantom] Error en la transacción:",n),["phantom-not-found","phantom-connect-error","presale-amount-invalid","presale-connect-required"].includes(n.message)?o(n.message):o("presale-tx-error")}c(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"text-center mx-auto w-fit mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold gradient-text drop-shadow mb-3",children:t["presale-page-title"]||"Oficial $SOLS Preventa"}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 mb-6 w-fit mx-auto",children:t["presale-page-subtitle"]||"Asegura tu participación en el futuro del ecosistema Solstice. ¡El tiempo es limitado!"})]}),e.jsxs("div",{className:"flex flex-col items-center w-full gap-1 rounded-xl",children:[e.jsx("span",{className:"text-base text-[#66fcf1] font-bold mb-1",children:t["presale-launch-label"]||"Lanzamiento de Solstice 200.000.000 SOLS"}),e.jsx("span",{className:"text-xs text-gray-200 font-semibold tracking-wide",children:j===0?t["presale-raised"]||"Recaudado: 0":`${t["presale-raised"]||"Recaudado:"} $${C.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`}),e.jsx("span",{className:"text-xs text-gray-300 font-mono",children:t["presale-goal"]||"20,000 SOL Objetivo"}),e.jsx("div",{className:"w-full max-w-[220px] h-3 bg-[#23242a] rounded-full overflow-hidden relative border border-[#393b41] my-1",children:e.jsx("div",{className:"h-full bg-[#66fcf1] transition-all duration-700 ease-in-out shadow-lg",style:{width:l===0?"2%":`${l}%`,boxShadow:"0 0 8px 2px #66fcf1",borderRadius:"9999px",border:"2px solid #66fcf1",background:"linear-gradient(90deg, #66fcf1 60%, #45a29e 100%)"}})}),e.jsx("span",{className:"text-xs text-[#66fcf1] font-semibold mt-2",children:t["presale-price-label"]||"Precio del Token: 0.0001 SOLS"})]}),e.jsx("div",{className:"flex flex-row w-full justify-center items-center mt-2 mb-2",children:e.jsx(R,{onClick:B,className:"w-fit px-4 py-2 text-base btn-primary shadow-md mx-auto",disabled:u||d==="phantom",children:d==="phantom"?t.connected||t["wallet-connected"]||"Phantom conectada":t["presale-connect-phantom"]||t["dao-btn-connect-wallet"]||t["connect-phantom"]||"Conectar Billetera Solana"})}),e.jsxs("form",{onSubmit:I,className:"flex flex-col gap-6 w-full max-w-xs sm:max-w-sm md:max-w-md mx-auto items-center",children:[e.jsxs("div",{className:"flex flex-col w-full items-center gap-4",children:[e.jsx("input",{type:"number",min:P,max:h/1e4,step:"0.01",placeholder:t["presale-amount-placeholder"]||t["amount-placeholder"]||"Cantidad a comprar",className:"p-3 bg-[#181a20] text-white rounded-xl border border-[#23242a] focus:outline-none focus:ring-2 focus:ring-[#66fcf1] w-[230px] text-center placeholder:text-white/40 placeholder:font-light mb-3 shadow-sm",value:s,onChange:a=>T(a.target.value),disabled:u||d!=="phantom",autoComplete:"off"}),e.jsx("span",{className:"text-xs text-gray-400 block text-center mb-1",children:t["presale-max-tokens-wallet"]||"Máximo = 4,000,000 tokens solstice por cartera"}),e.jsxs("span",{className:"text-xs text-yellow-400 block text-center mb-2",children:[l<20&&"Mínimo de compra: 0.5 SOL",l>=20&&l<50&&"Mínimo de compra: 0.25 SOL",l>=50&&l<80&&"Mínimo de compra: 0.1 SOL",l>=80&&"Mínimo de compra: 0.01 SOL"]}),s&&!isNaN(s)&&Number(s)>0&&e.jsx("div",{className:"w-full text-center mt-1",children:e.jsxs("span",{className:"text-sm text-[#66fcf1] font-semibold",children:["Vas a recibir: ",e.jsxs("span",{className:"font-bold",children:[Number(s)*1e4," $SOLS"]})," en tu wallet Phantom"]})})]}),e.jsx(R,{type:"submit",className:"px-6 py-3 text-base font-bold text-center text-black bg-[#66fcf1] rounded-2xl shadow-md hover:bg-[#45a29e] transition-all select-none",style:{background:"none",boxShadow:"none",padding:0,margin:0,color:"#0b0c10",backgroundColor:"#66fcf1"},disabled:u||d!=="phantom"||!f,children:u?t["presale-buy-loading"]||"Procesando...":t["presale-buy"]||"Comprar"})]}),i&&e.jsx("span",{style:{color:"#e74c3c",display:"block",textAlign:"center",marginTop:8},children:i==="presale-max-tokens-wallet"?t["presale-max-tokens-wallet"]||"Máximo = 4,000,000 tokens solstice por cartera":i==="min-solana-rent"?`El monto mínimo permitido actualmente es ${P} SOL.`:t[i]||t["presale-tx-error"]||i}),b&&e.jsx("div",{className:"bg-green-700/90 text-white text-sm text-center mt-2 py-2 rounded-2xl shadow border border-green-400 animate-fade-in w-fit mx-auto",children:t[b]||b}),e.jsxs("div",{className:"w-full max-w-md mx-auto mt-8",children:[e.jsx("h3",{className:"text-lg font-bold text-[#66fcf1] mb-3 text-center",children:t["presale-recent-purchases-title"]||"Compras recientes"}),e.jsxs("ul",{className:"bg-[#181a20]/80 rounded-xl shadow border border-[#23242a] divide-y divide-[#23242a] min-h-[60px]",children:[N&&e.jsx("li",{className:"px-4 py-3 text-center text-gray-400",children:t["presale-loading-txs"]||"Cargando transacciones..."}),!N&&x.length===0&&e.jsx("li",{className:"px-4 py-3 text-center text-gray-400",children:t["presale-no-recent-purchases"]||"No hay compras recientes."}),x.map((a,n)=>e.jsxs("li",{className:"flex items-center justify-between px-4 py-3",children:[e.jsx("span",{className:"font-mono text-gray-200 text-xs",children:a.wallet}),e.jsxs("span",{className:"font-bold text-[#66fcf1]",children:[a.tokens.toLocaleString()," $SOLS"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[a.sol," SOL"]})]},n))]})]})]})};export{V as default};
