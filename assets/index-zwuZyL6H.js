(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function nl(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function ph(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var n=function i(){var s=!1;try{s=this instanceof i}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),n}var P0={exports:{}},md={},M0={exports:{}},An={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function x6(){if(yb)return An;yb=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function E(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,T={};function M(O,w,_){this.props=O,this.context=w,this.refs=T,this.updater=_||S}M.prototype.isReactComponent={},M.prototype.setState=function(O,w){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,w,"setState")},M.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function W(){}W.prototype=M.prototype;function z(O,w,_){this.props=O,this.context=w,this.refs=T,this.updater=_||S}var j=z.prototype=new W;j.constructor=z,R(j,M.prototype),j.isPureReactComponent=!0;var se=Array.isArray,le=Object.prototype.hasOwnProperty,de={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function $(O,w,_){var F,ee={},ce=null,we=null;if(w!=null)for(F in w.ref!==void 0&&(we=w.ref),w.key!==void 0&&(ce=""+w.key),w)le.call(w,F)&&!Z.hasOwnProperty(F)&&(ee[F]=w[F]);var Oe=arguments.length-2;if(Oe===1)ee.children=_;else if(1<Oe){for(var ze=Array(Oe),At=0;At<Oe;At++)ze[At]=arguments[At+2];ee.children=ze}if(O&&O.defaultProps)for(F in Oe=O.defaultProps,Oe)ee[F]===void 0&&(ee[F]=Oe[F]);return{$$typeof:r,type:O,key:ce,ref:we,props:ee,_owner:de.current}}function D(O,w){return{$$typeof:r,type:O.type,key:w,ref:O.ref,props:O.props,_owner:O._owner}}function U(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function q(O){var w={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(_){return w[_]})}var H=/\/+/g;function I(O,w){return typeof O=="object"&&O!==null&&O.key!=null?q(""+O.key):w.toString(36)}function y(O,w,_,F,ee){var ce=typeof O;(ce==="undefined"||ce==="boolean")&&(O=null);var we=!1;if(O===null)we=!0;else switch(ce){case"string":case"number":we=!0;break;case"object":switch(O.$$typeof){case r:case e:we=!0}}if(we)return we=O,ee=ee(we),O=F===""?"."+I(we,0):F,se(ee)?(_="",O!=null&&(_=O.replace(H,"$&/")+"/"),y(ee,w,_,"",function(At){return At})):ee!=null&&(U(ee)&&(ee=D(ee,_+(!ee.key||we&&we.key===ee.key?"":(""+ee.key).replace(H,"$&/")+"/")+O)),w.push(ee)),1;if(we=0,F=F===""?".":F+":",se(O))for(var Oe=0;Oe<O.length;Oe++){ce=O[Oe];var ze=F+I(ce,Oe);we+=y(ce,w,_,ze,ee)}else if(ze=E(O),typeof ze=="function")for(O=ze.call(O),Oe=0;!(ce=O.next()).done;)ce=ce.value,ze=F+I(ce,Oe++),we+=y(ce,w,_,ze,ee);else if(ce==="object")throw w=String(O),Error("Objects are not valid as a React child (found: "+(w==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":w)+"). If you meant to render a collection of children, use an array instead.");return we}function x(O,w,_){if(O==null)return O;var F=[],ee=0;return y(O,F,"","",function(ce){return w.call(_,ce,ee++)}),F}function V(O){if(O._status===-1){var w=O._result;w=w(),w.then(function(_){(O._status===0||O._status===-1)&&(O._status=1,O._result=_)},function(_){(O._status===0||O._status===-1)&&(O._status=2,O._result=_)}),O._status===-1&&(O._status=0,O._result=w)}if(O._status===1)return O._result.default;throw O._result}var J={current:null},G={transition:null},re={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:G,ReactCurrentOwner:de};function ae(){throw Error("act(...) is not supported in production builds of React.")}return An.Children={map:x,forEach:function(O,w,_){x(O,function(){w.apply(this,arguments)},_)},count:function(O){var w=0;return x(O,function(){w++}),w},toArray:function(O){return x(O,function(w){return w})||[]},only:function(O){if(!U(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},An.Component=M,An.Fragment=n,An.Profiler=s,An.PureComponent=z,An.StrictMode=i,An.Suspense=d,An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,An.act=ae,An.cloneElement=function(O,w,_){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var F=R({},O.props),ee=O.key,ce=O.ref,we=O._owner;if(w!=null){if(w.ref!==void 0&&(ce=w.ref,we=de.current),w.key!==void 0&&(ee=""+w.key),O.type&&O.type.defaultProps)var Oe=O.type.defaultProps;for(ze in w)le.call(w,ze)&&!Z.hasOwnProperty(ze)&&(F[ze]=w[ze]===void 0&&Oe!==void 0?Oe[ze]:w[ze])}var ze=arguments.length-2;if(ze===1)F.children=_;else if(1<ze){Oe=Array(ze);for(var At=0;At<ze;At++)Oe[At]=arguments[At+2];F.children=Oe}return{$$typeof:r,type:O.type,key:ee,ref:ce,props:F,_owner:we}},An.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:o,_context:O},O.Consumer=O},An.createElement=$,An.createFactory=function(O){var w=$.bind(null,O);return w.type=O,w},An.createRef=function(){return{current:null}},An.forwardRef=function(O){return{$$typeof:u,render:O}},An.isValidElement=U,An.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:V}},An.memo=function(O,w){return{$$typeof:f,type:O,compare:w===void 0?null:w}},An.startTransition=function(O){var w=G.transition;G.transition={};try{O()}finally{G.transition=w}},An.unstable_act=ae,An.useCallback=function(O,w){return J.current.useCallback(O,w)},An.useContext=function(O){return J.current.useContext(O)},An.useDebugValue=function(){},An.useDeferredValue=function(O){return J.current.useDeferredValue(O)},An.useEffect=function(O,w){return J.current.useEffect(O,w)},An.useId=function(){return J.current.useId()},An.useImperativeHandle=function(O,w,_){return J.current.useImperativeHandle(O,w,_)},An.useInsertionEffect=function(O,w){return J.current.useInsertionEffect(O,w)},An.useLayoutEffect=function(O,w){return J.current.useLayoutEffect(O,w)},An.useMemo=function(O,w){return J.current.useMemo(O,w)},An.useReducer=function(O,w,_){return J.current.useReducer(O,w,_)},An.useRef=function(O){return J.current.useRef(O)},An.useState=function(O){return J.current.useState(O)},An.useSyncExternalStore=function(O,w,_){return J.current.useSyncExternalStore(O,w,_)},An.useTransition=function(){return J.current.useTransition()},An.version="18.3.1",An}var wb;function kv(){return wb||(wb=1,M0.exports=x6()),M0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function T6(){if(vb)return md;vb=1;var r=kv(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,f){var p,v={},E=null,S=null;f!==void 0&&(E=""+f),d.key!==void 0&&(E=""+d.key),d.ref!==void 0&&(S=d.ref);for(p in d)i.call(d,p)&&!o.hasOwnProperty(p)&&(v[p]=d[p]);if(u&&u.defaultProps)for(p in d=u.defaultProps,d)v[p]===void 0&&(v[p]=d[p]);return{$$typeof:e,type:u,key:E,ref:S,props:v,_owner:s.current}}return md.Fragment=n,md.jsx=l,md.jsxs=l,md}var Eb;function R6(){return Eb||(Eb=1,P0.exports=T6()),P0.exports}var me=R6(),pe=kv();const it=nl(pe);var Wf={},N0={exports:{}},ji={},O0={exports:{}},D0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b;function k6(){return _b||(_b=1,(function(r){function e(G,re){var ae=G.length;G.push(re);e:for(;0<ae;){var O=ae-1>>>1,w=G[O];if(0<s(w,re))G[O]=re,G[ae]=w,ae=O;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var re=G[0],ae=G.pop();if(ae!==re){G[0]=ae;e:for(var O=0,w=G.length,_=w>>>1;O<_;){var F=2*(O+1)-1,ee=G[F],ce=F+1,we=G[ce];if(0>s(ee,ae))ce<w&&0>s(we,ee)?(G[O]=we,G[ce]=ae,O=ce):(G[O]=ee,G[F]=ae,O=F);else if(ce<w&&0>s(we,ae))G[O]=we,G[ce]=ae,O=ce;else break e}}return re}function s(G,re){var ae=G.sortIndex-re.sortIndex;return ae!==0?ae:G.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,v=null,E=3,S=!1,R=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(G){for(var re=n(f);re!==null;){if(re.callback===null)i(f);else if(re.startTime<=G)i(f),re.sortIndex=re.expirationTime,e(d,re);else break;re=n(f)}}function se(G){if(T=!1,j(G),!R)if(n(d)!==null)R=!0,V(le);else{var re=n(f);re!==null&&J(se,re.startTime-G)}}function le(G,re){R=!1,T&&(T=!1,W($),$=-1),S=!0;var ae=E;try{for(j(re),v=n(d);v!==null&&(!(v.expirationTime>re)||G&&!q());){var O=v.callback;if(typeof O=="function"){v.callback=null,E=v.priorityLevel;var w=O(v.expirationTime<=re);re=r.unstable_now(),typeof w=="function"?v.callback=w:v===n(d)&&i(d),j(re)}else i(d);v=n(d)}if(v!==null)var _=!0;else{var F=n(f);F!==null&&J(se,F.startTime-re),_=!1}return _}finally{v=null,E=ae,S=!1}}var de=!1,Z=null,$=-1,D=5,U=-1;function q(){return!(r.unstable_now()-U<D)}function H(){if(Z!==null){var G=r.unstable_now();U=G;var re=!0;try{re=Z(!0,G)}finally{re?I():(de=!1,Z=null)}}else de=!1}var I;if(typeof z=="function")I=function(){z(H)};else if(typeof MessageChannel<"u"){var y=new MessageChannel,x=y.port2;y.port1.onmessage=H,I=function(){x.postMessage(null)}}else I=function(){M(H,0)};function V(G){Z=G,de||(de=!0,I())}function J(G,re){$=M(function(){G(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_continueExecution=function(){R||S||(R=!0,V(le))},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_getFirstCallbackNode=function(){return n(d)},r.unstable_next=function(G){switch(E){case 1:case 2:case 3:var re=3;break;default:re=E}var ae=E;E=re;try{return G()}finally{E=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(G,re){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ae=E;E=G;try{return re()}finally{E=ae}},r.unstable_scheduleCallback=function(G,re,ae){var O=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?O+ae:O):ae=O,G){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=ae+w,G={id:p++,callback:re,priorityLevel:G,startTime:ae,expirationTime:w,sortIndex:-1},ae>O?(G.sortIndex=ae,e(f,G),n(d)===null&&G===n(f)&&(T?(W($),$=-1):T=!0,J(se,ae-O))):(G.sortIndex=w,e(d,G),R||S||(R=!0,V(le))),G},r.unstable_shouldYield=q,r.unstable_wrapCallback=function(G){var re=E;return function(){var ae=E;E=re;try{return G.apply(this,arguments)}finally{E=ae}}}})(D0)),D0}var bb;function C6(){return bb||(bb=1,O0.exports=k6()),O0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb;function P6(){if(Sb)return ji;Sb=1;var r=kv(),e=C6();function n(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function o(a,c){l(a,c),l(a+"Capture",c)}function l(a,c){for(s[a]=c,a=0;a<c.length;a++)i.add(c[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},v={};function E(a){return d.call(v,a)?!0:d.call(p,a)?!1:f.test(a)?v[a]=!0:(p[a]=!0,!1)}function S(a,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function R(a,c,h,g){if(c===null||typeof c>"u"||S(a,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function T(a,c,h,g,b,P,Q){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=b,this.mustUseProperty=h,this.propertyName=a,this.type=c,this.sanitizeURL=P,this.removeEmptyString=Q}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){M[a]=new T(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];M[c]=new T(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){M[a]=new T(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){M[a]=new T(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){M[a]=new T(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){M[a]=new T(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){M[a]=new T(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){M[a]=new T(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){M[a]=new T(a,5,!1,a.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function z(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(W,z);M[c]=new T(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(W,z);M[c]=new T(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(W,z);M[c]=new T(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){M[a]=new T(a,1,!1,a.toLowerCase(),null,!1,!1)}),M.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){M[a]=new T(a,1,!1,a.toLowerCase(),null,!0,!0)});function j(a,c,h,g){var b=M.hasOwnProperty(c)?M[c]:null;(b!==null?b.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(R(c,h,b,g)&&(h=null),g||b===null?E(c)&&(h===null?a.removeAttribute(c):a.setAttribute(c,""+h)):b.mustUseProperty?a[b.propertyName]=h===null?b.type===3?!1:"":h:(c=b.attributeName,g=b.attributeNamespace,h===null?a.removeAttribute(c):(b=b.type,h=b===3||b===4&&h===!0?"":""+h,g?a.setAttributeNS(g,c,h):a.setAttribute(c,h))))}var se=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),de=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),q=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),G=Symbol.iterator;function re(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var ae=Object.assign,O;function w(a){if(O===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);O=c&&c[1]||""}return`
`+O+a}var _=!1;function F(a,c){if(!a||_)return"";_=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Ne){var g=Ne}Reflect.construct(a,[],c)}else{try{c.call()}catch(Ne){g=Ne}a.call(c.prototype)}else{try{throw Error()}catch(Ne){g=Ne}a()}}catch(Ne){if(Ne&&g&&typeof Ne.stack=="string"){for(var b=Ne.stack.split(`
`),P=g.stack.split(`
`),Q=b.length-1,ue=P.length-1;1<=Q&&0<=ue&&b[Q]!==P[ue];)ue--;for(;1<=Q&&0<=ue;Q--,ue--)if(b[Q]!==P[ue]){if(Q!==1||ue!==1)do if(Q--,ue--,0>ue||b[Q]!==P[ue]){var ge=`
`+b[Q].replace(" at new "," at ");return a.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",a.displayName)),ge}while(1<=Q&&0<=ue);break}}}finally{_=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?w(a):""}function ee(a){switch(a.tag){case 5:return w(a.type);case 16:return w("Lazy");case 13:return w("Suspense");case 19:return w("SuspenseList");case 0:case 2:case 15:return a=F(a.type,!1),a;case 11:return a=F(a.type.render,!1),a;case 1:return a=F(a.type,!0),a;default:return""}}function ce(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case Z:return"Fragment";case de:return"Portal";case D:return"Profiler";case $:return"StrictMode";case I:return"Suspense";case y:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case q:return(a.displayName||"Context")+".Consumer";case U:return(a._context.displayName||"Context")+".Provider";case H:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case x:return c=a.displayName||null,c!==null?c:ce(a.type)||"Memo";case V:c=a._payload,a=a._init;try{return ce(a(c))}catch{}}return null}function we(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(c);case 8:return c===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Oe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ze(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function At(a){var c=ze(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),g=""+a[c];if(!a.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,P=h.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return b.call(this)},set:function(Q){g=""+Q,P.call(this,Q)}}),Object.defineProperty(a,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(Q){g=""+Q},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function qt(a){a._valueTracker||(a._valueTracker=At(a))}function rn(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return a&&(g=ze(a)?a.checked?"true":"false":a.value),a=g,a!==h?(c.setValue(a),!0):!1}function qn(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function un(a,c){var h=c.checked;return ae({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??a._wrapperState.initialChecked})}function kn(a,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=Oe(c.value!=null?c.value:h),a._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function $r(a,c){c=c.checked,c!=null&&j(a,"checked",c,!1)}function _n(a,c){$r(a,c);var h=Oe(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+h):a.value!==""+h&&(a.value=""+h);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?ir(a,c.type,h):c.hasOwnProperty("defaultValue")&&ir(a,c.type,Oe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function xn(a,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,h||c===a.value||(a.value=c),a.defaultValue=c}h=a.name,h!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,h!==""&&(a.name=h)}function ir(a,c,h){(c!=="number"||qn(a.ownerDocument)!==a)&&(h==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+h&&(a.defaultValue=""+h))}var dn=Array.isArray;function hn(a,c,h,g){if(a=a.options,c){c={};for(var b=0;b<h.length;b++)c["$"+h[b]]=!0;for(h=0;h<a.length;h++)b=c.hasOwnProperty("$"+a[h].value),a[h].selected!==b&&(a[h].selected=b),b&&g&&(a[h].defaultSelected=!0)}else{for(h=""+Oe(h),c=null,b=0;b<a.length;b++){if(a[b].value===h){a[b].selected=!0,g&&(a[b].defaultSelected=!0);return}c!==null||a[b].disabled||(c=a[b])}c!==null&&(c.selected=!0)}}function Qn(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return ae({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function gn(a,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(n(92));if(dn(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),h=c}a._wrapperState={initialValue:Oe(h)}}function vn(a,c){var h=Oe(c.value),g=Oe(c.defaultValue);h!=null&&(h=""+h,h!==a.value&&(a.value=h),c.defaultValue==null&&a.defaultValue!==h&&(a.defaultValue=h)),g!=null&&(a.defaultValue=""+g)}function sr(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Qt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Y(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Qt(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var C,N=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,b){MSApp.execUnsafeLocalFunction(function(){return a(c,h,g,b)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(C=C||document.createElement("div"),C.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=C.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function oe(a,c){if(c){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=c;return}}a.textContent=c}var ye={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];Object.keys(ye).forEach(function(a){be.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),ye[c]=ye[a]})});function Pe(a,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||ye.hasOwnProperty(a)&&ye[a]?(""+c).trim():c+"px"}function Vt(a,c){a=a.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,b=Pe(h,c[h],g);h==="float"&&(h="cssFloat"),g?a.setProperty(h,b):a[h]=b}}var Et=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rt(a,c){if(c){if(Et[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function on(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function mn(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var qr=null,fn=null,bn=null;function fi(a){if(a=ed(a)){if(typeof qr!="function")throw Error(n(280));var c=a.stateNode;c&&(c=nf(c),qr(a.stateNode,a.type,c))}}function Gt(a){fn?bn?bn.push(a):bn=[a]:fn=a}function Sn(){if(fn){var a=fn,c=bn;if(bn=fn=null,fi(a),c)for(a=0;a<c.length;a++)fi(c[a])}}function _r(a,c){return a(c)}function Ln(){}var In=!1;function pi(a,c,h){if(In)return a(c,h);In=!0;try{return _r(a,c,h)}finally{In=!1,(fn!==null||bn!==null)&&(Ln(),Sn())}}function Zt(a,c){var h=a.stateNode;if(h===null)return null;var g=nf(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(n(231,c,typeof h));return h}var an=!1;if(u)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){an=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{an=!1}function L(a,c,h,g,b,P,Q,ue,ge){var Ne=Array.prototype.slice.call(arguments,3);try{c.apply(h,Ne)}catch(et){this.onError(et)}}var X=!1,te=null,A=!1,ne=null,_e={onError:function(a){X=!0,te=a}};function ve(a,c,h,g,b,P,Q,ue,ge){X=!1,te=null,L.apply(_e,arguments)}function De(a,c,h,g,b,P,Q,ue,ge){if(ve.apply(this,arguments),X){if(X){var Ne=te;X=!1,te=null}else throw Error(n(198));A||(A=!0,ne=Ne)}}function Ge(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function st(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function He(a){if(Ge(a)!==a)throw Error(n(188))}function sn(a){var c=a.alternate;if(!c){if(c=Ge(a),c===null)throw Error(n(188));return c!==a?null:a}for(var h=a,g=c;;){var b=h.return;if(b===null)break;var P=b.alternate;if(P===null){if(g=b.return,g!==null){h=g;continue}break}if(b.child===P.child){for(P=b.child;P;){if(P===h)return He(b),a;if(P===g)return He(b),c;P=P.sibling}throw Error(n(188))}if(h.return!==g.return)h=b,g=P;else{for(var Q=!1,ue=b.child;ue;){if(ue===h){Q=!0,h=b,g=P;break}if(ue===g){Q=!0,g=b,h=P;break}ue=ue.sibling}if(!Q){for(ue=P.child;ue;){if(ue===h){Q=!0,h=P,g=b;break}if(ue===g){Q=!0,g=P,h=b;break}ue=ue.sibling}if(!Q)throw Error(n(189))}}if(h.alternate!==g)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?a:c}function pt(a){return a=sn(a),a!==null?Nt(a):null}function Nt(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=Nt(a);if(c!==null)return c;a=a.sibling}return null}var Dt=e.unstable_scheduleCallback,jt=e.unstable_cancelCallback,Kt=e.unstable_shouldYield,Wt=e.unstable_requestPaint,ft=e.unstable_now,Ft=e.unstable_getCurrentPriorityLevel,mt=e.unstable_ImmediatePriority,bt=e.unstable_UserBlockingPriority,ot=e.unstable_NormalPriority,yt=e.unstable_LowPriority,_t=e.unstable_IdlePriority,lt=null,xe=null;function Ce(a){if(xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(lt,a,void 0,(a.current.flags&128)===128)}catch{}}var Fe=Math.clz32?Math.clz32:Je,Ue=Math.log,We=Math.LN2;function Je(a){return a>>>=0,a===0?32:31-(Ue(a)/We|0)|0}var Ot=64,Xt=4194304;function je(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Re(a,c){var h=a.pendingLanes;if(h===0)return 0;var g=0,b=a.suspendedLanes,P=a.pingedLanes,Q=h&268435455;if(Q!==0){var ue=Q&~b;ue!==0?g=je(ue):(P&=Q,P!==0&&(g=je(P)))}else Q=h&~b,Q!==0?g=je(Q):P!==0&&(g=je(P));if(g===0)return 0;if(c!==0&&c!==g&&(c&b)===0&&(b=g&-g,P=c&-c,b>=P||b===16&&(P&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=g;0<c;)h=31-Fe(c),b=1<<h,g|=a[h],c&=~b;return g}function K(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fe(a,c){for(var h=a.suspendedLanes,g=a.pingedLanes,b=a.expirationTimes,P=a.pendingLanes;0<P;){var Q=31-Fe(P),ue=1<<Q,ge=b[Q];ge===-1?((ue&h)===0||(ue&g)!==0)&&(b[Q]=K(ue,c)):ge<=c&&(a.expiredLanes|=ue),P&=~ue}}function Me(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function $e(){var a=Ot;return Ot<<=1,(Ot&4194240)===0&&(Ot=64),a}function Ve(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function Ze(a,c,h){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Fe(c),a[c]=h}function Qe(a,c){var h=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<h;){var b=31-Fe(h),P=1<<b;c[b]=0,g[b]=-1,a[b]=-1,h&=~P}}function kt(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var g=31-Fe(h),b=1<<g;b&c|a[g]&c&&(a[g]|=c),h&=~b}}var dt=0;function Tn(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Kn,Wn,cr,Tr,Rr,br=!1,Hs=[],ti=null,Ss=null,Is=null,oa=new Map,us=new Map,Gs=[],lg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vh(a,c){switch(a){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":oa.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":us.delete(c.pointerId)}}function Li(a,c,h,g,b,P){return a===null||a.nativeEvent!==P?(a={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:P,targetContainers:[b]},c!==null&&(c=ed(c),c!==null&&Wn(c)),a):(a.eventSystemFlags|=g,c=a.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),a)}function cg(a,c,h,g,b){switch(c){case"focusin":return ti=Li(ti,a,c,h,g,b),!0;case"dragenter":return Ss=Li(Ss,a,c,h,g,b),!0;case"mouseover":return Is=Li(Is,a,c,h,g,b),!0;case"pointerover":var P=b.pointerId;return oa.set(P,Li(oa.get(P)||null,a,c,h,g,b)),!0;case"gotpointercapture":return P=b.pointerId,us.set(P,Li(us.get(P)||null,a,c,h,g,b)),!0}return!1}function Fh(a){var c=al(a.target);if(c!==null){var h=Ge(c);if(h!==null){if(c=h.tag,c===13){if(c=st(h),c!==null){a.blockedOn=c,Rr(a.priority,function(){cr(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ao(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var h=oc(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(h===null){h=a.nativeEvent;var g=new h.constructor(h.type,h);xt=g,h.target.dispatchEvent(g),xt=null}else return c=ed(h),c!==null&&Wn(c),a.blockedOn=h,!1;c.shift()}return!0}function rl(a,c,h){Ao(a)&&h.delete(c)}function zh(){br=!1,ti!==null&&Ao(ti)&&(ti=null),Ss!==null&&Ao(Ss)&&(Ss=null),Is!==null&&Ao(Is)&&(Is=null),oa.forEach(rl),us.forEach(rl)}function As(a,c){a.blockedOn===c&&(a.blockedOn=null,br||(br=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zh)))}function xs(a){function c(b){return As(b,a)}if(0<Hs.length){As(Hs[0],a);for(var h=1;h<Hs.length;h++){var g=Hs[h];g.blockedOn===a&&(g.blockedOn=null)}}for(ti!==null&&As(ti,a),Ss!==null&&As(Ss,a),Is!==null&&As(Is,a),oa.forEach(c),us.forEach(c),h=0;h<Gs.length;h++)g=Gs[h],g.blockedOn===a&&(g.blockedOn=null);for(;0<Gs.length&&(h=Gs[0],h.blockedOn===null);)Fh(h),h.blockedOn===null&&Gs.shift()}var xo=se.ReactCurrentBatchConfig,aa=!0;function ur(a,c,h,g){var b=dt,P=xo.transition;xo.transition=null;try{dt=1,Fu(a,c,h,g)}finally{dt=b,xo.transition=P}}function ug(a,c,h,g){var b=dt,P=xo.transition;xo.transition=null;try{dt=4,Fu(a,c,h,g)}finally{dt=b,xo.transition=P}}function Fu(a,c,h,g){if(aa){var b=oc(a,c,h,g);if(b===null)_g(a,c,g,il,h),Vh(a,g);else if(cg(b,a,c,h,g))g.stopPropagation();else if(Vh(a,g),c&4&&-1<lg.indexOf(a)){for(;b!==null;){var P=ed(b);if(P!==null&&Kn(P),P=oc(a,c,h,g),P===null&&_g(a,c,g,il,h),P===b)break;b=P}b!==null&&g.stopPropagation()}else _g(a,c,g,null,h)}}var il=null;function oc(a,c,h,g){if(il=null,a=mn(g),a=al(a),a!==null)if(c=Ge(a),c===null)a=null;else if(h=c.tag,h===13){if(a=st(c),a!==null)return a;a=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return il=a,null}function zu(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ft()){case mt:return 1;case bt:return 4;case ot:case yt:return 16;case _t:return 536870912;default:return 16}default:return 16}}var Xi=null,ac=null,Bi=null;function Wu(){if(Bi)return Bi;var a,c=ac,h=c.length,g,b="value"in Xi?Xi.value:Xi.textContent,P=b.length;for(a=0;a<h&&c[a]===b[a];a++);var Q=h-a;for(g=1;g<=Q&&c[h-g]===b[P-g];g++);return Bi=b.slice(a,1<g?1-g:void 0)}function lc(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Ys(){return!0}function ju(){return!1}function ni(a){function c(h,g,b,P,Q){this._reactName=h,this._targetInst=b,this.type=g,this.nativeEvent=P,this.target=Q,this.currentTarget=null;for(var ue in a)a.hasOwnProperty(ue)&&(h=a[ue],this[ue]=h?h(P):P[ue]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Ys:ju,this.isPropagationStopped=ju,this}return ae(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),c}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cc=ni(Ts),Js=ae({},Ts,{view:0,detail:0}),dg=ni(Js),uc,To,la,sl=ae({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==la&&(la&&a.type==="mousemove"?(uc=a.screenX-la.screenX,To=a.screenY-la.screenY):To=uc=0,la=a),uc)},movementY:function(a){return"movementY"in a?a.movementY:To}}),dc=ni(sl),$u=ae({},sl,{dataTransfer:0}),Wh=ni($u),hc=ae({},Js,{relatedTarget:0}),fc=ni(hc),jh=ae({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Ro=ni(jh),$h=ae({},Ts,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),qh=ni($h),Kh=ae({},Ts,{data:0}),qu=ni(Kh),pc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gh(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Hh[a])?!!c[a]:!1}function Qs(){return Gh}var m=ae({},Js,{key:function(a){if(a.key){var c=pc[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=lc(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Pi[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(a){return a.type==="keypress"?lc(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?lc(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),k=ni(m),B=ae({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ie=ni(B),Se=ae({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),Le=ni(Se),ht=ae({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hn=ni(ht),Fr=ae({},sl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=ni(Fr),Kr=[9,13,27,32],Mr=u&&"CompositionEvent"in window,ds=null;u&&"documentMode"in document&&(ds=document.documentMode);var Zi=u&&"TextEvent"in window&&!ds,ol=u&&(!Mr||ds&&8<ds&&11>=ds),mc=" ",dE=!1;function hE(a,c){switch(a){case"keyup":return Kr.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fE(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var gc=!1;function SP(a,c){switch(a){case"compositionend":return fE(c);case"keypress":return c.which!==32?null:(dE=!0,mc);case"textInput":return a=c.data,a===mc&&dE?null:a;default:return null}}function IP(a,c){if(gc)return a==="compositionend"||!Mr&&hE(a,c)?(a=Wu(),Bi=ac=Xi=null,gc=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return ol&&c.locale!=="ko"?null:c.data;default:return null}}var AP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pE(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!AP[a.type]:c==="textarea"}function mE(a,c,h,g){Gt(g),c=Zh(c,"onChange"),0<c.length&&(h=new cc("onChange","change",null,h,g),a.push({event:h,listeners:c}))}var Ku=null,Hu=null;function xP(a){NE(a,0)}function Yh(a){var c=_c(a);if(rn(c))return a}function TP(a,c){if(a==="change")return c}var gE=!1;if(u){var hg;if(u){var fg="oninput"in document;if(!fg){var yE=document.createElement("div");yE.setAttribute("oninput","return;"),fg=typeof yE.oninput=="function"}hg=fg}else hg=!1;gE=hg&&(!document.documentMode||9<document.documentMode)}function wE(){Ku&&(Ku.detachEvent("onpropertychange",vE),Hu=Ku=null)}function vE(a){if(a.propertyName==="value"&&Yh(Hu)){var c=[];mE(c,Hu,a,mn(a)),pi(xP,c)}}function RP(a,c,h){a==="focusin"?(wE(),Ku=c,Hu=h,Ku.attachEvent("onpropertychange",vE)):a==="focusout"&&wE()}function kP(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Yh(Hu)}function CP(a,c){if(a==="click")return Yh(c)}function PP(a,c){if(a==="input"||a==="change")return Yh(c)}function MP(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Rs=typeof Object.is=="function"?Object.is:MP;function Gu(a,c){if(Rs(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var b=h[g];if(!d.call(c,b)||!Rs(a[b],c[b]))return!1}return!0}function EE(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function _E(a,c){var h=EE(a);a=0;for(var g;h;){if(h.nodeType===3){if(g=a+h.textContent.length,a<=c&&g>=c)return{node:h,offset:c-a};a=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=EE(h)}}function bE(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?bE(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function SE(){for(var a=window,c=qn();c instanceof a.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)a=c.contentWindow;else break;c=qn(a.document)}return c}function pg(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function NP(a){var c=SE(),h=a.focusedElem,g=a.selectionRange;if(c!==h&&h&&h.ownerDocument&&bE(h.ownerDocument.documentElement,h)){if(g!==null&&pg(h)){if(c=g.start,a=g.end,a===void 0&&(a=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(a,h.value.length);else if(a=(c=h.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var b=h.textContent.length,P=Math.min(g.start,b);g=g.end===void 0?P:Math.min(g.end,b),!a.extend&&P>g&&(b=g,g=P,P=b),b=_E(h,P);var Q=_E(h,g);b&&Q&&(a.rangeCount!==1||a.anchorNode!==b.node||a.anchorOffset!==b.offset||a.focusNode!==Q.node||a.focusOffset!==Q.offset)&&(c=c.createRange(),c.setStart(b.node,b.offset),a.removeAllRanges(),P>g?(a.addRange(c),a.extend(Q.node,Q.offset)):(c.setEnd(Q.node,Q.offset),a.addRange(c)))}}for(c=[],a=h;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)a=c[h],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var OP=u&&"documentMode"in document&&11>=document.documentMode,yc=null,mg=null,Yu=null,gg=!1;function IE(a,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;gg||yc==null||yc!==qn(g)||(g=yc,"selectionStart"in g&&pg(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Yu&&Gu(Yu,g)||(Yu=g,g=Zh(mg,"onSelect"),0<g.length&&(c=new cc("onSelect","select",null,c,h),a.push({event:c,listeners:g}),c.target=yc)))}function Jh(a,c){var h={};return h[a.toLowerCase()]=c.toLowerCase(),h["Webkit"+a]="webkit"+c,h["Moz"+a]="moz"+c,h}var wc={animationend:Jh("Animation","AnimationEnd"),animationiteration:Jh("Animation","AnimationIteration"),animationstart:Jh("Animation","AnimationStart"),transitionend:Jh("Transition","TransitionEnd")},yg={},AE={};u&&(AE=document.createElement("div").style,"AnimationEvent"in window||(delete wc.animationend.animation,delete wc.animationiteration.animation,delete wc.animationstart.animation),"TransitionEvent"in window||delete wc.transitionend.transition);function Qh(a){if(yg[a])return yg[a];if(!wc[a])return a;var c=wc[a],h;for(h in c)if(c.hasOwnProperty(h)&&h in AE)return yg[a]=c[h];return a}var xE=Qh("animationend"),TE=Qh("animationiteration"),RE=Qh("animationstart"),kE=Qh("transitionend"),CE=new Map,PE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ca(a,c){CE.set(a,c),o(c,[a])}for(var wg=0;wg<PE.length;wg++){var vg=PE[wg],DP=vg.toLowerCase(),LP=vg[0].toUpperCase()+vg.slice(1);ca(DP,"on"+LP)}ca(xE,"onAnimationEnd"),ca(TE,"onAnimationIteration"),ca(RE,"onAnimationStart"),ca("dblclick","onDoubleClick"),ca("focusin","onFocus"),ca("focusout","onBlur"),ca(kE,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ju));function ME(a,c,h){var g=a.type||"unknown-event";a.currentTarget=h,De(g,c,void 0,a),a.currentTarget=null}function NE(a,c){c=(c&4)!==0;for(var h=0;h<a.length;h++){var g=a[h],b=g.event;g=g.listeners;e:{var P=void 0;if(c)for(var Q=g.length-1;0<=Q;Q--){var ue=g[Q],ge=ue.instance,Ne=ue.currentTarget;if(ue=ue.listener,ge!==P&&b.isPropagationStopped())break e;ME(b,ue,Ne),P=ge}else for(Q=0;Q<g.length;Q++){if(ue=g[Q],ge=ue.instance,Ne=ue.currentTarget,ue=ue.listener,ge!==P&&b.isPropagationStopped())break e;ME(b,ue,Ne),P=ge}}}if(A)throw a=ne,A=!1,ne=null,a}function or(a,c){var h=c[Tg];h===void 0&&(h=c[Tg]=new Set);var g=a+"__bubble";h.has(g)||(OE(c,a,2,!1),h.add(g))}function Eg(a,c,h){var g=0;c&&(g|=4),OE(h,a,g,c)}var Xh="_reactListening"+Math.random().toString(36).slice(2);function Qu(a){if(!a[Xh]){a[Xh]=!0,i.forEach(function(h){h!=="selectionchange"&&(BP.has(h)||Eg(h,!1,a),Eg(h,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Xh]||(c[Xh]=!0,Eg("selectionchange",!1,c))}}function OE(a,c,h,g){switch(zu(c)){case 1:var b=ur;break;case 4:b=ug;break;default:b=Fu}h=b.bind(null,c,h,a),b=void 0,!an||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),g?b!==void 0?a.addEventListener(c,h,{capture:!0,passive:b}):a.addEventListener(c,h,!0):b!==void 0?a.addEventListener(c,h,{passive:b}):a.addEventListener(c,h,!1)}function _g(a,c,h,g,b){var P=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var Q=g.tag;if(Q===3||Q===4){var ue=g.stateNode.containerInfo;if(ue===b||ue.nodeType===8&&ue.parentNode===b)break;if(Q===4)for(Q=g.return;Q!==null;){var ge=Q.tag;if((ge===3||ge===4)&&(ge=Q.stateNode.containerInfo,ge===b||ge.nodeType===8&&ge.parentNode===b))return;Q=Q.return}for(;ue!==null;){if(Q=al(ue),Q===null)return;if(ge=Q.tag,ge===5||ge===6){g=P=Q;continue e}ue=ue.parentNode}}g=g.return}pi(function(){var Ne=P,et=mn(h),rt=[];e:{var Xe=CE.get(a);if(Xe!==void 0){var St=cc,Pt=a;switch(a){case"keypress":if(lc(h)===0)break e;case"keydown":case"keyup":St=k;break;case"focusin":Pt="focus",St=fc;break;case"focusout":Pt="blur",St=fc;break;case"beforeblur":case"afterblur":St=fc;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=Wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=Le;break;case xE:case TE:case RE:St=Ro;break;case kE:St=Hn;break;case"scroll":St=dg;break;case"wheel":St=Nn;break;case"copy":case"cut":case"paste":St=qh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=ie}var Mt=(c&4)!==0,kr=!Mt&&a==="scroll",Ie=Mt?Xe!==null?Xe+"Capture":null:Xe;Mt=[];for(var Ee=Ne,Te;Ee!==null;){Te=Ee;var at=Te.stateNode;if(Te.tag===5&&at!==null&&(Te=at,Ie!==null&&(at=Zt(Ee,Ie),at!=null&&Mt.push(Xu(Ee,at,Te)))),kr)break;Ee=Ee.return}0<Mt.length&&(Xe=new St(Xe,Pt,null,h,et),rt.push({event:Xe,listeners:Mt}))}}if((c&7)===0){e:{if(Xe=a==="mouseover"||a==="pointerover",St=a==="mouseout"||a==="pointerout",Xe&&h!==xt&&(Pt=h.relatedTarget||h.fromElement)&&(al(Pt)||Pt[ko]))break e;if((St||Xe)&&(Xe=et.window===et?et:(Xe=et.ownerDocument)?Xe.defaultView||Xe.parentWindow:window,St?(Pt=h.relatedTarget||h.toElement,St=Ne,Pt=Pt?al(Pt):null,Pt!==null&&(kr=Ge(Pt),Pt!==kr||Pt.tag!==5&&Pt.tag!==6)&&(Pt=null)):(St=null,Pt=Ne),St!==Pt)){if(Mt=dc,at="onMouseLeave",Ie="onMouseEnter",Ee="mouse",(a==="pointerout"||a==="pointerover")&&(Mt=ie,at="onPointerLeave",Ie="onPointerEnter",Ee="pointer"),kr=St==null?Xe:_c(St),Te=Pt==null?Xe:_c(Pt),Xe=new Mt(at,Ee+"leave",St,h,et),Xe.target=kr,Xe.relatedTarget=Te,at=null,al(et)===Ne&&(Mt=new Mt(Ie,Ee+"enter",Pt,h,et),Mt.target=Te,Mt.relatedTarget=kr,at=Mt),kr=at,St&&Pt)t:{for(Mt=St,Ie=Pt,Ee=0,Te=Mt;Te;Te=vc(Te))Ee++;for(Te=0,at=Ie;at;at=vc(at))Te++;for(;0<Ee-Te;)Mt=vc(Mt),Ee--;for(;0<Te-Ee;)Ie=vc(Ie),Te--;for(;Ee--;){if(Mt===Ie||Ie!==null&&Mt===Ie.alternate)break t;Mt=vc(Mt),Ie=vc(Ie)}Mt=null}else Mt=null;St!==null&&DE(rt,Xe,St,Mt,!1),Pt!==null&&kr!==null&&DE(rt,kr,Pt,Mt,!0)}}e:{if(Xe=Ne?_c(Ne):window,St=Xe.nodeName&&Xe.nodeName.toLowerCase(),St==="select"||St==="input"&&Xe.type==="file")var Lt=TP;else if(pE(Xe))if(gE)Lt=PP;else{Lt=kP;var Yt=RP}else(St=Xe.nodeName)&&St.toLowerCase()==="input"&&(Xe.type==="checkbox"||Xe.type==="radio")&&(Lt=CP);if(Lt&&(Lt=Lt(a,Ne))){mE(rt,Lt,h,et);break e}Yt&&Yt(a,Xe,Ne),a==="focusout"&&(Yt=Xe._wrapperState)&&Yt.controlled&&Xe.type==="number"&&ir(Xe,"number",Xe.value)}switch(Yt=Ne?_c(Ne):window,a){case"focusin":(pE(Yt)||Yt.contentEditable==="true")&&(yc=Yt,mg=Ne,Yu=null);break;case"focusout":Yu=mg=yc=null;break;case"mousedown":gg=!0;break;case"contextmenu":case"mouseup":case"dragend":gg=!1,IE(rt,h,et);break;case"selectionchange":if(OP)break;case"keydown":case"keyup":IE(rt,h,et)}var Jt;if(Mr)e:{switch(a){case"compositionstart":var tn="onCompositionStart";break e;case"compositionend":tn="onCompositionEnd";break e;case"compositionupdate":tn="onCompositionUpdate";break e}tn=void 0}else gc?hE(a,h)&&(tn="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(tn="onCompositionStart");tn&&(ol&&h.locale!=="ko"&&(gc||tn!=="onCompositionStart"?tn==="onCompositionEnd"&&gc&&(Jt=Wu()):(Xi=et,ac="value"in Xi?Xi.value:Xi.textContent,gc=!0)),Yt=Zh(Ne,tn),0<Yt.length&&(tn=new qu(tn,a,null,h,et),rt.push({event:tn,listeners:Yt}),Jt?tn.data=Jt:(Jt=fE(h),Jt!==null&&(tn.data=Jt)))),(Jt=Zi?SP(a,h):IP(a,h))&&(Ne=Zh(Ne,"onBeforeInput"),0<Ne.length&&(et=new qu("onBeforeInput","beforeinput",null,h,et),rt.push({event:et,listeners:Ne}),et.data=Jt))}NE(rt,c)})}function Xu(a,c,h){return{instance:a,listener:c,currentTarget:h}}function Zh(a,c){for(var h=c+"Capture",g=[];a!==null;){var b=a,P=b.stateNode;b.tag===5&&P!==null&&(b=P,P=Zt(a,h),P!=null&&g.unshift(Xu(a,P,b)),P=Zt(a,c),P!=null&&g.push(Xu(a,P,b))),a=a.return}return g}function vc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function DE(a,c,h,g,b){for(var P=c._reactName,Q=[];h!==null&&h!==g;){var ue=h,ge=ue.alternate,Ne=ue.stateNode;if(ge!==null&&ge===g)break;ue.tag===5&&Ne!==null&&(ue=Ne,b?(ge=Zt(h,P),ge!=null&&Q.unshift(Xu(h,ge,ue))):b||(ge=Zt(h,P),ge!=null&&Q.push(Xu(h,ge,ue)))),h=h.return}Q.length!==0&&a.push({event:c,listeners:Q})}var UP=/\r\n?/g,VP=/\u0000|\uFFFD/g;function LE(a){return(typeof a=="string"?a:""+a).replace(UP,`
`).replace(VP,"")}function ef(a,c,h){if(c=LE(c),LE(a)!==c&&h)throw Error(n(425))}function tf(){}var bg=null,Sg=null;function Ig(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ag=typeof setTimeout=="function"?setTimeout:void 0,FP=typeof clearTimeout=="function"?clearTimeout:void 0,BE=typeof Promise=="function"?Promise:void 0,zP=typeof queueMicrotask=="function"?queueMicrotask:typeof BE<"u"?function(a){return BE.resolve(null).then(a).catch(WP)}:Ag;function WP(a){setTimeout(function(){throw a})}function xg(a,c){var h=c,g=0;do{var b=h.nextSibling;if(a.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"){if(g===0){a.removeChild(b),xs(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=b}while(h);xs(c)}function ua(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function UE(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return a;c--}else h==="/$"&&c++}a=a.previousSibling}return null}var Ec=Math.random().toString(36).slice(2),Xs="__reactFiber$"+Ec,Zu="__reactProps$"+Ec,ko="__reactContainer$"+Ec,Tg="__reactEvents$"+Ec,jP="__reactListeners$"+Ec,$P="__reactHandles$"+Ec;function al(a){var c=a[Xs];if(c)return c;for(var h=a.parentNode;h;){if(c=h[ko]||h[Xs]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(a=UE(a);a!==null;){if(h=a[Xs])return h;a=UE(a)}return c}a=h,h=a.parentNode}return null}function ed(a){return a=a[Xs]||a[ko],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function _c(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function nf(a){return a[Zu]||null}var Rg=[],bc=-1;function da(a){return{current:a}}function ar(a){0>bc||(a.current=Rg[bc],Rg[bc]=null,bc--)}function er(a,c){bc++,Rg[bc]=a.current,a.current=c}var ha={},mi=da(ha),Ui=da(!1),ll=ha;function Sc(a,c){var h=a.type.contextTypes;if(!h)return ha;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var b={},P;for(P in h)b[P]=c[P];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=b),b}function Vi(a){return a=a.childContextTypes,a!=null}function rf(){ar(Ui),ar(mi)}function VE(a,c,h){if(mi.current!==ha)throw Error(n(168));er(mi,c),er(Ui,h)}function FE(a,c,h){var g=a.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var b in g)if(!(b in c))throw Error(n(108,we(a)||"Unknown",b));return ae({},h,g)}function sf(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ha,ll=mi.current,er(mi,a),er(Ui,Ui.current),!0}function zE(a,c,h){var g=a.stateNode;if(!g)throw Error(n(169));h?(a=FE(a,c,ll),g.__reactInternalMemoizedMergedChildContext=a,ar(Ui),ar(mi),er(mi,a)):ar(Ui),er(Ui,h)}var Co=null,of=!1,kg=!1;function WE(a){Co===null?Co=[a]:Co.push(a)}function qP(a){of=!0,WE(a)}function fa(){if(!kg&&Co!==null){kg=!0;var a=0,c=dt;try{var h=Co;for(dt=1;a<h.length;a++){var g=h[a];do g=g(!0);while(g!==null)}Co=null,of=!1}catch(b){throw Co!==null&&(Co=Co.slice(a+1)),Dt(mt,fa),b}finally{dt=c,kg=!1}}return null}var Ic=[],Ac=0,af=null,lf=0,hs=[],fs=0,cl=null,Po=1,Mo="";function ul(a,c){Ic[Ac++]=lf,Ic[Ac++]=af,af=a,lf=c}function jE(a,c,h){hs[fs++]=Po,hs[fs++]=Mo,hs[fs++]=cl,cl=a;var g=Po;a=Mo;var b=32-Fe(g)-1;g&=~(1<<b),h+=1;var P=32-Fe(c)+b;if(30<P){var Q=b-b%5;P=(g&(1<<Q)-1).toString(32),g>>=Q,b-=Q,Po=1<<32-Fe(c)+b|h<<b|g,Mo=P+a}else Po=1<<P|h<<b|g,Mo=a}function Cg(a){a.return!==null&&(ul(a,1),jE(a,1,0))}function Pg(a){for(;a===af;)af=Ic[--Ac],Ic[Ac]=null,lf=Ic[--Ac],Ic[Ac]=null;for(;a===cl;)cl=hs[--fs],hs[fs]=null,Mo=hs[--fs],hs[fs]=null,Po=hs[--fs],hs[fs]=null}var es=null,ts=null,dr=!1,ks=null;function $E(a,c){var h=ys(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=a,c=a.deletions,c===null?(a.deletions=[h],a.flags|=16):c.push(h)}function qE(a,c){switch(a.tag){case 5:var h=a.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,es=a,ts=ua(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,es=a,ts=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=cl!==null?{id:Po,overflow:Mo}:null,a.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=ys(18,null,null,0),h.stateNode=c,h.return=a,a.child=h,es=a,ts=null,!0):!1;default:return!1}}function Mg(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Ng(a){if(dr){var c=ts;if(c){var h=c;if(!qE(a,c)){if(Mg(a))throw Error(n(418));c=ua(h.nextSibling);var g=es;c&&qE(a,c)?$E(g,h):(a.flags=a.flags&-4097|2,dr=!1,es=a)}}else{if(Mg(a))throw Error(n(418));a.flags=a.flags&-4097|2,dr=!1,es=a}}}function KE(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;es=a}function cf(a){if(a!==es)return!1;if(!dr)return KE(a),dr=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!Ig(a.type,a.memoizedProps)),c&&(c=ts)){if(Mg(a))throw HE(),Error(n(418));for(;c;)$E(a,c),c=ua(c.nextSibling)}if(KE(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"){if(c===0){ts=ua(a.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}a=a.nextSibling}ts=null}}else ts=es?ua(a.stateNode.nextSibling):null;return!0}function HE(){for(var a=ts;a;)a=ua(a.nextSibling)}function xc(){ts=es=null,dr=!1}function Og(a){ks===null?ks=[a]:ks.push(a)}var KP=se.ReactCurrentBatchConfig;function td(a,c,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var g=h.stateNode}if(!g)throw Error(n(147,a));var b=g,P=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function(Q){var ue=b.refs;Q===null?delete ue[P]:ue[P]=Q},c._stringRef=P,c)}if(typeof a!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,a))}return a}function uf(a,c){throw a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function GE(a){var c=a._init;return c(a._payload)}function YE(a){function c(Ie,Ee){if(a){var Te=Ie.deletions;Te===null?(Ie.deletions=[Ee],Ie.flags|=16):Te.push(Ee)}}function h(Ie,Ee){if(!a)return null;for(;Ee!==null;)c(Ie,Ee),Ee=Ee.sibling;return null}function g(Ie,Ee){for(Ie=new Map;Ee!==null;)Ee.key!==null?Ie.set(Ee.key,Ee):Ie.set(Ee.index,Ee),Ee=Ee.sibling;return Ie}function b(Ie,Ee){return Ie=_a(Ie,Ee),Ie.index=0,Ie.sibling=null,Ie}function P(Ie,Ee,Te){return Ie.index=Te,a?(Te=Ie.alternate,Te!==null?(Te=Te.index,Te<Ee?(Ie.flags|=2,Ee):Te):(Ie.flags|=2,Ee)):(Ie.flags|=1048576,Ee)}function Q(Ie){return a&&Ie.alternate===null&&(Ie.flags|=2),Ie}function ue(Ie,Ee,Te,at){return Ee===null||Ee.tag!==6?(Ee=A0(Te,Ie.mode,at),Ee.return=Ie,Ee):(Ee=b(Ee,Te),Ee.return=Ie,Ee)}function ge(Ie,Ee,Te,at){var Lt=Te.type;return Lt===Z?et(Ie,Ee,Te.props.children,at,Te.key):Ee!==null&&(Ee.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===V&&GE(Lt)===Ee.type)?(at=b(Ee,Te.props),at.ref=td(Ie,Ee,Te),at.return=Ie,at):(at=Of(Te.type,Te.key,Te.props,null,Ie.mode,at),at.ref=td(Ie,Ee,Te),at.return=Ie,at)}function Ne(Ie,Ee,Te,at){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==Te.containerInfo||Ee.stateNode.implementation!==Te.implementation?(Ee=x0(Te,Ie.mode,at),Ee.return=Ie,Ee):(Ee=b(Ee,Te.children||[]),Ee.return=Ie,Ee)}function et(Ie,Ee,Te,at,Lt){return Ee===null||Ee.tag!==7?(Ee=wl(Te,Ie.mode,at,Lt),Ee.return=Ie,Ee):(Ee=b(Ee,Te),Ee.return=Ie,Ee)}function rt(Ie,Ee,Te){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Ee=A0(""+Ee,Ie.mode,Te),Ee.return=Ie,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case le:return Te=Of(Ee.type,Ee.key,Ee.props,null,Ie.mode,Te),Te.ref=td(Ie,null,Ee),Te.return=Ie,Te;case de:return Ee=x0(Ee,Ie.mode,Te),Ee.return=Ie,Ee;case V:var at=Ee._init;return rt(Ie,at(Ee._payload),Te)}if(dn(Ee)||re(Ee))return Ee=wl(Ee,Ie.mode,Te,null),Ee.return=Ie,Ee;uf(Ie,Ee)}return null}function Xe(Ie,Ee,Te,at){var Lt=Ee!==null?Ee.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Lt!==null?null:ue(Ie,Ee,""+Te,at);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case le:return Te.key===Lt?ge(Ie,Ee,Te,at):null;case de:return Te.key===Lt?Ne(Ie,Ee,Te,at):null;case V:return Lt=Te._init,Xe(Ie,Ee,Lt(Te._payload),at)}if(dn(Te)||re(Te))return Lt!==null?null:et(Ie,Ee,Te,at,null);uf(Ie,Te)}return null}function St(Ie,Ee,Te,at,Lt){if(typeof at=="string"&&at!==""||typeof at=="number")return Ie=Ie.get(Te)||null,ue(Ee,Ie,""+at,Lt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case le:return Ie=Ie.get(at.key===null?Te:at.key)||null,ge(Ee,Ie,at,Lt);case de:return Ie=Ie.get(at.key===null?Te:at.key)||null,Ne(Ee,Ie,at,Lt);case V:var Yt=at._init;return St(Ie,Ee,Te,Yt(at._payload),Lt)}if(dn(at)||re(at))return Ie=Ie.get(Te)||null,et(Ee,Ie,at,Lt,null);uf(Ee,at)}return null}function Pt(Ie,Ee,Te,at){for(var Lt=null,Yt=null,Jt=Ee,tn=Ee=0,Yr=null;Jt!==null&&tn<Te.length;tn++){Jt.index>tn?(Yr=Jt,Jt=null):Yr=Jt.sibling;var Vn=Xe(Ie,Jt,Te[tn],at);if(Vn===null){Jt===null&&(Jt=Yr);break}a&&Jt&&Vn.alternate===null&&c(Ie,Jt),Ee=P(Vn,Ee,tn),Yt===null?Lt=Vn:Yt.sibling=Vn,Yt=Vn,Jt=Yr}if(tn===Te.length)return h(Ie,Jt),dr&&ul(Ie,tn),Lt;if(Jt===null){for(;tn<Te.length;tn++)Jt=rt(Ie,Te[tn],at),Jt!==null&&(Ee=P(Jt,Ee,tn),Yt===null?Lt=Jt:Yt.sibling=Jt,Yt=Jt);return dr&&ul(Ie,tn),Lt}for(Jt=g(Ie,Jt);tn<Te.length;tn++)Yr=St(Jt,Ie,tn,Te[tn],at),Yr!==null&&(a&&Yr.alternate!==null&&Jt.delete(Yr.key===null?tn:Yr.key),Ee=P(Yr,Ee,tn),Yt===null?Lt=Yr:Yt.sibling=Yr,Yt=Yr);return a&&Jt.forEach(function(ba){return c(Ie,ba)}),dr&&ul(Ie,tn),Lt}function Mt(Ie,Ee,Te,at){var Lt=re(Te);if(typeof Lt!="function")throw Error(n(150));if(Te=Lt.call(Te),Te==null)throw Error(n(151));for(var Yt=Lt=null,Jt=Ee,tn=Ee=0,Yr=null,Vn=Te.next();Jt!==null&&!Vn.done;tn++,Vn=Te.next()){Jt.index>tn?(Yr=Jt,Jt=null):Yr=Jt.sibling;var ba=Xe(Ie,Jt,Vn.value,at);if(ba===null){Jt===null&&(Jt=Yr);break}a&&Jt&&ba.alternate===null&&c(Ie,Jt),Ee=P(ba,Ee,tn),Yt===null?Lt=ba:Yt.sibling=ba,Yt=ba,Jt=Yr}if(Vn.done)return h(Ie,Jt),dr&&ul(Ie,tn),Lt;if(Jt===null){for(;!Vn.done;tn++,Vn=Te.next())Vn=rt(Ie,Vn.value,at),Vn!==null&&(Ee=P(Vn,Ee,tn),Yt===null?Lt=Vn:Yt.sibling=Vn,Yt=Vn);return dr&&ul(Ie,tn),Lt}for(Jt=g(Ie,Jt);!Vn.done;tn++,Vn=Te.next())Vn=St(Jt,Ie,tn,Vn.value,at),Vn!==null&&(a&&Vn.alternate!==null&&Jt.delete(Vn.key===null?tn:Vn.key),Ee=P(Vn,Ee,tn),Yt===null?Lt=Vn:Yt.sibling=Vn,Yt=Vn);return a&&Jt.forEach(function(A6){return c(Ie,A6)}),dr&&ul(Ie,tn),Lt}function kr(Ie,Ee,Te,at){if(typeof Te=="object"&&Te!==null&&Te.type===Z&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case le:e:{for(var Lt=Te.key,Yt=Ee;Yt!==null;){if(Yt.key===Lt){if(Lt=Te.type,Lt===Z){if(Yt.tag===7){h(Ie,Yt.sibling),Ee=b(Yt,Te.props.children),Ee.return=Ie,Ie=Ee;break e}}else if(Yt.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===V&&GE(Lt)===Yt.type){h(Ie,Yt.sibling),Ee=b(Yt,Te.props),Ee.ref=td(Ie,Yt,Te),Ee.return=Ie,Ie=Ee;break e}h(Ie,Yt);break}else c(Ie,Yt);Yt=Yt.sibling}Te.type===Z?(Ee=wl(Te.props.children,Ie.mode,at,Te.key),Ee.return=Ie,Ie=Ee):(at=Of(Te.type,Te.key,Te.props,null,Ie.mode,at),at.ref=td(Ie,Ee,Te),at.return=Ie,Ie=at)}return Q(Ie);case de:e:{for(Yt=Te.key;Ee!==null;){if(Ee.key===Yt)if(Ee.tag===4&&Ee.stateNode.containerInfo===Te.containerInfo&&Ee.stateNode.implementation===Te.implementation){h(Ie,Ee.sibling),Ee=b(Ee,Te.children||[]),Ee.return=Ie,Ie=Ee;break e}else{h(Ie,Ee);break}else c(Ie,Ee);Ee=Ee.sibling}Ee=x0(Te,Ie.mode,at),Ee.return=Ie,Ie=Ee}return Q(Ie);case V:return Yt=Te._init,kr(Ie,Ee,Yt(Te._payload),at)}if(dn(Te))return Pt(Ie,Ee,Te,at);if(re(Te))return Mt(Ie,Ee,Te,at);uf(Ie,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,Ee!==null&&Ee.tag===6?(h(Ie,Ee.sibling),Ee=b(Ee,Te),Ee.return=Ie,Ie=Ee):(h(Ie,Ee),Ee=A0(Te,Ie.mode,at),Ee.return=Ie,Ie=Ee),Q(Ie)):h(Ie,Ee)}return kr}var Tc=YE(!0),JE=YE(!1),df=da(null),hf=null,Rc=null,Dg=null;function Lg(){Dg=Rc=hf=null}function Bg(a){var c=df.current;ar(df),a._currentValue=c}function Ug(a,c,h){for(;a!==null;){var g=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),a===h)break;a=a.return}}function kc(a,c){hf=a,Dg=Rc=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(Fi=!0),a.firstContext=null)}function ps(a){var c=a._currentValue;if(Dg!==a)if(a={context:a,memoizedValue:c,next:null},Rc===null){if(hf===null)throw Error(n(308));Rc=a,hf.dependencies={lanes:0,firstContext:a}}else Rc=Rc.next=a;return c}var dl=null;function Vg(a){dl===null?dl=[a]:dl.push(a)}function QE(a,c,h,g){var b=c.interleaved;return b===null?(h.next=h,Vg(c)):(h.next=b.next,b.next=h),c.interleaved=h,No(a,g)}function No(a,c){a.lanes|=c;var h=a.alternate;for(h!==null&&(h.lanes|=c),h=a,a=a.return;a!==null;)a.childLanes|=c,h=a.alternate,h!==null&&(h.childLanes|=c),h=a,a=a.return;return h.tag===3?h.stateNode:null}var pa=!1;function Fg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XE(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Oo(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function ma(a,c,h){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(Bn&2)!==0){var b=g.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),g.pending=c,No(a,h)}return b=g.interleaved,b===null?(c.next=c,Vg(g)):(c.next=b.next,b.next=c),g.interleaved=c,No(a,h)}function ff(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=a.pendingLanes,h|=g,c.lanes=h,kt(a,h)}}function ZE(a,c){var h=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var b=null,P=null;if(h=h.firstBaseUpdate,h!==null){do{var Q={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};P===null?b=P=Q:P=P.next=Q,h=h.next}while(h!==null);P===null?b=P=c:P=P.next=c}else b=P=c;h={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:P,shared:g.shared,effects:g.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}function pf(a,c,h,g){var b=a.updateQueue;pa=!1;var P=b.firstBaseUpdate,Q=b.lastBaseUpdate,ue=b.shared.pending;if(ue!==null){b.shared.pending=null;var ge=ue,Ne=ge.next;ge.next=null,Q===null?P=Ne:Q.next=Ne,Q=ge;var et=a.alternate;et!==null&&(et=et.updateQueue,ue=et.lastBaseUpdate,ue!==Q&&(ue===null?et.firstBaseUpdate=Ne:ue.next=Ne,et.lastBaseUpdate=ge))}if(P!==null){var rt=b.baseState;Q=0,et=Ne=ge=null,ue=P;do{var Xe=ue.lane,St=ue.eventTime;if((g&Xe)===Xe){et!==null&&(et=et.next={eventTime:St,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var Pt=a,Mt=ue;switch(Xe=c,St=h,Mt.tag){case 1:if(Pt=Mt.payload,typeof Pt=="function"){rt=Pt.call(St,rt,Xe);break e}rt=Pt;break e;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=Mt.payload,Xe=typeof Pt=="function"?Pt.call(St,rt,Xe):Pt,Xe==null)break e;rt=ae({},rt,Xe);break e;case 2:pa=!0}}ue.callback!==null&&ue.lane!==0&&(a.flags|=64,Xe=b.effects,Xe===null?b.effects=[ue]:Xe.push(ue))}else St={eventTime:St,lane:Xe,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},et===null?(Ne=et=St,ge=rt):et=et.next=St,Q|=Xe;if(ue=ue.next,ue===null){if(ue=b.shared.pending,ue===null)break;Xe=ue,ue=Xe.next,Xe.next=null,b.lastBaseUpdate=Xe,b.shared.pending=null}}while(!0);if(et===null&&(ge=rt),b.baseState=ge,b.firstBaseUpdate=Ne,b.lastBaseUpdate=et,c=b.shared.interleaved,c!==null){b=c;do Q|=b.lane,b=b.next;while(b!==c)}else P===null&&(b.shared.lanes=0);pl|=Q,a.lanes=Q,a.memoizedState=rt}}function e_(a,c,h){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var g=a[c],b=g.callback;if(b!==null){if(g.callback=null,g=h,typeof b!="function")throw Error(n(191,b));b.call(g)}}}var nd={},Zs=da(nd),rd=da(nd),id=da(nd);function hl(a){if(a===nd)throw Error(n(174));return a}function zg(a,c){switch(er(id,c),er(rd,a),er(Zs,nd),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Y(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Y(c,a)}ar(Zs),er(Zs,c)}function Cc(){ar(Zs),ar(rd),ar(id)}function t_(a){hl(id.current);var c=hl(Zs.current),h=Y(c,a.type);c!==h&&(er(rd,a),er(Zs,h))}function Wg(a){rd.current===a&&(ar(Zs),ar(rd))}var fr=da(0);function mf(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var jg=[];function $g(){for(var a=0;a<jg.length;a++)jg[a]._workInProgressVersionPrimary=null;jg.length=0}var gf=se.ReactCurrentDispatcher,qg=se.ReactCurrentBatchConfig,fl=0,pr=null,zr=null,Hr=null,yf=!1,sd=!1,od=0,HP=0;function gi(){throw Error(n(321))}function Kg(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!Rs(a[h],c[h]))return!1;return!0}function Hg(a,c,h,g,b,P){if(fl=P,pr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,gf.current=a===null||a.memoizedState===null?QP:XP,a=h(g,b),sd){P=0;do{if(sd=!1,od=0,25<=P)throw Error(n(301));P+=1,Hr=zr=null,c.updateQueue=null,gf.current=ZP,a=h(g,b)}while(sd)}if(gf.current=Ef,c=zr!==null&&zr.next!==null,fl=0,Hr=zr=pr=null,yf=!1,c)throw Error(n(300));return a}function Gg(){var a=od!==0;return od=0,a}function eo(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?pr.memoizedState=Hr=a:Hr=Hr.next=a,Hr}function ms(){if(zr===null){var a=pr.alternate;a=a!==null?a.memoizedState:null}else a=zr.next;var c=Hr===null?pr.memoizedState:Hr.next;if(c!==null)Hr=c,zr=a;else{if(a===null)throw Error(n(310));zr=a,a={memoizedState:zr.memoizedState,baseState:zr.baseState,baseQueue:zr.baseQueue,queue:zr.queue,next:null},Hr===null?pr.memoizedState=Hr=a:Hr=Hr.next=a}return Hr}function ad(a,c){return typeof c=="function"?c(a):c}function Yg(a){var c=ms(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=a;var g=zr,b=g.baseQueue,P=h.pending;if(P!==null){if(b!==null){var Q=b.next;b.next=P.next,P.next=Q}g.baseQueue=b=P,h.pending=null}if(b!==null){P=b.next,g=g.baseState;var ue=Q=null,ge=null,Ne=P;do{var et=Ne.lane;if((fl&et)===et)ge!==null&&(ge=ge.next={lane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),g=Ne.hasEagerState?Ne.eagerState:a(g,Ne.action);else{var rt={lane:et,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null};ge===null?(ue=ge=rt,Q=g):ge=ge.next=rt,pr.lanes|=et,pl|=et}Ne=Ne.next}while(Ne!==null&&Ne!==P);ge===null?Q=g:ge.next=ue,Rs(g,c.memoizedState)||(Fi=!0),c.memoizedState=g,c.baseState=Q,c.baseQueue=ge,h.lastRenderedState=g}if(a=h.interleaved,a!==null){b=a;do P=b.lane,pr.lanes|=P,pl|=P,b=b.next;while(b!==a)}else b===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function Jg(a){var c=ms(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=a;var g=h.dispatch,b=h.pending,P=c.memoizedState;if(b!==null){h.pending=null;var Q=b=b.next;do P=a(P,Q.action),Q=Q.next;while(Q!==b);Rs(P,c.memoizedState)||(Fi=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),h.lastRenderedState=P}return[P,g]}function n_(){}function r_(a,c){var h=pr,g=ms(),b=c(),P=!Rs(g.memoizedState,b);if(P&&(g.memoizedState=b,Fi=!0),g=g.queue,Qg(o_.bind(null,h,g,a),[a]),g.getSnapshot!==c||P||Hr!==null&&Hr.memoizedState.tag&1){if(h.flags|=2048,ld(9,s_.bind(null,h,g,b,c),void 0,null),Gr===null)throw Error(n(349));(fl&30)!==0||i_(h,c,b)}return b}function i_(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=pr.updateQueue,c===null?(c={lastEffect:null,stores:null},pr.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function s_(a,c,h,g){c.value=h,c.getSnapshot=g,a_(c)&&l_(a)}function o_(a,c,h){return h(function(){a_(c)&&l_(a)})}function a_(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!Rs(a,h)}catch{return!0}}function l_(a){var c=No(a,1);c!==null&&Ns(c,a,1,-1)}function c_(a){var c=eo();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ad,lastRenderedState:a},c.queue=a,a=a.dispatch=JP.bind(null,pr,a),[c.memoizedState,a]}function ld(a,c,h,g){return a={tag:a,create:c,destroy:h,deps:g,next:null},c=pr.updateQueue,c===null?(c={lastEffect:null,stores:null},pr.updateQueue=c,c.lastEffect=a.next=a):(h=c.lastEffect,h===null?c.lastEffect=a.next=a:(g=h.next,h.next=a,a.next=g,c.lastEffect=a)),a}function u_(){return ms().memoizedState}function wf(a,c,h,g){var b=eo();pr.flags|=a,b.memoizedState=ld(1|c,h,void 0,g===void 0?null:g)}function vf(a,c,h,g){var b=ms();g=g===void 0?null:g;var P=void 0;if(zr!==null){var Q=zr.memoizedState;if(P=Q.destroy,g!==null&&Kg(g,Q.deps)){b.memoizedState=ld(c,h,P,g);return}}pr.flags|=a,b.memoizedState=ld(1|c,h,P,g)}function d_(a,c){return wf(8390656,8,a,c)}function Qg(a,c){return vf(2048,8,a,c)}function h_(a,c){return vf(4,2,a,c)}function f_(a,c){return vf(4,4,a,c)}function p_(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function m_(a,c,h){return h=h!=null?h.concat([a]):null,vf(4,4,p_.bind(null,c,a),h)}function Xg(){}function g_(a,c){var h=ms();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Kg(c,g[1])?g[0]:(h.memoizedState=[a,c],a)}function y_(a,c){var h=ms();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Kg(c,g[1])?g[0]:(a=a(),h.memoizedState=[a,c],a)}function w_(a,c,h){return(fl&21)===0?(a.baseState&&(a.baseState=!1,Fi=!0),a.memoizedState=h):(Rs(h,c)||(h=$e(),pr.lanes|=h,pl|=h,a.baseState=!0),c)}function GP(a,c){var h=dt;dt=h!==0&&4>h?h:4,a(!0);var g=qg.transition;qg.transition={};try{a(!1),c()}finally{dt=h,qg.transition=g}}function v_(){return ms().memoizedState}function YP(a,c,h){var g=va(a);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},E_(a))__(c,h);else if(h=QE(a,c,h,g),h!==null){var b=Ni();Ns(h,a,g,b),b_(h,c,g)}}function JP(a,c,h){var g=va(a),b={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(E_(a))__(c,b);else{var P=a.alternate;if(a.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var Q=c.lastRenderedState,ue=P(Q,h);if(b.hasEagerState=!0,b.eagerState=ue,Rs(ue,Q)){var ge=c.interleaved;ge===null?(b.next=b,Vg(c)):(b.next=ge.next,ge.next=b),c.interleaved=b;return}}catch{}finally{}h=QE(a,c,b,g),h!==null&&(b=Ni(),Ns(h,a,g,b),b_(h,c,g))}}function E_(a){var c=a.alternate;return a===pr||c!==null&&c===pr}function __(a,c){sd=yf=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function b_(a,c,h){if((h&4194240)!==0){var g=c.lanes;g&=a.pendingLanes,h|=g,c.lanes=h,kt(a,h)}}var Ef={readContext:ps,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useInsertionEffect:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useSyncExternalStore:gi,useId:gi,unstable_isNewReconciler:!1},QP={readContext:ps,useCallback:function(a,c){return eo().memoizedState=[a,c===void 0?null:c],a},useContext:ps,useEffect:d_,useImperativeHandle:function(a,c,h){return h=h!=null?h.concat([a]):null,wf(4194308,4,p_.bind(null,c,a),h)},useLayoutEffect:function(a,c){return wf(4194308,4,a,c)},useInsertionEffect:function(a,c){return wf(4,2,a,c)},useMemo:function(a,c){var h=eo();return c=c===void 0?null:c,a=a(),h.memoizedState=[a,c],a},useReducer:function(a,c,h){var g=eo();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},g.queue=a,a=a.dispatch=YP.bind(null,pr,a),[g.memoizedState,a]},useRef:function(a){var c=eo();return a={current:a},c.memoizedState=a},useState:c_,useDebugValue:Xg,useDeferredValue:function(a){return eo().memoizedState=a},useTransition:function(){var a=c_(!1),c=a[0];return a=GP.bind(null,a[1]),eo().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,h){var g=pr,b=eo();if(dr){if(h===void 0)throw Error(n(407));h=h()}else{if(h=c(),Gr===null)throw Error(n(349));(fl&30)!==0||i_(g,c,h)}b.memoizedState=h;var P={value:h,getSnapshot:c};return b.queue=P,d_(o_.bind(null,g,P,a),[a]),g.flags|=2048,ld(9,s_.bind(null,g,P,h,c),void 0,null),h},useId:function(){var a=eo(),c=Gr.identifierPrefix;if(dr){var h=Mo,g=Po;h=(g&~(1<<32-Fe(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=od++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=HP++,c=":"+c+"r"+h.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},XP={readContext:ps,useCallback:g_,useContext:ps,useEffect:Qg,useImperativeHandle:m_,useInsertionEffect:h_,useLayoutEffect:f_,useMemo:y_,useReducer:Yg,useRef:u_,useState:function(){return Yg(ad)},useDebugValue:Xg,useDeferredValue:function(a){var c=ms();return w_(c,zr.memoizedState,a)},useTransition:function(){var a=Yg(ad)[0],c=ms().memoizedState;return[a,c]},useMutableSource:n_,useSyncExternalStore:r_,useId:v_,unstable_isNewReconciler:!1},ZP={readContext:ps,useCallback:g_,useContext:ps,useEffect:Qg,useImperativeHandle:m_,useInsertionEffect:h_,useLayoutEffect:f_,useMemo:y_,useReducer:Jg,useRef:u_,useState:function(){return Jg(ad)},useDebugValue:Xg,useDeferredValue:function(a){var c=ms();return zr===null?c.memoizedState=a:w_(c,zr.memoizedState,a)},useTransition:function(){var a=Jg(ad)[0],c=ms().memoizedState;return[a,c]},useMutableSource:n_,useSyncExternalStore:r_,useId:v_,unstable_isNewReconciler:!1};function Cs(a,c){if(a&&a.defaultProps){c=ae({},c),a=a.defaultProps;for(var h in a)c[h]===void 0&&(c[h]=a[h]);return c}return c}function Zg(a,c,h,g){c=a.memoizedState,h=h(g,c),h=h==null?c:ae({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var _f={isMounted:function(a){return(a=a._reactInternals)?Ge(a)===a:!1},enqueueSetState:function(a,c,h){a=a._reactInternals;var g=Ni(),b=va(a),P=Oo(g,b);P.payload=c,h!=null&&(P.callback=h),c=ma(a,P,b),c!==null&&(Ns(c,a,b,g),ff(c,a,b))},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var g=Ni(),b=va(a),P=Oo(g,b);P.tag=1,P.payload=c,h!=null&&(P.callback=h),c=ma(a,P,b),c!==null&&(Ns(c,a,b,g),ff(c,a,b))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=Ni(),g=va(a),b=Oo(h,g);b.tag=2,c!=null&&(b.callback=c),c=ma(a,b,g),c!==null&&(Ns(c,a,g,h),ff(c,a,g))}};function S_(a,c,h,g,b,P,Q){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,P,Q):c.prototype&&c.prototype.isPureReactComponent?!Gu(h,g)||!Gu(b,P):!0}function I_(a,c,h){var g=!1,b=ha,P=c.contextType;return typeof P=="object"&&P!==null?P=ps(P):(b=Vi(c)?ll:mi.current,g=c.contextTypes,P=(g=g!=null)?Sc(a,b):ha),c=new c(h,P),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=_f,a.stateNode=c,c._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=P),c}function A_(a,c,h,g){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==a&&_f.enqueueReplaceState(c,c.state,null)}function e0(a,c,h,g){var b=a.stateNode;b.props=h,b.state=a.memoizedState,b.refs={},Fg(a);var P=c.contextType;typeof P=="object"&&P!==null?b.context=ps(P):(P=Vi(c)?ll:mi.current,b.context=Sc(a,P)),b.state=a.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(Zg(a,c,P,h),b.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(c=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),c!==b.state&&_f.enqueueReplaceState(b,b.state,null),pf(a,h,b,g),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308)}function Pc(a,c){try{var h="",g=c;do h+=ee(g),g=g.return;while(g);var b=h}catch(P){b=`
Error generating stack: `+P.message+`
`+P.stack}return{value:a,source:c,stack:b,digest:null}}function t0(a,c,h){return{value:a,source:null,stack:h??null,digest:c??null}}function n0(a,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var e6=typeof WeakMap=="function"?WeakMap:Map;function x_(a,c,h){h=Oo(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){Rf||(Rf=!0,y0=g),n0(a,c)},h}function T_(a,c,h){h=Oo(-1,h),h.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var b=c.value;h.payload=function(){return g(b)},h.callback=function(){n0(a,c)}}var P=a.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(h.callback=function(){n0(a,c),typeof g!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var Q=c.stack;this.componentDidCatch(c.value,{componentStack:Q!==null?Q:""})}),h}function R_(a,c,h){var g=a.pingCache;if(g===null){g=a.pingCache=new e6;var b=new Set;g.set(c,b)}else b=g.get(c),b===void 0&&(b=new Set,g.set(c,b));b.has(h)||(b.add(h),a=p6.bind(null,a,c,h),c.then(a,a))}function k_(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function C_(a,c,h,g,b){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Oo(-1,1),c.tag=2,ma(h,c,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=b,a)}var t6=se.ReactCurrentOwner,Fi=!1;function Mi(a,c,h,g){c.child=a===null?JE(c,null,h,g):Tc(c,a.child,h,g)}function P_(a,c,h,g,b){h=h.render;var P=c.ref;return kc(c,b),g=Hg(a,c,h,g,P,b),h=Gg(),a!==null&&!Fi?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~b,Do(a,c,b)):(dr&&h&&Cg(c),c.flags|=1,Mi(a,c,g,b),c.child)}function M_(a,c,h,g,b){if(a===null){var P=h.type;return typeof P=="function"&&!I0(P)&&P.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=P,N_(a,c,P,g,b)):(a=Of(h.type,null,g,c,c.mode,b),a.ref=c.ref,a.return=c,c.child=a)}if(P=a.child,(a.lanes&b)===0){var Q=P.memoizedProps;if(h=h.compare,h=h!==null?h:Gu,h(Q,g)&&a.ref===c.ref)return Do(a,c,b)}return c.flags|=1,a=_a(P,g),a.ref=c.ref,a.return=c,c.child=a}function N_(a,c,h,g,b){if(a!==null){var P=a.memoizedProps;if(Gu(P,g)&&a.ref===c.ref)if(Fi=!1,c.pendingProps=g=P,(a.lanes&b)!==0)(a.flags&131072)!==0&&(Fi=!0);else return c.lanes=a.lanes,Do(a,c,b)}return r0(a,c,h,g,b)}function O_(a,c,h){var g=c.pendingProps,b=g.children,P=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},er(Nc,ns),ns|=h;else{if((h&1073741824)===0)return a=P!==null?P.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,er(Nc,ns),ns|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=P!==null?P.baseLanes:h,er(Nc,ns),ns|=g}else P!==null?(g=P.baseLanes|h,c.memoizedState=null):g=h,er(Nc,ns),ns|=g;return Mi(a,c,b,h),c.child}function D_(a,c){var h=c.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function r0(a,c,h,g,b){var P=Vi(h)?ll:mi.current;return P=Sc(c,P),kc(c,b),h=Hg(a,c,h,g,P,b),g=Gg(),a!==null&&!Fi?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~b,Do(a,c,b)):(dr&&g&&Cg(c),c.flags|=1,Mi(a,c,h,b),c.child)}function L_(a,c,h,g,b){if(Vi(h)){var P=!0;sf(c)}else P=!1;if(kc(c,b),c.stateNode===null)Sf(a,c),I_(c,h,g),e0(c,h,g,b),g=!0;else if(a===null){var Q=c.stateNode,ue=c.memoizedProps;Q.props=ue;var ge=Q.context,Ne=h.contextType;typeof Ne=="object"&&Ne!==null?Ne=ps(Ne):(Ne=Vi(h)?ll:mi.current,Ne=Sc(c,Ne));var et=h.getDerivedStateFromProps,rt=typeof et=="function"||typeof Q.getSnapshotBeforeUpdate=="function";rt||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ue!==g||ge!==Ne)&&A_(c,Q,g,Ne),pa=!1;var Xe=c.memoizedState;Q.state=Xe,pf(c,g,Q,b),ge=c.memoizedState,ue!==g||Xe!==ge||Ui.current||pa?(typeof et=="function"&&(Zg(c,h,et,g),ge=c.memoizedState),(ue=pa||S_(c,h,ue,g,Xe,ge,Ne))?(rt||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(c.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=ge),Q.props=g,Q.state=ge,Q.context=Ne,g=ue):(typeof Q.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{Q=c.stateNode,XE(a,c),ue=c.memoizedProps,Ne=c.type===c.elementType?ue:Cs(c.type,ue),Q.props=Ne,rt=c.pendingProps,Xe=Q.context,ge=h.contextType,typeof ge=="object"&&ge!==null?ge=ps(ge):(ge=Vi(h)?ll:mi.current,ge=Sc(c,ge));var St=h.getDerivedStateFromProps;(et=typeof St=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ue!==rt||Xe!==ge)&&A_(c,Q,g,ge),pa=!1,Xe=c.memoizedState,Q.state=Xe,pf(c,g,Q,b);var Pt=c.memoizedState;ue!==rt||Xe!==Pt||Ui.current||pa?(typeof St=="function"&&(Zg(c,h,St,g),Pt=c.memoizedState),(Ne=pa||S_(c,h,Ne,g,Xe,Pt,ge)||!1)?(et||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(g,Pt,ge),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(g,Pt,ge)),typeof Q.componentDidUpdate=="function"&&(c.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof Q.componentDidUpdate!="function"||ue===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ue===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Pt),Q.props=g,Q.state=Pt,Q.context=ge,g=Ne):(typeof Q.componentDidUpdate!="function"||ue===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ue===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=1024),g=!1)}return i0(a,c,h,g,P,b)}function i0(a,c,h,g,b,P){D_(a,c);var Q=(c.flags&128)!==0;if(!g&&!Q)return b&&zE(c,h,!1),Do(a,c,P);g=c.stateNode,t6.current=c;var ue=Q&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,a!==null&&Q?(c.child=Tc(c,a.child,null,P),c.child=Tc(c,null,ue,P)):Mi(a,c,ue,P),c.memoizedState=g.state,b&&zE(c,h,!0),c.child}function B_(a){var c=a.stateNode;c.pendingContext?VE(a,c.pendingContext,c.pendingContext!==c.context):c.context&&VE(a,c.context,!1),zg(a,c.containerInfo)}function U_(a,c,h,g,b){return xc(),Og(b),c.flags|=256,Mi(a,c,h,g),c.child}var s0={dehydrated:null,treeContext:null,retryLane:0};function o0(a){return{baseLanes:a,cachePool:null,transitions:null}}function V_(a,c,h){var g=c.pendingProps,b=fr.current,P=!1,Q=(c.flags&128)!==0,ue;if((ue=Q)||(ue=a!==null&&a.memoizedState===null?!1:(b&2)!==0),ue?(P=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(b|=1),er(fr,b&1),a===null)return Ng(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(Q=g.children,a=g.fallback,P?(g=c.mode,P=c.child,Q={mode:"hidden",children:Q},(g&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=Q):P=Df(Q,g,0,null),a=wl(a,g,h,null),P.return=c,a.return=c,P.sibling=a,c.child=P,c.child.memoizedState=o0(h),c.memoizedState=s0,a):a0(c,Q));if(b=a.memoizedState,b!==null&&(ue=b.dehydrated,ue!==null))return n6(a,c,Q,g,ue,b,h);if(P){P=g.fallback,Q=c.mode,b=a.child,ue=b.sibling;var ge={mode:"hidden",children:g.children};return(Q&1)===0&&c.child!==b?(g=c.child,g.childLanes=0,g.pendingProps=ge,c.deletions=null):(g=_a(b,ge),g.subtreeFlags=b.subtreeFlags&14680064),ue!==null?P=_a(ue,P):(P=wl(P,Q,h,null),P.flags|=2),P.return=c,g.return=c,g.sibling=P,c.child=g,g=P,P=c.child,Q=a.child.memoizedState,Q=Q===null?o0(h):{baseLanes:Q.baseLanes|h,cachePool:null,transitions:Q.transitions},P.memoizedState=Q,P.childLanes=a.childLanes&~h,c.memoizedState=s0,g}return P=a.child,a=P.sibling,g=_a(P,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,a!==null&&(h=c.deletions,h===null?(c.deletions=[a],c.flags|=16):h.push(a)),c.child=g,c.memoizedState=null,g}function a0(a,c){return c=Df({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function bf(a,c,h,g){return g!==null&&Og(g),Tc(c,a.child,null,h),a=a0(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function n6(a,c,h,g,b,P,Q){if(h)return c.flags&256?(c.flags&=-257,g=t0(Error(n(422))),bf(a,c,Q,g)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(P=g.fallback,b=c.mode,g=Df({mode:"visible",children:g.children},b,0,null),P=wl(P,b,Q,null),P.flags|=2,g.return=c,P.return=c,g.sibling=P,c.child=g,(c.mode&1)!==0&&Tc(c,a.child,null,Q),c.child.memoizedState=o0(Q),c.memoizedState=s0,P);if((c.mode&1)===0)return bf(a,c,Q,null);if(b.data==="$!"){if(g=b.nextSibling&&b.nextSibling.dataset,g)var ue=g.dgst;return g=ue,P=Error(n(419)),g=t0(P,g,void 0),bf(a,c,Q,g)}if(ue=(Q&a.childLanes)!==0,Fi||ue){if(g=Gr,g!==null){switch(Q&-Q){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(g.suspendedLanes|Q))!==0?0:b,b!==0&&b!==P.retryLane&&(P.retryLane=b,No(a,b),Ns(g,a,b,-1))}return S0(),g=t0(Error(n(421))),bf(a,c,Q,g)}return b.data==="$?"?(c.flags|=128,c.child=a.child,c=m6.bind(null,a),b._reactRetry=c,null):(a=P.treeContext,ts=ua(b.nextSibling),es=c,dr=!0,ks=null,a!==null&&(hs[fs++]=Po,hs[fs++]=Mo,hs[fs++]=cl,Po=a.id,Mo=a.overflow,cl=c),c=a0(c,g.children),c.flags|=4096,c)}function F_(a,c,h){a.lanes|=c;var g=a.alternate;g!==null&&(g.lanes|=c),Ug(a.return,c,h)}function l0(a,c,h,g,b){var P=a.memoizedState;P===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:b}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=g,P.tail=h,P.tailMode=b)}function z_(a,c,h){var g=c.pendingProps,b=g.revealOrder,P=g.tail;if(Mi(a,c,g.children,h),g=fr.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&F_(a,h,c);else if(a.tag===19)F_(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(er(fr,g),(c.mode&1)===0)c.memoizedState=null;else switch(b){case"forwards":for(h=c.child,b=null;h!==null;)a=h.alternate,a!==null&&mf(a)===null&&(b=h),h=h.sibling;h=b,h===null?(b=c.child,c.child=null):(b=h.sibling,h.sibling=null),l0(c,!1,b,h,P);break;case"backwards":for(h=null,b=c.child,c.child=null;b!==null;){if(a=b.alternate,a!==null&&mf(a)===null){c.child=b;break}a=b.sibling,b.sibling=h,h=b,b=a}l0(c,!0,h,null,P);break;case"together":l0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Sf(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function Do(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),pl|=c.lanes,(h&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,h=_a(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=_a(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function r6(a,c,h){switch(c.tag){case 3:B_(c),xc();break;case 5:t_(c);break;case 1:Vi(c.type)&&sf(c);break;case 4:zg(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,b=c.memoizedProps.value;er(df,g._currentValue),g._currentValue=b;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(er(fr,fr.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?V_(a,c,h):(er(fr,fr.current&1),a=Do(a,c,h),a!==null?a.sibling:null);er(fr,fr.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(a.flags&128)!==0){if(g)return z_(a,c,h);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),er(fr,fr.current),g)break;return null;case 22:case 23:return c.lanes=0,O_(a,c,h)}return Do(a,c,h)}var W_,c0,j_,$_;W_=function(a,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},c0=function(){},j_=function(a,c,h,g){var b=a.memoizedProps;if(b!==g){a=c.stateNode,hl(Zs.current);var P=null;switch(h){case"input":b=un(a,b),g=un(a,g),P=[];break;case"select":b=ae({},b,{value:void 0}),g=ae({},g,{value:void 0}),P=[];break;case"textarea":b=Qn(a,b),g=Qn(a,g),P=[];break;default:typeof b.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=tf)}Rt(h,g);var Q;h=null;for(Ne in b)if(!g.hasOwnProperty(Ne)&&b.hasOwnProperty(Ne)&&b[Ne]!=null)if(Ne==="style"){var ue=b[Ne];for(Q in ue)ue.hasOwnProperty(Q)&&(h||(h={}),h[Q]="")}else Ne!=="dangerouslySetInnerHTML"&&Ne!=="children"&&Ne!=="suppressContentEditableWarning"&&Ne!=="suppressHydrationWarning"&&Ne!=="autoFocus"&&(s.hasOwnProperty(Ne)?P||(P=[]):(P=P||[]).push(Ne,null));for(Ne in g){var ge=g[Ne];if(ue=b?.[Ne],g.hasOwnProperty(Ne)&&ge!==ue&&(ge!=null||ue!=null))if(Ne==="style")if(ue){for(Q in ue)!ue.hasOwnProperty(Q)||ge&&ge.hasOwnProperty(Q)||(h||(h={}),h[Q]="");for(Q in ge)ge.hasOwnProperty(Q)&&ue[Q]!==ge[Q]&&(h||(h={}),h[Q]=ge[Q])}else h||(P||(P=[]),P.push(Ne,h)),h=ge;else Ne==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ue=ue?ue.__html:void 0,ge!=null&&ue!==ge&&(P=P||[]).push(Ne,ge)):Ne==="children"?typeof ge!="string"&&typeof ge!="number"||(P=P||[]).push(Ne,""+ge):Ne!=="suppressContentEditableWarning"&&Ne!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ne)?(ge!=null&&Ne==="onScroll"&&or("scroll",a),P||ue===ge||(P=[])):(P=P||[]).push(Ne,ge))}h&&(P=P||[]).push("style",h);var Ne=P;(c.updateQueue=Ne)&&(c.flags|=4)}},$_=function(a,c,h,g){h!==g&&(c.flags|=4)};function cd(a,c){if(!dr)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function yi(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,g=0;if(c)for(var b=a.child;b!==null;)h|=b.lanes|b.childLanes,g|=b.subtreeFlags&14680064,g|=b.flags&14680064,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)h|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=g,a.childLanes=h,c}function i6(a,c,h){var g=c.pendingProps;switch(Pg(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(c),null;case 1:return Vi(c.type)&&rf(),yi(c),null;case 3:return g=c.stateNode,Cc(),ar(Ui),ar(mi),$g(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(cf(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ks!==null&&(E0(ks),ks=null))),c0(a,c),yi(c),null;case 5:Wg(c);var b=hl(id.current);if(h=c.type,a!==null&&c.stateNode!=null)j_(a,c,h,g,b),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(n(166));return yi(c),null}if(a=hl(Zs.current),cf(c)){g=c.stateNode,h=c.type;var P=c.memoizedProps;switch(g[Xs]=c,g[Zu]=P,a=(c.mode&1)!==0,h){case"dialog":or("cancel",g),or("close",g);break;case"iframe":case"object":case"embed":or("load",g);break;case"video":case"audio":for(b=0;b<Ju.length;b++)or(Ju[b],g);break;case"source":or("error",g);break;case"img":case"image":case"link":or("error",g),or("load",g);break;case"details":or("toggle",g);break;case"input":kn(g,P),or("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!P.multiple},or("invalid",g);break;case"textarea":gn(g,P),or("invalid",g)}Rt(h,P),b=null;for(var Q in P)if(P.hasOwnProperty(Q)){var ue=P[Q];Q==="children"?typeof ue=="string"?g.textContent!==ue&&(P.suppressHydrationWarning!==!0&&ef(g.textContent,ue,a),b=["children",ue]):typeof ue=="number"&&g.textContent!==""+ue&&(P.suppressHydrationWarning!==!0&&ef(g.textContent,ue,a),b=["children",""+ue]):s.hasOwnProperty(Q)&&ue!=null&&Q==="onScroll"&&or("scroll",g)}switch(h){case"input":qt(g),xn(g,P,!0);break;case"textarea":qt(g),sr(g);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(g.onclick=tf)}g=b,c.updateQueue=g,g!==null&&(c.flags|=4)}else{Q=b.nodeType===9?b:b.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Qt(h)),a==="http://www.w3.org/1999/xhtml"?h==="script"?(a=Q.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=Q.createElement(h,{is:g.is}):(a=Q.createElement(h),h==="select"&&(Q=a,g.multiple?Q.multiple=!0:g.size&&(Q.size=g.size))):a=Q.createElementNS(a,h),a[Xs]=c,a[Zu]=g,W_(a,c,!1,!1),c.stateNode=a;e:{switch(Q=on(h,g),h){case"dialog":or("cancel",a),or("close",a),b=g;break;case"iframe":case"object":case"embed":or("load",a),b=g;break;case"video":case"audio":for(b=0;b<Ju.length;b++)or(Ju[b],a);b=g;break;case"source":or("error",a),b=g;break;case"img":case"image":case"link":or("error",a),or("load",a),b=g;break;case"details":or("toggle",a),b=g;break;case"input":kn(a,g),b=un(a,g),or("invalid",a);break;case"option":b=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},b=ae({},g,{value:void 0}),or("invalid",a);break;case"textarea":gn(a,g),b=Qn(a,g),or("invalid",a);break;default:b=g}Rt(h,b),ue=b;for(P in ue)if(ue.hasOwnProperty(P)){var ge=ue[P];P==="style"?Vt(a,ge):P==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ge!=null&&N(a,ge)):P==="children"?typeof ge=="string"?(h!=="textarea"||ge!=="")&&oe(a,ge):typeof ge=="number"&&oe(a,""+ge):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(s.hasOwnProperty(P)?ge!=null&&P==="onScroll"&&or("scroll",a):ge!=null&&j(a,P,ge,Q))}switch(h){case"input":qt(a),xn(a,g,!1);break;case"textarea":qt(a),sr(a);break;case"option":g.value!=null&&a.setAttribute("value",""+Oe(g.value));break;case"select":a.multiple=!!g.multiple,P=g.value,P!=null?hn(a,!!g.multiple,P,!1):g.defaultValue!=null&&hn(a,!!g.multiple,g.defaultValue,!0);break;default:typeof b.onClick=="function"&&(a.onclick=tf)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return yi(c),null;case 6:if(a&&c.stateNode!=null)$_(a,c,a.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(n(166));if(h=hl(id.current),hl(Zs.current),cf(c)){if(g=c.stateNode,h=c.memoizedProps,g[Xs]=c,(P=g.nodeValue!==h)&&(a=es,a!==null))switch(a.tag){case 3:ef(g.nodeValue,h,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&ef(g.nodeValue,h,(a.mode&1)!==0)}P&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[Xs]=c,c.stateNode=g}return yi(c),null;case 13:if(ar(fr),g=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(dr&&ts!==null&&(c.mode&1)!==0&&(c.flags&128)===0)HE(),xc(),c.flags|=98560,P=!1;else if(P=cf(c),g!==null&&g.dehydrated!==null){if(a===null){if(!P)throw Error(n(318));if(P=c.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(n(317));P[Xs]=c}else xc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;yi(c),P=!1}else ks!==null&&(E0(ks),ks=null),P=!0;if(!P)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(fr.current&1)!==0?Wr===0&&(Wr=3):S0())),c.updateQueue!==null&&(c.flags|=4),yi(c),null);case 4:return Cc(),c0(a,c),a===null&&Qu(c.stateNode.containerInfo),yi(c),null;case 10:return Bg(c.type._context),yi(c),null;case 17:return Vi(c.type)&&rf(),yi(c),null;case 19:if(ar(fr),P=c.memoizedState,P===null)return yi(c),null;if(g=(c.flags&128)!==0,Q=P.rendering,Q===null)if(g)cd(P,!1);else{if(Wr!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(Q=mf(a),Q!==null){for(c.flags|=128,cd(P,!1),g=Q.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)P=h,a=g,P.flags&=14680066,Q=P.alternate,Q===null?(P.childLanes=0,P.lanes=a,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=Q.childLanes,P.lanes=Q.lanes,P.child=Q.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=Q.memoizedProps,P.memoizedState=Q.memoizedState,P.updateQueue=Q.updateQueue,P.type=Q.type,a=Q.dependencies,P.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),h=h.sibling;return er(fr,fr.current&1|2),c.child}a=a.sibling}P.tail!==null&&ft()>Oc&&(c.flags|=128,g=!0,cd(P,!1),c.lanes=4194304)}else{if(!g)if(a=mf(Q),a!==null){if(c.flags|=128,g=!0,h=a.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),cd(P,!0),P.tail===null&&P.tailMode==="hidden"&&!Q.alternate&&!dr)return yi(c),null}else 2*ft()-P.renderingStartTime>Oc&&h!==1073741824&&(c.flags|=128,g=!0,cd(P,!1),c.lanes=4194304);P.isBackwards?(Q.sibling=c.child,c.child=Q):(h=P.last,h!==null?h.sibling=Q:c.child=Q,P.last=Q)}return P.tail!==null?(c=P.tail,P.rendering=c,P.tail=c.sibling,P.renderingStartTime=ft(),c.sibling=null,h=fr.current,er(fr,g?h&1|2:h&1),c):(yi(c),null);case 22:case 23:return b0(),g=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(ns&1073741824)!==0&&(yi(c),c.subtreeFlags&6&&(c.flags|=8192)):yi(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function s6(a,c){switch(Pg(c),c.tag){case 1:return Vi(c.type)&&rf(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Cc(),ar(Ui),ar(mi),$g(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return Wg(c),null;case 13:if(ar(fr),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));xc()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return ar(fr),null;case 4:return Cc(),null;case 10:return Bg(c.type._context),null;case 22:case 23:return b0(),null;case 24:return null;default:return null}}var If=!1,wi=!1,o6=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function Mc(a,c){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){Sr(a,c,g)}else h.current=null}function u0(a,c,h){try{h()}catch(g){Sr(a,c,g)}}var q_=!1;function a6(a,c){if(bg=aa,a=SE(),pg(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var b=g.anchorOffset,P=g.focusNode;g=g.focusOffset;try{h.nodeType,P.nodeType}catch{h=null;break e}var Q=0,ue=-1,ge=-1,Ne=0,et=0,rt=a,Xe=null;t:for(;;){for(var St;rt!==h||b!==0&&rt.nodeType!==3||(ue=Q+b),rt!==P||g!==0&&rt.nodeType!==3||(ge=Q+g),rt.nodeType===3&&(Q+=rt.nodeValue.length),(St=rt.firstChild)!==null;)Xe=rt,rt=St;for(;;){if(rt===a)break t;if(Xe===h&&++Ne===b&&(ue=Q),Xe===P&&++et===g&&(ge=Q),(St=rt.nextSibling)!==null)break;rt=Xe,Xe=rt.parentNode}rt=St}h=ue===-1||ge===-1?null:{start:ue,end:ge}}else h=null}h=h||{start:0,end:0}}else h=null;for(Sg={focusedElem:a,selectionRange:h},aa=!1,Ct=c;Ct!==null;)if(c=Ct,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,Ct=a;else for(;Ct!==null;){c=Ct;try{var Pt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Pt!==null){var Mt=Pt.memoizedProps,kr=Pt.memoizedState,Ie=c.stateNode,Ee=Ie.getSnapshotBeforeUpdate(c.elementType===c.type?Mt:Cs(c.type,Mt),kr);Ie.__reactInternalSnapshotBeforeUpdate=Ee}break;case 3:var Te=c.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(at){Sr(c,c.return,at)}if(a=c.sibling,a!==null){a.return=c.return,Ct=a;break}Ct=c.return}return Pt=q_,q_=!1,Pt}function ud(a,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var b=g=g.next;do{if((b.tag&a)===a){var P=b.destroy;b.destroy=void 0,P!==void 0&&u0(c,h,P)}b=b.next}while(b!==g)}}function Af(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&a)===a){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function d0(a){var c=a.ref;if(c!==null){var h=a.stateNode;switch(a.tag){case 5:a=h;break;default:a=h}typeof c=="function"?c(a):c.current=a}}function K_(a){var c=a.alternate;c!==null&&(a.alternate=null,K_(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Xs],delete c[Zu],delete c[Tg],delete c[jP],delete c[$P])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function H_(a){return a.tag===5||a.tag===3||a.tag===4}function G_(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||H_(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function h0(a,c,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(a,c):h.insertBefore(a,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(a,h)):(c=h,c.appendChild(a)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=tf));else if(g!==4&&(a=a.child,a!==null))for(h0(a,c,h),a=a.sibling;a!==null;)h0(a,c,h),a=a.sibling}function f0(a,c,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?h.insertBefore(a,c):h.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(f0(a,c,h),a=a.sibling;a!==null;)f0(a,c,h),a=a.sibling}var ri=null,Ps=!1;function ga(a,c,h){for(h=h.child;h!==null;)Y_(a,c,h),h=h.sibling}function Y_(a,c,h){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(lt,h)}catch{}switch(h.tag){case 5:wi||Mc(h,c);case 6:var g=ri,b=Ps;ri=null,ga(a,c,h),ri=g,Ps=b,ri!==null&&(Ps?(a=ri,h=h.stateNode,a.nodeType===8?a.parentNode.removeChild(h):a.removeChild(h)):ri.removeChild(h.stateNode));break;case 18:ri!==null&&(Ps?(a=ri,h=h.stateNode,a.nodeType===8?xg(a.parentNode,h):a.nodeType===1&&xg(a,h),xs(a)):xg(ri,h.stateNode));break;case 4:g=ri,b=Ps,ri=h.stateNode.containerInfo,Ps=!0,ga(a,c,h),ri=g,Ps=b;break;case 0:case 11:case 14:case 15:if(!wi&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){b=g=g.next;do{var P=b,Q=P.destroy;P=P.tag,Q!==void 0&&((P&2)!==0||(P&4)!==0)&&u0(h,c,Q),b=b.next}while(b!==g)}ga(a,c,h);break;case 1:if(!wi&&(Mc(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(ue){Sr(h,c,ue)}ga(a,c,h);break;case 21:ga(a,c,h);break;case 22:h.mode&1?(wi=(g=wi)||h.memoizedState!==null,ga(a,c,h),wi=g):ga(a,c,h);break;default:ga(a,c,h)}}function J_(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new o6),c.forEach(function(g){var b=g6.bind(null,a,g);h.has(g)||(h.add(g),g.then(b,b))})}}function Ms(a,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var b=h[g];try{var P=a,Q=c,ue=Q;e:for(;ue!==null;){switch(ue.tag){case 5:ri=ue.stateNode,Ps=!1;break e;case 3:ri=ue.stateNode.containerInfo,Ps=!0;break e;case 4:ri=ue.stateNode.containerInfo,Ps=!0;break e}ue=ue.return}if(ri===null)throw Error(n(160));Y_(P,Q,b),ri=null,Ps=!1;var ge=b.alternate;ge!==null&&(ge.return=null),b.return=null}catch(Ne){Sr(b,c,Ne)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Q_(c,a),c=c.sibling}function Q_(a,c){var h=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Ms(c,a),to(a),g&4){try{ud(3,a,a.return),Af(3,a)}catch(Mt){Sr(a,a.return,Mt)}try{ud(5,a,a.return)}catch(Mt){Sr(a,a.return,Mt)}}break;case 1:Ms(c,a),to(a),g&512&&h!==null&&Mc(h,h.return);break;case 5:if(Ms(c,a),to(a),g&512&&h!==null&&Mc(h,h.return),a.flags&32){var b=a.stateNode;try{oe(b,"")}catch(Mt){Sr(a,a.return,Mt)}}if(g&4&&(b=a.stateNode,b!=null)){var P=a.memoizedProps,Q=h!==null?h.memoizedProps:P,ue=a.type,ge=a.updateQueue;if(a.updateQueue=null,ge!==null)try{ue==="input"&&P.type==="radio"&&P.name!=null&&$r(b,P),on(ue,Q);var Ne=on(ue,P);for(Q=0;Q<ge.length;Q+=2){var et=ge[Q],rt=ge[Q+1];et==="style"?Vt(b,rt):et==="dangerouslySetInnerHTML"?N(b,rt):et==="children"?oe(b,rt):j(b,et,rt,Ne)}switch(ue){case"input":_n(b,P);break;case"textarea":vn(b,P);break;case"select":var Xe=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!P.multiple;var St=P.value;St!=null?hn(b,!!P.multiple,St,!1):Xe!==!!P.multiple&&(P.defaultValue!=null?hn(b,!!P.multiple,P.defaultValue,!0):hn(b,!!P.multiple,P.multiple?[]:"",!1))}b[Zu]=P}catch(Mt){Sr(a,a.return,Mt)}}break;case 6:if(Ms(c,a),to(a),g&4){if(a.stateNode===null)throw Error(n(162));b=a.stateNode,P=a.memoizedProps;try{b.nodeValue=P}catch(Mt){Sr(a,a.return,Mt)}}break;case 3:if(Ms(c,a),to(a),g&4&&h!==null&&h.memoizedState.isDehydrated)try{xs(c.containerInfo)}catch(Mt){Sr(a,a.return,Mt)}break;case 4:Ms(c,a),to(a);break;case 13:Ms(c,a),to(a),b=a.child,b.flags&8192&&(P=b.memoizedState!==null,b.stateNode.isHidden=P,!P||b.alternate!==null&&b.alternate.memoizedState!==null||(g0=ft())),g&4&&J_(a);break;case 22:if(et=h!==null&&h.memoizedState!==null,a.mode&1?(wi=(Ne=wi)||et,Ms(c,a),wi=Ne):Ms(c,a),to(a),g&8192){if(Ne=a.memoizedState!==null,(a.stateNode.isHidden=Ne)&&!et&&(a.mode&1)!==0)for(Ct=a,et=a.child;et!==null;){for(rt=Ct=et;Ct!==null;){switch(Xe=Ct,St=Xe.child,Xe.tag){case 0:case 11:case 14:case 15:ud(4,Xe,Xe.return);break;case 1:Mc(Xe,Xe.return);var Pt=Xe.stateNode;if(typeof Pt.componentWillUnmount=="function"){g=Xe,h=Xe.return;try{c=g,Pt.props=c.memoizedProps,Pt.state=c.memoizedState,Pt.componentWillUnmount()}catch(Mt){Sr(g,h,Mt)}}break;case 5:Mc(Xe,Xe.return);break;case 22:if(Xe.memoizedState!==null){eb(rt);continue}}St!==null?(St.return=Xe,Ct=St):eb(rt)}et=et.sibling}e:for(et=null,rt=a;;){if(rt.tag===5){if(et===null){et=rt;try{b=rt.stateNode,Ne?(P=b.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(ue=rt.stateNode,ge=rt.memoizedProps.style,Q=ge!=null&&ge.hasOwnProperty("display")?ge.display:null,ue.style.display=Pe("display",Q))}catch(Mt){Sr(a,a.return,Mt)}}}else if(rt.tag===6){if(et===null)try{rt.stateNode.nodeValue=Ne?"":rt.memoizedProps}catch(Mt){Sr(a,a.return,Mt)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===a)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===a)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===a)break e;et===rt&&(et=null),rt=rt.return}et===rt&&(et=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:Ms(c,a),to(a),g&4&&J_(a);break;case 21:break;default:Ms(c,a),to(a)}}function to(a){var c=a.flags;if(c&2){try{e:{for(var h=a.return;h!==null;){if(H_(h)){var g=h;break e}h=h.return}throw Error(n(160))}switch(g.tag){case 5:var b=g.stateNode;g.flags&32&&(oe(b,""),g.flags&=-33);var P=G_(a);f0(a,P,b);break;case 3:case 4:var Q=g.stateNode.containerInfo,ue=G_(a);h0(a,ue,Q);break;default:throw Error(n(161))}}catch(ge){Sr(a,a.return,ge)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function l6(a,c,h){Ct=a,X_(a)}function X_(a,c,h){for(var g=(a.mode&1)!==0;Ct!==null;){var b=Ct,P=b.child;if(b.tag===22&&g){var Q=b.memoizedState!==null||If;if(!Q){var ue=b.alternate,ge=ue!==null&&ue.memoizedState!==null||wi;ue=If;var Ne=wi;if(If=Q,(wi=ge)&&!Ne)for(Ct=b;Ct!==null;)Q=Ct,ge=Q.child,Q.tag===22&&Q.memoizedState!==null?tb(b):ge!==null?(ge.return=Q,Ct=ge):tb(b);for(;P!==null;)Ct=P,X_(P),P=P.sibling;Ct=b,If=ue,wi=Ne}Z_(a)}else(b.subtreeFlags&8772)!==0&&P!==null?(P.return=b,Ct=P):Z_(a)}}function Z_(a){for(;Ct!==null;){var c=Ct;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:wi||Af(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!wi)if(h===null)g.componentDidMount();else{var b=c.elementType===c.type?h.memoizedProps:Cs(c.type,h.memoizedProps);g.componentDidUpdate(b,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&e_(c,P,g);break;case 3:var Q=c.updateQueue;if(Q!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}e_(c,Q,h)}break;case 5:var ue=c.stateNode;if(h===null&&c.flags&4){h=ue;var ge=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":ge.autoFocus&&h.focus();break;case"img":ge.src&&(h.src=ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var Ne=c.alternate;if(Ne!==null){var et=Ne.memoizedState;if(et!==null){var rt=et.dehydrated;rt!==null&&xs(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}wi||c.flags&512&&d0(c)}catch(Xe){Sr(c,c.return,Xe)}}if(c===a){Ct=null;break}if(h=c.sibling,h!==null){h.return=c.return,Ct=h;break}Ct=c.return}}function eb(a){for(;Ct!==null;){var c=Ct;if(c===a){Ct=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Ct=h;break}Ct=c.return}}function tb(a){for(;Ct!==null;){var c=Ct;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Af(4,c)}catch(ge){Sr(c,h,ge)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var b=c.return;try{g.componentDidMount()}catch(ge){Sr(c,b,ge)}}var P=c.return;try{d0(c)}catch(ge){Sr(c,P,ge)}break;case 5:var Q=c.return;try{d0(c)}catch(ge){Sr(c,Q,ge)}}}catch(ge){Sr(c,c.return,ge)}if(c===a){Ct=null;break}var ue=c.sibling;if(ue!==null){ue.return=c.return,Ct=ue;break}Ct=c.return}}var c6=Math.ceil,xf=se.ReactCurrentDispatcher,p0=se.ReactCurrentOwner,gs=se.ReactCurrentBatchConfig,Bn=0,Gr=null,Nr=null,ii=0,ns=0,Nc=da(0),Wr=0,dd=null,pl=0,Tf=0,m0=0,hd=null,zi=null,g0=0,Oc=1/0,Lo=null,Rf=!1,y0=null,ya=null,kf=!1,wa=null,Cf=0,fd=0,w0=null,Pf=-1,Mf=0;function Ni(){return(Bn&6)!==0?ft():Pf!==-1?Pf:Pf=ft()}function va(a){return(a.mode&1)===0?1:(Bn&2)!==0&&ii!==0?ii&-ii:KP.transition!==null?(Mf===0&&(Mf=$e()),Mf):(a=dt,a!==0||(a=window.event,a=a===void 0?16:zu(a.type)),a)}function Ns(a,c,h,g){if(50<fd)throw fd=0,w0=null,Error(n(185));Ze(a,h,g),((Bn&2)===0||a!==Gr)&&(a===Gr&&((Bn&2)===0&&(Tf|=h),Wr===4&&Ea(a,ii)),Wi(a,g),h===1&&Bn===0&&(c.mode&1)===0&&(Oc=ft()+500,of&&fa()))}function Wi(a,c){var h=a.callbackNode;fe(a,c);var g=Re(a,a===Gr?ii:0);if(g===0)h!==null&&jt(h),a.callbackNode=null,a.callbackPriority=0;else if(c=g&-g,a.callbackPriority!==c){if(h!=null&&jt(h),c===1)a.tag===0?qP(rb.bind(null,a)):WE(rb.bind(null,a)),zP(function(){(Bn&6)===0&&fa()}),h=null;else{switch(Tn(g)){case 1:h=mt;break;case 4:h=bt;break;case 16:h=ot;break;case 536870912:h=_t;break;default:h=ot}h=db(h,nb.bind(null,a))}a.callbackPriority=c,a.callbackNode=h}}function nb(a,c){if(Pf=-1,Mf=0,(Bn&6)!==0)throw Error(n(327));var h=a.callbackNode;if(Dc()&&a.callbackNode!==h)return null;var g=Re(a,a===Gr?ii:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||c)c=Nf(a,g);else{c=g;var b=Bn;Bn|=2;var P=sb();(Gr!==a||ii!==c)&&(Lo=null,Oc=ft()+500,gl(a,c));do try{h6();break}catch(ue){ib(a,ue)}while(!0);Lg(),xf.current=P,Bn=b,Nr!==null?c=0:(Gr=null,ii=0,c=Wr)}if(c!==0){if(c===2&&(b=Me(a),b!==0&&(g=b,c=v0(a,b))),c===1)throw h=dd,gl(a,0),Ea(a,g),Wi(a,ft()),h;if(c===6)Ea(a,g);else{if(b=a.current.alternate,(g&30)===0&&!u6(b)&&(c=Nf(a,g),c===2&&(P=Me(a),P!==0&&(g=P,c=v0(a,P))),c===1))throw h=dd,gl(a,0),Ea(a,g),Wi(a,ft()),h;switch(a.finishedWork=b,a.finishedLanes=g,c){case 0:case 1:throw Error(n(345));case 2:yl(a,zi,Lo);break;case 3:if(Ea(a,g),(g&130023424)===g&&(c=g0+500-ft(),10<c)){if(Re(a,0)!==0)break;if(b=a.suspendedLanes,(b&g)!==g){Ni(),a.pingedLanes|=a.suspendedLanes&b;break}a.timeoutHandle=Ag(yl.bind(null,a,zi,Lo),c);break}yl(a,zi,Lo);break;case 4:if(Ea(a,g),(g&4194240)===g)break;for(c=a.eventTimes,b=-1;0<g;){var Q=31-Fe(g);P=1<<Q,Q=c[Q],Q>b&&(b=Q),g&=~P}if(g=b,g=ft()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*c6(g/1960))-g,10<g){a.timeoutHandle=Ag(yl.bind(null,a,zi,Lo),g);break}yl(a,zi,Lo);break;case 5:yl(a,zi,Lo);break;default:throw Error(n(329))}}}return Wi(a,ft()),a.callbackNode===h?nb.bind(null,a):null}function v0(a,c){var h=hd;return a.current.memoizedState.isDehydrated&&(gl(a,c).flags|=256),a=Nf(a,c),a!==2&&(c=zi,zi=h,c!==null&&E0(c)),a}function E0(a){zi===null?zi=a:zi.push.apply(zi,a)}function u6(a){for(var c=a;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var b=h[g],P=b.getSnapshot;b=b.value;try{if(!Rs(P(),b))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ea(a,c){for(c&=~m0,c&=~Tf,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var h=31-Fe(c),g=1<<h;a[h]=-1,c&=~g}}function rb(a){if((Bn&6)!==0)throw Error(n(327));Dc();var c=Re(a,0);if((c&1)===0)return Wi(a,ft()),null;var h=Nf(a,c);if(a.tag!==0&&h===2){var g=Me(a);g!==0&&(c=g,h=v0(a,g))}if(h===1)throw h=dd,gl(a,0),Ea(a,c),Wi(a,ft()),h;if(h===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,yl(a,zi,Lo),Wi(a,ft()),null}function _0(a,c){var h=Bn;Bn|=1;try{return a(c)}finally{Bn=h,Bn===0&&(Oc=ft()+500,of&&fa())}}function ml(a){wa!==null&&wa.tag===0&&(Bn&6)===0&&Dc();var c=Bn;Bn|=1;var h=gs.transition,g=dt;try{if(gs.transition=null,dt=1,a)return a()}finally{dt=g,gs.transition=h,Bn=c,(Bn&6)===0&&fa()}}function b0(){ns=Nc.current,ar(Nc)}function gl(a,c){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==-1&&(a.timeoutHandle=-1,FP(h)),Nr!==null)for(h=Nr.return;h!==null;){var g=h;switch(Pg(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&rf();break;case 3:Cc(),ar(Ui),ar(mi),$g();break;case 5:Wg(g);break;case 4:Cc();break;case 13:ar(fr);break;case 19:ar(fr);break;case 10:Bg(g.type._context);break;case 22:case 23:b0()}h=h.return}if(Gr=a,Nr=a=_a(a.current,null),ii=ns=c,Wr=0,dd=null,m0=Tf=pl=0,zi=hd=null,dl!==null){for(c=0;c<dl.length;c++)if(h=dl[c],g=h.interleaved,g!==null){h.interleaved=null;var b=g.next,P=h.pending;if(P!==null){var Q=P.next;P.next=b,g.next=Q}h.pending=g}dl=null}return a}function ib(a,c){do{var h=Nr;try{if(Lg(),gf.current=Ef,yf){for(var g=pr.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}yf=!1}if(fl=0,Hr=zr=pr=null,sd=!1,od=0,p0.current=null,h===null||h.return===null){Wr=1,dd=c,Nr=null;break}e:{var P=a,Q=h.return,ue=h,ge=c;if(c=ii,ue.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Ne=ge,et=ue,rt=et.tag;if((et.mode&1)===0&&(rt===0||rt===11||rt===15)){var Xe=et.alternate;Xe?(et.updateQueue=Xe.updateQueue,et.memoizedState=Xe.memoizedState,et.lanes=Xe.lanes):(et.updateQueue=null,et.memoizedState=null)}var St=k_(Q);if(St!==null){St.flags&=-257,C_(St,Q,ue,P,c),St.mode&1&&R_(P,Ne,c),c=St,ge=Ne;var Pt=c.updateQueue;if(Pt===null){var Mt=new Set;Mt.add(ge),c.updateQueue=Mt}else Pt.add(ge);break e}else{if((c&1)===0){R_(P,Ne,c),S0();break e}ge=Error(n(426))}}else if(dr&&ue.mode&1){var kr=k_(Q);if(kr!==null){(kr.flags&65536)===0&&(kr.flags|=256),C_(kr,Q,ue,P,c),Og(Pc(ge,ue));break e}}P=ge=Pc(ge,ue),Wr!==4&&(Wr=2),hd===null?hd=[P]:hd.push(P),P=Q;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var Ie=x_(P,ge,c);ZE(P,Ie);break e;case 1:ue=ge;var Ee=P.type,Te=P.stateNode;if((P.flags&128)===0&&(typeof Ee.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(ya===null||!ya.has(Te)))){P.flags|=65536,c&=-c,P.lanes|=c;var at=T_(P,ue,c);ZE(P,at);break e}}P=P.return}while(P!==null)}ab(h)}catch(Lt){c=Lt,Nr===h&&h!==null&&(Nr=h=h.return);continue}break}while(!0)}function sb(){var a=xf.current;return xf.current=Ef,a===null?Ef:a}function S0(){(Wr===0||Wr===3||Wr===2)&&(Wr=4),Gr===null||(pl&268435455)===0&&(Tf&268435455)===0||Ea(Gr,ii)}function Nf(a,c){var h=Bn;Bn|=2;var g=sb();(Gr!==a||ii!==c)&&(Lo=null,gl(a,c));do try{d6();break}catch(b){ib(a,b)}while(!0);if(Lg(),Bn=h,xf.current=g,Nr!==null)throw Error(n(261));return Gr=null,ii=0,Wr}function d6(){for(;Nr!==null;)ob(Nr)}function h6(){for(;Nr!==null&&!Kt();)ob(Nr)}function ob(a){var c=ub(a.alternate,a,ns);a.memoizedProps=a.pendingProps,c===null?ab(a):Nr=c,p0.current=null}function ab(a){var c=a;do{var h=c.alternate;if(a=c.return,(c.flags&32768)===0){if(h=i6(h,c,ns),h!==null){Nr=h;return}}else{if(h=s6(h,c),h!==null){h.flags&=32767,Nr=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Wr=6,Nr=null;return}}if(c=c.sibling,c!==null){Nr=c;return}Nr=c=a}while(c!==null);Wr===0&&(Wr=5)}function yl(a,c,h){var g=dt,b=gs.transition;try{gs.transition=null,dt=1,f6(a,c,h,g)}finally{gs.transition=b,dt=g}return null}function f6(a,c,h,g){do Dc();while(wa!==null);if((Bn&6)!==0)throw Error(n(327));h=a.finishedWork;var b=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var P=h.lanes|h.childLanes;if(Qe(a,P),a===Gr&&(Nr=Gr=null,ii=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||kf||(kf=!0,db(ot,function(){return Dc(),null})),P=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||P){P=gs.transition,gs.transition=null;var Q=dt;dt=1;var ue=Bn;Bn|=4,p0.current=null,a6(a,h),Q_(h,a),NP(Sg),aa=!!bg,Sg=bg=null,a.current=h,l6(h),Wt(),Bn=ue,dt=Q,gs.transition=P}else a.current=h;if(kf&&(kf=!1,wa=a,Cf=b),P=a.pendingLanes,P===0&&(ya=null),Ce(h.stateNode),Wi(a,ft()),c!==null)for(g=a.onRecoverableError,h=0;h<c.length;h++)b=c[h],g(b.value,{componentStack:b.stack,digest:b.digest});if(Rf)throw Rf=!1,a=y0,y0=null,a;return(Cf&1)!==0&&a.tag!==0&&Dc(),P=a.pendingLanes,(P&1)!==0?a===w0?fd++:(fd=0,w0=a):fd=0,fa(),null}function Dc(){if(wa!==null){var a=Tn(Cf),c=gs.transition,h=dt;try{if(gs.transition=null,dt=16>a?16:a,wa===null)var g=!1;else{if(a=wa,wa=null,Cf=0,(Bn&6)!==0)throw Error(n(331));var b=Bn;for(Bn|=4,Ct=a.current;Ct!==null;){var P=Ct,Q=P.child;if((Ct.flags&16)!==0){var ue=P.deletions;if(ue!==null){for(var ge=0;ge<ue.length;ge++){var Ne=ue[ge];for(Ct=Ne;Ct!==null;){var et=Ct;switch(et.tag){case 0:case 11:case 15:ud(8,et,P)}var rt=et.child;if(rt!==null)rt.return=et,Ct=rt;else for(;Ct!==null;){et=Ct;var Xe=et.sibling,St=et.return;if(K_(et),et===Ne){Ct=null;break}if(Xe!==null){Xe.return=St,Ct=Xe;break}Ct=St}}}var Pt=P.alternate;if(Pt!==null){var Mt=Pt.child;if(Mt!==null){Pt.child=null;do{var kr=Mt.sibling;Mt.sibling=null,Mt=kr}while(Mt!==null)}}Ct=P}}if((P.subtreeFlags&2064)!==0&&Q!==null)Q.return=P,Ct=Q;else e:for(;Ct!==null;){if(P=Ct,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:ud(9,P,P.return)}var Ie=P.sibling;if(Ie!==null){Ie.return=P.return,Ct=Ie;break e}Ct=P.return}}var Ee=a.current;for(Ct=Ee;Ct!==null;){Q=Ct;var Te=Q.child;if((Q.subtreeFlags&2064)!==0&&Te!==null)Te.return=Q,Ct=Te;else e:for(Q=Ee;Ct!==null;){if(ue=Ct,(ue.flags&2048)!==0)try{switch(ue.tag){case 0:case 11:case 15:Af(9,ue)}}catch(Lt){Sr(ue,ue.return,Lt)}if(ue===Q){Ct=null;break e}var at=ue.sibling;if(at!==null){at.return=ue.return,Ct=at;break e}Ct=ue.return}}if(Bn=b,fa(),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(lt,a)}catch{}g=!0}return g}finally{dt=h,gs.transition=c}}return!1}function lb(a,c,h){c=Pc(h,c),c=x_(a,c,1),a=ma(a,c,1),c=Ni(),a!==null&&(Ze(a,1,c),Wi(a,c))}function Sr(a,c,h){if(a.tag===3)lb(a,a,h);else for(;c!==null;){if(c.tag===3){lb(c,a,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ya===null||!ya.has(g))){a=Pc(h,a),a=T_(c,a,1),c=ma(c,a,1),a=Ni(),c!==null&&(Ze(c,1,a),Wi(c,a));break}}c=c.return}}function p6(a,c,h){var g=a.pingCache;g!==null&&g.delete(c),c=Ni(),a.pingedLanes|=a.suspendedLanes&h,Gr===a&&(ii&h)===h&&(Wr===4||Wr===3&&(ii&130023424)===ii&&500>ft()-g0?gl(a,0):m0|=h),Wi(a,c)}function cb(a,c){c===0&&((a.mode&1)===0?c=1:(c=Xt,Xt<<=1,(Xt&130023424)===0&&(Xt=4194304)));var h=Ni();a=No(a,c),a!==null&&(Ze(a,c,h),Wi(a,h))}function m6(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),cb(a,h)}function g6(a,c){var h=0;switch(a.tag){case 13:var g=a.stateNode,b=a.memoizedState;b!==null&&(h=b.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(c),cb(a,h)}var ub;ub=function(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps||Ui.current)Fi=!0;else{if((a.lanes&h)===0&&(c.flags&128)===0)return Fi=!1,r6(a,c,h);Fi=(a.flags&131072)!==0}else Fi=!1,dr&&(c.flags&1048576)!==0&&jE(c,lf,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;Sf(a,c),a=c.pendingProps;var b=Sc(c,mi.current);kc(c,h),b=Hg(null,c,g,a,b,h);var P=Gg();return c.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Vi(g)?(P=!0,sf(c)):P=!1,c.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Fg(c),b.updater=_f,c.stateNode=b,b._reactInternals=c,e0(c,g,a,h),c=i0(null,c,g,!0,P,h)):(c.tag=0,dr&&P&&Cg(c),Mi(null,c,b,h),c=c.child),c;case 16:g=c.elementType;e:{switch(Sf(a,c),a=c.pendingProps,b=g._init,g=b(g._payload),c.type=g,b=c.tag=w6(g),a=Cs(g,a),b){case 0:c=r0(null,c,g,a,h);break e;case 1:c=L_(null,c,g,a,h);break e;case 11:c=P_(null,c,g,a,h);break e;case 14:c=M_(null,c,g,Cs(g.type,a),h);break e}throw Error(n(306,g,""))}return c;case 0:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:Cs(g,b),r0(a,c,g,b,h);case 1:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:Cs(g,b),L_(a,c,g,b,h);case 3:e:{if(B_(c),a===null)throw Error(n(387));g=c.pendingProps,P=c.memoizedState,b=P.element,XE(a,c),pf(c,g,null,h);var Q=c.memoizedState;if(g=Q.element,P.isDehydrated)if(P={element:g,isDehydrated:!1,cache:Q.cache,pendingSuspenseBoundaries:Q.pendingSuspenseBoundaries,transitions:Q.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){b=Pc(Error(n(423)),c),c=U_(a,c,g,h,b);break e}else if(g!==b){b=Pc(Error(n(424)),c),c=U_(a,c,g,h,b);break e}else for(ts=ua(c.stateNode.containerInfo.firstChild),es=c,dr=!0,ks=null,h=JE(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(xc(),g===b){c=Do(a,c,h);break e}Mi(a,c,g,h)}c=c.child}return c;case 5:return t_(c),a===null&&Ng(c),g=c.type,b=c.pendingProps,P=a!==null?a.memoizedProps:null,Q=b.children,Ig(g,b)?Q=null:P!==null&&Ig(g,P)&&(c.flags|=32),D_(a,c),Mi(a,c,Q,h),c.child;case 6:return a===null&&Ng(c),null;case 13:return V_(a,c,h);case 4:return zg(c,c.stateNode.containerInfo),g=c.pendingProps,a===null?c.child=Tc(c,null,g,h):Mi(a,c,g,h),c.child;case 11:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:Cs(g,b),P_(a,c,g,b,h);case 7:return Mi(a,c,c.pendingProps,h),c.child;case 8:return Mi(a,c,c.pendingProps.children,h),c.child;case 12:return Mi(a,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,b=c.pendingProps,P=c.memoizedProps,Q=b.value,er(df,g._currentValue),g._currentValue=Q,P!==null)if(Rs(P.value,Q)){if(P.children===b.children&&!Ui.current){c=Do(a,c,h);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var ue=P.dependencies;if(ue!==null){Q=P.child;for(var ge=ue.firstContext;ge!==null;){if(ge.context===g){if(P.tag===1){ge=Oo(-1,h&-h),ge.tag=2;var Ne=P.updateQueue;if(Ne!==null){Ne=Ne.shared;var et=Ne.pending;et===null?ge.next=ge:(ge.next=et.next,et.next=ge),Ne.pending=ge}}P.lanes|=h,ge=P.alternate,ge!==null&&(ge.lanes|=h),Ug(P.return,h,c),ue.lanes|=h;break}ge=ge.next}}else if(P.tag===10)Q=P.type===c.type?null:P.child;else if(P.tag===18){if(Q=P.return,Q===null)throw Error(n(341));Q.lanes|=h,ue=Q.alternate,ue!==null&&(ue.lanes|=h),Ug(Q,h,c),Q=P.sibling}else Q=P.child;if(Q!==null)Q.return=P;else for(Q=P;Q!==null;){if(Q===c){Q=null;break}if(P=Q.sibling,P!==null){P.return=Q.return,Q=P;break}Q=Q.return}P=Q}Mi(a,c,b.children,h),c=c.child}return c;case 9:return b=c.type,g=c.pendingProps.children,kc(c,h),b=ps(b),g=g(b),c.flags|=1,Mi(a,c,g,h),c.child;case 14:return g=c.type,b=Cs(g,c.pendingProps),b=Cs(g.type,b),M_(a,c,g,b,h);case 15:return N_(a,c,c.type,c.pendingProps,h);case 17:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:Cs(g,b),Sf(a,c),c.tag=1,Vi(g)?(a=!0,sf(c)):a=!1,kc(c,h),I_(c,g,b),e0(c,g,b,h),i0(null,c,g,!0,a,h);case 19:return z_(a,c,h);case 22:return O_(a,c,h)}throw Error(n(156,c.tag))};function db(a,c){return Dt(a,c)}function y6(a,c,h,g){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ys(a,c,h,g){return new y6(a,c,h,g)}function I0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function w6(a){if(typeof a=="function")return I0(a)?1:0;if(a!=null){if(a=a.$$typeof,a===H)return 11;if(a===x)return 14}return 2}function _a(a,c){var h=a.alternate;return h===null?(h=ys(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function Of(a,c,h,g,b,P){var Q=2;if(g=a,typeof a=="function")I0(a)&&(Q=1);else if(typeof a=="string")Q=5;else e:switch(a){case Z:return wl(h.children,b,P,c);case $:Q=8,b|=8;break;case D:return a=ys(12,h,c,b|2),a.elementType=D,a.lanes=P,a;case I:return a=ys(13,h,c,b),a.elementType=I,a.lanes=P,a;case y:return a=ys(19,h,c,b),a.elementType=y,a.lanes=P,a;case J:return Df(h,b,P,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case U:Q=10;break e;case q:Q=9;break e;case H:Q=11;break e;case x:Q=14;break e;case V:Q=16,g=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return c=ys(Q,h,c,b),c.elementType=a,c.type=g,c.lanes=P,c}function wl(a,c,h,g){return a=ys(7,a,g,c),a.lanes=h,a}function Df(a,c,h,g){return a=ys(22,a,g,c),a.elementType=J,a.lanes=h,a.stateNode={isHidden:!1},a}function A0(a,c,h){return a=ys(6,a,null,c),a.lanes=h,a}function x0(a,c,h){return c=ys(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function v6(a,c,h,g,b){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ve(0),this.expirationTimes=Ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.identifierPrefix=g,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function T0(a,c,h,g,b,P,Q,ue,ge){return a=new v6(a,c,h,ue,ge),c===1?(c=1,P===!0&&(c|=8)):c=0,P=ys(3,null,null,c),a.current=P,P.stateNode=a,P.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fg(P),a}function E6(a,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:g==null?null:""+g,children:a,containerInfo:c,implementation:h}}function hb(a){if(!a)return ha;a=a._reactInternals;e:{if(Ge(a)!==a||a.tag!==1)throw Error(n(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Vi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(a.tag===1){var h=a.type;if(Vi(h))return FE(a,h,c)}return c}function fb(a,c,h,g,b,P,Q,ue,ge){return a=T0(h,g,!0,a,b,P,Q,ue,ge),a.context=hb(null),h=a.current,g=Ni(),b=va(h),P=Oo(g,b),P.callback=c??null,ma(h,P,b),a.current.lanes=b,Ze(a,b,g),Wi(a,g),a}function Lf(a,c,h,g){var b=c.current,P=Ni(),Q=va(b);return h=hb(h),c.context===null?c.context=h:c.pendingContext=h,c=Oo(P,Q),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=ma(b,c,Q),a!==null&&(Ns(a,b,Q,P),ff(a,b,Q)),Q}function Bf(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function pb(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function R0(a,c){pb(a,c),(a=a.alternate)&&pb(a,c)}function _6(){return null}var mb=typeof reportError=="function"?reportError:function(a){console.error(a)};function k0(a){this._internalRoot=a}Uf.prototype.render=k0.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));Lf(a,c,null,null)},Uf.prototype.unmount=k0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;ml(function(){Lf(null,a,null,null)}),c[ko]=null}};function Uf(a){this._internalRoot=a}Uf.prototype.unstable_scheduleHydration=function(a){if(a){var c=Tr();a={blockedOn:null,target:a,priority:c};for(var h=0;h<Gs.length&&c!==0&&c<Gs[h].priority;h++);Gs.splice(h,0,a),h===0&&Fh(a)}};function C0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Vf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function gb(){}function b6(a,c,h,g,b){if(b){if(typeof g=="function"){var P=g;g=function(){var Ne=Bf(Q);P.call(Ne)}}var Q=fb(c,g,a,0,null,!1,!1,"",gb);return a._reactRootContainer=Q,a[ko]=Q.current,Qu(a.nodeType===8?a.parentNode:a),ml(),Q}for(;b=a.lastChild;)a.removeChild(b);if(typeof g=="function"){var ue=g;g=function(){var Ne=Bf(ge);ue.call(Ne)}}var ge=T0(a,0,!1,null,null,!1,!1,"",gb);return a._reactRootContainer=ge,a[ko]=ge.current,Qu(a.nodeType===8?a.parentNode:a),ml(function(){Lf(c,ge,h,g)}),ge}function Ff(a,c,h,g,b){var P=h._reactRootContainer;if(P){var Q=P;if(typeof b=="function"){var ue=b;b=function(){var ge=Bf(Q);ue.call(ge)}}Lf(c,Q,a,b)}else Q=b6(h,c,a,b,g);return Bf(Q)}Kn=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var h=je(c.pendingLanes);h!==0&&(kt(c,h|1),Wi(c,ft()),(Bn&6)===0&&(Oc=ft()+500,fa()))}break;case 13:ml(function(){var g=No(a,1);if(g!==null){var b=Ni();Ns(g,a,1,b)}}),R0(a,1)}},Wn=function(a){if(a.tag===13){var c=No(a,134217728);if(c!==null){var h=Ni();Ns(c,a,134217728,h)}R0(a,134217728)}},cr=function(a){if(a.tag===13){var c=va(a),h=No(a,c);if(h!==null){var g=Ni();Ns(h,a,c,g)}R0(a,c)}},Tr=function(){return dt},Rr=function(a,c){var h=dt;try{return dt=a,c()}finally{dt=h}},qr=function(a,c,h){switch(c){case"input":if(_n(a,h),c=h.name,h.type==="radio"&&c!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==a&&g.form===a.form){var b=nf(g);if(!b)throw Error(n(90));rn(g),_n(g,b)}}}break;case"textarea":vn(a,h);break;case"select":c=h.value,c!=null&&hn(a,!!h.multiple,c,!1)}},_r=_0,Ln=ml;var S6={usingClientEntryPoint:!1,Events:[ed,_c,nf,Gt,Sn,_0]},pd={findFiberByHostInstance:al,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I6={bundleType:pd.bundleType,version:pd.version,rendererPackageName:pd.rendererPackageName,rendererConfig:pd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:se.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=pt(a),a===null?null:a.stateNode},findFiberByHostInstance:pd.findFiberByHostInstance||_6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zf.isDisabled&&zf.supportsFiber)try{lt=zf.inject(I6),xe=zf}catch{}}return ji.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S6,ji.createPortal=function(a,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C0(c))throw Error(n(200));return E6(a,c,null,h)},ji.createRoot=function(a,c){if(!C0(a))throw Error(n(299));var h=!1,g="",b=mb;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(b=c.onRecoverableError)),c=T0(a,1,!1,null,null,h,!1,g,b),a[ko]=c.current,Qu(a.nodeType===8?a.parentNode:a),new k0(c)},ji.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=pt(c),a=a===null?null:a.stateNode,a},ji.flushSync=function(a){return ml(a)},ji.hydrate=function(a,c,h){if(!Vf(c))throw Error(n(200));return Ff(null,a,c,!0,h)},ji.hydrateRoot=function(a,c,h){if(!C0(a))throw Error(n(405));var g=h!=null&&h.hydratedSources||null,b=!1,P="",Q=mb;if(h!=null&&(h.unstable_strictMode===!0&&(b=!0),h.identifierPrefix!==void 0&&(P=h.identifierPrefix),h.onRecoverableError!==void 0&&(Q=h.onRecoverableError)),c=fb(c,null,a,1,h??null,b,!1,P,Q),a[ko]=c.current,Qu(a),g)for(a=0;a<g.length;a++)h=g[a],b=h._getVersion,b=b(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,b]:c.mutableSourceEagerHydrationData.push(h,b);return new Uf(c)},ji.render=function(a,c,h){if(!Vf(c))throw Error(n(200));return Ff(null,a,c,!1,h)},ji.unmountComponentAtNode=function(a){if(!Vf(a))throw Error(n(40));return a._reactRootContainer?(ml(function(){Ff(null,null,a,!1,function(){a._reactRootContainer=null,a[ko]=null})}),!0):!1},ji.unstable_batchedUpdates=_0,ji.unstable_renderSubtreeIntoContainer=function(a,c,h,g){if(!Vf(h))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Ff(a,c,h,!1,g)},ji.version="18.3.1-next-f1338f8080-20240426",ji}var Ib;function Kx(){if(Ib)return N0.exports;Ib=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),N0.exports=P6(),N0.exports}var Ab;function M6(){if(Ab)return Wf;Ab=1;var r=Kx();return Wf.createRoot=r.createRoot,Wf.hydrateRoot=r.hydrateRoot,Wf}var N6=M6();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var xb="popstate";function O6(r={}){function e(s,o){let{pathname:l="/",search:u="",hash:d=""}=Gl(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),ww("",{pathname:l,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:Jd(o))}function i(s,o){zs(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return L6(e,n,i,r)}function yr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function zs(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function D6(){return Math.random().toString(36).substring(2,10)}function Tb(r,e){return{usr:r.state,key:r.key,idx:e}}function ww(r,e,n=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Gl(e):e,state:n,key:e&&e.key||i||D6()}}function Jd({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Gl(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function L6(r,e,n,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,u="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function v(){u="POP";let M=p(),W=M==null?null:M-f;f=M,d&&d({action:u,location:T.location,delta:W})}function E(M,W){u="PUSH";let z=ww(T.location,M,W);n&&n(z,M),f=p()+1;let j=Tb(z,f),se=T.createHref(z);try{l.pushState(j,"",se)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;s.location.assign(se)}o&&d&&d({action:u,location:T.location,delta:1})}function S(M,W){u="REPLACE";let z=ww(T.location,M,W);n&&n(z,M),f=p();let j=Tb(z,f),se=T.createHref(z);l.replaceState(j,"",se),o&&d&&d({action:u,location:T.location,delta:0})}function R(M){return B6(M)}let T={get action(){return u},get location(){return r(s,l)},listen(M){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(xb,v),d=M,()=>{s.removeEventListener(xb,v),d=null}},createHref(M){return e(s,M)},createURL:R,encodeLocation(M){let W=R(M);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:E,replace:S,go(M){return l.go(M)}};return T}function B6(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),yr(n,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Jd(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Hx(r,e,n="/"){return U6(r,e,n,!1)}function U6(r,e,n,i){let s=typeof e=="string"?Gl(e):e,o=Jo(s.pathname||"/",n);if(o==null)return null;let l=Gx(r);V6(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=J6(o);u=G6(l[d],f,i)}return u}function Gx(r,e=[],n=[],i="",s=!1){let o=(l,u,d=s,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&d)return;yr(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let v=Go([i,p.relativePath]),E=n.concat(p);l.children&&l.children.length>0&&(yr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Gx(l.children,e,E,v,d)),!(l.path==null&&!l.index)&&e.push({path:v,score:K6(v,l.index),routesMeta:E})};return r.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of Yx(l.path))o(l,u,!0,d)}),e}function Yx(r){let e=r.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=Yx(i.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>r.startsWith("/")&&d===""?"/":d)}function V6(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:H6(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var F6=/^:[\w-]+$/,z6=3,W6=2,j6=1,$6=10,q6=-2,Rb=r=>r==="*";function K6(r,e){let n=r.split("/"),i=n.length;return n.some(Rb)&&(i+=q6),e&&(i+=W6),n.filter(s=>!Rb(s)).reduce((s,o)=>s+(F6.test(o)?z6:o===""?j6:$6),i)}function H6(r,e){return r.length===e.length&&r.slice(0,-1).every((i,s)=>i===e[s])?r[r.length-1]-e[e.length-1]:0}function G6(r,e,n=!1){let{routesMeta:i}=r,s={},o="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,p=o==="/"?e:e.slice(o.length)||"/",v=Np({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),E=d.route;if(!v&&f&&n&&!i[i.length-1].route.index&&(v=Np({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Go([o,v.pathname]),pathnameBase:e3(Go([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=Go([o,v.pathnameBase]))}return l}function Np(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,i]=Y6(r.path,r.caseSensitive,r.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:v},E)=>{if(p==="*"){let R=u[E]||"";l=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const S=u[E];return v&&!S?f[p]=void 0:f[p]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:r}}function Y6(r,e=!1,n=!0){zs(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function J6(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zs(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Jo(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=r.charAt(n);return i&&i!=="/"?null:r.slice(n)||"/"}function Q6(r,e="/"){let{pathname:n,search:i="",hash:s=""}=typeof r=="string"?Gl(r):r;return{pathname:n?n.startsWith("/")?n:X6(n,e):e,search:t3(i),hash:n3(s)}}function X6(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function L0(r,e,n,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Z6(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jx(r){let e=Z6(r);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Qx(r,e,n,i=!1){let s;typeof r=="string"?s=Gl(r):(s={...r},yr(!s.pathname||!s.pathname.includes("?"),L0("?","pathname","search",s)),yr(!s.pathname||!s.pathname.includes("#"),L0("#","pathname","hash",s)),yr(!s.search||!s.search.includes("#"),L0("#","search","hash",s)));let o=r===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=n;else{let v=e.length-1;if(!i&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),v-=1;s.pathname=E.join("/")}u=v>=0?e[v]:"/"}let d=Q6(s,u),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var Go=r=>r.join("/").replace(/\/\/+/g,"/"),e3=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),t3=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,n3=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function r3(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Xx=["POST","PUT","PATCH","DELETE"];new Set(Xx);var i3=["GET",...Xx];new Set(i3);var Iu=pe.createContext(null);Iu.displayName="DataRouter";var _m=pe.createContext(null);_m.displayName="DataRouterState";pe.createContext(!1);var Zx=pe.createContext({isTransitioning:!1});Zx.displayName="ViewTransition";var s3=pe.createContext(new Map);s3.displayName="Fetchers";var o3=pe.createContext(null);o3.displayName="Await";var So=pe.createContext(null);So.displayName="Navigation";var mh=pe.createContext(null);mh.displayName="Location";var ra=pe.createContext({outlet:null,matches:[],isDataRoute:!1});ra.displayName="Route";var Cv=pe.createContext(null);Cv.displayName="RouteError";function a3(r,{relative:e}={}){yr(gh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=pe.useContext(So),{hash:s,pathname:o,search:l}=yh(r,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:Go([n,o])),i.createHref({pathname:u,search:l,hash:s})}function gh(){return pe.useContext(mh)!=null}function ia(){return yr(gh(),"useLocation() may be used only in the context of a <Router> component."),pe.useContext(mh).location}var eT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tT(r){pe.useContext(So).static||pe.useLayoutEffect(r)}function Pv(){let{isDataRoute:r}=pe.useContext(ra);return r?E3():l3()}function l3(){yr(gh(),"useNavigate() may be used only in the context of a <Router> component.");let r=pe.useContext(Iu),{basename:e,navigator:n}=pe.useContext(So),{matches:i}=pe.useContext(ra),{pathname:s}=ia(),o=JSON.stringify(Jx(i)),l=pe.useRef(!1);return tT(()=>{l.current=!0}),pe.useCallback((d,f={})=>{if(zs(l.current,eT),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=Qx(d,JSON.parse(o),s,f.relative==="path");r==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Go([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,o,s,r])}pe.createContext(null);function yh(r,{relative:e}={}){let{matches:n}=pe.useContext(ra),{pathname:i}=ia(),s=JSON.stringify(Jx(n));return pe.useMemo(()=>Qx(r,JSON.parse(s),i,e==="path"),[r,s,i,e])}function c3(r,e){return nT(r,e)}function nT(r,e,n,i,s){yr(gh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=pe.useContext(So),{matches:l}=pe.useContext(ra),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",v=u&&u.route;{let z=v&&v.path||"";rT(f,!v||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let E=ia(),S;if(e){let z=typeof e=="string"?Gl(e):e;yr(p==="/"||z.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${z.pathname}" was given in the \`location\` prop.`),S=z}else S=E;let R=S.pathname||"/",T=R;if(p!=="/"){let z=p.replace(/^\//,"").split("/");T="/"+R.replace(/^\//,"").split("/").slice(z.length).join("/")}let M=Hx(r,{pathname:T});zs(v||M!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),zs(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=p3(M&&M.map(z=>Object.assign({},z,{params:Object.assign({},d,z.params),pathname:Go([p,o.encodeLocation?o.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?p:Go([p,o.encodeLocation?o.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),l,n,i,s);return e&&W?pe.createElement(mh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},W):W}function u3(){let r=v3(),e=r3(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",r),l=pe.createElement(pe.Fragment,null,pe.createElement("p",null," Hey developer "),pe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",pe.createElement("code",{style:o},"ErrorBoundary")," or"," ",pe.createElement("code",{style:o},"errorElement")," prop on your route.")),pe.createElement(pe.Fragment,null,pe.createElement("h2",null,"Unexpected Application Error!"),pe.createElement("h3",{style:{fontStyle:"italic"}},e),n?pe.createElement("pre",{style:s},n):null,l)}var d3=pe.createElement(u3,null),h3=class extends pe.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?pe.createElement(ra.Provider,{value:this.props.routeContext},pe.createElement(Cv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function f3({routeContext:r,match:e,children:n}){let i=pe.useContext(Iu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),pe.createElement(ra.Provider,{value:r},n)}function p3(r,e=[],n=null,i=null,s=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,l=n?.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);yr(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:v,errors:E}=n,S=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!E||E[p.route.id]===void 0);if(p.route.lazy||S){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,v)=>{let E,S=!1,R=null,T=null;n&&(E=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||d3,u&&(d<0&&v===0?(rT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,T=null):d===v&&(S=!0,T=p.route.hydrateFallbackElement||null)));let M=e.concat(o.slice(0,v+1)),W=()=>{let z;return E?z=R:S?z=T:p.route.Component?z=pe.createElement(p.route.Component,null):p.route.element?z=p.route.element:z=f,pe.createElement(f3,{match:p,routeContext:{outlet:f,matches:M,isDataRoute:n!=null},children:z})};return n&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?pe.createElement(h3,{location:n.location,revalidation:n.revalidation,component:R,error:E,children:W(),routeContext:{outlet:null,matches:M,isDataRoute:!0},unstable_onError:i}):W()},null)}function Mv(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function m3(r){let e=pe.useContext(Iu);return yr(e,Mv(r)),e}function g3(r){let e=pe.useContext(_m);return yr(e,Mv(r)),e}function y3(r){let e=pe.useContext(ra);return yr(e,Mv(r)),e}function Nv(r){let e=y3(r),n=e.matches[e.matches.length-1];return yr(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function w3(){return Nv("useRouteId")}function v3(){let r=pe.useContext(Cv),e=g3("useRouteError"),n=Nv("useRouteError");return r!==void 0?r:e.errors?.[n]}function E3(){let{router:r}=m3("useNavigate"),e=Nv("useNavigate"),n=pe.useRef(!1);return tT(()=>{n.current=!0}),pe.useCallback(async(s,o={})=>{zs(n.current,eT),n.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:e,...o}))},[r,e])}var kb={};function rT(r,e,n){!e&&!kb[r]&&(kb[r]=!0,zs(!1,n))}pe.memo(_3);function _3({routes:r,future:e,state:n,unstable_onError:i}){return nT(r,void 0,n,i,e)}function Ca(r){yr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function b3({basename:r="/",children:e=null,location:n,navigationType:i="POP",navigator:s,static:o=!1}){yr(!gh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),u=pe.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof n=="string"&&(n=Gl(n));let{pathname:d="/",search:f="",hash:p="",state:v=null,key:E="default"}=n,S=pe.useMemo(()=>{let R=Jo(d,l);return R==null?null:{location:{pathname:R,search:f,hash:p,state:v,key:E},navigationType:i}},[l,d,f,p,v,E,i]);return zs(S!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:pe.createElement(So.Provider,{value:u},pe.createElement(mh.Provider,{children:e,value:S}))}function S3({children:r,location:e}){return c3(vw(r),e)}function vw(r,e=[]){let n=[];return pe.Children.forEach(r,(i,s)=>{if(!pe.isValidElement(i))return;let o=[...e,s];if(i.type===pe.Fragment){n.push.apply(n,vw(i.props.children,o));return}yr(i.type===Ca,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yr(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=vw(i.props.children,o)),n.push(l)}),n}var up="get",dp="application/x-www-form-urlencoded";function bm(r){return r!=null&&typeof r.tagName=="string"}function I3(r){return bm(r)&&r.tagName.toLowerCase()==="button"}function A3(r){return bm(r)&&r.tagName.toLowerCase()==="form"}function x3(r){return bm(r)&&r.tagName.toLowerCase()==="input"}function T3(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function R3(r,e){return r.button===0&&(!e||e==="_self")&&!T3(r)}var jf=null;function k3(){if(jf===null)try{new FormData(document.createElement("form"),0),jf=!1}catch{jf=!0}return jf}var C3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function B0(r){return r!=null&&!C3.has(r)?(zs(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dp}"`),null):r}function P3(r,e){let n,i,s,o,l;if(A3(r)){let u=r.getAttribute("action");i=u?Jo(u,e):null,n=r.getAttribute("method")||up,s=B0(r.getAttribute("enctype"))||dp,o=new FormData(r)}else if(I3(r)||x3(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||u.getAttribute("action");if(i=d?Jo(d,e):null,n=r.getAttribute("formmethod")||u.getAttribute("method")||up,s=B0(r.getAttribute("formenctype"))||B0(u.getAttribute("enctype"))||dp,o=new FormData(u,r),!k3()){let{name:f,type:p,value:v}=r;if(p==="image"){let E=f?`${f}.`:"";o.append(`${E}x`,"0"),o.append(`${E}y`,"0")}else f&&o.append(f,v)}}else{if(bm(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=up,i=null,s=dp,l=r}return o&&s==="text/plain"&&(l=o,o=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ov(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function M3(r,e,n){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Jo(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function N3(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function O3(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function D3(r,e,n){let i=await Promise.all(r.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await N3(o,n);return l.links?l.links():[]}return[]}));return V3(i.flat(1).filter(O3).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Cb(r,e,n,i,s,o){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,u=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let p=i.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function L3(r,e,{includeHydrateFallback:n}={}){return B3(r.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function B3(r){return[...new Set(r)]}function U3(r){let e={},n=Object.keys(r).sort();for(let i of n)e[i]=r[i];return e}function V3(r,e){let n=new Set;return new Set(e),r.reduce((i,s)=>{let o=JSON.stringify(U3(s));return n.has(o)||(n.add(o),i.push({key:o,link:s})),i},[])}function iT(){let r=pe.useContext(Iu);return Ov(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function F3(){let r=pe.useContext(_m);return Ov(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Dv=pe.createContext(void 0);Dv.displayName="FrameworkContext";function sT(){let r=pe.useContext(Dv);return Ov(r,"You must render this element inside a <HydratedRouter> element"),r}function z3(r,e){let n=pe.useContext(Dv),[i,s]=pe.useState(!1),[o,l]=pe.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:v}=e,E=pe.useRef(null);pe.useEffect(()=>{if(r==="render"&&l(!0),r==="viewport"){let T=W=>{W.forEach(z=>{l(z.isIntersecting)})},M=new IntersectionObserver(T,{threshold:.5});return E.current&&M.observe(E.current),()=>{M.disconnect()}}},[r]),pe.useEffect(()=>{if(i){let T=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(T)}}},[i]);let S=()=>{s(!0)},R=()=>{s(!1),l(!1)};return n?r!=="intent"?[o,E,{}]:[o,E,{onFocus:gd(u,S),onBlur:gd(d,R),onMouseEnter:gd(f,S),onMouseLeave:gd(p,R),onTouchStart:gd(v,S)}]:[!1,E,{}]}function gd(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function W3({page:r,...e}){let{router:n}=iT(),i=pe.useMemo(()=>Hx(n.routes,r,n.basename),[n.routes,r,n.basename]);return i?pe.createElement($3,{page:r,matches:i,...e}):null}function j3(r){let{manifest:e,routeModules:n}=sT(),[i,s]=pe.useState([]);return pe.useEffect(()=>{let o=!1;return D3(r,e,n).then(l=>{o||s(l)}),()=>{o=!0}},[r,e,n]),i}function $3({page:r,matches:e,...n}){let i=ia(),{manifest:s,routeModules:o}=sT(),{basename:l}=iT(),{loaderData:u,matches:d}=F3(),f=pe.useMemo(()=>Cb(r,e,d,s,i,"data"),[r,e,d,s,i]),p=pe.useMemo(()=>Cb(r,e,d,s,i,"assets"),[r,e,d,s,i]),v=pe.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let R=new Set,T=!1;if(e.forEach(W=>{let z=s.routes[W.route.id];!z||!z.hasLoader||(!f.some(j=>j.route.id===W.route.id)&&W.route.id in u&&o[W.route.id]?.shouldRevalidate||z.hasClientLoader?T=!0:R.add(W.route.id))}),R.size===0)return[];let M=M3(r,l,"data");return T&&R.size>0&&M.searchParams.set("_routes",e.filter(W=>R.has(W.route.id)).map(W=>W.route.id).join(",")),[M.pathname+M.search]},[l,u,i,s,f,e,r,o]),E=pe.useMemo(()=>L3(p,s),[p,s]),S=j3(p);return pe.createElement(pe.Fragment,null,v.map(R=>pe.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...n})),E.map(R=>pe.createElement("link",{key:R,rel:"modulepreload",href:R,...n})),S.map(({key:R,link:T})=>pe.createElement("link",{key:R,nonce:n.nonce,...T})))}function q3(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var oT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oT&&(window.__reactRouterVersion="7.8.2")}catch{}function K3({basename:r,children:e,window:n}){let i=pe.useRef();i.current==null&&(i.current=O6({window:n,v5Compat:!0}));let s=i.current,[o,l]=pe.useState({action:s.action,location:s.location}),u=pe.useCallback(d=>{pe.startTransition(()=>l(d))},[l]);return pe.useLayoutEffect(()=>s.listen(u),[s,u]),pe.createElement(b3,{basename:r,children:e,location:o.location,navigationType:o.action,navigator:s})}var aT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lT=pe.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:p,viewTransition:v,...E},S){let{basename:R}=pe.useContext(So),T=typeof f=="string"&&aT.test(f),M,W=!1;if(typeof f=="string"&&T&&(M=f,oT))try{let D=new URL(window.location.href),U=f.startsWith("//")?new URL(D.protocol+f):new URL(f),q=Jo(U.pathname,R);U.origin===D.origin&&q!=null?f=q+U.search+U.hash:W=!0}catch{zs(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=a3(f,{relative:s}),[j,se,le]=z3(i,E),de=J3(f,{replace:l,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:v});function Z(D){e&&e(D),D.defaultPrevented||de(D)}let $=pe.createElement("a",{...E,...le,href:M||z,onClick:W||o?e:Z,ref:q3(S,se),target:d,"data-discover":!T&&n==="render"?"true":void 0});return j&&!T?pe.createElement(pe.Fragment,null,$,pe.createElement(W3,{page:z})):$});lT.displayName="Link";var H3=pe.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...f},p){let v=yh(l,{relative:f.relative}),E=ia(),S=pe.useContext(_m),{navigator:R,basename:T}=pe.useContext(So),M=S!=null&&tM(v)&&u===!0,W=R.encodeLocation?R.encodeLocation(v).pathname:v.pathname,z=E.pathname,j=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(z=z.toLowerCase(),j=j?j.toLowerCase():null,W=W.toLowerCase()),j&&T&&(j=Jo(j,T)||j);const se=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let le=z===W||!s&&z.startsWith(W)&&z.charAt(se)==="/",de=j!=null&&(j===W||!s&&j.startsWith(W)&&j.charAt(W.length)==="/"),Z={isActive:le,isPending:de,isTransitioning:M},$=le?e:void 0,D;typeof i=="function"?D=i(Z):D=[i,le?"active":null,de?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(Z):o;return pe.createElement(lT,{...f,"aria-current":$,className:D,ref:p,style:U,to:l,viewTransition:u},typeof d=="function"?d(Z):d)});H3.displayName="NavLink";var G3=pe.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:s,state:o,method:l=up,action:u,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:v,...E},S)=>{let R=Z3(),T=eM(u,{relative:f}),M=l.toLowerCase()==="get"?"get":"post",W=typeof u=="string"&&aT.test(u),z=j=>{if(d&&d(j),j.defaultPrevented)return;j.preventDefault();let se=j.nativeEvent.submitter,le=se?.getAttribute("formmethod")||l;R(se||j.currentTarget,{fetcherKey:e,method:le,navigate:n,replace:s,state:o,relative:f,preventScrollReset:p,viewTransition:v})};return pe.createElement("form",{ref:S,method:M,action:T,onSubmit:i?d:z,...E,"data-discover":!W&&r==="render"?"true":void 0})});G3.displayName="Form";function Y3(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cT(r){let e=pe.useContext(Iu);return yr(e,Y3(r)),e}function J3(r,{target:e,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=Pv(),d=ia(),f=yh(r,{relative:o});return pe.useCallback(p=>{if(R3(p,e)){p.preventDefault();let v=n!==void 0?n:Jd(d)===Jd(f);u(r,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,f,n,i,e,r,s,o,l])}var Q3=0,X3=()=>`__${String(++Q3)}__`;function Z3(){let{router:r}=cT("useSubmit"),{basename:e}=pe.useContext(So),n=w3();return pe.useCallback(async(i,s={})=>{let{action:o,method:l,encType:u,formData:d,body:f}=P3(i,e);if(s.navigate===!1){let p=s.fetcherKey||X3();await r.fetch(p,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await r.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,e,n])}function eM(r,{relative:e}={}){let{basename:n}=pe.useContext(So),i=pe.useContext(ra);yr(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...yh(r||".",{relative:e})},l=ia();if(r==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(v=>v).forEach(v=>u.append("index",v));let p=u.toString();o.search=p?`?${p}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Go([n,o.pathname])),Jd(o)}function tM(r,{relative:e}={}){let n=pe.useContext(Zx);yr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=cT("useViewTransitionState"),s=yh(r,{relative:e});if(!n.isTransitioning)return!1;let o=Jo(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=Jo(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Np(s.pathname,l)!=null||Np(s.pathname,o)!=null}var nM=Kx(),U0,Pb;function rM(){if(Pb)return U0;Pb=1;var r=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",i=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(o,l){if(o===l)return!0;if(o&&l&&typeof o=="object"&&typeof l=="object"){if(o.constructor!==l.constructor)return!1;var u,d,f;if(Array.isArray(o)){if(u=o.length,u!=l.length)return!1;for(d=u;d--!==0;)if(!s(o[d],l[d]))return!1;return!0}var p;if(e&&o instanceof Map&&l instanceof Map){if(o.size!==l.size)return!1;for(p=o.entries();!(d=p.next()).done;)if(!l.has(d.value[0]))return!1;for(p=o.entries();!(d=p.next()).done;)if(!s(d.value[1],l.get(d.value[0])))return!1;return!0}if(n&&o instanceof Set&&l instanceof Set){if(o.size!==l.size)return!1;for(p=o.entries();!(d=p.next()).done;)if(!l.has(d.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(l)){if(u=o.length,u!=l.length)return!1;for(d=u;d--!==0;)if(o[d]!==l[d])return!1;return!0}if(o.constructor===RegExp)return o.source===l.source&&o.flags===l.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof l.valueOf=="function")return o.valueOf()===l.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof l.toString=="function")return o.toString()===l.toString();if(f=Object.keys(o),u=f.length,u!==Object.keys(l).length)return!1;for(d=u;d--!==0;)if(!Object.prototype.hasOwnProperty.call(l,f[d]))return!1;if(r&&o instanceof Element)return!1;for(d=u;d--!==0;)if(!((f[d]==="_owner"||f[d]==="__v"||f[d]==="__o")&&o.$$typeof)&&!s(o[f[d]],l[f[d]]))return!1;return!0}return o!==o&&l!==l}return U0=function(l,u){try{return s(l,u)}catch(d){if((d.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw d}},U0}var iM=rM();const sM=nl(iM);var V0,Mb;function oM(){if(Mb)return V0;Mb=1;var r=function(e,n,i,s,o,l,u,d){if(!e){var f;if(n===void 0)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[i,s,o,l,u,d],v=0;f=new Error(n.replace(/%s/g,function(){return p[v++]})),f.name="Invariant Violation"}throw f.framesToPop=1,f}};return V0=r,V0}var aM=oM();const Nb=nl(aM);var F0,Ob;function lM(){return Ob||(Ob=1,F0=function(e,n,i,s){var o=i?i.call(s,e,n):void 0;if(o!==void 0)return!!o;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var l=Object.keys(e),u=Object.keys(n);if(l.length!==u.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(n),f=0;f<l.length;f++){var p=l[f];if(!d(p))return!1;var v=e[p],E=n[p];if(o=i?i.call(s,v,E,p):void 0,o===!1||o===void 0&&v!==E)return!1}return!0}),F0}var cM=lM();const uM=nl(cM);var uT=(r=>(r.BASE="base",r.BODY="body",r.HEAD="head",r.HTML="html",r.LINK="link",r.META="meta",r.NOSCRIPT="noscript",r.SCRIPT="script",r.STYLE="style",r.TITLE="title",r.FRAGMENT="Symbol(react.fragment)",r))(uT||{}),z0={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Db=Object.values(uT),Lv={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},dM=Object.entries(Lv).reduce((r,[e,n])=>(r[n]=e,r),{}),Bs="data-rh",Qc={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Xc=(r,e)=>{for(let n=r.length-1;n>=0;n-=1){const i=r[n];if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}return null},hM=r=>{let e=Xc(r,"title");const n=Xc(r,Qc.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const i=Xc(r,Qc.DEFAULT_TITLE);return e||i||void 0},fM=r=>Xc(r,Qc.ON_CHANGE_CLIENT_STATE)||(()=>{}),W0=(r,e)=>e.filter(n=>typeof n[r]<"u").map(n=>n[r]).reduce((n,i)=>({...n,...i}),{}),pM=(r,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,i)=>{if(!n.length){const s=Object.keys(i);for(let o=0;o<s.length;o+=1){const u=s[o].toLowerCase();if(r.indexOf(u)!==-1&&i[u])return n.concat(i)}}return n},[]),mM=r=>console&&typeof console.warn=="function"&&console.warn(r),yd=(r,e,n)=>{const i={};return n.filter(s=>Array.isArray(s[r])?!0:(typeof s[r]<"u"&&mM(`Helmet: ${r} should be of type "Array". Instead found type "${typeof s[r]}"`),!1)).map(s=>s[r]).reverse().reduce((s,o)=>{const l={};o.filter(d=>{let f;const p=Object.keys(d);for(let E=0;E<p.length;E+=1){const S=p[E],R=S.toLowerCase();e.indexOf(R)!==-1&&!(f==="rel"&&d[f].toLowerCase()==="canonical")&&!(R==="rel"&&d[R].toLowerCase()==="stylesheet")&&(f=R),e.indexOf(S)!==-1&&(S==="innerHTML"||S==="cssText"||S==="itemprop")&&(f=S)}if(!f||!d[f])return!1;const v=d[f].toLowerCase();return i[f]||(i[f]={}),l[f]||(l[f]={}),i[f][v]?!1:(l[f][v]=!0,!0)}).reverse().forEach(d=>s.push(d));const u=Object.keys(l);for(let d=0;d<u.length;d+=1){const f=u[d],p={...i[f],...l[f]};i[f]=p}return s},[]).reverse()},gM=(r,e)=>{if(Array.isArray(r)&&r.length){for(let n=0;n<r.length;n+=1)if(r[n][e])return!0}return!1},yM=r=>({baseTag:pM(["href"],r),bodyAttributes:W0("bodyAttributes",r),defer:Xc(r,Qc.DEFER),encode:Xc(r,Qc.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:W0("htmlAttributes",r),linkTags:yd("link",["rel","href"],r),metaTags:yd("meta",["name","charset","http-equiv","property","itemprop"],r),noscriptTags:yd("noscript",["innerHTML"],r),onChangeClientState:fM(r),scriptTags:yd("script",["src","innerHTML"],r),styleTags:yd("style",["cssText"],r),title:hM(r),titleAttributes:W0("titleAttributes",r),prioritizeSeoTags:gM(r,Qc.PRIORITIZE_SEO_TAGS)}),dT=r=>Array.isArray(r)?r.join(""):r,wM=(r,e)=>{const n=Object.keys(r);for(let i=0;i<n.length;i+=1)if(e[n[i]]&&e[n[i]].includes(r[n[i]]))return!0;return!1},j0=(r,e)=>Array.isArray(r)?r.reduce((n,i)=>(wM(i,e)?n.priority.push(i):n.default.push(i),n),{priority:[],default:[]}):{default:r,priority:[]},Lb=(r,e)=>({...r,[e]:void 0}),vM=["noscript","script","style"],Ew=(r,e=!0)=>e===!1?String(r):String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),hT=r=>Object.keys(r).reduce((e,n)=>{const i=typeof r[n]<"u"?`${n}="${r[n]}"`:`${n}`;return e?`${e} ${i}`:i},""),EM=(r,e,n,i)=>{const s=hT(n),o=dT(e);return s?`<${r} ${Bs}="true" ${s}>${Ew(o,i)}</${r}>`:`<${r} ${Bs}="true">${Ew(o,i)}</${r}>`},_M=(r,e,n=!0)=>e.reduce((i,s)=>{const o=s,l=Object.keys(o).filter(f=>!(f==="innerHTML"||f==="cssText")).reduce((f,p)=>{const v=typeof o[p]>"u"?p:`${p}="${Ew(o[p],n)}"`;return f?`${f} ${v}`:v},""),u=o.innerHTML||o.cssText||"",d=vM.indexOf(r)===-1;return`${i}<${r} ${Bs}="true" ${l}${d?"/>":`>${u}</${r}>`}`},""),fT=(r,e={})=>Object.keys(r).reduce((n,i)=>{const s=Lv[i];return n[s||i]=r[i],n},e),bM=(r,e,n)=>{const i={key:e,[Bs]:!0},s=fT(n,i);return[it.createElement("title",s,e)]},hp=(r,e)=>e.map((n,i)=>{const s={key:i,[Bs]:!0};return Object.keys(n).forEach(o=>{const u=Lv[o]||o;if(u==="innerHTML"||u==="cssText"){const d=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:d}}else s[u]=n[o]}),it.createElement(r,s)}),vs=(r,e,n=!0)=>{switch(r){case"title":return{toComponent:()=>bM(r,e.title,e.titleAttributes),toString:()=>EM(r,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>fT(e),toString:()=>hT(e)};default:return{toComponent:()=>hp(r,e),toString:()=>_M(r,e,n)}}},SM=({metaTags:r,linkTags:e,scriptTags:n,encode:i})=>{const s=j0(r,z0.meta),o=j0(e,z0.link),l=j0(n,z0.script);return{priorityMethods:{toComponent:()=>[...hp("meta",s.priority),...hp("link",o.priority),...hp("script",l.priority)],toString:()=>`${vs("meta",s.priority,i)} ${vs("link",o.priority,i)} ${vs("script",l.priority,i)}`},metaTags:s.default,linkTags:o.default,scriptTags:l.default}},IM=r=>{const{baseTag:e,bodyAttributes:n,encode:i=!0,htmlAttributes:s,noscriptTags:o,styleTags:l,title:u="",titleAttributes:d,prioritizeSeoTags:f}=r;let{linkTags:p,metaTags:v,scriptTags:E}=r,S={toComponent:()=>{},toString:()=>""};return f&&({priorityMethods:S,linkTags:p,metaTags:v,scriptTags:E}=SM(r)),{priority:S,base:vs("base",e,i),bodyAttributes:vs("bodyAttributes",n,i),htmlAttributes:vs("htmlAttributes",s,i),link:vs("link",p,i),meta:vs("meta",v,i),noscript:vs("noscript",o,i),script:vs("script",E,i),style:vs("style",l,i),title:vs("title",{title:u,titleAttributes:d},i)}},_w=IM,$f=[],pT=!!(typeof window<"u"&&window.document&&window.document.createElement),bw=class{instances=[];canUseDOM=pT;context;value={setHelmet:r=>{this.context.helmet=r},helmetInstances:{get:()=>this.canUseDOM?$f:this.instances,add:r=>{(this.canUseDOM?$f:this.instances).push(r)},remove:r=>{const e=(this.canUseDOM?$f:this.instances).indexOf(r);(this.canUseDOM?$f:this.instances).splice(e,1)}}};constructor(r,e){this.context=r,this.canUseDOM=e||!1,e||(r.helmet=_w({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},AM={},mT=it.createContext(AM),gT=class yT extends pe.Component{static canUseDOM=pT;helmetData;constructor(e){super(e),this.helmetData=new bw(this.props.context||{},yT.canUseDOM)}render(){return it.createElement(mT.Provider,{value:this.helmetData.value},this.props.children)}},Lc=(r,e)=>{const n=document.head||document.querySelector("head"),i=n.querySelectorAll(`${r}[${Bs}]`),s=[].slice.call(i),o=[];let l;return e&&e.length&&e.forEach(u=>{const d=document.createElement(r);for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f))if(f==="innerHTML")d.innerHTML=u.innerHTML;else if(f==="cssText")d.styleSheet?d.styleSheet.cssText=u.cssText:d.appendChild(document.createTextNode(u.cssText));else{const p=f,v=typeof u[p]>"u"?"":u[p];d.setAttribute(f,v)}d.setAttribute(Bs,"true"),s.some((f,p)=>(l=p,d.isEqualNode(f)))?s.splice(l,1):o.push(d)}),s.forEach(u=>u.parentNode?.removeChild(u)),o.forEach(u=>n.appendChild(u)),{oldTags:s,newTags:o}},Sw=(r,e)=>{const n=document.getElementsByTagName(r)[0];if(!n)return;const i=n.getAttribute(Bs),s=i?i.split(","):[],o=[...s],l=Object.keys(e);for(const u of l){const d=e[u]||"";n.getAttribute(u)!==d&&n.setAttribute(u,d),s.indexOf(u)===-1&&s.push(u);const f=o.indexOf(u);f!==-1&&o.splice(f,1)}for(let u=o.length-1;u>=0;u-=1)n.removeAttribute(o[u]);s.length===o.length?n.removeAttribute(Bs):n.getAttribute(Bs)!==l.join(",")&&n.setAttribute(Bs,l.join(","))},xM=(r,e)=>{typeof r<"u"&&document.title!==r&&(document.title=dT(r)),Sw("title",e)},Bb=(r,e)=>{const{baseTag:n,bodyAttributes:i,htmlAttributes:s,linkTags:o,metaTags:l,noscriptTags:u,onChangeClientState:d,scriptTags:f,styleTags:p,title:v,titleAttributes:E}=r;Sw("body",i),Sw("html",s),xM(v,E);const S={baseTag:Lc("base",n),linkTags:Lc("link",o),metaTags:Lc("meta",l),noscriptTags:Lc("noscript",u),scriptTags:Lc("script",f),styleTags:Lc("style",p)},R={},T={};Object.keys(S).forEach(M=>{const{newTags:W,oldTags:z}=S[M];W.length&&(R[M]=W),z.length&&(T[M]=S[M].oldTags)}),e&&e(),d(r,R,T)},wd=null,TM=r=>{wd&&cancelAnimationFrame(wd),r.defer?wd=requestAnimationFrame(()=>{Bb(r,()=>{wd=null})}):(Bb(r),wd=null)},RM=TM,Ub=class extends pe.Component{rendered=!1;shouldComponentUpdate(r){return!uM(r,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:r}=this.props.context;r.remove(this),this.emitChange()}emitChange(){const{helmetInstances:r,setHelmet:e}=this.props.context;let n=null;const i=yM(r.get().map(s=>{const o={...s.props};return delete o.context,o}));gT.canUseDOM?RM(i):_w&&(n=_w(i)),e(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:r}=this.props.context;r.add(this),this.emitChange()}render(){return this.init(),null}},kM=class extends pe.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(r){return!sM(Lb(this.props,"helmetData"),Lb(r,"helmetData"))}mapNestedChildrenToProps(r,e){if(!e)return null;switch(r.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${r.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(r,e,n,i){return{...e,[r.type]:[...e[r.type]||[],{...n,...this.mapNestedChildrenToProps(r,i)}]}}mapObjectTypeChildren(r,e,n,i){switch(r.type){case"title":return{...e,[r.type]:i,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[r.type]:{...n}}}}mapArrayTypeChildrenToProps(r,e){let n={...e};return Object.keys(r).forEach(i=>{n={...n,[i]:r[i]}}),n}warnOnInvalidChildren(r,e){return Nb(Db.some(n=>r.type===n),typeof r.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Db.join(", ")} are allowed. Helmet does not support rendering <${r.type}> elements. Refer to our API for more information.`),Nb(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${r.type}>. Did you forget to wrap your children in braces? ( <${r.type}>{\`\`}</${r.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(r,e){let n={};return it.Children.forEach(r,i=>{if(!i||!i.props)return;const{children:s,...o}=i.props,l=Object.keys(o).reduce((d,f)=>(d[dM[f]||f]=o[f],d),{});let{type:u}=i;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(i,s),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(i,n,l,s);break;default:e=this.mapObjectTypeChildren(i,e,l,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:r,...e}=this.props;let n={...e},{helmetData:i}=e;if(r&&(n=this.mapChildrenToProps(r,n)),i&&!(i instanceof bw)){const s=i;i=new bw(s.context,!0),delete n.helmetData}return i?it.createElement(Ub,{...n,context:i.value}):it.createElement(mT.Consumer,null,s=>it.createElement(Ub,{...n,context:s}))}};const CM="modulepreload",PM=function(r){return"/solstice_SOLS/"+r},Vb={},Ba=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){let d=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");s=d(n.map(f=>{if(f=PM(f),f in Vb)return;Vb[f]=!0;const p=f.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${v}`))return;const E=document.createElement("link");if(E.rel=p?"stylesheet":CM,p||(E.as="script"),E.crossOrigin="",E.href=f,u&&E.setAttribute("nonce",u),document.head.appendChild(E),p)return new Promise((S,R)=>{E.addEventListener("load",S),E.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},MM=()=>{};var Fb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let s=r.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},NM=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const s=r[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=r[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=r[n++],l=r[n++],u=r[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=r[n++],l=r[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},vT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<r.length;s+=3){const o=r[s],l=s+1<r.length,u=l?r[s+1]:0,d=s+2<r.length,f=d?r[s+2]:0,p=o>>2,v=(o&3)<<4|u>>4;let E=(u&15)<<2|f>>6,S=f&63;d||(S=64,l||(E=64)),i.push(n[p],n[v],n[E],n[S])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(wT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):NM(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<r.length;){const o=n[r.charAt(s++)],u=s<r.length?n[r.charAt(s)]:0;++s;const f=s<r.length?n[r.charAt(s)]:64;++s;const v=s<r.length?n[r.charAt(s)]:64;if(++s,o==null||u==null||f==null||v==null)throw new OM;const E=o<<2|u>>4;if(i.push(E),f!==64){const S=u<<4&240|f>>2;if(i.push(S),v!==64){const R=f<<6&192|v;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class OM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DM=function(r){const e=wT(r);return vT.encodeByteArray(e,!0)},Op=function(r){return DM(r).replace(/\./g,"")},ET=function(r){try{return vT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=()=>LM().__FIREBASE_DEFAULTS__,UM=()=>{if(typeof process>"u"||typeof Fb>"u")return;const r=Fb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},VM=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ET(r[1]);return e&&JSON.parse(e)},Sm=()=>{try{return MM()||BM()||UM()||VM()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},_T=r=>Sm()?.emulatorHosts?.[r],FM=r=>{const e=_T(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},bT=()=>Sm()?.config,ST=r=>Sm()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function IT(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Op(JSON.stringify(n)),Op(JSON.stringify(l)),""].join(".")}const Ud={};function jM(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ud))Ud[e]?r.emulator.push(e):r.prod.push(e);return r}function $M(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let zb=!1;function AT(r,e){if(typeof window>"u"||typeof document>"u"||!Au(window.location.host)||Ud[r]===e||Ud[r]||zb)return;Ud[r]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",o=jM().prod.length>0;function l(){const E=document.getElementById(i);E&&E.remove()}function u(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{zb=!0,l()},E}function p(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=$M(i),S=n("text"),R=document.getElementById(S)||document.createElement("span"),T=n("learnmore"),M=document.getElementById(T)||document.createElement("a"),W=n("preprendIcon"),z=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const j=E.element;u(j),p(M,T);const se=f();d(z,W),j.append(z,R,M,se),document.body.appendChild(j)}o?(R.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ki())}function KM(){const r=Sm()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GM(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function YM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JM(){const r=ki();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function QM(){return!KM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XM(){try{return typeof indexedDB=="object"}catch{return!1}}function ZM(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="FirebaseError";class sa extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=e4,Object.setPrototypeOf(this,sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wh.prototype.create)}}class wh{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?t4(o,i):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new sa(s,u,i)}}function t4(r,e){return r.replace(n4,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const n4=/\{\$([^}]+)}/g;function r4(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Vl(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=r[s],l=e[s];if(Wb(o)&&Wb(l)){if(!Vl(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Wb(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function i4(r,e){const n=new s4(r,e);return n.subscribe.bind(n)}class s4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");o4(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=$0),s.error===void 0&&(s.error=$0),s.complete===void 0&&(s.complete=$0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function o4(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function $0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(r){return r&&r._delegate?r._delegate:r}class Fl{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new zM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(c4(e))try{this.getOrInitializeService({instanceIdentifier:bl})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=bl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bl){return this.instances.has(e)}getOptions(e=bl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:l4(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=bl){return this.component?this.component.multipleInstances?e:bl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function l4(r){return r===bl?void 0:r}function c4(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new a4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Cn||(Cn={}));const d4={debug:Cn.DEBUG,verbose:Cn.VERBOSE,info:Cn.INFO,warn:Cn.WARN,error:Cn.ERROR,silent:Cn.SILENT},h4=Cn.INFO,f4={[Cn.DEBUG]:"log",[Cn.VERBOSE]:"log",[Cn.INFO]:"info",[Cn.WARN]:"warn",[Cn.ERROR]:"error"},p4=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),s=f4[e];if(s)console[s](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bv{constructor(e){this.name=e,this._logLevel=h4,this._logHandler=p4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Cn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?d4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Cn.DEBUG,...e),this._logHandler(this,Cn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Cn.VERBOSE,...e),this._logHandler(this,Cn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Cn.INFO,...e),this._logHandler(this,Cn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Cn.WARN,...e),this._logHandler(this,Cn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Cn.ERROR,...e),this._logHandler(this,Cn.ERROR,...e)}}const m4=(r,e)=>e.some(n=>r instanceof n);let jb,$b;function g4(){return jb||(jb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function y4(){return $b||($b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xT=new WeakMap,Iw=new WeakMap,TT=new WeakMap,q0=new WeakMap,Uv=new WeakMap;function w4(r){const e=new Promise((n,i)=>{const s=()=>{r.removeEventListener("success",o),r.removeEventListener("error",l)},o=()=>{n(Wa(r.result)),s()},l=()=>{i(r.error),s()};r.addEventListener("success",o),r.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&xT.set(n,r)}).catch(()=>{}),Uv.set(e,r),e}function v4(r){if(Iw.has(r))return;const e=new Promise((n,i)=>{const s=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",l),r.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",o),r.addEventListener("error",l),r.addEventListener("abort",l)});Iw.set(r,e)}let Aw={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Iw.get(r);if(e==="objectStoreNames")return r.objectStoreNames||TT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wa(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function E4(r){Aw=r(Aw)}function _4(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(K0(this),e,...n);return TT.set(i,e.sort?e.sort():[e]),Wa(i)}:y4().includes(r)?function(...e){return r.apply(K0(this),e),Wa(xT.get(this))}:function(...e){return Wa(r.apply(K0(this),e))}}function b4(r){return typeof r=="function"?_4(r):(r instanceof IDBTransaction&&v4(r),m4(r,g4())?new Proxy(r,Aw):r)}function Wa(r){if(r instanceof IDBRequest)return w4(r);if(q0.has(r))return q0.get(r);const e=b4(r);return e!==r&&(q0.set(r,e),Uv.set(e,r)),e}const K0=r=>Uv.get(r);function S4(r,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(r,e),u=Wa(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Wa(l.result),d.oldVersion,d.newVersion,Wa(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const I4=["get","getKey","getAll","getAllKeys","count"],A4=["put","add","delete","clear"],H0=new Map;function qb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(H0.get(e))return H0.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=A4.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||I4.includes(n)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&d.done]))[0]};return H0.set(e,o),o}E4(r=>({...r,get:(e,n,i)=>qb(e,n)||r.get(e,n,i),has:(e,n)=>!!qb(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(T4(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function T4(r){return r.getComponent()?.type==="VERSION"}const xw="@firebase/app",Kb="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new Bv("@firebase/app"),R4="@firebase/app-compat",k4="@firebase/analytics-compat",C4="@firebase/analytics",P4="@firebase/app-check-compat",M4="@firebase/app-check",N4="@firebase/auth",O4="@firebase/auth-compat",D4="@firebase/database",L4="@firebase/data-connect",B4="@firebase/database-compat",U4="@firebase/functions",V4="@firebase/functions-compat",F4="@firebase/installations",z4="@firebase/installations-compat",W4="@firebase/messaging",j4="@firebase/messaging-compat",$4="@firebase/performance",q4="@firebase/performance-compat",K4="@firebase/remote-config",H4="@firebase/remote-config-compat",G4="@firebase/storage",Y4="@firebase/storage-compat",J4="@firebase/firestore",Q4="@firebase/ai",X4="@firebase/firestore-compat",Z4="firebase",eN="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="[DEFAULT]",tN={[xw]:"fire-core",[R4]:"fire-core-compat",[C4]:"fire-analytics",[k4]:"fire-analytics-compat",[M4]:"fire-app-check",[P4]:"fire-app-check-compat",[N4]:"fire-auth",[O4]:"fire-auth-compat",[D4]:"fire-rtdb",[L4]:"fire-data-connect",[B4]:"fire-rtdb-compat",[U4]:"fire-fn",[V4]:"fire-fn-compat",[F4]:"fire-iid",[z4]:"fire-iid-compat",[W4]:"fire-fcm",[j4]:"fire-fcm-compat",[$4]:"fire-perf",[q4]:"fire-perf-compat",[K4]:"fire-rc",[H4]:"fire-rc-compat",[G4]:"fire-gcs",[Y4]:"fire-gcs-compat",[J4]:"fire-fst",[X4]:"fire-fst-compat",[Q4]:"fire-vertex","fire-js":"fire-js",[Z4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=new Map,nN=new Map,Rw=new Map;function Hb(r,e){try{r.container.addComponent(e)}catch(n){Qo.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function uu(r){const e=r.name;if(Rw.has(e))return Qo.debug(`There were multiple attempts to register component ${e}.`),!1;Rw.set(e,r);for(const n of Dp.values())Hb(n,r);for(const n of nN.values())Hb(n,r);return!0}function Vv(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function lo(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ja=new wh("app","Firebase",rN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ja.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=eN;function RT(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i={name:Tw,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw ja.create("bad-app-name",{appName:String(s)});if(n||(n=bT()),!n)throw ja.create("no-options");const o=Dp.get(s);if(o){if(Vl(n,o.options)&&Vl(i,o.config))return o;throw ja.create("duplicate-app",{appName:s})}const l=new u4(s);for(const d of Rw.values())l.addComponent(d);const u=new iN(n,i,l);return Dp.set(s,u),u}function kT(r=Tw){const e=Dp.get(r);if(!e&&r===Tw&&bT())return RT();if(!e)throw ja.create("no-app",{appName:r});return e}function $a(r,e,n){let i=tN[r]??r;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qo.warn(l.join(" "));return}uu(new Fl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="firebase-heartbeat-database",oN=1,Qd="firebase-heartbeat-store";let G0=null;function CT(){return G0||(G0=S4(sN,oN,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Qd)}catch(n){console.warn(n)}}}}).catch(r=>{throw ja.create("idb-open",{originalErrorMessage:r.message})})),G0}async function aN(r){try{const n=(await CT()).transaction(Qd),i=await n.objectStore(Qd).get(PT(r));return await n.done,i}catch(e){if(e instanceof sa)Qo.warn(e.message);else{const n=ja.create("idb-get",{originalErrorMessage:e?.message});Qo.warn(n.message)}}}async function Gb(r,e){try{const i=(await CT()).transaction(Qd,"readwrite");await i.objectStore(Qd).put(e,PT(r)),await i.done}catch(n){if(n instanceof sa)Qo.warn(n.message);else{const i=ja.create("idb-set",{originalErrorMessage:n?.message});Qo.warn(i.message)}}}function PT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=1024,cN=30;class uN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>cN){const s=fN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Qo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Yb(),{heartbeatsToSend:n,unsentEntries:i}=dN(this._heartbeatsCache.heartbeats),s=Op(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Qo.warn(e),""}}}function Yb(){return new Date().toISOString().substring(0,10)}function dN(r,e=lN){const n=[];let i=r.slice();for(const s of r){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Jb(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Jb(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class hN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XM()?ZM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Gb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Gb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Jb(r){return Op(JSON.stringify({version:2,heartbeats:r})).length}function fN(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(r){uu(new Fl("platform-logger",e=>new x4(e),"PRIVATE")),uu(new Fl("heartbeat",e=>new uN(e),"PRIVATE")),$a(xw,Kb,r),$a(xw,Kb,"esm2020"),$a("fire-js","")}pN("");var mN="firebase",gN="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$a(mN,gN,"app");function MT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yN=MT,NT=new wh("auth","Firebase",MT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=new Bv("@firebase/auth");function wN(r,...e){Lp.logLevel<=Cn.WARN&&Lp.warn(`Auth (${xu}): ${r}`,...e)}function fp(r,...e){Lp.logLevel<=Cn.ERROR&&Lp.error(`Auth (${xu}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(r,...e){throw Fv(r,...e)}function po(r,...e){return Fv(r,...e)}function OT(r,e,n){const i={...yN(),[e]:n};return new wh("auth","Firebase",i).create(e,{appName:r.name})}function Ll(r){return OT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fv(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return NT.create(r,...e)}function nn(r,e,...n){if(!r)throw Fv(e,...n)}function jo(r){const e="INTERNAL ASSERTION FAILED: "+r;throw fp(e),new Error(e)}function Zo(r,e){r||jo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(){return typeof self<"u"&&self.location?.href||""}function vN(){return Qb()==="http:"||Qb()==="https:"}function Qb(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vN()||GM()||"connection"in navigator)?navigator.onLine:!0}function _N(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zo(n>e,"Short delay should be less than long delay!"),this.isMobile=qM()||YM()}get(){return EN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(r,e){Zo(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IN=new Eh(3e4,6e4);function Wv(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Tu(r,e,n,i,s={}){return LT(r,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const u=vh({key:r.config.apiKey,...l}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const f={method:e,headers:d,...o};return HM()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&Au(r.emulatorConfig.host)&&(f.credentials="include"),DT.fetch()(await BT(r,r.config.apiHost,n,u),f)})}async function LT(r,e,n){r._canInitEmulator=!1;const i={...bN,...e};try{const s=new xN(r),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw qf(r,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw qf(r,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw qf(r,"email-already-in-use",l);if(d==="USER_DISABLED")throw qf(r,"user-disabled",l);const p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw OT(r,p,f);Xo(r,p)}}catch(s){if(s instanceof sa)throw s;Xo(r,"network-request-failed",{message:String(s)})}}async function AN(r,e,n,i,s={}){const o=await Tu(r,e,n,i,s);return"mfaPendingCredential"in o&&Xo(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function BT(r,e,n,i){const s=`${e}${n}?${i}`,o=r,l=o.config.emulator?zv(r.config,s):`${r.config.apiScheme}://${s}`;return SN.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class xN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(po(this.auth,"network-request-failed")),IN.get())})}}function qf(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=po(r,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(r,e){return Tu(r,"POST","/v1/accounts:delete",e)}async function Bp(r,e){return Tu(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RN(r,e=!1){const n=bs(r),i=await n.getIdToken(e),s=jv(i);nn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:i,authTime:Vd(Y0(s.auth_time)),issuedAtTime:Vd(Y0(s.iat)),expirationTime:Vd(Y0(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Y0(r){return Number(r)*1e3}function jv(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return fp("JWT malformed, contained fewer than 3 sections"),null;try{const s=ET(n);return s?JSON.parse(s):(fp("Failed to decode base64 JWT payload"),null)}catch(s){return fp("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Xb(r){const e=jv(r);return nn(e,"internal-error"),nn(typeof e.exp<"u","internal-error"),nn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof sa&&kN(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function kN({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vd(this.lastLoginAt),this.creationTime=Vd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Up(r){const e=r.auth,n=await r.getIdToken(),i=await Xd(r,Bp(e,{idToken:n}));nn(i?.users.length,e,"internal-error");const s=i.users[0];r._notifyReloadListener(s);const o=s.providerUserInfo?.length?UT(s.providerUserInfo):[],l=MN(r.providerData,o),u=r.isAnonymous,d=!(r.email&&s.passwordHash)&&!l?.length,f=u?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Cw(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(r,p)}async function PN(r){const e=bs(r);await Up(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MN(r,e){return[...r.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function UT(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(r,e){const n=await LT(r,{},async()=>{const i=vh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=r.config,l=await BT(r,s,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:i};return r.emulatorConfig&&Au(r.emulatorConfig.host)&&(d.credentials="include"),DT.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ON(r,e){return Tu(r,"POST","/v2/accounts:revokeToken",Wv(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nn(e.idToken,"internal-error"),nn(typeof e.idToken<"u","internal-error"),nn(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nn(e.length!==0,"internal-error");const n=Xb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await NN(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new Zc;return i&&(nn(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(nn(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(nn(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zc,this.toJSON())}_performRefresh(){return jo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(r,e){nn(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Us{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new CN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Cw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Xd(this,this.stsTokenManager.getToken(this.auth,e));return nn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RN(this,e)}reload(){return PN(this)}_assign(e){this!==e&&(nn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Us({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Up(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lo(this.auth.app))return Promise.reject(Ll(this.auth));const e=await this.getIdToken();return await Xd(this,TN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,u=n.tenantId??void 0,d=n._redirectEventId??void 0,f=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:v,emailVerified:E,isAnonymous:S,providerData:R,stsTokenManager:T}=n;nn(v&&T,e,"internal-error");const M=Zc.fromJSON(this.name,T);nn(typeof v=="string",e,"internal-error"),Sa(i,e.name),Sa(s,e.name),nn(typeof E=="boolean",e,"internal-error"),nn(typeof S=="boolean",e,"internal-error"),Sa(o,e.name),Sa(l,e.name),Sa(u,e.name),Sa(d,e.name),Sa(f,e.name),Sa(p,e.name);const W=new Us({uid:v,auth:e,email:s,emailVerified:E,displayName:i,isAnonymous:S,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:M,createdAt:f,lastLoginAt:p});return R&&Array.isArray(R)&&(W.providerData=R.map(z=>({...z}))),d&&(W._redirectEventId=d),W}static async _fromIdTokenResponse(e,n,i=!1){const s=new Zc;s.updateFromServerResponse(n);const o=new Us({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Up(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];nn(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?UT(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,u=new Zc;u.updateFromIdToken(i);const d=new Us({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Cw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=new Map;function $o(r){Zo(r instanceof Function,"Expected a class definition");let e=Zb.get(r);return e?(Zo(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Zb.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}VT.type="NONE";const eS=VT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(r,e,n){return`firebase:${r}:${e}:${n}`}class eu{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=pp(this.userKey,s.apiKey,o),this.fullPersistenceKey=pp("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bp(this.auth,{idToken:e}).catch(()=>{});return n?Us._fromGetAccountInfoResponse(this.auth,n,e):null}return Us._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new eu($o(eS),e,i);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||$o(eS);const l=pp(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const p=await f._get(l);if(p){let v;if(typeof p=="string"){const E=await Bp(e,{idToken:p}).catch(()=>{});if(!E)break;v=await Us._fromGetAccountInfoResponse(e,E,p)}else v=Us._fromJSON(e,p);f!==o&&(u=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new eu(o,e,i):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new eu(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qT(e))return"Blackberry";if(KT(e))return"Webos";if(zT(e))return"Safari";if((e.includes("chrome/")||WT(e))&&!e.includes("edge/"))return"Chrome";if($T(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if(i?.length===2)return i[1]}return"Other"}function FT(r=ki()){return/firefox\//i.test(r)}function zT(r=ki()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WT(r=ki()){return/crios\//i.test(r)}function jT(r=ki()){return/iemobile/i.test(r)}function $T(r=ki()){return/android/i.test(r)}function qT(r=ki()){return/blackberry/i.test(r)}function KT(r=ki()){return/webos/i.test(r)}function $v(r=ki()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function DN(r=ki()){return $v(r)&&!!window.navigator?.standalone}function LN(){return JM()&&document.documentMode===10}function HT(r=ki()){return $v(r)||$T(r)||KT(r)||qT(r)||/windows phone/i.test(r)||jT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(r,e=[]){let n;switch(r){case"Browser":n=tS(ki());break;case"Worker":n=`${tS(ki())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(r,e={}){return Tu(r,"GET","/v2/passwordPolicy",Wv(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=6;class FN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??VN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nS(this),this.idTokenSubscription=new nS(this),this.beforeStateQueue=new BN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$o(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await eu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bp(this,{idToken:e}),i=await Us._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(lo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return nn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Up(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_N()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lo(this.app))return Promise.reject(Ll(this));const n=e?bs(e):null;return n&&nn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lo(this.app)?Promise.reject(Ll(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lo(this.app)?Promise.reject(Ll(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($o(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UN(this),n=new FN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wh("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ON(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$o(e)||this._popupRedirectResolver;nn(n,this,"argument-error"),this.redirectPersistenceManager=await eu.create(this,[$o(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(nn(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(lo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qv(r){return bs(r)}class nS{constructor(e){this.auth=e,this.observer=null,this.addObserver=i4(n=>this.observer=n)}get next(){return nn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WN(r){Kv=r}function jN(r){return Kv.loadJS(r)}function $N(){return Kv.gapiScript}function qN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(r,e){const n=Vv(r,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Vl(o,e??{}))return s;Xo(s,"already-initialized")}return n.initialize({options:e})}function HN(r,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map($o);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function GN(r,e,n){const i=qv(r);nn(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=YT(e),{host:l,port:u}=YN(e),d=u===null?"":`:${u}`,f={url:`${o}//${l}${d}/`},p=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){nn(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),nn(Vl(f,i.config.emulator)&&Vl(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Au(l)?(IT(`${o}//${l}${d}`),AT("Auth",!0)):JN()}function YT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function YN(r){const e=YT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:rS(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:rS(l)}}}function rS(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function JN(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jo("not implemented")}_getIdTokenResponse(e){return jo("not implemented")}_linkToIdToken(e,n){return jo("not implemented")}_getReauthenticationResolver(e){return jo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(r,e){return AN(r,"POST","/v1/accounts:signInWithIdp",Wv(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="http://localhost";class zl extends JT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const l=new zl(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return tu(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,tu(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,tu(e,n)}buildRequest(){const e={requestUri:QN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends QT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma extends _h{constructor(){super("facebook.com")}static credential(e){return zl._fromParams({providerId:Ma.PROVIDER_ID,signInMethod:Ma.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ma.credentialFromTaggedObject(e)}static credentialFromError(e){return Ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ma.credential(e.oauthAccessToken)}catch{return null}}}Ma.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ma.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends _h{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zl._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Na.credentialFromTaggedObject(e)}static credentialFromError(e){return Na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Na.credential(n,i)}catch{return null}}}Na.GOOGLE_SIGN_IN_METHOD="google.com";Na.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends _h{constructor(){super("github.com")}static credential(e){return zl._fromParams({providerId:Oa.PROVIDER_ID,signInMethod:Oa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oa.credentialFromTaggedObject(e)}static credentialFromError(e){return Oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oa.credential(e.oauthAccessToken)}catch{return null}}}Oa.GITHUB_SIGN_IN_METHOD="github.com";Oa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends _h{constructor(){super("twitter.com")}static credential(e,n){return zl._fromParams({providerId:Da.PROVIDER_ID,signInMethod:Da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Da.credentialFromTaggedObject(e)}static credentialFromError(e){return Da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Da.credential(n,i)}catch{return null}}}Da.TWITTER_SIGN_IN_METHOD="twitter.com";Da.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Us._fromIdTokenResponse(e,i,s),l=iS(i);return new du({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=iS(i);return new du({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function iS(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends sa{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Vp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Vp(e,n,i,s)}}function XT(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Vp._fromErrorAndOperation(r,o,e,i):o})}async function XN(r,e,n=!1){const i=await Xd(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return du._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(r,e,n=!1){const{auth:i}=r;if(lo(i.app))return Promise.reject(Ll(i));const s="reauthenticate";try{const o=await Xd(r,XT(i,s,e,r),n);nn(o.idToken,i,"internal-error");const l=jv(o.idToken);nn(l,i,"internal-error");const{sub:u}=l;return nn(r.uid===u,i,"user-mismatch"),du._forOperation(r,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Xo(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(r,e,n=!1){if(lo(r.app))return Promise.reject(Ll(r));const i="signIn",s=await XT(r,i,e),o=await du._fromIdTokenResponse(r,i,s);return n||await r._updateCurrentUser(o.user),o}function tO(r,e,n,i){return bs(r).onIdTokenChanged(e,n,i)}function nO(r,e,n){return bs(r).beforeAuthStateChanged(e,n)}const Fp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fp,"1"),this.storage.removeItem(Fp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=1e3,iO=10;class e2 extends ZT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);LN()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,iO):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},rO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}e2.type="LOCAL";const sO=e2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2 extends ZT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}t2.type="SESSION";const n2=t2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Im(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(l).map(async f=>f(n.origin,o)),d=await oO(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Im.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const f=Hv("",20);s.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(E.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(){return window}function lO(r){mo().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(){return typeof mo().WorkerGlobalScope<"u"&&typeof mo().importScripts=="function"}async function cO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uO(){return navigator?.serviceWorker?.controller||null}function dO(){return r2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="firebaseLocalStorageDb",hO=1,zp="firebaseLocalStorage",s2="fbase_key";class bh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Am(r,e){return r.transaction([zp],e?"readwrite":"readonly").objectStore(zp)}function fO(){const r=indexedDB.deleteDatabase(i2);return new bh(r).toPromise()}function Pw(){const r=indexedDB.open(i2,hO);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(zp,{keyPath:s2})}catch(s){n(s)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(zp)?e(i):(i.close(),await fO(),e(await Pw()))})})}async function sS(r,e,n){const i=Am(r,!0).put({[s2]:e,value:n});return new bh(i).toPromise()}async function pO(r,e){const n=Am(r,!1).get(e),i=await new bh(n).toPromise();return i===void 0?null:i.value}function oS(r,e){const n=Am(r,!0).delete(e);return new bh(n).toPromise()}const mO=800,gO=3;class o2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>gO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return r2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Im._getInstance(dO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await cO(),!this.activeServiceWorker)return;this.sender=new aO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pw();return await sS(e,Fp,"1"),await oS(e,Fp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>sS(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>pO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>oS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Am(s,!1).getAll();return new bh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o2.type="LOCAL";const yO=o2;new Eh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(r,e){return e?$o(e):(nn(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends JT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return tu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return tu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vO(r){return eO(r.auth,new Gv(r),r.bypassAuthState)}function EO(r){const{auth:e,user:n}=r;return nn(n,e,"internal-error"),ZN(n,new Gv(r),r.bypassAuthState)}async function _O(r){const{auth:e,user:n}=r;return nn(n,e,"internal-error"),XN(n,new Gv(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vO;case"linkViaPopup":case"linkViaRedirect":return _O;case"reauthViaPopup":case"reauthViaRedirect":return EO;default:Xo(this.auth,"internal-error")}}resolve(e){Zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=new Eh(2e3,1e4);class Kc extends a2{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Kc.currentPopupAction&&Kc.currentPopupAction.cancel(),Kc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nn(e,this.auth,"internal-error"),e}async onExecution(){Zo(this.filter.length===1,"Popup operations only handle one event");const e=Hv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(po(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(po(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(po(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bO.get())};e()}}Kc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="pendingRedirect",mp=new Map;class IO extends a2{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=mp.get(this.auth._key());if(!e){try{const i=await AO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}mp.set(this.auth._key(),e)}return this.bypassAuthState||mp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AO(r,e){const n=RO(e),i=TO(r);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function xO(r,e){mp.set(r._key(),e)}function TO(r){return $o(r._redirectPersistence)}function RO(r){return pp(SO,r.config.apiKey,r.name)}async function kO(r,e,n=!1){if(lo(r.app))return Promise.reject(Ll(r));const i=qv(r),s=wO(i,e),l=await new IO(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=600*1e3;class PO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!l2(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(po(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CO&&this.cachedEventUids.clear(),this.cachedEventUids.has(aS(e))}saveEventToCache(e){this.cachedEventUids.add(aS(e)),this.lastProcessedEventTime=Date.now()}}function aS(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function l2({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function MO(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l2(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(r,e={}){return Tu(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DO=/^https?/;async function LO(r){if(r.config.emulator)return;const{authorizedDomains:e}=await NO(r);for(const n of e)try{if(BO(n))return}catch{}Xo(r,"unauthorized-domain")}function BO(r){const e=kw(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const l=new URL(r);return l.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!DO.test(n))return!1;if(OO.test(r))return i===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=new Eh(3e4,6e4);function lS(){const r=mo().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function VO(r){return new Promise((e,n)=>{function i(){lS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lS(),n(po(r,"network-request-failed"))},timeout:UO.get()})}if(mo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(mo().gapi?.load)i();else{const s=qN("iframefcb");return mo()[s]=()=>{gapi.load?i():n(po(r,"network-request-failed"))},jN(`${$N()}?onload=${s}`).catch(o=>n(o))}}).catch(e=>{throw gp=null,e})}let gp=null;function FO(r){return gp=gp||VO(r),gp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=new Eh(5e3,15e3),WO="__/auth/iframe",jO="emulator/auth/iframe",$O={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KO(r){const e=r.config;nn(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?zv(e,jO):`https://${r.config.authDomain}/${WO}`,i={apiKey:e.apiKey,appName:r.name,v:xu},s=qO.get(r.config.apiHost);s&&(i.eid=s);const o=r._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${vh(i).slice(1)}`}async function HO(r){const e=await FO(r),n=mo().gapi;return nn(n,r,"internal-error"),e.open({where:document.body,url:KO(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$O,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=po(r,"network-request-failed"),u=mo().setTimeout(()=>{o(l)},zO.get());function d(){mo().clearTimeout(u),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YO=500,JO=600,QO="_blank",XO="http://localhost";class cS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZO(r,e,n,i=YO,s=JO){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const d={...GO,width:i.toString(),height:s.toString(),top:o,left:l},f=ki().toLowerCase();n&&(u=WT(f)?QO:n),FT(f)&&(e=e||XO,d.scrollbars="yes");const p=Object.entries(d).reduce((E,[S,R])=>`${E}${S}=${R},`,"");if(DN(f)&&u!=="_self")return e5(e||"",u),new cS(null);const v=window.open(e||"",u,p);nn(v,r,"popup-blocked");try{v.focus()}catch{}return new cS(v)}function e5(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5="__/auth/handler",n5="emulator/auth/handler",r5=encodeURIComponent("fac");async function uS(r,e,n,i,s,o){nn(r.config.authDomain,r,"auth-domain-config-required"),nn(r.config.apiKey,r,"invalid-api-key");const l={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:xu,eventId:s};if(e instanceof QT){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",r4(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))l[p]=v}if(e instanceof _h){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(l.scopes=p.join(","))}r.tenantId&&(l.tid=r.tenantId);const u=l;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const d=await r._getAppCheckToken(),f=d?`#${r5}=${encodeURIComponent(d)}`:"";return`${i5(r)}?${vh(u).slice(1)}${f}`}function i5({config:r}){return r.emulator?zv(r,n5):`https://${r.authDomain}/${t5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="webStorageSupport";class s5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n2,this._completeRedirectFn=kO,this._overrideRedirectResult=xO}async _openPopup(e,n,i,s){Zo(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await uS(e,n,i,kw(),s);return ZO(e,o,Hv())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await uS(e,n,i,kw(),s);return lO(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Zo(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await HO(e),i=new PO(e);return n.register("authEvent",s=>(nn(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(J0,{type:J0},s=>{const o=s?.[0]?.[J0];o!==void 0&&n(!!o),Xo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HT()||zT()||$v()}}const o5=s5;var dS="@firebase/auth",hS="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function c5(r){uu(new Fl("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;nn(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GT(r)},f=new zN(i,s,o,d);return HN(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),uu(new Fl("auth-internal",e=>{const n=qv(e.getProvider("auth").getImmediate());return(i=>new a5(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$a(dS,hS,l5(r)),$a(dS,hS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=300,d5=ST("authIdTokenMaxAge")||u5;let fS=null;const h5=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>d5)return;const s=n?.token;fS!==s&&(fS=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function f5(r=kT()){const e=Vv(r,"auth");if(e.isInitialized())return e.getImmediate();const n=KN(r,{popupRedirectResolver:o5,persistence:[yO,sO,n2]}),i=ST("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=h5(o.toString());nO(n,l,()=>l(n.currentUser)),tO(n,u=>l(u))}}const s=_T("auth");return s&&GN(n,`http://${s}`),n}function p5(){return document.getElementsByTagName("head")?.[0]??document}WN({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=s=>{const o=po("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",p5().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});c5("Browser");var pS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qa,c2;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(Z,$){function D(){}D.prototype=$.prototype,Z.D=$.prototype,Z.prototype=new D,Z.prototype.constructor=Z,Z.C=function(U,q,H){for(var I=Array(arguments.length-2),y=2;y<arguments.length;y++)I[y-2]=arguments[y];return $.prototype[q].apply(U,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(Z,$,D){D||(D=0);var U=Array(16);if(typeof $=="string")for(var q=0;16>q;++q)U[q]=$.charCodeAt(D++)|$.charCodeAt(D++)<<8|$.charCodeAt(D++)<<16|$.charCodeAt(D++)<<24;else for(q=0;16>q;++q)U[q]=$[D++]|$[D++]<<8|$[D++]<<16|$[D++]<<24;$=Z.g[0],D=Z.g[1],q=Z.g[2];var H=Z.g[3],I=$+(H^D&(q^H))+U[0]+3614090360&4294967295;$=D+(I<<7&4294967295|I>>>25),I=H+(q^$&(D^q))+U[1]+3905402710&4294967295,H=$+(I<<12&4294967295|I>>>20),I=q+(D^H&($^D))+U[2]+606105819&4294967295,q=H+(I<<17&4294967295|I>>>15),I=D+($^q&(H^$))+U[3]+3250441966&4294967295,D=q+(I<<22&4294967295|I>>>10),I=$+(H^D&(q^H))+U[4]+4118548399&4294967295,$=D+(I<<7&4294967295|I>>>25),I=H+(q^$&(D^q))+U[5]+1200080426&4294967295,H=$+(I<<12&4294967295|I>>>20),I=q+(D^H&($^D))+U[6]+2821735955&4294967295,q=H+(I<<17&4294967295|I>>>15),I=D+($^q&(H^$))+U[7]+4249261313&4294967295,D=q+(I<<22&4294967295|I>>>10),I=$+(H^D&(q^H))+U[8]+1770035416&4294967295,$=D+(I<<7&4294967295|I>>>25),I=H+(q^$&(D^q))+U[9]+2336552879&4294967295,H=$+(I<<12&4294967295|I>>>20),I=q+(D^H&($^D))+U[10]+4294925233&4294967295,q=H+(I<<17&4294967295|I>>>15),I=D+($^q&(H^$))+U[11]+2304563134&4294967295,D=q+(I<<22&4294967295|I>>>10),I=$+(H^D&(q^H))+U[12]+1804603682&4294967295,$=D+(I<<7&4294967295|I>>>25),I=H+(q^$&(D^q))+U[13]+4254626195&4294967295,H=$+(I<<12&4294967295|I>>>20),I=q+(D^H&($^D))+U[14]+2792965006&4294967295,q=H+(I<<17&4294967295|I>>>15),I=D+($^q&(H^$))+U[15]+1236535329&4294967295,D=q+(I<<22&4294967295|I>>>10),I=$+(q^H&(D^q))+U[1]+4129170786&4294967295,$=D+(I<<5&4294967295|I>>>27),I=H+(D^q&($^D))+U[6]+3225465664&4294967295,H=$+(I<<9&4294967295|I>>>23),I=q+($^D&(H^$))+U[11]+643717713&4294967295,q=H+(I<<14&4294967295|I>>>18),I=D+(H^$&(q^H))+U[0]+3921069994&4294967295,D=q+(I<<20&4294967295|I>>>12),I=$+(q^H&(D^q))+U[5]+3593408605&4294967295,$=D+(I<<5&4294967295|I>>>27),I=H+(D^q&($^D))+U[10]+38016083&4294967295,H=$+(I<<9&4294967295|I>>>23),I=q+($^D&(H^$))+U[15]+3634488961&4294967295,q=H+(I<<14&4294967295|I>>>18),I=D+(H^$&(q^H))+U[4]+3889429448&4294967295,D=q+(I<<20&4294967295|I>>>12),I=$+(q^H&(D^q))+U[9]+568446438&4294967295,$=D+(I<<5&4294967295|I>>>27),I=H+(D^q&($^D))+U[14]+3275163606&4294967295,H=$+(I<<9&4294967295|I>>>23),I=q+($^D&(H^$))+U[3]+4107603335&4294967295,q=H+(I<<14&4294967295|I>>>18),I=D+(H^$&(q^H))+U[8]+1163531501&4294967295,D=q+(I<<20&4294967295|I>>>12),I=$+(q^H&(D^q))+U[13]+2850285829&4294967295,$=D+(I<<5&4294967295|I>>>27),I=H+(D^q&($^D))+U[2]+4243563512&4294967295,H=$+(I<<9&4294967295|I>>>23),I=q+($^D&(H^$))+U[7]+1735328473&4294967295,q=H+(I<<14&4294967295|I>>>18),I=D+(H^$&(q^H))+U[12]+2368359562&4294967295,D=q+(I<<20&4294967295|I>>>12),I=$+(D^q^H)+U[5]+4294588738&4294967295,$=D+(I<<4&4294967295|I>>>28),I=H+($^D^q)+U[8]+2272392833&4294967295,H=$+(I<<11&4294967295|I>>>21),I=q+(H^$^D)+U[11]+1839030562&4294967295,q=H+(I<<16&4294967295|I>>>16),I=D+(q^H^$)+U[14]+4259657740&4294967295,D=q+(I<<23&4294967295|I>>>9),I=$+(D^q^H)+U[1]+2763975236&4294967295,$=D+(I<<4&4294967295|I>>>28),I=H+($^D^q)+U[4]+1272893353&4294967295,H=$+(I<<11&4294967295|I>>>21),I=q+(H^$^D)+U[7]+4139469664&4294967295,q=H+(I<<16&4294967295|I>>>16),I=D+(q^H^$)+U[10]+3200236656&4294967295,D=q+(I<<23&4294967295|I>>>9),I=$+(D^q^H)+U[13]+681279174&4294967295,$=D+(I<<4&4294967295|I>>>28),I=H+($^D^q)+U[0]+3936430074&4294967295,H=$+(I<<11&4294967295|I>>>21),I=q+(H^$^D)+U[3]+3572445317&4294967295,q=H+(I<<16&4294967295|I>>>16),I=D+(q^H^$)+U[6]+76029189&4294967295,D=q+(I<<23&4294967295|I>>>9),I=$+(D^q^H)+U[9]+3654602809&4294967295,$=D+(I<<4&4294967295|I>>>28),I=H+($^D^q)+U[12]+3873151461&4294967295,H=$+(I<<11&4294967295|I>>>21),I=q+(H^$^D)+U[15]+530742520&4294967295,q=H+(I<<16&4294967295|I>>>16),I=D+(q^H^$)+U[2]+3299628645&4294967295,D=q+(I<<23&4294967295|I>>>9),I=$+(q^(D|~H))+U[0]+4096336452&4294967295,$=D+(I<<6&4294967295|I>>>26),I=H+(D^($|~q))+U[7]+1126891415&4294967295,H=$+(I<<10&4294967295|I>>>22),I=q+($^(H|~D))+U[14]+2878612391&4294967295,q=H+(I<<15&4294967295|I>>>17),I=D+(H^(q|~$))+U[5]+4237533241&4294967295,D=q+(I<<21&4294967295|I>>>11),I=$+(q^(D|~H))+U[12]+1700485571&4294967295,$=D+(I<<6&4294967295|I>>>26),I=H+(D^($|~q))+U[3]+2399980690&4294967295,H=$+(I<<10&4294967295|I>>>22),I=q+($^(H|~D))+U[10]+4293915773&4294967295,q=H+(I<<15&4294967295|I>>>17),I=D+(H^(q|~$))+U[1]+2240044497&4294967295,D=q+(I<<21&4294967295|I>>>11),I=$+(q^(D|~H))+U[8]+1873313359&4294967295,$=D+(I<<6&4294967295|I>>>26),I=H+(D^($|~q))+U[15]+4264355552&4294967295,H=$+(I<<10&4294967295|I>>>22),I=q+($^(H|~D))+U[6]+2734768916&4294967295,q=H+(I<<15&4294967295|I>>>17),I=D+(H^(q|~$))+U[13]+1309151649&4294967295,D=q+(I<<21&4294967295|I>>>11),I=$+(q^(D|~H))+U[4]+4149444226&4294967295,$=D+(I<<6&4294967295|I>>>26),I=H+(D^($|~q))+U[11]+3174756917&4294967295,H=$+(I<<10&4294967295|I>>>22),I=q+($^(H|~D))+U[2]+718787259&4294967295,q=H+(I<<15&4294967295|I>>>17),I=D+(H^(q|~$))+U[9]+3951481745&4294967295,Z.g[0]=Z.g[0]+$&4294967295,Z.g[1]=Z.g[1]+(q+(I<<21&4294967295|I>>>11))&4294967295,Z.g[2]=Z.g[2]+q&4294967295,Z.g[3]=Z.g[3]+H&4294967295}i.prototype.u=function(Z,$){$===void 0&&($=Z.length);for(var D=$-this.blockSize,U=this.B,q=this.h,H=0;H<$;){if(q==0)for(;H<=D;)s(this,Z,H),H+=this.blockSize;if(typeof Z=="string"){for(;H<$;)if(U[q++]=Z.charCodeAt(H++),q==this.blockSize){s(this,U),q=0;break}}else for(;H<$;)if(U[q++]=Z[H++],q==this.blockSize){s(this,U),q=0;break}}this.h=q,this.o+=$},i.prototype.v=function(){var Z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Z[0]=128;for(var $=1;$<Z.length-8;++$)Z[$]=0;var D=8*this.o;for($=Z.length-8;$<Z.length;++$)Z[$]=D&255,D/=256;for(this.u(Z),Z=Array(16),$=D=0;4>$;++$)for(var U=0;32>U;U+=8)Z[D++]=this.g[$]>>>U&255;return Z};function o(Z,$){var D=u;return Object.prototype.hasOwnProperty.call(D,Z)?D[Z]:D[Z]=$(Z)}function l(Z,$){this.h=$;for(var D=[],U=!0,q=Z.length-1;0<=q;q--){var H=Z[q]|0;U&&H==$||(D[q]=H,U=!1)}this.g=D}var u={};function d(Z){return-128<=Z&&128>Z?o(Z,function($){return new l([$|0],0>$?-1:0)}):new l([Z|0],0>Z?-1:0)}function f(Z){if(isNaN(Z)||!isFinite(Z))return v;if(0>Z)return M(f(-Z));for(var $=[],D=1,U=0;Z>=D;U++)$[U]=Z/D|0,D*=4294967296;return new l($,0)}function p(Z,$){if(Z.length==0)throw Error("number format error: empty string");if($=$||10,2>$||36<$)throw Error("radix out of range: "+$);if(Z.charAt(0)=="-")return M(p(Z.substring(1),$));if(0<=Z.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow($,8)),U=v,q=0;q<Z.length;q+=8){var H=Math.min(8,Z.length-q),I=parseInt(Z.substring(q,q+H),$);8>H?(H=f(Math.pow($,H)),U=U.j(H).add(f(I))):(U=U.j(D),U=U.add(f(I)))}return U}var v=d(0),E=d(1),S=d(16777216);r=l.prototype,r.m=function(){if(T(this))return-M(this).m();for(var Z=0,$=1,D=0;D<this.g.length;D++){var U=this.i(D);Z+=(0<=U?U:4294967296+U)*$,$*=4294967296}return Z},r.toString=function(Z){if(Z=Z||10,2>Z||36<Z)throw Error("radix out of range: "+Z);if(R(this))return"0";if(T(this))return"-"+M(this).toString(Z);for(var $=f(Math.pow(Z,6)),D=this,U="";;){var q=se(D,$).g;D=W(D,q.j($));var H=((0<D.g.length?D.g[0]:D.h)>>>0).toString(Z);if(D=q,R(D))return H+U;for(;6>H.length;)H="0"+H;U=H+U}},r.i=function(Z){return 0>Z?0:Z<this.g.length?this.g[Z]:this.h};function R(Z){if(Z.h!=0)return!1;for(var $=0;$<Z.g.length;$++)if(Z.g[$]!=0)return!1;return!0}function T(Z){return Z.h==-1}r.l=function(Z){return Z=W(this,Z),T(Z)?-1:R(Z)?0:1};function M(Z){for(var $=Z.g.length,D=[],U=0;U<$;U++)D[U]=~Z.g[U];return new l(D,~Z.h).add(E)}r.abs=function(){return T(this)?M(this):this},r.add=function(Z){for(var $=Math.max(this.g.length,Z.g.length),D=[],U=0,q=0;q<=$;q++){var H=U+(this.i(q)&65535)+(Z.i(q)&65535),I=(H>>>16)+(this.i(q)>>>16)+(Z.i(q)>>>16);U=I>>>16,H&=65535,I&=65535,D[q]=I<<16|H}return new l(D,D[D.length-1]&-2147483648?-1:0)};function W(Z,$){return Z.add(M($))}r.j=function(Z){if(R(this)||R(Z))return v;if(T(this))return T(Z)?M(this).j(M(Z)):M(M(this).j(Z));if(T(Z))return M(this.j(M(Z)));if(0>this.l(S)&&0>Z.l(S))return f(this.m()*Z.m());for(var $=this.g.length+Z.g.length,D=[],U=0;U<2*$;U++)D[U]=0;for(U=0;U<this.g.length;U++)for(var q=0;q<Z.g.length;q++){var H=this.i(U)>>>16,I=this.i(U)&65535,y=Z.i(q)>>>16,x=Z.i(q)&65535;D[2*U+2*q]+=I*x,z(D,2*U+2*q),D[2*U+2*q+1]+=H*x,z(D,2*U+2*q+1),D[2*U+2*q+1]+=I*y,z(D,2*U+2*q+1),D[2*U+2*q+2]+=H*y,z(D,2*U+2*q+2)}for(U=0;U<$;U++)D[U]=D[2*U+1]<<16|D[2*U];for(U=$;U<2*$;U++)D[U]=0;return new l(D,0)};function z(Z,$){for(;(Z[$]&65535)!=Z[$];)Z[$+1]+=Z[$]>>>16,Z[$]&=65535,$++}function j(Z,$){this.g=Z,this.h=$}function se(Z,$){if(R($))throw Error("division by zero");if(R(Z))return new j(v,v);if(T(Z))return $=se(M(Z),$),new j(M($.g),M($.h));if(T($))return $=se(Z,M($)),new j(M($.g),$.h);if(30<Z.g.length){if(T(Z)||T($))throw Error("slowDivide_ only works with positive integers.");for(var D=E,U=$;0>=U.l(Z);)D=le(D),U=le(U);var q=de(D,1),H=de(U,1);for(U=de(U,2),D=de(D,2);!R(U);){var I=H.add(U);0>=I.l(Z)&&(q=q.add(D),H=I),U=de(U,1),D=de(D,1)}return $=W(Z,q.j($)),new j(q,$)}for(q=v;0<=Z.l($);){for(D=Math.max(1,Math.floor(Z.m()/$.m())),U=Math.ceil(Math.log(D)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),H=f(D),I=H.j($);T(I)||0<I.l(Z);)D-=U,H=f(D),I=H.j($);R(H)&&(H=E),q=q.add(H),Z=W(Z,I)}return new j(q,Z)}r.A=function(Z){return se(this,Z).h},r.and=function(Z){for(var $=Math.max(this.g.length,Z.g.length),D=[],U=0;U<$;U++)D[U]=this.i(U)&Z.i(U);return new l(D,this.h&Z.h)},r.or=function(Z){for(var $=Math.max(this.g.length,Z.g.length),D=[],U=0;U<$;U++)D[U]=this.i(U)|Z.i(U);return new l(D,this.h|Z.h)},r.xor=function(Z){for(var $=Math.max(this.g.length,Z.g.length),D=[],U=0;U<$;U++)D[U]=this.i(U)^Z.i(U);return new l(D,this.h^Z.h)};function le(Z){for(var $=Z.g.length+1,D=[],U=0;U<$;U++)D[U]=Z.i(U)<<1|Z.i(U-1)>>>31;return new l(D,Z.h)}function de(Z,$){var D=$>>5;$%=32;for(var U=Z.g.length-D,q=[],H=0;H<U;H++)q[H]=0<$?Z.i(H+D)>>>$|Z.i(H+D+1)<<32-$:Z.i(H+D);return new l(q,Z.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,c2=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,qa=l}).apply(typeof pS<"u"?pS:typeof self<"u"?self:typeof window<"u"?window:{});var Kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u2,Md,d2,yp,Mw,h2,f2,p2;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,k,B){return m==Array.prototype||m==Object.prototype||(m[k]=B.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kf=="object"&&Kf];for(var k=0;k<m.length;++k){var B=m[k];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var i=n(this);function s(m,k){if(k)e:{var B=i;m=m.split(".");for(var ie=0;ie<m.length-1;ie++){var Se=m[ie];if(!(Se in B))break e;B=B[Se]}m=m[m.length-1],ie=B[m],k=k(ie),k!=ie&&k!=null&&e(B,m,{configurable:!0,writable:!0,value:k})}}function o(m,k){m instanceof String&&(m+="");var B=0,ie=!1,Se={next:function(){if(!ie&&B<m.length){var Le=B++;return{value:k(Le,m[Le]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return Se[Symbol.iterator]=function(){return Se},Se}s("Array.prototype.values",function(m){return m||function(){return o(this,function(k,B){return B})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(m){var k=typeof m;return k=k!="object"?k:m?Array.isArray(m)?"array":k:"null",k=="array"||k=="object"&&typeof m.length=="number"}function f(m){var k=typeof m;return k=="object"&&m!=null||k=="function"}function p(m,k,B){return m.call.apply(m.bind,arguments)}function v(m,k,B){if(!m)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var Se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Se,ie),m.apply(k,Se)}}return function(){return m.apply(k,arguments)}}function E(m,k,B){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,E.apply(null,arguments)}function S(m,k){var B=Array.prototype.slice.call(arguments,1);return function(){var ie=B.slice();return ie.push.apply(ie,arguments),m.apply(this,ie)}}function R(m,k){function B(){}B.prototype=k.prototype,m.aa=k.prototype,m.prototype=new B,m.prototype.constructor=m,m.Qb=function(ie,Se,Le){for(var ht=Array(arguments.length-2),Hn=2;Hn<arguments.length;Hn++)ht[Hn-2]=arguments[Hn];return k.prototype[Se].apply(ie,ht)}}function T(m){const k=m.length;if(0<k){const B=Array(k);for(let ie=0;ie<k;ie++)B[ie]=m[ie];return B}return[]}function M(m,k){for(let B=1;B<arguments.length;B++){const ie=arguments[B];if(d(ie)){const Se=m.length||0,Le=ie.length||0;m.length=Se+Le;for(let ht=0;ht<Le;ht++)m[Se+ht]=ie[ht]}else m.push(ie)}}class W{constructor(k,B){this.i=k,this.j=B,this.h=0,this.g=null}get(){let k;return 0<this.h?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function z(m){return/^[\s\xa0]*$/.test(m)}function j(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function se(m){return se[" "](m),m}se[" "]=function(){};var le=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function de(m,k,B){for(const ie in m)k.call(B,m[ie],ie,m)}function Z(m,k){for(const B in m)k.call(void 0,m[B],B,m)}function $(m){const k={};for(const B in m)k[B]=m[B];return k}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(m,k){let B,ie;for(let Se=1;Se<arguments.length;Se++){ie=arguments[Se];for(B in ie)m[B]=ie[B];for(let Le=0;Le<D.length;Le++)B=D[Le],Object.prototype.hasOwnProperty.call(ie,B)&&(m[B]=ie[B])}}function q(m){var k=1;m=m.split(":");const B=[];for(;0<k&&m.length;)B.push(m.shift()),k--;return m.length&&B.push(m.join(":")),B}function H(m){u.setTimeout(()=>{throw m},0)}function I(){var m=re;let k=null;return m.g&&(k=m.g,m.g=m.g.next,m.g||(m.h=null),k.next=null),k}class y{constructor(){this.h=this.g=null}add(k,B){const ie=x.get();ie.set(k,B),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var x=new W(()=>new V,m=>m.reset());class V{constructor(){this.next=this.g=this.h=null}set(k,B){this.h=k,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let J,G=!1,re=new y,ae=()=>{const m=u.Promise.resolve(void 0);J=()=>{m.then(O)}};var O=()=>{for(var m;m=I();){try{m.h.call(m.g)}catch(B){H(B)}var k=x;k.j(m),100>k.h&&(k.h++,m.next=k.g,k.g=m)}G=!1};function w(){this.s=this.s,this.C=this.C}w.prototype.s=!1,w.prototype.ma=function(){this.s||(this.s=!0,this.N())},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _(m,k){this.type=m,this.g=this.target=k,this.defaultPrevented=!1}_.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,k=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const B=()=>{};u.addEventListener("test",B,k),u.removeEventListener("test",B,k)}catch{}return m})();function ee(m,k){if(_.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var B=this.type=m.type,ie=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=k,k=m.relatedTarget){if(le){e:{try{se(k.nodeName);var Se=!0;break e}catch{}Se=!1}Se||(k=null)}}else B=="mouseover"?k=m.fromElement:B=="mouseout"&&(k=m.toElement);this.relatedTarget=k,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:ce[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&ee.aa.h.call(this)}}R(ee,_);var ce={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function ze(m,k,B,ie,Se){this.listener=m,this.proxy=null,this.src=k,this.type=B,this.capture=!!ie,this.ha=Se,this.key=++Oe,this.da=this.fa=!1}function At(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function qt(m){this.src=m,this.g={},this.h=0}qt.prototype.add=function(m,k,B,ie,Se){var Le=m.toString();m=this.g[Le],m||(m=this.g[Le]=[],this.h++);var ht=qn(m,k,ie,Se);return-1<ht?(k=m[ht],B||(k.fa=!1)):(k=new ze(k,this.src,Le,!!ie,Se),k.fa=B,m.push(k)),k};function rn(m,k){var B=k.type;if(B in m.g){var ie=m.g[B],Se=Array.prototype.indexOf.call(ie,k,void 0),Le;(Le=0<=Se)&&Array.prototype.splice.call(ie,Se,1),Le&&(At(k),m.g[B].length==0&&(delete m.g[B],m.h--))}}function qn(m,k,B,ie){for(var Se=0;Se<m.length;++Se){var Le=m[Se];if(!Le.da&&Le.listener==k&&Le.capture==!!B&&Le.ha==ie)return Se}return-1}var un="closure_lm_"+(1e6*Math.random()|0),kn={};function $r(m,k,B,ie,Se){if(Array.isArray(k)){for(var Le=0;Le<k.length;Le++)$r(m,k[Le],B,ie,Se);return null}return B=sr(B),m&&m[we]?m.K(k,B,f(ie)?!!ie.capture:!1,Se):_n(m,k,B,!1,ie,Se)}function _n(m,k,B,ie,Se,Le){if(!k)throw Error("Invalid event type");var ht=f(Se)?!!Se.capture:!!Se,Hn=gn(m);if(Hn||(m[un]=Hn=new qt(m)),B=Hn.add(k,B,ie,ht,Le),B.proxy)return B;if(ie=xn(),B.proxy=ie,ie.src=m,ie.listener=B,m.addEventListener)F||(Se=ht),Se===void 0&&(Se=!1),m.addEventListener(k.toString(),ie,Se);else if(m.attachEvent)m.attachEvent(hn(k.toString()),ie);else if(m.addListener&&m.removeListener)m.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return B}function xn(){function m(B){return k.call(m.src,m.listener,B)}const k=Qn;return m}function ir(m,k,B,ie,Se){if(Array.isArray(k))for(var Le=0;Le<k.length;Le++)ir(m,k[Le],B,ie,Se);else ie=f(ie)?!!ie.capture:!!ie,B=sr(B),m&&m[we]?(m=m.i,k=String(k).toString(),k in m.g&&(Le=m.g[k],B=qn(Le,B,ie,Se),-1<B&&(At(Le[B]),Array.prototype.splice.call(Le,B,1),Le.length==0&&(delete m.g[k],m.h--)))):m&&(m=gn(m))&&(k=m.g[k.toString()],m=-1,k&&(m=qn(k,B,ie,Se)),(B=-1<m?k[m]:null)&&dn(B))}function dn(m){if(typeof m!="number"&&m&&!m.da){var k=m.src;if(k&&k[we])rn(k.i,m);else{var B=m.type,ie=m.proxy;k.removeEventListener?k.removeEventListener(B,ie,m.capture):k.detachEvent?k.detachEvent(hn(B),ie):k.addListener&&k.removeListener&&k.removeListener(ie),(B=gn(k))?(rn(B,m),B.h==0&&(B.src=null,k[un]=null)):At(m)}}}function hn(m){return m in kn?kn[m]:kn[m]="on"+m}function Qn(m,k){if(m.da)m=!0;else{k=new ee(k,this);var B=m.listener,ie=m.ha||m.src;m.fa&&dn(m),m=B.call(ie,k)}return m}function gn(m){return m=m[un],m instanceof qt?m:null}var vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function sr(m){return typeof m=="function"?m:(m[vn]||(m[vn]=function(k){return m.handleEvent(k)}),m[vn])}function Qt(){w.call(this),this.i=new qt(this),this.M=this,this.F=null}R(Qt,w),Qt.prototype[we]=!0,Qt.prototype.removeEventListener=function(m,k,B,ie){ir(this,m,k,B,ie)};function Y(m,k){var B,ie=m.F;if(ie)for(B=[];ie;ie=ie.F)B.push(ie);if(m=m.M,ie=k.type||k,typeof k=="string")k=new _(k,m);else if(k instanceof _)k.target=k.target||m;else{var Se=k;k=new _(ie,m),U(k,Se)}if(Se=!0,B)for(var Le=B.length-1;0<=Le;Le--){var ht=k.g=B[Le];Se=C(ht,ie,!0,k)&&Se}if(ht=k.g=m,Se=C(ht,ie,!0,k)&&Se,Se=C(ht,ie,!1,k)&&Se,B)for(Le=0;Le<B.length;Le++)ht=k.g=B[Le],Se=C(ht,ie,!1,k)&&Se}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var m=this.i,k;for(k in m.g){for(var B=m.g[k],ie=0;ie<B.length;ie++)At(B[ie]);delete m.g[k],m.h--}}this.F=null},Qt.prototype.K=function(m,k,B,ie){return this.i.add(String(m),k,!1,B,ie)},Qt.prototype.L=function(m,k,B,ie){return this.i.add(String(m),k,!0,B,ie)};function C(m,k,B,ie){if(k=m.i.g[String(k)],!k)return!0;k=k.concat();for(var Se=!0,Le=0;Le<k.length;++Le){var ht=k[Le];if(ht&&!ht.da&&ht.capture==B){var Hn=ht.listener,Fr=ht.ha||ht.src;ht.fa&&rn(m.i,ht),Se=Hn.call(Fr,ie)!==!1&&Se}}return Se&&!ie.defaultPrevented}function N(m,k,B){if(typeof m=="function")B&&(m=E(m,B));else if(m&&typeof m.handleEvent=="function")m=E(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(k)?-1:u.setTimeout(m,k||0)}function oe(m){m.g=N(()=>{m.g=null,m.i&&(m.i=!1,oe(m))},m.l);const k=m.h;m.h=null,m.m.apply(null,k)}class ye extends w{constructor(k,B){super(),this.m=k,this.l=B,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(m){w.call(this),this.h=m,this.g={}}R(be,w);var Pe=[];function Vt(m){de(m.g,function(k,B){this.g.hasOwnProperty(B)&&dn(k)},m),m.g={}}be.prototype.N=function(){be.aa.N.call(this),Vt(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Et=u.JSON.stringify,Rt=u.JSON.parse,on=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function xt(){}xt.prototype.h=null;function mn(m){return m.h||(m.h=m.i())}function qr(){}var fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bn(){_.call(this,"d")}R(bn,_);function fi(){_.call(this,"c")}R(fi,_);var Gt={},Sn=null;function _r(){return Sn=Sn||new Qt}Gt.La="serverreachability";function Ln(m){_.call(this,Gt.La,m)}R(Ln,_);function In(m){const k=_r();Y(k,new Ln(k))}Gt.STAT_EVENT="statevent";function pi(m,k){_.call(this,Gt.STAT_EVENT,m),this.stat=k}R(pi,_);function Zt(m){const k=_r();Y(k,new pi(k,m))}Gt.Ma="timingevent";function an(m,k){_.call(this,Gt.Ma,m),this.size=k}R(an,_);function hr(m,k){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},k)}function L(){this.g=!0}L.prototype.xa=function(){this.g=!1};function X(m,k,B,ie,Se,Le){m.info(function(){if(m.g)if(Le)for(var ht="",Hn=Le.split("&"),Fr=0;Fr<Hn.length;Fr++){var Nn=Hn[Fr].split("=");if(1<Nn.length){var Kr=Nn[0];Nn=Nn[1];var Mr=Kr.split("_");ht=2<=Mr.length&&Mr[1]=="type"?ht+(Kr+"="+Nn+"&"):ht+(Kr+"=redacted&")}}else ht=null;else ht=Le;return"XMLHTTP REQ ("+ie+") [attempt "+Se+"]: "+k+`
`+B+`
`+ht})}function te(m,k,B,ie,Se,Le,ht){m.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Se+"]: "+k+`
`+B+`
`+Le+" "+ht})}function A(m,k,B,ie){m.info(function(){return"XMLHTTP TEXT ("+k+"): "+_e(m,B)+(ie?" "+ie:"")})}function ne(m,k){m.info(function(){return"TIMEOUT: "+k})}L.prototype.info=function(){};function _e(m,k){if(!m.g)return k;if(!k)return null;try{var B=JSON.parse(k);if(B){for(m=0;m<B.length;m++)if(Array.isArray(B[m])){var ie=B[m];if(!(2>ie.length)){var Se=ie[1];if(Array.isArray(Se)&&!(1>Se.length)){var Le=Se[0];if(Le!="noop"&&Le!="stop"&&Le!="close")for(var ht=1;ht<Se.length;ht++)Se[ht]=""}}}}return Et(B)}catch{return k}}var ve={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ge;function st(){}R(st,xt),st.prototype.g=function(){return new XMLHttpRequest},st.prototype.i=function(){return{}},Ge=new st;function He(m,k,B,ie){this.j=m,this.i=k,this.l=B,this.R=ie||1,this.U=new be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sn}function sn(){this.i=null,this.g="",this.h=!1}var pt={},Nt={};function Dt(m,k,B){m.L=1,m.v=kt(Me(k)),m.m=B,m.P=!0,jt(m,null)}function jt(m,k){m.F=Date.now(),ft(m),m.A=Me(m.v);var B=m.A,ie=m.R;Array.isArray(ie)||(ie=[String(ie)]),oa(B.i,"t",ie),m.C=0,B=m.j.J,m.h=new sn,m.g=Kh(m.j,B?k:null,!m.m),0<m.O&&(m.M=new ye(E(m.Y,m,m.g),m.O)),k=m.U,B=m.g,ie=m.ca;var Se="readystatechange";Array.isArray(Se)||(Se&&(Pe[0]=Se.toString()),Se=Pe);for(var Le=0;Le<Se.length;Le++){var ht=$r(B,Se[Le],ie||k.handleEvent,!1,k.h||k);if(!ht)break;k.g[ht.key]=ht}k=m.H?$(m.H):{},m.m?(m.u||(m.u="POST"),k["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,k)):(m.u="GET",m.g.ea(m.A,m.u,null,k)),In(),X(m.i,m.u,m.A,m.l,m.R,m.m)}He.prototype.ca=function(m){m=m.target;const k=this.M;k&&Bi(m)==3?k.j():this.Y(m)},He.prototype.Y=function(m){try{if(m==this.g)e:{const Mr=Bi(this.g);var k=this.g.Ba();const ds=this.g.Z();if(!(3>Mr)&&(Mr!=3||this.g&&(this.h.h||this.g.oa()||Wu(this.g)))){this.J||Mr!=4||k==7||(k==8||0>=ds?In(3):In(2)),mt(this);var B=this.g.Z();this.X=B;t:if(Kt(this)){var ie=Wu(this.g);m="";var Se=ie.length,Le=Bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ot(this),bt(this);var ht="";break t}this.h.i=new u.TextDecoder}for(k=0;k<Se;k++)this.h.h=!0,m+=this.h.i.decode(ie[k],{stream:!(Le&&k==Se-1)});ie.length=0,this.h.g+=m,this.C=0,ht=this.h.g}else ht=this.g.oa();if(this.o=B==200,te(this.i,this.u,this.A,this.l,this.R,Mr,B),this.o){if(this.T&&!this.K){t:{if(this.g){var Hn,Fr=this.g;if((Hn=Fr.g?Fr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Hn)){var Nn=Hn;break t}}Nn=null}if(B=Nn)A(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yt(this,B);else{this.o=!1,this.s=3,Zt(12),ot(this),bt(this);break e}}if(this.P){B=!0;let Zi;for(;!this.J&&this.C<ht.length;)if(Zi=Wt(this,ht),Zi==Nt){Mr==4&&(this.s=4,Zt(14),B=!1),A(this.i,this.l,null,"[Incomplete Response]");break}else if(Zi==pt){this.s=4,Zt(15),A(this.i,this.l,ht,"[Invalid Chunk]"),B=!1;break}else A(this.i,this.l,Zi,null),yt(this,Zi);if(Kt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mr!=4||ht.length!=0||this.h.h||(this.s=1,Zt(16),B=!1),this.o=this.o&&B,!B)A(this.i,this.l,ht,"[Invalid Chunked Response]"),ot(this),bt(this);else if(0<ht.length&&!this.W){this.W=!0;var Kr=this.j;Kr.g==this&&Kr.ba&&!Kr.M&&(Kr.j.info("Great, no buffering proxy detected. Bytes received: "+ht.length),$u(Kr),Kr.M=!0,Zt(11))}}else A(this.i,this.l,ht,null),yt(this,ht);Mr==4&&ot(this),this.o&&!this.J&&(Mr==4?fc(this.j,this):(this.o=!1,ft(this)))}else lc(this.g),B==400&&0<ht.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),ot(this),bt(this)}}}catch{}finally{}};function Kt(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Wt(m,k){var B=m.C,ie=k.indexOf(`
`,B);return ie==-1?Nt:(B=Number(k.substring(B,ie)),isNaN(B)?pt:(ie+=1,ie+B>k.length?Nt:(k=k.slice(ie,ie+B),m.C=ie+B,k)))}He.prototype.cancel=function(){this.J=!0,ot(this)};function ft(m){m.S=Date.now()+m.I,Ft(m,m.I)}function Ft(m,k){if(m.B!=null)throw Error("WatchDog timer not null");m.B=hr(E(m.ba,m),k)}function mt(m){m.B&&(u.clearTimeout(m.B),m.B=null)}He.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(ne(this.i,this.A),this.L!=2&&(In(),Zt(17)),ot(this),this.s=2,bt(this)):Ft(this,this.S-m)};function bt(m){m.j.G==0||m.J||fc(m.j,m)}function ot(m){mt(m);var k=m.M;k&&typeof k.ma=="function"&&k.ma(),m.M=null,Vt(m.U),m.g&&(k=m.g,m.g=null,k.abort(),k.ma())}function yt(m,k){try{var B=m.j;if(B.G!=0&&(B.g==m||Fe(B.h,m))){if(!m.K&&Fe(B.h,m)&&B.G==3){try{var ie=B.Da.g.parse(k)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Se=ie;if(Se[0]==0){e:if(!B.u){if(B.g)if(B.g.F+3e3<m.F)hc(B),Ts(B);else break e;dc(B),Zt(18)}}else B.za=Se[1],0<B.za-B.T&&37500>Se[2]&&B.F&&B.v==0&&!B.C&&(B.C=hr(E(B.Za,B),6e3));if(1>=Ce(B.h)&&B.ca){try{B.ca()}catch{}B.ca=void 0}}else Ro(B,11)}else if((m.K||B.g==m)&&hc(B),!z(k))for(Se=B.Da.g.parse(k),k=0;k<Se.length;k++){let Nn=Se[k];if(B.T=Nn[0],Nn=Nn[1],B.G==2)if(Nn[0]=="c"){B.K=Nn[1],B.ia=Nn[2];const Kr=Nn[3];Kr!=null&&(B.la=Kr,B.j.info("VER="+B.la));const Mr=Nn[4];Mr!=null&&(B.Aa=Mr,B.j.info("SVER="+B.Aa));const ds=Nn[5];ds!=null&&typeof ds=="number"&&0<ds&&(ie=1.5*ds,B.L=ie,B.j.info("backChannelRequestTimeoutMs_="+ie)),ie=B;const Zi=m.g;if(Zi){const ol=Zi.g?Zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ol){var Le=ie.h;Le.g||ol.indexOf("spdy")==-1&&ol.indexOf("quic")==-1&&ol.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(Ue(Le,Le.h),Le.h=null))}if(ie.D){const mc=Zi.g?Zi.g.getResponseHeader("X-HTTP-Session-Id"):null;mc&&(ie.ya=mc,Qe(ie.I,ie.D,mc))}}B.G=3,B.l&&B.l.ua(),B.ba&&(B.R=Date.now()-m.F,B.j.info("Handshake RTT: "+B.R+"ms")),ie=B;var ht=m;if(ie.qa=qh(ie,ie.J?ie.ia:null,ie.W),ht.K){We(ie.h,ht);var Hn=ht,Fr=ie.L;Fr&&(Hn.I=Fr),Hn.B&&(mt(Hn),ft(Hn)),ie.g=ht}else sl(ie);0<B.i.length&&Js(B)}else Nn[0]!="stop"&&Nn[0]!="close"||Ro(B,7);else B.G==3&&(Nn[0]=="stop"||Nn[0]=="close"?Nn[0]=="stop"?Ro(B,7):ni(B):Nn[0]!="noop"&&B.l&&B.l.ta(Nn),B.v=0)}}In(4)}catch{}}var _t=class{constructor(m,k){this.g=m,this.map=k}};function lt(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xe(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ce(m){return m.h?1:m.g?m.g.size:0}function Fe(m,k){return m.h?m.h==k:m.g?m.g.has(k):!1}function Ue(m,k){m.g?m.g.add(k):m.h=k}function We(m,k){m.h&&m.h==k?m.h=null:m.g&&m.g.has(k)&&m.g.delete(k)}lt.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Je(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let k=m.i;for(const B of m.g.values())k=k.concat(B.D);return k}return T(m.i)}function Ot(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var k=[],B=m.length,ie=0;ie<B;ie++)k.push(m[ie]);return k}k=[],B=0;for(ie in m)k[B++]=m[ie];return k}function Xt(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var k=[];m=m.length;for(var B=0;B<m;B++)k.push(B);return k}k=[],B=0;for(const ie in m)k[B++]=ie;return k}}}function je(m,k){if(m.forEach&&typeof m.forEach=="function")m.forEach(k,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,k,void 0);else for(var B=Xt(m),ie=Ot(m),Se=ie.length,Le=0;Le<Se;Le++)k.call(void 0,ie[Le],B&&B[Le],m)}var Re=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function K(m,k){if(m){m=m.split("&");for(var B=0;B<m.length;B++){var ie=m[B].indexOf("="),Se=null;if(0<=ie){var Le=m[B].substring(0,ie);Se=m[B].substring(ie+1)}else Le=m[B];k(Le,Se?decodeURIComponent(Se.replace(/\+/g," ")):"")}}}function fe(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof fe){this.h=m.h,$e(this,m.j),this.o=m.o,this.g=m.g,Ve(this,m.s),this.l=m.l;var k=m.i,B=new Hs;B.i=k.i,k.g&&(B.g=new Map(k.g),B.h=k.h),Ze(this,B),this.m=m.m}else m&&(k=String(m).match(Re))?(this.h=!1,$e(this,k[1]||"",!0),this.o=dt(k[2]||""),this.g=dt(k[3]||"",!0),Ve(this,k[4]),this.l=dt(k[5]||"",!0),Ze(this,k[6]||"",!0),this.m=dt(k[7]||"")):(this.h=!1,this.i=new Hs(null,this.h))}fe.prototype.toString=function(){var m=[],k=this.j;k&&m.push(Tn(k,Wn,!0),":");var B=this.g;return(B||k=="file")&&(m.push("//"),(k=this.o)&&m.push(Tn(k,Wn,!0),"@"),m.push(encodeURIComponent(String(B)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.s,B!=null&&m.push(":",String(B))),(B=this.l)&&(this.g&&B.charAt(0)!="/"&&m.push("/"),m.push(Tn(B,B.charAt(0)=="/"?Tr:cr,!0))),(B=this.i.toString())&&m.push("?",B),(B=this.m)&&m.push("#",Tn(B,br)),m.join("")};function Me(m){return new fe(m)}function $e(m,k,B){m.j=B?dt(k,!0):k,m.j&&(m.j=m.j.replace(/:$/,""))}function Ve(m,k){if(k){if(k=Number(k),isNaN(k)||0>k)throw Error("Bad port number "+k);m.s=k}else m.s=null}function Ze(m,k,B){k instanceof Hs?(m.i=k,Gs(m.i,m.h)):(B||(k=Tn(k,Rr)),m.i=new Hs(k,m.h))}function Qe(m,k,B){m.i.set(k,B)}function kt(m){return Qe(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function dt(m,k){return m?k?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Tn(m,k,B){return typeof m=="string"?(m=encodeURI(m).replace(k,Kn),B&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Kn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Wn=/[#\/\?@]/g,cr=/[#\?:]/g,Tr=/[#\?]/g,Rr=/[#\?@]/g,br=/#/g;function Hs(m,k){this.h=this.g=null,this.i=m||null,this.j=!!k}function ti(m){m.g||(m.g=new Map,m.h=0,m.i&&K(m.i,function(k,B){m.add(decodeURIComponent(k.replace(/\+/g," ")),B)}))}r=Hs.prototype,r.add=function(m,k){ti(this),this.i=null,m=us(this,m);var B=this.g.get(m);return B||this.g.set(m,B=[]),B.push(k),this.h+=1,this};function Ss(m,k){ti(m),k=us(m,k),m.g.has(k)&&(m.i=null,m.h-=m.g.get(k).length,m.g.delete(k))}function Is(m,k){return ti(m),k=us(m,k),m.g.has(k)}r.forEach=function(m,k){ti(this),this.g.forEach(function(B,ie){B.forEach(function(Se){m.call(k,Se,ie,this)},this)},this)},r.na=function(){ti(this);const m=Array.from(this.g.values()),k=Array.from(this.g.keys()),B=[];for(let ie=0;ie<k.length;ie++){const Se=m[ie];for(let Le=0;Le<Se.length;Le++)B.push(k[ie])}return B},r.V=function(m){ti(this);let k=[];if(typeof m=="string")Is(this,m)&&(k=k.concat(this.g.get(us(this,m))));else{m=Array.from(this.g.values());for(let B=0;B<m.length;B++)k=k.concat(m[B])}return k},r.set=function(m,k){return ti(this),this.i=null,m=us(this,m),Is(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[k]),this.h+=1,this},r.get=function(m,k){return m?(m=this.V(m),0<m.length?String(m[0]):k):k};function oa(m,k,B){Ss(m,k),0<B.length&&(m.i=null,m.g.set(us(m,k),T(B)),m.h+=B.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],k=Array.from(this.g.keys());for(var B=0;B<k.length;B++){var ie=k[B];const Le=encodeURIComponent(String(ie)),ht=this.V(ie);for(ie=0;ie<ht.length;ie++){var Se=Le;ht[ie]!==""&&(Se+="="+encodeURIComponent(String(ht[ie]))),m.push(Se)}}return this.i=m.join("&")};function us(m,k){return k=String(k),m.j&&(k=k.toLowerCase()),k}function Gs(m,k){k&&!m.j&&(ti(m),m.i=null,m.g.forEach(function(B,ie){var Se=ie.toLowerCase();ie!=Se&&(Ss(this,ie),oa(this,Se,B))},m)),m.j=k}function lg(m,k){const B=new L;if(u.Image){const ie=new Image;ie.onload=S(Li,B,"TestLoadImage: loaded",!0,k,ie),ie.onerror=S(Li,B,"TestLoadImage: error",!1,k,ie),ie.onabort=S(Li,B,"TestLoadImage: abort",!1,k,ie),ie.ontimeout=S(Li,B,"TestLoadImage: timeout",!1,k,ie),u.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=m}else k(!1)}function Vh(m,k){const B=new L,ie=new AbortController,Se=setTimeout(()=>{ie.abort(),Li(B,"TestPingServer: timeout",!1,k)},1e4);fetch(m,{signal:ie.signal}).then(Le=>{clearTimeout(Se),Le.ok?Li(B,"TestPingServer: ok",!0,k):Li(B,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(Se),Li(B,"TestPingServer: error",!1,k)})}function Li(m,k,B,ie,Se){try{Se&&(Se.onload=null,Se.onerror=null,Se.onabort=null,Se.ontimeout=null),ie(B)}catch{}}function cg(){this.g=new on}function Fh(m,k,B){const ie=B||"";try{je(m,function(Se,Le){let ht=Se;f(Se)&&(ht=Et(Se)),k.push(ie+Le+"="+encodeURIComponent(ht))})}catch(Se){throw k.push(ie+"type="+encodeURIComponent("_badmap")),Se}}function Ao(m){this.l=m.Ub||null,this.j=m.eb||!1}R(Ao,xt),Ao.prototype.g=function(){return new rl(this.l,this.j)},Ao.prototype.i=(function(m){return function(){return m}})({});function rl(m,k){Qt.call(this),this.D=m,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(rl,Qt),r=rl.prototype,r.open=function(m,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=k,this.readyState=1,xs(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const k={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(k.body=m),(this.D||u).fetch(new Request(this.A,k)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},r.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zh(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function zh(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}r.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var k=m.value?m.value:new Uint8Array(0);(k=this.v.decode(k,{stream:!m.done}))&&(this.response=this.responseText+=k)}m.done?As(this):xs(this),this.readyState==3&&zh(this)}},r.Ra=function(m){this.g&&(this.response=this.responseText=m,As(this))},r.Qa=function(m){this.g&&(this.response=m,As(this))},r.ga=function(){this.g&&As(this)};function As(m){m.readyState=4,m.l=null,m.j=null,m.v=null,xs(m)}r.setRequestHeader=function(m,k){this.u.append(m,k)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],k=this.h.entries();for(var B=k.next();!B.done;)B=B.value,m.push(B[0]+": "+B[1]),B=k.next();return m.join(`\r
`)};function xs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function xo(m){let k="";return de(m,function(B,ie){k+=ie,k+=":",k+=B,k+=`\r
`}),k}function aa(m,k,B){e:{for(ie in B){var ie=!1;break e}ie=!0}ie||(B=xo(B),typeof m=="string"?B!=null&&encodeURIComponent(String(B)):Qe(m,k,B))}function ur(m){Qt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(ur,Qt);var ug=/^https?$/i,Fu=["POST","PUT"];r=ur.prototype,r.Ha=function(m){this.J=m},r.ea=function(m,k,B,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);k=k?k.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ge.g(),this.v=this.o?mn(this.o):mn(Ge),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(k,String(m),!0),this.B=!1}catch(Le){il(this,Le);return}if(m=B||"",B=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Se in ie)B.set(Se,ie[Se]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Le of ie.keys())B.set(Le,ie.get(Le));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(B.keys()).find(Le=>Le.toLowerCase()=="content-type"),Se=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Fu,k,void 0))||ie||Se||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,ht]of B)this.g.setRequestHeader(Le,ht);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ac(this),this.u=!0,this.g.send(m),this.u=!1}catch(Le){il(this,Le)}};function il(m,k){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=k,m.m=5,oc(m),Xi(m)}function oc(m){m.A||(m.A=!0,Y(m,"complete"),Y(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Y(this,"complete"),Y(this,"abort"),Xi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),ur.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?zu(this):this.bb())},r.bb=function(){zu(this)};function zu(m){if(m.h&&typeof l<"u"&&(!m.v[1]||Bi(m)!=4||m.Z()!=2)){if(m.u&&Bi(m)==4)N(m.Ea,0,m);else if(Y(m,"readystatechange"),Bi(m)==4){m.h=!1;try{const ht=m.Z();e:switch(ht){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var B;if(!(B=k)){var ie;if(ie=ht===0){var Se=String(m.D).match(Re)[1]||null;!Se&&u.self&&u.self.location&&(Se=u.self.location.protocol.slice(0,-1)),ie=!ug.test(Se?Se.toLowerCase():"")}B=ie}if(B)Y(m,"complete"),Y(m,"success");else{m.m=6;try{var Le=2<Bi(m)?m.g.statusText:""}catch{Le=""}m.l=Le+" ["+m.Z()+"]",oc(m)}}finally{Xi(m)}}}}function Xi(m,k){if(m.g){ac(m);const B=m.g,ie=m.v[0]?()=>{}:null;m.g=null,m.v=null,k||Y(m,"ready");try{B.onreadystatechange=ie}catch{}}}function ac(m){m.I&&(u.clearTimeout(m.I),m.I=null)}r.isActive=function(){return!!this.g};function Bi(m){return m.g?m.g.readyState:0}r.Z=function(){try{return 2<Bi(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(m){if(this.g){var k=this.g.responseText;return m&&k.indexOf(m)==0&&(k=k.substring(m.length)),Rt(k)}};function Wu(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function lc(m){const k={};m=(m.g&&2<=Bi(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<m.length;ie++){if(z(m[ie]))continue;var B=q(m[ie]);const Se=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const Le=k[Se]||[];k[Se]=Le,Le.push(B)}Z(k,function(ie){return ie.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(m,k,B){return B&&B.internalChannelParams&&B.internalChannelParams[m]||k}function ju(m){this.Aa=0,this.i=[],this.j=new L,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ys("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ys("baseRetryDelayMs",5e3,m),this.cb=Ys("retryDelaySeedMs",1e4,m),this.Wa=Ys("forwardChannelMaxRetries",2,m),this.wa=Ys("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new lt(m&&m.concurrentRequestLimit),this.Da=new cg,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ju.prototype,r.la=8,r.G=1,r.connect=function(m,k,B,ie){Zt(0),this.W=m,this.H=k||{},B&&ie!==void 0&&(this.H.OSID=B,this.H.OAID=ie),this.F=this.X,this.I=qh(this,null,this.W),Js(this)};function ni(m){if(cc(m),m.G==3){var k=m.U++,B=Me(m.I);if(Qe(B,"SID",m.K),Qe(B,"RID",k),Qe(B,"TYPE","terminate"),To(m,B),k=new He(m,m.j,k),k.L=2,k.v=kt(Me(B)),B=!1,u.navigator&&u.navigator.sendBeacon)try{B=u.navigator.sendBeacon(k.v.toString(),"")}catch{}!B&&u.Image&&(new Image().src=k.v,B=!0),B||(k.g=Kh(k.j,null),k.g.ea(k.v)),k.F=Date.now(),ft(k)}$h(m)}function Ts(m){m.g&&($u(m),m.g.cancel(),m.g=null)}function cc(m){Ts(m),m.u&&(u.clearTimeout(m.u),m.u=null),hc(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function Js(m){if(!xe(m.h)&&!m.s){m.s=!0;var k=m.Ga;J||ae(),G||(J(),G=!0),re.add(k,m),m.B=0}}function dg(m,k){return Ce(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=k.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=hr(E(m.Ga,m,k),jh(m,m.B)),m.B++,!0)}r.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Se=new He(this,this.j,m);let Le=this.o;if(this.S&&(Le?(Le=$(Le),U(Le,this.S)):Le=this.S),this.m!==null||this.O||(Se.H=Le,Le=null),this.P)e:{for(var k=0,B=0;B<this.i.length;B++){t:{var ie=this.i[B];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(k+=ie,4096<k){k=B;break e}if(k===4096||B===this.i.length-1){k=B+1;break e}}k=1e3}else k=1e3;k=la(this,Se,k),B=Me(this.I),Qe(B,"RID",m),Qe(B,"CVER",22),this.D&&Qe(B,"X-HTTP-Session-Id",this.D),To(this,B),Le&&(this.O?k="headers="+encodeURIComponent(String(xo(Le)))+"&"+k:this.m&&aa(B,this.m,Le)),Ue(this.h,Se),this.Ua&&Qe(B,"TYPE","init"),this.P?(Qe(B,"$req",k),Qe(B,"SID","null"),Se.T=!0,Dt(Se,B,null)):Dt(Se,B,k),this.G=2}}else this.G==3&&(m?uc(this,m):this.i.length==0||xe(this.h)||uc(this))};function uc(m,k){var B;k?B=k.l:B=m.U++;const ie=Me(m.I);Qe(ie,"SID",m.K),Qe(ie,"RID",B),Qe(ie,"AID",m.T),To(m,ie),m.m&&m.o&&aa(ie,m.m,m.o),B=new He(m,m.j,B,m.B+1),m.m===null&&(B.H=m.o),k&&(m.i=k.D.concat(m.i)),k=la(m,B,1e3),B.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Ue(m.h,B),Dt(B,ie,k)}function To(m,k){m.H&&de(m.H,function(B,ie){Qe(k,ie,B)}),m.l&&je({},function(B,ie){Qe(k,ie,B)})}function la(m,k,B){B=Math.min(m.i.length,B);var ie=m.l?E(m.l.Na,m.l,m):null;e:{var Se=m.i;let Le=-1;for(;;){const ht=["count="+B];Le==-1?0<B?(Le=Se[0].g,ht.push("ofs="+Le)):Le=0:ht.push("ofs="+Le);let Hn=!0;for(let Fr=0;Fr<B;Fr++){let Nn=Se[Fr].g;const Kr=Se[Fr].map;if(Nn-=Le,0>Nn)Le=Math.max(0,Se[Fr].g-100),Hn=!1;else try{Fh(Kr,ht,"req"+Nn+"_")}catch{ie&&ie(Kr)}}if(Hn){ie=ht.join("&");break e}}}return m=m.i.splice(0,B),k.D=m,ie}function sl(m){if(!m.g&&!m.u){m.Y=1;var k=m.Fa;J||ae(),G||(J(),G=!0),re.add(k,m),m.v=0}}function dc(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=hr(E(m.Fa,m),jh(m,m.v)),m.v++,!0)}r.Fa=function(){if(this.u=null,Wh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=hr(E(this.ab,this),m)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zt(10),Ts(this),Wh(this))};function $u(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function Wh(m){m.g=new He(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var k=Me(m.qa);Qe(k,"RID","rpc"),Qe(k,"SID",m.K),Qe(k,"AID",m.T),Qe(k,"CI",m.F?"0":"1"),!m.F&&m.ja&&Qe(k,"TO",m.ja),Qe(k,"TYPE","xmlhttp"),To(m,k),m.m&&m.o&&aa(k,m.m,m.o),m.L&&(m.g.I=m.L);var B=m.g;m=m.ia,B.L=1,B.v=kt(Me(k)),B.m=null,B.P=!0,jt(B,m)}r.Za=function(){this.C!=null&&(this.C=null,Ts(this),dc(this),Zt(19))};function hc(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function fc(m,k){var B=null;if(m.g==k){hc(m),$u(m),m.g=null;var ie=2}else if(Fe(m.h,k))B=k.D,We(m.h,k),ie=1;else return;if(m.G!=0){if(k.o)if(ie==1){B=k.m?k.m.length:0,k=Date.now()-k.F;var Se=m.B;ie=_r(),Y(ie,new an(ie,B)),Js(m)}else sl(m);else if(Se=k.s,Se==3||Se==0&&0<k.X||!(ie==1&&dg(m,k)||ie==2&&dc(m)))switch(B&&0<B.length&&(k=m.h,k.i=k.i.concat(B)),Se){case 1:Ro(m,5);break;case 4:Ro(m,10);break;case 3:Ro(m,6);break;default:Ro(m,2)}}}function jh(m,k){let B=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(B*=2),B*k}function Ro(m,k){if(m.j.info("Error code "+k),k==2){var B=E(m.fb,m),ie=m.Xa;const Se=!ie;ie=new fe(ie||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||$e(ie,"https"),kt(ie),Se?lg(ie.toString(),B):Vh(ie.toString(),B)}else Zt(2);m.G=0,m.l&&m.l.sa(k),$h(m),cc(m)}r.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function $h(m){if(m.G=0,m.ka=[],m.l){const k=Je(m.h);(k.length!=0||m.i.length!=0)&&(M(m.ka,k),M(m.ka,m.i),m.h.i.length=0,T(m.i),m.i.length=0),m.l.ra()}}function qh(m,k,B){var ie=B instanceof fe?Me(B):new fe(B);if(ie.g!="")k&&(ie.g=k+"."+ie.g),Ve(ie,ie.s);else{var Se=u.location;ie=Se.protocol,k=k?k+"."+Se.hostname:Se.hostname,Se=+Se.port;var Le=new fe(null);ie&&$e(Le,ie),k&&(Le.g=k),Se&&Ve(Le,Se),B&&(Le.l=B),ie=Le}return B=m.D,k=m.ya,B&&k&&Qe(ie,B,k),Qe(ie,"VER",m.la),To(m,ie),ie}function Kh(m,k,B){if(k&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return k=m.Ca&&!m.pa?new ur(new Ao({eb:B})):new ur(m.pa),k.Ha(m.J),k}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}r=qu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function pc(){}pc.prototype.g=function(m,k){return new Pi(m,k)};function Pi(m,k){Qt.call(this),this.g=new ju(k),this.l=m,this.h=k&&k.messageUrlParams||null,m=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(m?m["X-WebChannel-Content-Type"]=k.messageContentType:m={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.va&&(m?m["X-WebChannel-Client-Profile"]=k.va:m={"X-WebChannel-Client-Profile":k.va}),this.g.S=m,(m=k&&k.Sb)&&!z(m)&&(this.g.m=m),this.v=k&&k.supportsCrossDomainXhr||!1,this.u=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!z(k)&&(this.g.D=k,m=this.h,m!==null&&k in m&&(m=this.h,k in m&&delete m[k])),this.j=new Qs(this)}R(Pi,Qt),Pi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pi.prototype.close=function(){ni(this.g)},Pi.prototype.o=function(m){var k=this.g;if(typeof m=="string"){var B={};B.__data__=m,m=B}else this.u&&(B={},B.__data__=Et(m),m=B);k.i.push(new _t(k.Ya++,m)),k.G==3&&Js(k)},Pi.prototype.N=function(){this.g.l=null,delete this.j,ni(this.g),delete this.g,Pi.aa.N.call(this)};function Hh(m){bn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var k=m.__sm__;if(k){e:{for(const B in k){m=B;break e}m=void 0}(this.i=m)&&(m=this.i,k=k!==null&&m in k?k[m]:void 0),this.data=k}else this.data=m}R(Hh,bn);function Gh(){fi.call(this),this.status=1}R(Gh,fi);function Qs(m){this.g=m}R(Qs,qu),Qs.prototype.ua=function(){Y(this.g,"a")},Qs.prototype.ta=function(m){Y(this.g,new Hh(m))},Qs.prototype.sa=function(m){Y(this.g,new Gh)},Qs.prototype.ra=function(){Y(this.g,"b")},pc.prototype.createWebChannel=pc.prototype.g,Pi.prototype.send=Pi.prototype.o,Pi.prototype.open=Pi.prototype.m,Pi.prototype.close=Pi.prototype.close,p2=function(){return new pc},f2=function(){return _r()},h2=Gt,Mw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ve.NO_ERROR=0,ve.TIMEOUT=8,ve.HTTP_ERROR=6,yp=ve,De.COMPLETE="complete",d2=De,qr.EventType=fn,fn.OPEN="a",fn.CLOSE="b",fn.ERROR="c",fn.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,Md=qr,ur.prototype.listenOnce=ur.prototype.L,ur.prototype.getLastError=ur.prototype.Ka,ur.prototype.getLastErrorCode=ur.prototype.Ba,ur.prototype.getStatus=ur.prototype.Z,ur.prototype.getResponseJson=ur.prototype.Oa,ur.prototype.getResponseText=ur.prototype.oa,ur.prototype.send=ur.prototype.ea,ur.prototype.setWithCredentials=ur.prototype.Ha,u2=ur}).apply(typeof Kf<"u"?Kf:typeof self<"u"?self:typeof window<"u"?window:{});const mS="@firebase/firestore",gS="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new Bv("@firebase/firestore");function Wc(){return Wl.logLevel}function Tt(r,...e){if(Wl.logLevel<=Cn.DEBUG){const n=e.map(Yv);Wl.debug(`Firestore (${Ru}): ${r}`,...n)}}function ea(r,...e){if(Wl.logLevel<=Cn.ERROR){const n=e.map(Yv);Wl.error(`Firestore (${Ru}): ${r}`,...n)}}function hu(r,...e){if(Wl.logLevel<=Cn.WARN){const n=e.map(Yv);Wl.warn(`Firestore (${Ru}): ${r}`,...n)}}function Yv(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(r,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,m2(r,i,n)}function m2(r,e,n){let i=`FIRESTORE (${Ru}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ea(i),new Error(i)}function $n(r,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,r||m2(e,s,i)}function cn(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends sa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xi.UNAUTHENTICATED)))}shutdown(){}}class g5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class y5{constructor(e){this.t=e,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$n(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ka;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ka,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ka)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($n(typeof i.accessToken=="string",31837,{l:i}),new g2(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $n(e===null||typeof e=="string",2055,{h:e}),new xi(e)}}class w5{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=xi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class v5{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new w5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$n(this.o===void 0,3512);const i=o=>{o.error!=null&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Tt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const s=o=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($n(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yS(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=_5(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function Pn(r,e){return r<e?-1:r>e?1:0}function Nw(r,e){const n=Math.min(r.length,e.length);for(let i=0;i<n;i++){const s=r.charAt(i),o=e.charAt(i);if(s!==o)return Q0(s)===Q0(o)?Pn(s,o):Q0(s)?1:-1}return Pn(r.length,e.length)}const b5=55296,S5=57343;function Q0(r){const e=r.charCodeAt(0);return e>=b5&&e<=S5}function fu(r,e,n){return r.length===e.length&&r.every(((i,s)=>n(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="__name__";class oo{constructor(e,n,i){n===void 0?n=0:n>e.length&&en(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&en(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return oo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oo?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=oo.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Pn(e.length,n.length)}static compareSegments(e,n){const i=oo.isNumericId(e),s=oo.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?oo.extractNumericId(e).compare(oo.extractNumericId(n)):Nw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qa.fromString(e.substring(4,e.length-2))}}class rr extends oo{construct(e,n,i){return new rr(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new It(qe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new rr(n)}static emptyPath(){return new rr([])}}const I5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ui extends oo{construct(e,n,i){return new ui(e,n,i)}static isValidIdentifier(e){return I5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ui.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wS}static keyField(){return new ui([wS])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new It(qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new It(qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new It(qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(i+=u,s++):(o(),s++)}if(o(),l)throw new It(qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ui(n)}static emptyPath(){return new ui([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.path=e}static fromPath(e){return new $t(rr.fromString(e))}static fromName(e){return new $t(rr.fromString(e).popFirst(5))}static empty(){return new $t(rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $t(new rr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(r,e,n){if(!n)throw new It(qe.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function A5(r,e,n,i){if(e===!0&&i===!0)throw new It(qe.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function vS(r){if(!$t.isDocumentKey(r))throw new It(qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ES(r){if($t.isDocumentKey(r))throw new It(qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function w2(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function xm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":en(12329,{type:typeof r})}function Wp(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new It(qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xm(r);throw new It(qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(r,e){const n={typeString:r};return e&&(n.value=e),n}function Sh(r,e){if(!w2(r))throw new It(qe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){n=`JSON missing required field: '${i}'`;break}const l=r[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new It(qe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=-62135596800,bS=1e6;class lr{static now(){return lr.fromMillis(Date.now())}static fromDate(e){return lr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*bS);return new lr(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new It(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new It(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_S)throw new It(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bS}_compareTo(e){return this.seconds===e.seconds?Pn(this.nanoseconds,e.nanoseconds):Pn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sh(e,lr._jsonSchema))return new lr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_S;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lr._jsonSchemaVersion="firestore/timestamp/1.0",lr._jsonSchema={type:Vr("string",lr._jsonSchemaVersion),seconds:Vr("number"),nanoseconds:Vr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{static fromTimestamp(e){return new ln(e)}static min(){return new ln(new lr(0,0))}static max(){return new ln(new lr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=-1;function x5(r,e){const n=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,s=ln.fromTimestamp(i===1e9?new lr(n+1,0):new lr(n,i));return new Ya(s,$t.empty(),e)}function T5(r){return new Ya(r.readTime,r.key,Zd)}class Ya{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ya(ln.min(),$t.empty(),Zd)}static max(){return new Ya(ln.max(),$t.empty(),Zd)}}function R5(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=$t.comparator(r.documentKey,e.documentKey),n!==0?n:Pn(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(r){if(r.code!==qe.FAILED_PRECONDITION||r.message!==k5)throw r;Tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&en(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ke(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ke?n:Ke.resolve(n)}catch(n){return Ke.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ke.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ke.reject(n)}static resolve(e){return new Ke(((n,i)=>{n(e)}))}static reject(e){return new Ke(((n,i)=>{i(e)}))}static waitFor(e){return new Ke(((n,i)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&n()}),(d=>i(d)))})),l=!0,o===s&&n()}))}static or(e){let n=Ke.resolve(!1);for(const i of e)n=n.next((s=>s?Ke.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,o)=>{i.push(n.call(this,s,o))})),this.waitFor(i)}static mapArray(e,n){return new Ke(((i,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next((p=>{l[f]=p,++u,u===o&&i(l)}),(p=>s(p)))}}))}static doWhile(e,n){return new Ke(((i,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):i()};o()}))}}function P5(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cu(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=-1;function Rm(r){return r==null}function jp(r){return r===0&&1/r==-1/0}function M5(r){return typeof r=="number"&&Number.isInteger(r)&&!jp(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="";function N5(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=SS(e)),e=O5(r.get(n),e);return SS(e)}function O5(r,e){let n=e;const i=r.length;for(let s=0;s<i;s++){const o=r.charAt(s);switch(o){case"\0":n+="";break;case v2:n+="";break;default:n+=o}}return n}function SS(r){return r+v2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Yl(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function E2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){this.comparator=e,this.root=n||li.EMPTY}insert(e,n){return new wr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,li.BLACK,null,null))}remove(e){return new wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,li.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hf(this.root,e,this.comparator,!0)}}class Hf{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class li{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??li.RED,this.left=s??li.EMPTY,this.right=o??li.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new li(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return li.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return li.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw en(43730,{key:this.key,value:this.value});if(this.right.isRed())throw en(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw en(27949);return e+(this.isRed()?0:1)}}li.EMPTY=null,li.RED=!0,li.BLACK=!1;li.EMPTY=new class{constructor(){this.size=0}get key(){throw en(57766)}get value(){throw en(16141)}get color(){throw en(16727)}get left(){throw en(29726)}get right(){throw en(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new li(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.comparator=e,this.data=new wr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new AS(this.data.getIterator())}getIteratorFrom(e){return new AS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof jr)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new jr(this.comparator);return n.data=e,n}}class AS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.fields=e,e.sort(ui.comparator)}static empty(){return new Vs([])}unionWith(e){let n=new jr(ui.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Vs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fu(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _2("Invalid base64 string: "+o):o}})(e);return new hi(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new hi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const D5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ja(r){if($n(!!r,39018),typeof r=="string"){let e=0;const n=D5.exec(r);if($n(!!n,46558,{timestamp:r}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pr(r.seconds),nanos:Pr(r.nanos)}}function Pr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Qa(r){return typeof r=="string"?hi.fromBase64String(r):hi.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="server_timestamp",S2="__type__",I2="__previous_value__",A2="__local_write_time__";function Xv(r){return(r?.mapValue?.fields||{})[S2]?.stringValue===b2}function km(r){const e=r.mapValue.fields[I2];return Xv(e)?km(e):e}function eh(r){const e=Ja(r.mapValue.fields[A2].timestampValue);return new lr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,n,i,s,o,l,u,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const $p="(default)";class th{constructor(e,n){this.projectId=e,this.database=n||$p}static empty(){return new th("","")}get isDefaultDatabase(){return this.database===$p}isEqual(e){return e instanceof th&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2="__type__",B5="__max__",Gf={mapValue:{}},T2="__vector__",qp="value";function Xa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Xv(r)?4:V5(r)?9007199254740991:U5(r)?10:11:en(28295,{value:r})}function _o(r,e){if(r===e)return!0;const n=Xa(r);if(n!==Xa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return eh(r).isEqual(eh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Ja(s.timestampValue),u=Ja(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,o){return Qa(s.bytesValue).isEqual(Qa(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,o){return Pr(s.geoPointValue.latitude)===Pr(o.geoPointValue.latitude)&&Pr(s.geoPointValue.longitude)===Pr(o.geoPointValue.longitude)})(r,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Pr(s.integerValue)===Pr(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Pr(s.doubleValue),u=Pr(o.doubleValue);return l===u?jp(l)===jp(u):isNaN(l)&&isNaN(u)}return!1})(r,e);case 9:return fu(r.arrayValue.values||[],e.arrayValue.values||[],_o);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(IS(l)!==IS(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!_o(l[d],u[d])))return!1;return!0})(r,e);default:return en(52216,{left:r})}}function nh(r,e){return(r.values||[]).find((n=>_o(n,e)))!==void 0}function pu(r,e){if(r===e)return 0;const n=Xa(r),i=Xa(e);if(n!==i)return Pn(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pn(r.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=Pr(o.integerValue||o.doubleValue),d=Pr(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(r,e);case 3:return xS(r.timestampValue,e.timestampValue);case 4:return xS(eh(r),eh(e));case 5:return Nw(r.stringValue,e.stringValue);case 6:return(function(o,l){const u=Qa(o),d=Qa(l);return u.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const p=Pn(u[f],d[f]);if(p!==0)return p}return Pn(u.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Pn(Pr(o.latitude),Pr(l.latitude));return u!==0?u:Pn(Pr(o.longitude),Pr(l.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return TS(r.arrayValue,e.arrayValue);case 10:return(function(o,l){const u=o.fields||{},d=l.fields||{},f=u[qp]?.arrayValue,p=d[qp]?.arrayValue,v=Pn(f?.values?.length||0,p?.values?.length||0);return v!==0?v:TS(f,p)})(r.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Gf.mapValue&&l===Gf.mapValue)return 0;if(o===Gf.mapValue)return 1;if(l===Gf.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let v=0;v<d.length&&v<p.length;++v){const E=Nw(d[v],p[v]);if(E!==0)return E;const S=pu(u[d[v]],f[p[v]]);if(S!==0)return S}return Pn(d.length,p.length)})(r.mapValue,e.mapValue);default:throw en(23264,{he:n})}}function xS(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Pn(r,e);const n=Ja(r),i=Ja(e),s=Pn(n.seconds,i.seconds);return s!==0?s:Pn(n.nanos,i.nanos)}function TS(r,e){const n=r.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=pu(n[s],i[s]);if(o)return o}return Pn(n.length,i.length)}function mu(r){return Ow(r)}function Ow(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const i=Ja(n);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Qa(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return $t.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=Ow(o);return i+"]"})(r.arrayValue):"mapValue"in r?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${Ow(n.fields[l])}`;return s+"}"})(r.mapValue):en(61005,{value:r})}function wp(r){switch(Xa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=km(r);return e?16+wp(e):16;case 5:return 2*r.stringValue.length;case 6:return Qa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+wp(o)),0)})(r.arrayValue);case 10:case 11:return(function(i){let s=0;return Yl(i.fields,((o,l)=>{s+=o.length+wp(l)})),s})(r.mapValue);default:throw en(13486,{value:r})}}function RS(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Dw(r){return!!r&&"integerValue"in r}function Zv(r){return!!r&&"arrayValue"in r}function kS(r){return!!r&&"nullValue"in r}function CS(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function vp(r){return!!r&&"mapValue"in r}function U5(r){return(r?.mapValue?.fields||{})[x2]?.stringValue===T2}function Fd(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Yl(r.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Fd(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fd(r.arrayValue.values[n]);return e}return{...r}}function V5(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===B5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!vp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fd(n)}setAll(e){let n=ui.emptyPath(),i={},s=[];e.forEach(((l,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=u.popLast()}l?i[u.lastSegment()]=Fd(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());vp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _o(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];vp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Yl(n,((s,o)=>e[s]=o));for(const s of i)delete e[s]}clone(){return new Es(Fd(this.value))}}function R2(r){const e=[];return Yl(r.fields,((n,i)=>{const s=new ui([n]);if(vp(i)){const o=R2(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Vs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,i,s,o,l,u){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Ti(e,0,ln.min(),ln.min(),ln.min(),Es.empty(),0)}static newFoundDocument(e,n,i,s){return new Ti(e,1,n,ln.min(),i,s,0)}static newNoDocument(e,n){return new Ti(e,2,n,ln.min(),ln.min(),Es.empty(),0)}static newUnknownDocument(e,n){return new Ti(e,3,n,ln.min(),ln.min(),Es.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ln.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ln.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n){this.position=e,this.inclusive=n}}function PS(r,e,n){let i=0;for(let s=0;s<r.position.length;s++){const o=e[s],l=r.position[s];if(o.field.isKeyField()?i=$t.comparator($t.fromName(l.referenceValue),n.key):i=pu(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function MS(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!_o(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n="asc"){this.field=e,this.dir=n}}function F5(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{}class Ur extends k2{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new W5(e,n,i):n==="array-contains"?new q5(e,i):n==="in"?new K5(e,i):n==="not-in"?new H5(e,i):n==="array-contains-any"?new G5(e,i):new Ur(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new j5(e,i):new $5(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pu(n,this.value)):n!==null&&Xa(this.value)===Xa(n)&&this.matchesComparison(pu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return en(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ws extends k2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ws(e,n)}matches(e){return C2(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function C2(r){return r.op==="and"}function P2(r){return z5(r)&&C2(r)}function z5(r){for(const e of r.filters)if(e instanceof Ws)return!1;return!0}function Lw(r){if(r instanceof Ur)return r.field.canonicalString()+r.op.toString()+mu(r.value);if(P2(r))return r.filters.map((e=>Lw(e))).join(",");{const e=r.filters.map((n=>Lw(n))).join(",");return`${r.op}(${e})`}}function M2(r,e){return r instanceof Ur?(function(i,s){return s instanceof Ur&&i.op===s.op&&i.field.isEqual(s.field)&&_o(i.value,s.value)})(r,e):r instanceof Ws?(function(i,s){return s instanceof Ws&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,l,u)=>o&&M2(l,s.filters[u])),!0):!1})(r,e):void en(19439)}function N2(r){return r instanceof Ur?(function(n){return`${n.field.canonicalString()} ${n.op} ${mu(n.value)}`})(r):r instanceof Ws?(function(n){return n.op.toString()+" {"+n.getFilters().map(N2).join(" ,")+"}"})(r):"Filter"}class W5 extends Ur{constructor(e,n,i){super(e,n,i),this.key=$t.fromName(i.referenceValue)}matches(e){const n=$t.comparator(e.key,this.key);return this.matchesComparison(n)}}class j5 extends Ur{constructor(e,n){super(e,"in",n),this.keys=O2("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class $5 extends Ur{constructor(e,n){super(e,"not-in",n),this.keys=O2("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function O2(r,e){return(e.arrayValue?.values||[]).map((n=>$t.fromName(n.referenceValue)))}class q5 extends Ur{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zv(n)&&nh(n.arrayValue,this.value)}}class K5 extends Ur{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nh(this.value.arrayValue,n)}}class H5 extends Ur{constructor(e,n){super(e,"not-in",n)}matches(e){if(nh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nh(this.value.arrayValue,n)}}class G5 extends Ur{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>nh(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,n=null,i=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function NS(r,e=null,n=[],i=[],s=null,o=null,l=null){return new Y5(r,e,n,i,s,o,l)}function e1(r){const e=cn(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Lw(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Rm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>mu(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>mu(i))).join(",")),e.Te=n}return e.Te}function t1(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!F5(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!M2(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!MS(r.startAt,e.startAt)&&MS(r.endAt,e.endAt)}function Bw(r){return $t.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n=null,i=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function J5(r,e,n,i,s,o,l,u){return new Pu(r,e,n,i,s,o,l,u)}function D2(r){return new Pu(r)}function OS(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function L2(r){return r.collectionGroup!==null}function zd(r){const e=cn(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new jr(ui.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new rh(o,i))})),n.has(ui.keyField().canonicalString())||e.Ie.push(new rh(ui.keyField(),i))}return e.Ie}function go(r){const e=cn(r);return e.Ee||(e.Ee=Q5(e,zd(r))),e.Ee}function Q5(r,e){if(r.limitType==="F")return NS(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new rh(s.field,o)}));const n=r.endAt?new Kp(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Kp(r.startAt.position,r.startAt.inclusive):null;return NS(r.path,r.collectionGroup,e,r.filters,r.limit,n,i)}}function Uw(r,e){const n=r.filters.concat([e]);return new Pu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Vw(r,e,n){return new Pu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Cm(r,e){return t1(go(r),go(e))&&r.limitType===e.limitType}function B2(r){return`${e1(go(r))}|lt:${r.limitType}`}function jc(r){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>N2(s))).join(", ")}]`),Rm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>mu(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>mu(s))).join(",")),`Target(${i})`})(go(r))}; limitType=${r.limitType})`}function Pm(r,e){return e.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):$t.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(r,e)&&(function(i,s){for(const o of zd(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(r,e)&&(function(i,s){return!(i.startAt&&!(function(l,u,d){const f=PS(l,u,d);return l.inclusive?f<=0:f<0})(i.startAt,zd(i),s)||i.endAt&&!(function(l,u,d){const f=PS(l,u,d);return l.inclusive?f>=0:f>0})(i.endAt,zd(i),s))})(r,e)}function X5(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function U2(r){return(e,n)=>{let i=!1;for(const s of zd(r)){const o=Z5(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function Z5(r,e,n){const i=r.field.isKeyField()?$t.comparator(e.key,n.key):(function(o,l,u){const d=l.data.field(o),f=u.data.field(o);return d!==null&&f!==null?pu(d,f):en(42886)})(r.field,e,n);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return en(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Yl(this.inner,((n,i)=>{for(const[s,o]of i)e(s,o)}))}isEmpty(){return E2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new wr($t.comparator);function ta(){return eD}const V2=new wr($t.comparator);function Nd(...r){let e=V2;for(const n of r)e=e.insert(n.key,n);return e}function F2(r){let e=V2;return r.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Al(){return Wd()}function z2(){return Wd()}function Wd(){return new Jl((r=>r.toString()),((r,e)=>r.isEqual(e)))}const tD=new wr($t.comparator),nD=new jr($t.comparator);function Mn(...r){let e=nD;for(const n of r)e=e.add(n);return e}const rD=new jr(Pn);function iD(){return rD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jp(e)?"-0":e}}function W2(r){return{integerValue:""+r}}function sD(r,e){return M5(e)?W2(e):n1(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this._=void 0}}function oD(r,e,n){return r instanceof Hp?(function(s,o){const l={fields:{[S2]:{stringValue:b2},[A2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Xv(o)&&(o=km(o)),o&&(l.fields[I2]=o),{mapValue:l}})(n,e):r instanceof ih?$2(r,e):r instanceof sh?q2(r,e):(function(s,o){const l=j2(s,o),u=DS(l)+DS(s.Ae);return Dw(l)&&Dw(s.Ae)?W2(u):n1(s.serializer,u)})(r,e)}function aD(r,e,n){return r instanceof ih?$2(r,e):r instanceof sh?q2(r,e):n}function j2(r,e){return r instanceof Gp?(function(i){return Dw(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Hp extends Mm{}class ih extends Mm{constructor(e){super(),this.elements=e}}function $2(r,e){const n=K2(e);for(const i of r.elements)n.some((s=>_o(s,i)))||n.push(i);return{arrayValue:{values:n}}}class sh extends Mm{constructor(e){super(),this.elements=e}}function q2(r,e){let n=K2(e);for(const i of r.elements)n=n.filter((s=>!_o(s,i)));return{arrayValue:{values:n}}}class Gp extends Mm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function DS(r){return Pr(r.integerValue||r.doubleValue)}function K2(r){return Zv(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function lD(r,e){return r.field.isEqual(e.field)&&(function(i,s){return i instanceof ih&&s instanceof ih||i instanceof sh&&s instanceof sh?fu(i.elements,s.elements,_o):i instanceof Gp&&s instanceof Gp?_o(i.Ae,s.Ae):i instanceof Hp&&s instanceof Hp})(r.transform,e.transform)}class cD{constructor(e,n){this.version=e,this.transformResults=n}}class Yo{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yo}static exists(e){return new Yo(void 0,e)}static updateTime(e){return new Yo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ep(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Nm{}function H2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Y2(r.key,Yo.none()):new Ih(r.key,r.data,Yo.none());{const n=r.data,i=Es.empty();let s=new jr(ui.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new Ql(r.key,i,new Vs(s.toArray()),Yo.none())}}function uD(r,e,n){r instanceof Ih?(function(s,o,l){const u=s.value.clone(),d=BS(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(r,e,n):r instanceof Ql?(function(s,o,l){if(!Ep(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=BS(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(G2(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(r,e,n):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function jd(r,e,n,i){return r instanceof Ih?(function(o,l,u,d){if(!Ep(o.precondition,l))return u;const f=o.value.clone(),p=US(o.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(r,e,n,i):r instanceof Ql?(function(o,l,u,d){if(!Ep(o.precondition,l))return u;const f=US(o.fieldTransforms,d,l),p=l.data;return p.setAll(G2(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(r,e,n,i):(function(o,l,u){return Ep(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(r,e,n)}function dD(r,e){let n=null;for(const i of r.fieldTransforms){const s=e.data.field(i.field),o=j2(i.transform,s||null);o!=null&&(n===null&&(n=Es.empty()),n.set(i.field,o))}return n||null}function LS(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&fu(i,s,((o,l)=>lD(o,l)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ih extends Nm{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ql extends Nm{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function G2(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=r.data.field(n);e.set(n,i)}})),e}function BS(r,e,n){const i=new Map;$n(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let s=0;s<n.length;s++){const o=r[s],l=o.transform,u=e.data.field(o.field);i.set(o.field,aD(l,u,n[s]))}return i}function US(r,e,n){const i=new Map;for(const s of r){const o=s.transform,l=n.data.field(s.field);i.set(s.field,oD(o,l,e))}return i}class Y2 extends Nm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hD extends Nm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&uD(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=jd(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=jd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=z2();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=n.has(s.key)?null:u;const d=H2(l,u);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(ln.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Mn())}isEqual(e){return this.batchId===e.batchId&&fu(this.mutations,e.mutations,((n,i)=>LS(n,i)))&&fu(this.baseMutations,e.baseMutations,((n,i)=>LS(n,i)))}}class r1{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){$n(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return tD})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new r1(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dr,On;function gD(r){switch(r){case qe.OK:return en(64938);case qe.CANCELLED:case qe.UNKNOWN:case qe.DEADLINE_EXCEEDED:case qe.RESOURCE_EXHAUSTED:case qe.INTERNAL:case qe.UNAVAILABLE:case qe.UNAUTHENTICATED:return!1;case qe.INVALID_ARGUMENT:case qe.NOT_FOUND:case qe.ALREADY_EXISTS:case qe.PERMISSION_DENIED:case qe.FAILED_PRECONDITION:case qe.ABORTED:case qe.OUT_OF_RANGE:case qe.UNIMPLEMENTED:case qe.DATA_LOSS:return!0;default:return en(15467,{code:r})}}function J2(r){if(r===void 0)return ea("GRPC error has no .code"),qe.UNKNOWN;switch(r){case Dr.OK:return qe.OK;case Dr.CANCELLED:return qe.CANCELLED;case Dr.UNKNOWN:return qe.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return qe.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return qe.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return qe.INTERNAL;case Dr.UNAVAILABLE:return qe.UNAVAILABLE;case Dr.UNAUTHENTICATED:return qe.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return qe.INVALID_ARGUMENT;case Dr.NOT_FOUND:return qe.NOT_FOUND;case Dr.ALREADY_EXISTS:return qe.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return qe.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return qe.FAILED_PRECONDITION;case Dr.ABORTED:return qe.ABORTED;case Dr.OUT_OF_RANGE:return qe.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return qe.UNIMPLEMENTED;case Dr.DATA_LOSS:return qe.DATA_LOSS;default:return en(39323,{code:r})}}(On=Dr||(Dr={}))[On.OK=0]="OK",On[On.CANCELLED=1]="CANCELLED",On[On.UNKNOWN=2]="UNKNOWN",On[On.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",On[On.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",On[On.NOT_FOUND=5]="NOT_FOUND",On[On.ALREADY_EXISTS=6]="ALREADY_EXISTS",On[On.PERMISSION_DENIED=7]="PERMISSION_DENIED",On[On.UNAUTHENTICATED=16]="UNAUTHENTICATED",On[On.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",On[On.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",On[On.ABORTED=10]="ABORTED",On[On.OUT_OF_RANGE=11]="OUT_OF_RANGE",On[On.UNIMPLEMENTED=12]="UNIMPLEMENTED",On[On.INTERNAL=13]="INTERNAL",On[On.UNAVAILABLE=14]="UNAVAILABLE",On[On.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=new qa([4294967295,4294967295],0);function VS(r){const e=yD().encode(r),n=new c2;return n.update(e),new Uint8Array(n.digest())}function FS(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new qa([n,i],0),new qa([s,o],0)]}class i1{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Od(`Invalid padding: ${n}`);if(i<0)throw new Od(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Od(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Od(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qa.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(qa.fromNumber(i)));return s.compare(wD)===1&&(s=new qa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=VS(e),[i,s]=FS(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new i1(o,s,n);return i.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const n=VS(e),[i,s]=FS(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Od extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Ah.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Om(ln.min(),s,new wr(Pn),ta(),Mn())}}class Ah{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ah(i,n,Mn(),Mn(),Mn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class Q2{constructor(e,n){this.targetId=e,this.Ce=n}}class X2{constructor(e,n,i=hi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class zS{constructor(){this.ve=0,this.Fe=WS(),this.Me=hi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Mn(),n=Mn(),i=Mn();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:en(38017,{changeType:o})}})),new Ah(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=WS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$n(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vD{constructor(e){this.Ge=e,this.ze=new Map,this.je=ta(),this.Je=Yf(),this.He=Yf(),this.Ye=new wr(Pn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:en(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Bw(o))if(i===0){const l=new $t(o.path);this.et(n,l,Ti.newNoDocument(l,ln.min()))}else $n(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,u;try{l=Qa(i).toUint8Array()}catch(d){if(d instanceof _2)return hu("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new i1(l,s,o)}catch(d){return hu(d instanceof Od?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&Bw(u.target)){const d=new $t(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Ti.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}}));let i=Mn();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new Om(e,n,this.Ye,this.je,i);return this.je=ta(),this.Je=Yf(),this.He=Yf(),this.Ye=new wr(Pn),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new zS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new jr(Pn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new jr(Pn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Tt("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zS),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Yf(){return new wr($t.comparator)}function WS(){return new wr($t.comparator)}const ED={asc:"ASCENDING",desc:"DESCENDING"},_D={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bD={and:"AND",or:"OR"};class SD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fw(r,e){return r.useProto3Json||Rm(e)?e:{value:e}}function Yp(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Z2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function ID(r,e){return Yp(r,e.toTimestamp())}function yo(r){return $n(!!r,49232),ln.fromTimestamp((function(n){const i=Ja(n);return new lr(i.seconds,i.nanos)})(r))}function s1(r,e){return zw(r,e).canonicalString()}function zw(r,e){const n=(function(s){return new rr(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?n:n.child(e)}function eR(r){const e=rr.fromString(r);return $n(sR(e),10190,{key:e.toString()}),e}function Ww(r,e){return s1(r.databaseId,e.path)}function X0(r,e){const n=eR(e);if(n.get(1)!==r.databaseId.projectId)throw new It(qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new It(qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new $t(nR(n))}function tR(r,e){return s1(r.databaseId,e)}function AD(r){const e=eR(r);return e.length===4?rr.emptyPath():nR(e)}function jw(r){return new rr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function nR(r){return $n(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function jS(r,e,n){return{name:Ww(r,e),fields:n.value.mapValue.fields}}function xD(r,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:en(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?($n(p===void 0||typeof p=="string",58123),hi.fromBase64String(p||"")):($n(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),hi.fromUint8Array(p||new Uint8Array))})(r,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(f){const p=f.code===void 0?qe.UNKNOWN:J2(f.code);return new It(p,f.message||"")})(l);n=new X2(i,s,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=X0(r,i.document.name),o=yo(i.document.updateTime),l=i.document.createTime?yo(i.document.createTime):ln.min(),u=new Es({mapValue:{fields:i.document.fields}}),d=Ti.newFoundDocument(s,o,l,u),f=i.targetIds||[],p=i.removedTargetIds||[];n=new _p(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=X0(r,i.document),o=i.readTime?yo(i.readTime):ln.min(),l=Ti.newNoDocument(s,o),u=i.removedTargetIds||[];n=new _p([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=X0(r,i.document),o=i.removedTargetIds||[];n=new _p([],o,s,null)}else{if(!("filter"in e))return en(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new mD(s,o),u=i.targetId;n=new Q2(u,l)}}return n}function TD(r,e){let n;if(e instanceof Ih)n={update:jS(r,e.key,e.value)};else if(e instanceof Y2)n={delete:Ww(r,e.key)};else if(e instanceof Ql)n={update:jS(r,e.key,e.data),updateMask:LD(e.fieldMask)};else{if(!(e instanceof hD))return en(16599,{Vt:e.type});n={verify:Ww(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const u=l.transform;if(u instanceof Hp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ih)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof sh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Gp)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw en(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:ID(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:en(27497)})(r,e.precondition)),n}function RD(r,e){return r&&r.length>0?($n(e!==void 0,14353),r.map((n=>(function(s,o){let l=s.updateTime?yo(s.updateTime):yo(o);return l.isEqual(ln.min())&&(l=yo(o)),new cD(l,s.transformResults||[])})(n,e)))):[]}function kD(r,e){return{documents:[tR(r,e.path)]}}function CD(r,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=tR(r,s);const o=(function(f){if(f.length!==0)return iR(Ws.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((p=>(function(E){return{field:$c(E.field),direction:ND(E.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=Fw(r,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:s}}function PD(r){let e=AD(r.parent);const n=r.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){$n(i===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(v){const E=rR(v);return E instanceof Ws&&P2(E)?E.getFilters():[E]})(n.where));let l=[];n.orderBy&&(l=(function(v){return v.map((E=>(function(R){return new rh(qc(R.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(E)))})(n.orderBy));let u=null;n.limit&&(u=(function(v){let E;return E=typeof v=="object"?v.value:v,Rm(E)?null:E})(n.limit));let d=null;n.startAt&&(d=(function(v){const E=!!v.before,S=v.values||[];return new Kp(S,E)})(n.startAt));let f=null;return n.endAt&&(f=(function(v){const E=!v.before,S=v.values||[];return new Kp(S,E)})(n.endAt)),J5(e,s,l,o,u,"F",d,f)}function MD(r,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return en(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rR(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=qc(n.unaryFilter.field);return Ur.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=qc(n.unaryFilter.field);return Ur.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=qc(n.unaryFilter.field);return Ur.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=qc(n.unaryFilter.field);return Ur.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return en(61313);default:return en(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Ur.create(qc(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return en(58110);default:return en(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Ws.create(n.compositeFilter.filters.map((i=>rR(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return en(1026)}})(n.compositeFilter.op))})(r):en(30097,{filter:r})}function ND(r){return ED[r]}function OD(r){return _D[r]}function DD(r){return bD[r]}function $c(r){return{fieldPath:r.canonicalString()}}function qc(r){return ui.fromServerFormat(r.fieldPath)}function iR(r){return r instanceof Ur?(function(n){if(n.op==="=="){if(CS(n.value))return{unaryFilter:{field:$c(n.field),op:"IS_NAN"}};if(kS(n.value))return{unaryFilter:{field:$c(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(CS(n.value))return{unaryFilter:{field:$c(n.field),op:"IS_NOT_NAN"}};if(kS(n.value))return{unaryFilter:{field:$c(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$c(n.field),op:OD(n.op),value:n.value}}})(r):r instanceof Ws?(function(n){const i=n.getFilters().map((s=>iR(s)));return i.length===1?i[0]:{compositeFilter:{op:DD(n.op),filters:i}}})(r):en(54877,{filter:r})}function LD(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function sR(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n,i,s,o=ln.min(),l=ln.min(),u=hi.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Ua(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.yt=e}}function UD(r){const e=PD({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Vw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.Cn=new FD}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ke.resolve()}getCollectionParents(e,n){return Ke.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ke.resolve()}deleteFieldIndex(e,n){return Ke.resolve()}deleteAllFieldIndexes(e){return Ke.resolve()}createTargetIndexes(e,n){return Ke.resolve()}getDocumentsMatchingTarget(e,n){return Ke.resolve(null)}getIndexType(e,n){return Ke.resolve(0)}getFieldIndexes(e,n){return Ke.resolve([])}getNextCollectionGroupToUpdate(e){return Ke.resolve(null)}getMinOffset(e,n){return Ke.resolve(Ya.min())}getMinOffsetFromCollectionGroup(e,n){return Ke.resolve(Ya.min())}updateCollectionGroup(e,n,i){return Ke.resolve()}updateIndexEntries(e,n){return Ke.resolve()}}class FD{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new jr(rr.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new jr(rr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oR=41943040;class qi{static withCacheSize(e){return new qi(e,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi.DEFAULT_COLLECTION_PERCENTILE=10,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qi.DEFAULT=new qi(oR,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qi.DISABLED=new qi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new gu(0)}static cr(){return new gu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="LruGarbageCollector",zD=1048576;function KS([r,e],[n,i]){const s=Pn(r,n);return s===0?Pn(e,i):s}class WD{constructor(e){this.Ir=e,this.buffer=new jr(KS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();KS(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jD{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Tt(qS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cu(n)?Tt(qS,"Ignoring IndexedDB error during garbage collection: ",n):await ku(n)}await this.Vr(3e5)}))}}class $D{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return Ke.resolve(Tm.ce);const i=new WD(n);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Tt("LruGarbageCollector","Garbage collection skipped; disabled"),Ke.resolve($S)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$S):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,o,l,u,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(i=v,u=Date.now(),this.removeTargets(e,i,n)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Wc()<=Cn.DEBUG&&Tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),Ke.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v}))))}}function qD(r,e){return new $D(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.changes=new Jl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ti.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Ke.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&jd(i.mutation,s,Vs.empty(),lr.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Mn()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Mn()){const s=Al();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((o=>{let l=Nd();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=Al();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Mn())))}populateOverlays(e,n,i){const s=[];return i.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{n.set(l,u)}))}))}computeViews(e,n,i,s){let o=ta();const l=Wd(),u=(function(){return Wd()})();return n.forEach(((d,f)=>{const p=i.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof Ql)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),jd(p.mutation,f,p.mutation.getFieldMask(),lr.now())):l.set(f.key,Vs.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,p)=>l.set(f,p))),n.forEach(((f,p)=>u.set(f,new HD(p,l.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,n){const i=Wd();let s=new wr(((l,u)=>l-u)),o=Mn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const u of l)u.keys().forEach((d=>{const f=n.get(d);if(f===null)return;let p=i.get(d)||Vs.empty();p=u.applyToLocalView(f,p),i.set(d,p);const v=(s.get(u.batchId)||Mn()).add(d);s=s.insert(u.batchId,v)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,p=d.value,v=z2();p.forEach((E=>{if(!o.has(E)){const S=H2(n.get(E),i.get(E));S!==null&&v.set(E,S),o=o.add(E)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return Ke.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(l){return $t.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):L2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):Ke.resolve(Al());let u=Zd,d=o;return l.next((f=>Ke.forEach(f,((p,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(p)?Ke.resolve():this.remoteDocumentCache.getEntry(e,p).next((E=>{d=d.insert(p,E)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Mn()))).next((p=>({batchId:u,changes:F2(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $t(n)).next((i=>{let s=Nd();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=Nd();return this.indexManager.getCollectionParents(e,o).next((u=>Ke.forEach(u,(d=>{const f=(function(v,E){return new Pu(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((p=>{p.forEach(((v,E)=>{l=l.insert(v,E)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s)))).next((l=>{o.forEach(((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,Ti.newInvalidDocument(p)))}));let u=Nd();return l.forEach(((d,f)=>{const p=o.get(d);p!==void 0&&jd(p.mutation,f,Vs.empty(),lr.now()),Pm(n,f)&&(u=u.insert(d,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Ke.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:yo(s.createTime)}})(n)),Ke.resolve()}getNamedQuery(e,n){return Ke.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:UD(s.bundledQuery),readTime:yo(s.readTime)}})(n)),Ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.overlays=new wr($t.comparator),this.qr=new Map}getOverlay(e,n){return Ke.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Al();return Ke.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,o)=>{this.St(e,n,o)})),Ke.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),Ke.resolve()}getOverlaysForCollection(e,n,i){const s=Al(),o=n.length+1,l=new $t(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return Ke.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new wr(((f,p)=>f-p));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=Al(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=Al(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,p)=>u.set(f,p))),!(u.size()>=s)););return Ke.resolve(u)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new pD(n,i));let o=this.qr.get(n);o===void 0&&(o=Mn(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.sessionToken=hi.EMPTY_BYTE_STRING}getSessionToken(e){return Ke.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.Qr=new jr(Qr.$r),this.Ur=new jr(Qr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Qr(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Qr(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new $t(new rr([])),i=new Qr(n,e),s=new Qr(n,e+1),o=[];return this.Ur.forEachInRange([i,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new $t(new rr([])),i=new Qr(n,e),s=new Qr(n,e+1);let o=Mn();return this.Ur.forEachInRange([i,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new Qr(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Qr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $t.comparator(e.key,n.key)||Pn(e.Yr,n.Yr)}static Kr(e,n){return Pn(e.Yr,n.Yr)||$t.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new jr(Qr.$r)}checkEmpty(e){return Ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new fD(o,n,i,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new Qr(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Ke.resolve(l)}lookupMutationBatch(e,n){return Ke.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),o=s<0?0:s;return Ke.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(this.mutationQueue.length===0?Qv:this.tr-1)}getAllMutationBatches(e){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Qr(n,0),s=new Qr(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],(l=>{const u=this.Xr(l.Yr);o.push(u)})),Ke.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new jr(Pn);return n.forEach((s=>{const o=new Qr(s,0),l=new Qr(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{i=i.add(u.Yr)}))})),Ke.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;$t.isDocumentKey(o)||(o=o.child(""));const l=new Qr(new $t(o),0);let u=new jr(Pn);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),l),Ke.resolve(this.ti(u))}ti(e){const n=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){$n(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Ke.forEach(n.mutations,(s=>{const o=new Qr(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Qr(n,0),s=this.Zr.firstAfterOrEqual(i);return Ke.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ke.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.ri=e,this.docs=(function(){return new wr($t.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Ke.resolve(i?i.document.mutableCopy():Ti.newInvalidDocument(n))}getEntries(e,n){let i=ta();return n.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ti.newInvalidDocument(s))})),Ke.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=ta();const l=n.path,u=new $t(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||R5(T5(p),i)<=0||(s.has(p.key)||Pm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return Ke.resolve(o)}getAllFromCollectionGroup(e,n,i,s){en(9500)}ii(e,n){return Ke.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new eL(this)}getSize(e){return Ke.resolve(this.size)}}class eL extends KD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),Ke.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.persistence=e,this.si=new Jl((n=>e1(n)),t1),this.lastRemoteSnapshotVersion=ln.min(),this.highestTargetId=0,this.oi=0,this._i=new o1,this.targetCount=0,this.ai=gu.ur()}forEachTarget(e,n){return this.si.forEach(((i,s)=>n(s))),Ke.resolve()}getLastRemoteSnapshotVersion(e){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ke.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Ke.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new gu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Ke.resolve()}updateTargetData(e,n){return this.Pr(n),Ke.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),Ke.waitFor(o).next((()=>s))}getTargetCount(e){return Ke.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Ke.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Ke.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),Ke.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Ke.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Ke.resolve(i)}containsKey(e,n){return Ke.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.ui={},this.overlays={},this.ci=new Tm(0),this.li=!1,this.li=!0,this.hi=new QD,this.referenceDelegate=e(this),this.Pi=new tL(this),this.indexManager=new VD,this.remoteDocumentCache=(function(s){return new ZD(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new BD(n),this.Ii=new YD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new XD(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){Tt("MemoryPersistence","Starting transaction:",e);const s=new nL(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,n){return Ke.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class nL extends C5{constructor(e){super(),this.currentSequenceNumber=e}}class a1{constructor(e){this.persistence=e,this.Ri=new o1,this.Vi=null}static mi(e){return new a1(e)}get fi(){if(this.Vi)return this.Vi;throw en(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Ke.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Ke.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Ke.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.fi,(i=>{const s=$t.fromPath(i);return this.gi(e,s).next((o=>{o||n.removeEntry(s,ln.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Ke.or([()=>Ke.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Jp{constructor(e,n){this.persistence=e,this.pi=new Jl((i=>N5(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=qD(this,n)}static mi(e,n){return new Jp(e,n)}Ei(){}di(e){return Ke.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return Ke.forEach(this.pi,((i,s)=>this.br(e,i,s).next((o=>o?Ke.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,n).next((u=>{u||(i++,o.removeEntry(l,ln.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Ke.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Ke.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Ke.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Ke.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wp(e.data.value)),n}br(e,n,i){return Ke.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Ke.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=Mn(),s=Mn();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new l1(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return QM()?8:P5(ki())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.ys(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,n,s,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new rL;return this.Ss(e,n,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,n,l,u.size)}))})).next((()=>o.result))}bs(e,n,i,s){return i.documentReadCount<this.fs?(Wc()<=Cn.DEBUG&&Tt("QueryEngine","SDK will not create cache indexes for query:",jc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ke.resolve()):(Wc()<=Cn.DEBUG&&Tt("QueryEngine","Query:",jc(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Wc()<=Cn.DEBUG&&Tt("QueryEngine","The SDK decides to create cache indexes for query:",jc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,go(n))):Ke.resolve())}ys(e,n){if(OS(n))return Ke.resolve(null);let i=go(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Vw(n,null,"F"),i=go(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=Mn(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.Ds(n,u);return this.Cs(n,f,l,d.readTime)?this.ys(e,Vw(n,null,"F")):this.vs(e,f,n,d)}))))})))))}ws(e,n,i,s){return OS(n)||s.isEqual(ln.min())?Ke.resolve(null):this.ps.getDocuments(e,i).next((o=>{const l=this.Ds(n,o);return this.Cs(n,l,i,s)?Ke.resolve(null):(Wc()<=Cn.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jc(n)),this.vs(e,l,n,x5(s,Zd)).next((u=>u)))}))}Ds(e,n){let i=new jr(U2(e));return n.forEach(((s,o)=>{Pm(e,o)&&(i=i.add(o))})),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,i){return Wc()<=Cn.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",jc(n)),this.ps.getDocumentsMatchingQuery(e,n,Ya.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="LocalStore",sL=3e8;class oL{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new wr(Pn),this.xs=new Jl((o=>e1(o)),t1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function aL(r,e,n,i){return new oL(r,e,n,i)}async function lR(r,e){const n=cn(r);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],u=[];let d=Mn();for(const f of s){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of o){u.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return n.localDocuments.getDocuments(i,d).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:u})))}))}))}function lL(r,e){const n=cn(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,p){const v=f.batch,E=v.keys();let S=Ke.resolve();return E.forEach((R=>{S=S.next((()=>p.getEntry(d,R))).next((T=>{const M=f.docVersions.get(R);$n(M!==null,48541),T.version.compareTo(M)<0&&(v.applyToRemoteDocument(T,f),T.isValidDocument()&&(T.setReadTime(f.commitVersion),p.addEntry(T)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(d,v)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let d=Mn();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function cR(r){const e=cn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function cL(r,e){const n=cn(r),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach(((p,v)=>{const E=s.get(v);if(!E)return;u.push(n.Pi.removeMatchingKeys(o,p.removedDocuments,v).next((()=>n.Pi.addMatchingKeys(o,p.addedDocuments,v))));let S=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(hi.EMPTY_BYTE_STRING,ln.min()).withLastLimboFreeSnapshotVersion(ln.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,i)),s=s.insert(v,S),(function(T,M,W){return T.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=sL?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(E,S,p)&&u.push(n.Pi.updateTargetData(o,S))}));let d=ta(),f=Mn();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))})),u.push(uL(o,l,e.documentUpdates).next((p=>{d=p.ks,f=p.qs}))),!i.isEqual(ln.min())){const p=n.Pi.getLastRemoteSnapshotVersion(o).next((v=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));u.push(p)}return Ke.waitFor(u).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(n.Ms=s,o)))}function uL(r,e,n){let i=Mn(),s=Mn();return n.forEach((o=>i=i.add(o))),e.getEntries(r,i).next((o=>{let l=ta();return n.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(ln.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):Tt(c1,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function dL(r,e){const n=cn(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Qv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function hL(r,e){const n=cn(r);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.Pi.getTargetData(i,e).next((o=>o?(s=o,Ke.resolve(s)):n.Pi.allocateTargetId(i).next((l=>(s=new Ua(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function $w(r,e,n){const i=cn(r),s=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Cu(l))throw l;Tt(c1,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function HS(r,e,n){const i=cn(r);let s=ln.min(),o=Mn();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,p){const v=cn(d),E=v.xs.get(p);return E!==void 0?Ke.resolve(v.Ms.get(E)):v.Pi.getTargetData(f,p)})(i,l,go(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,n?s:ln.min(),n?o:Mn()))).next((u=>(fL(i,X5(e),u),{documents:u,Qs:o})))))}function fL(r,e,n){let i=r.Os.get(e)||ln.min();n.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),r.Os.set(e,i)}class GS{constructor(){this.activeTargetIds=iD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pL{constructor(){this.Mo=new GS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new GS,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="ConnectivityMonitor";class JS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Tt(YS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Tt(YS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf=null;function qw(){return Jf===null?Jf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jf++,"0x"+Jf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="RestConnection",gL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===$p?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,o){const l=qw(),u=this.zo(e,n.toUriEncodedString());Tt(Z0,`Sending RPC '${e}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),p=Au(f);return this.Jo(e,u,d,i,p).then((v=>(Tt(Z0,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw hu(Z0,`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",i),v}))}Ho(e,n,i,s,o,l){return this.Go(e,n,i,s,o)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ru})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>e[o]=s)),i&&i.headers.forEach(((s,o)=>e[o]=s))}zo(e,n){const i=gL[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="WebChannelConnection";class vL extends yL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,o){const l=qw();return new Promise(((u,d)=>{const f=new u2;f.setWithCredentials(!0),f.listenOnce(d2.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case yp.NO_ERROR:const v=f.getResponseJson();Tt(vi,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case yp.TIMEOUT:Tt(vi,`RPC '${e}' ${l} timed out`),d(new It(qe.DEADLINE_EXCEEDED,"Request time out"));break;case yp.HTTP_ERROR:const E=f.getStatus();if(Tt(vi,`RPC '${e}' ${l} failed with status:`,E,"response text:",f.getResponseText()),E>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const T=(function(W){const z=W.toLowerCase().replace(/_/g,"-");return Object.values(qe).indexOf(z)>=0?z:qe.UNKNOWN})(R.status);d(new It(T,R.message))}else d(new It(qe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new It(qe.UNAVAILABLE,"Connection failed."));break;default:en(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Tt(vi,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(s);Tt(vi,`RPC '${e}' ${l} sending request:`,s),f.send(n,"POST",p,i,15)}))}T_(e,n,i){const s=qw(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=p2(),u=f2(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const p=o.join("");Tt(vi,`Creating RPC '${e}' stream ${s}: ${p}`,d);const v=l.createWebChannel(p,d);this.I_(v);let E=!1,S=!1;const R=new wL({Yo:M=>{S?Tt(vi,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(E||(Tt(vi,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),Tt(vi,`RPC '${e}' stream ${s} sending:`,M),v.send(M))},Zo:()=>v.close()}),T=(M,W,z)=>{M.listen(W,(j=>{try{z(j)}catch(se){setTimeout((()=>{throw se}),0)}}))};return T(v,Md.EventType.OPEN,(()=>{S||(Tt(vi,`RPC '${e}' stream ${s} transport opened.`),R.o_())})),T(v,Md.EventType.CLOSE,(()=>{S||(S=!0,Tt(vi,`RPC '${e}' stream ${s} transport closed`),R.a_(),this.E_(v))})),T(v,Md.EventType.ERROR,(M=>{S||(S=!0,hu(vi,`RPC '${e}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),R.a_(new It(qe.UNAVAILABLE,"The operation could not be completed")))})),T(v,Md.EventType.MESSAGE,(M=>{if(!S){const W=M.data[0];$n(!!W,16349);const z=W,j=z?.error||z[0]?.error;if(j){Tt(vi,`RPC '${e}' stream ${s} received error:`,j);const se=j.status;let le=(function($){const D=Dr[$];if(D!==void 0)return J2(D)})(se),de=j.message;le===void 0&&(le=qe.INTERNAL,de="Unknown error status: "+se+" with message "+j.message),S=!0,R.a_(new It(le,de)),v.close()}else Tt(vi,`RPC '${e}' stream ${s} received:`,W),R.u_(W)}})),T(u,h2.STAT_EVENT,(M=>{M.stat===Mw.PROXY?Tt(vi,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===Mw.NOPROXY&&Tt(vi,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function ey(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(r){return new SD(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&Tt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="PersistentStream";class dR{constructor(e,n,i,s,o,l,u,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uR(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===qe.RESOURCE_EXHAUSTED?(ea(n.toString()),ea("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===qe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===n&&this.G_(i,s)}),(i=>{e((()=>{const s=new It(qe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Tt(QS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Tt(QS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EL extends dR{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xD(this.serializer,e),i=(function(o){if(!("targetChange"in o))return ln.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ln.min():l.readTime?yo(l.readTime):ln.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=jw(this.serializer),n.addTarget=(function(o,l){let u;const d=l.target;if(u=Bw(d)?{documents:kD(o,d)}:{query:CD(o,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=Z2(o,l.resumeToken);const f=Fw(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(ln.min())>0){u.readTime=Yp(o,l.snapshotVersion.toTimestamp());const f=Fw(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const i=MD(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=jw(this.serializer),n.removeTarget=e,this.q_(n)}}class _L extends dR{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return $n(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$n(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$n(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=RD(e.writeResults,e.commitTime),i=yo(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=jw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>TD(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{}class SL extends bL{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new It(qe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,zw(n,i),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new It(qe.UNKNOWN,o.toString())}))}Ho(e,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,zw(n,i),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new It(qe.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class IL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ea(n),this.aa=!1):Tt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="RemoteStore";class AL{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{Xl(this)&&(Tt(jl,"Restarting streams for network reachability change."),await(async function(d){const f=cn(d);f.Ea.add(4),await xh(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Lm(f)})(this))}))})),this.Ra=new IL(i,s)}}async function Lm(r){if(Xl(r))for(const e of r.da)await e(!0)}async function xh(r){for(const e of r.da)await e(!1)}function hR(r,e){const n=cn(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),f1(n)?h1(n):Mu(n).O_()&&d1(n,e))}function u1(r,e){const n=cn(r),i=Mu(n);n.Ia.delete(e),i.O_()&&fR(n,e),n.Ia.size===0&&(i.O_()?i.L_():Xl(n)&&n.Ra.set("Unknown"))}function d1(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ln.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mu(r).Y_(e)}function fR(r,e){r.Va.Ue(e),Mu(r).Z_(e)}function h1(r){r.Va=new vD({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Mu(r).start(),r.Ra.ua()}function f1(r){return Xl(r)&&!Mu(r).x_()&&r.Ia.size>0}function Xl(r){return cn(r).Ea.size===0}function pR(r){r.Va=void 0}async function xL(r){r.Ra.set("Online")}async function TL(r){r.Ia.forEach(((e,n)=>{d1(r,e)}))}async function RL(r,e){pR(r),f1(r)?(r.Ra.ha(e),h1(r)):r.Ra.set("Unknown")}async function kL(r,e,n){if(r.Ra.set("Online"),e instanceof X2&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(r,e)}catch(i){Tt(jl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Qp(r,i)}else if(e instanceof _p?r.Va.Ze(e):e instanceof Q2?r.Va.st(e):r.Va.tt(e),!n.isEqual(ln.min()))try{const i=await cR(r.localStore);n.compareTo(i)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=o.Ia.get(f);p&&o.Ia.set(f,p.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,f)=>{const p=o.Ia.get(d);if(!p)return;o.Ia.set(d,p.withResumeToken(hi.EMPTY_BYTE_STRING,p.snapshotVersion)),fR(o,d);const v=new Ua(p.target,d,f,p.sequenceNumber);d1(o,v)})),o.remoteSyncer.applyRemoteEvent(u)})(r,n)}catch(i){Tt(jl,"Failed to raise snapshot:",i),await Qp(r,i)}}async function Qp(r,e,n){if(!Cu(e))throw e;r.Ea.add(1),await xh(r),r.Ra.set("Offline"),n||(n=()=>cR(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Tt(jl,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Lm(r)}))}function mR(r,e){return e().catch((n=>Qp(r,n,e)))}async function Bm(r){const e=cn(r),n=Za(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qv;for(;CL(e);)try{const s=await dL(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,PL(e,s)}catch(s){await Qp(e,s)}gR(e)&&yR(e)}function CL(r){return Xl(r)&&r.Ta.length<10}function PL(r,e){r.Ta.push(e);const n=Za(r);n.O_()&&n.X_&&n.ea(e.mutations)}function gR(r){return Xl(r)&&!Za(r).x_()&&r.Ta.length>0}function yR(r){Za(r).start()}async function ML(r){Za(r).ra()}async function NL(r){const e=Za(r);for(const n of r.Ta)e.ea(n.mutations)}async function OL(r,e,n){const i=r.Ta.shift(),s=r1.from(i,e,n);await mR(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await Bm(r)}async function DL(r,e){e&&Za(r).X_&&await(async function(i,s){if((function(l){return gD(l)&&l!==qe.ABORTED})(s.code)){const o=i.Ta.shift();Za(i).B_(),await mR(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Bm(i)}})(r,e),gR(r)&&yR(r)}async function XS(r,e){const n=cn(r);n.asyncQueue.verifyOperationInProgress(),Tt(jl,"RemoteStore received new credentials");const i=Xl(n);n.Ea.add(3),await xh(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Lm(n)}async function LL(r,e){const n=cn(r);e?(n.Ea.delete(2),await Lm(n)):e||(n.Ea.add(2),await xh(n),n.Ra.set("Unknown"))}function Mu(r){return r.ma||(r.ma=(function(n,i,s){const o=cn(n);return o.sa(),new EL(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:xL.bind(null,r),t_:TL.bind(null,r),r_:RL.bind(null,r),H_:kL.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),f1(r)?h1(r):r.Ra.set("Unknown")):(await r.ma.stop(),pR(r))}))),r.ma}function Za(r){return r.fa||(r.fa=(function(n,i,s){const o=cn(n);return o.sa(),new _L(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:ML.bind(null,r),r_:DL.bind(null,r),ta:NL.bind(null,r),na:OL.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Bm(r)):(await r.fa.stop(),r.Ta.length>0&&(Tt(jl,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ka,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,u=new p1(e,n,l,s,o);return u.start(i),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new It(qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function m1(r,e){if(ea("AsyncQueue",`${e}: ${r}`),Cu(r))return new It(qe.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{static emptySet(e){return new nu(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||$t.comparator(n.key,i.key):(n,i)=>$t.comparator(n.key,i.key),this.keyedMap=Nd(),this.sortedSet=new wr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new nu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.ga=new wr($t.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):en(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class yu{constructor(e,n,i,s,o,l,u,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach((u=>{l.push({type:0,doc:u})})),new yu(e,n,nu.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UL{constructor(){this.queries=eI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=cn(n),o=s.queries;s.queries=eI(),o.forEach(((l,u)=>{for(const d of u.Sa)d.onError(i)}))})(this,new It(qe.ABORTED,"Firestore shutting down"))}}function eI(){return new Jl((r=>B2(r)),Cm)}async function VL(r,e){const n=cn(r);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new BL,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=m1(l,`Initialization of query '${jc(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&g1(n)}async function FL(r,e){const n=cn(r),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function zL(r,e){const n=cn(r);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const u of l.Sa)u.Fa(s)&&(i=!0);l.wa=s}}i&&g1(n)}function WL(r,e,n){const i=cn(r),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);i.queries.delete(e)}function g1(r){r.Ca.forEach((e=>{e.next()}))}var Kw,tI;(tI=Kw||(Kw={})).Ma="default",tI.Cache="cache";class jL{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new yu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.key=e}}class vR{constructor(e){this.key=e}}class $L{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mn(),this.mutatedKeys=Mn(),this.eu=U2(e),this.tu=new nu(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new ZS,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((p,v)=>{const E=s.get(p),S=Pm(this.query,v)?v:null,R=!!E&&this.mutatedKeys.has(E.key),T=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let M=!1;E&&S?E.data.isEqual(S.data)?R!==T&&(i.track({type:3,doc:S}),M=!0):this.su(E,S)||(i.track({type:2,doc:S}),M=!0,(d&&this.eu(S,d)>0||f&&this.eu(S,f)<0)&&(u=!0)):!E&&S?(i.track({type:0,doc:S}),M=!0):E&&!S&&(i.track({type:1,doc:E}),M=!0,(d||f)&&(u=!0)),M&&(S?(l=l.add(S),o=T?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{tu:l,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((p,v)=>(function(S,R){const T=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return en(20277,{Rt:M})}};return T(S)-T(R)})(p.type,v.type)||this.eu(p.doc,v.doc))),this.ou(i),s=s??!1;const u=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new yu(this.query,e.tu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ZS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Mn(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new vR(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new wR(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Mn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return yu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const y1="SyncEngine";class qL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class KL{constructor(e){this.key=e,this.hu=!1}}class HL{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Jl((u=>B2(u)),Cm),this.Iu=new Map,this.Eu=new Set,this.du=new wr($t.comparator),this.Au=new Map,this.Ru=new o1,this.Vu={},this.mu=new Map,this.fu=gu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GL(r,e,n=!0){const i=AR(r);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await ER(i,e,n,!0),s}async function YL(r,e){const n=AR(r);await ER(n,e,!0,!1)}async function ER(r,e,n,i){const s=await hL(r.localStore,go(e)),o=s.targetId,l=r.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await JL(r,e,o,l==="current",s.resumeToken)),r.isPrimaryClient&&n&&hR(r.remoteStore,s),u}async function JL(r,e,n,i,s){r.pu=(v,E,S)=>(async function(T,M,W,z){let j=M.view.ru(W);j.Cs&&(j=await HS(T.localStore,M.query,!1).then((({documents:Z})=>M.view.ru(Z,j))));const se=z&&z.targetChanges.get(M.targetId),le=z&&z.targetMismatches.get(M.targetId)!=null,de=M.view.applyChanges(j,T.isPrimaryClient,se,le);return rI(T,M.targetId,de.au),de.snapshot})(r,v,E,S);const o=await HS(r.localStore,e,!0),l=new $L(e,o.Qs),u=l.ru(o.documents),d=Ah.createSynthesizedTargetChangeForCurrentChange(n,i&&r.onlineState!=="Offline",s),f=l.applyChanges(u,r.isPrimaryClient,d);rI(r,n,f.au);const p=new qL(e,n,l);return r.Tu.set(e,p),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),f.snapshot}async function QL(r,e,n){const i=cn(r),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((l=>!Cm(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await $w(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&u1(i.remoteStore,s.targetId),Hw(i,s.targetId)})).catch(ku)):(Hw(i,s.targetId),await $w(i.localStore,s.targetId,!0))}async function XL(r,e){const n=cn(r),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),u1(n.remoteStore,i.targetId))}async function ZL(r,e,n){const i=o8(r);try{const s=await(function(l,u){const d=cn(l),f=lr.now(),p=u.reduce(((S,R)=>S.add(R.key)),Mn());let v,E;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let R=ta(),T=Mn();return d.Ns.getEntries(S,p).next((M=>{R=M,R.forEach(((W,z)=>{z.isValidDocument()||(T=T.add(W))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,R))).next((M=>{v=M;const W=[];for(const z of u){const j=dD(z,v.get(z.key).overlayedDocument);j!=null&&W.push(new Ql(z.key,j,R2(j.value.mapValue),Yo.exists(!0)))}return d.mutationQueue.addMutationBatch(S,f,W,u)})).next((M=>{E=M;const W=M.applyToLocalDocumentSet(v,T);return d.documentOverlayCache.saveOverlays(S,M.batchId,W)}))})).then((()=>({batchId:E.batchId,changes:F2(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new wr(Pn)),f=f.insert(u,d),l.Vu[l.currentUser.toKey()]=f})(i,s.batchId,n),await Th(i,s.changes),await Bm(i.remoteStore)}catch(s){const o=m1(s,"Failed to persist write");n.reject(o)}}async function _R(r,e){const n=cn(r);try{const i=await cL(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=n.Au.get(o);l&&($n(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?$n(l.hu,14607):s.removedDocuments.size>0&&($n(l.hu,42227),l.hu=!1))})),await Th(n,i,e)}catch(i){await ku(i)}}function nI(r,e,n){const i=cn(r);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=cn(l);d.onlineState=u;let f=!1;d.queries.forEach(((p,v)=>{for(const E of v.Sa)E.va(u)&&(f=!0)})),f&&g1(d)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function e8(r,e,n){const i=cn(r);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new wr($t.comparator);l=l.insert(o,Ti.newNoDocument(o,ln.min()));const u=Mn().add(o),d=new Om(ln.min(),new Map,new wr(Pn),l,u);await _R(i,d),i.du=i.du.remove(o),i.Au.delete(e),w1(i)}else await $w(i.localStore,e,!1).then((()=>Hw(i,e,n))).catch(ku)}async function t8(r,e){const n=cn(r),i=e.batch.batchId;try{const s=await lL(n.localStore,e);SR(n,i,null),bR(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Th(n,s)}catch(s){await ku(s)}}async function n8(r,e,n){const i=cn(r);try{const s=await(function(l,u){const d=cn(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return d.mutationQueue.lookupMutationBatch(f,u).next((v=>($n(v!==null,37113),p=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>d.localDocuments.getDocuments(f,p)))}))})(i.localStore,e);SR(i,e,n),bR(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Th(i,s)}catch(s){await ku(s)}}function bR(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function SR(r,e,n){const i=cn(r);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Hw(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),n&&r.Pu.yu(i,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||IR(r,i)}))}function IR(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(u1(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),w1(r))}function rI(r,e,n){for(const i of n)i instanceof wR?(r.Ru.addReference(i.key,e),r8(r,i)):i instanceof vR?(Tt(y1,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||IR(r,i.key)):en(19791,{wu:i})}function r8(r,e){const n=e.key,i=n.path.canonicalString();r.du.get(n)||r.Eu.has(i)||(Tt(y1,"New document in limbo: "+n),r.Eu.add(i),w1(r))}function w1(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new $t(rr.fromString(e)),i=r.fu.next();r.Au.set(i,new KL(n)),r.du=r.du.insert(n,i),hR(r.remoteStore,new Ua(go(D2(n.path)),i,"TargetPurposeLimboResolution",Tm.ce))}}async function Th(r,e,n){const i=cn(r),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,d)=>{l.push(i.pu(d,e,n).then((f=>{if((f||n)&&i.isPrimaryClient){const p=f?!f.fromCache:n?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(f){s.push(f);const p=l1.As(d.targetId,f);o.push(p)}})))})),await Promise.all(l),i.Pu.H_(s),await(async function(d,f){const p=cn(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>Ke.forEach(f,(E=>Ke.forEach(E.Es,(S=>p.persistence.referenceDelegate.addReference(v,E.targetId,S))).next((()=>Ke.forEach(E.ds,(S=>p.persistence.referenceDelegate.removeReference(v,E.targetId,S)))))))))}catch(v){if(!Cu(v))throw v;Tt(c1,"Failed to update sequence numbers: "+v)}for(const v of f){const E=v.targetId;if(!v.fromCache){const S=p.Ms.get(E),R=S.snapshotVersion,T=S.withLastLimboFreeSnapshotVersion(R);p.Ms=p.Ms.insert(E,T)}}})(i.localStore,o))}async function i8(r,e){const n=cn(r);if(!n.currentUser.isEqual(e)){Tt(y1,"User change. New user:",e.toKey());const i=await lR(n.localStore,e);n.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new It(qe.CANCELLED,l))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Th(n,i.Ls)}}function s8(r,e){const n=cn(r),i=n.Au.get(e);if(i&&i.hu)return Mn().add(i.key);{let s=Mn();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const u=n.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function AR(r){const e=cn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=_R.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e8.bind(null,e),e.Pu.H_=zL.bind(null,e.eventManager),e.Pu.yu=WL.bind(null,e.eventManager),e}function o8(r){const e=cn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n8.bind(null,e),e}class Xp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return aL(this.persistence,new iL,e.initialUser,this.serializer)}Cu(e){return new aR(a1.mi,this.serializer)}Du(e){return new pL}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xp.provider={build:()=>new Xp};class a8 extends Xp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){$n(this.persistence.referenceDelegate instanceof Jp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new jD(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?qi.withCacheSize(this.cacheSizeBytes):qi.DEFAULT;return new aR((i=>Jp.mi(i,n)),this.serializer)}}class Gw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=i8.bind(null,this.syncEngine),await LL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UL})()}createDatastore(e){const n=Dm(e.databaseInfo.databaseId),i=(function(o){return new vL(o)})(e.databaseInfo);return(function(o,l,u,d){return new SL(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,o,l,u){return new AL(i,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>nI(this.syncEngine,n,0)),(function(){return JS.v()?new JS:new mL})())}createSyncEngine(e,n){return(function(s,o,l,u,d,f,p){const v=new HL(s,o,l,u,d,f);return p&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=cn(n);Tt(jl,"RemoteStore shutting down."),i.Ea.add(5),await xh(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gw.provider={build:()=>new Gw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ea("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="FirestoreClient";class c8{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=xi.UNAUTHENTICATED,this.clientId=Jv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{Tt(el,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(Tt(el,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ka;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=m1(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ty(r,e){r.asyncQueue.verifyOperationInProgress(),Tt(el,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let i=n.initialUser;r.setCredentialChangeListener((async s=>{i.isEqual(s)||(await lR(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function iI(r,e){r.asyncQueue.verifyOperationInProgress();const n=await u8(r);Tt(el,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((i=>XS(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,s)=>XS(e.remoteStore,s))),r._onlineComponents=e}async function u8(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Tt(el,"Using user provided OfflineComponentProvider");try{await ty(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===qe.FAILED_PRECONDITION||s.code===qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;hu("Error using user provided cache. Falling back to memory cache: "+n),await ty(r,new Xp)}}else Tt(el,"Using default OfflineComponentProvider"),await ty(r,new a8(void 0));return r._offlineComponents}async function xR(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Tt(el,"Using user provided OnlineComponentProvider"),await iI(r,r._uninitializedComponentsProvider._online)):(Tt(el,"Using default OnlineComponentProvider"),await iI(r,new Gw))),r._onlineComponents}function d8(r){return xR(r).then((e=>e.syncEngine))}async function h8(r){const e=await xR(r),n=e.eventManager;return n.onListen=GL.bind(null,e.syncEngine),n.onUnlisten=QL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XL.bind(null,e.syncEngine),n}function f8(r,e,n={}){const i=new Ka;return r.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,f){const p=new l8({next:E=>{p.Nu(),l.enqueueAndForget((()=>FL(o,v))),E.fromCache&&d.source==="server"?f.reject(new It(qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),v=new jL(u,p,{includeMetadataChanges:!0,qa:!0});return VL(o,v)})(await h8(r),r.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firestore.googleapis.com",oI=!0;class aI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new It(qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RR,this.ssl=oI}else this.host=e.host,this.ssl=e.ssl??oI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zD)throw new It(qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TR(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new It(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new It(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new It(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Um{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new It(qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new It(qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new m5;switch(i.type){case"firstParty":return new v5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new It(qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=sI.get(n);i&&(Tt("ComponentProvider","Removing Datastore"),sI.delete(n),i.terminate())})(this),Promise.resolve()}}function p8(r,e,n,i={}){r=Wp(r,Um);const s=Au(e),o=r._getSettings(),l={...o,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${n}`;s&&(IT(`https://${u}`),AT("Firestore",!0)),o.host!==RR&&o.host!==u&&hu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:i};if(!Vl(d,l)&&(r._setSettings(d),i.mockUserToken)){let f,p;if(typeof i.mockUserToken=="string")f=i.mockUserToken,p=xi.MOCK_USER;else{f=WM(i.mockUserToken,r._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new It(qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new xi(v)}r._authCredentials=new g5(new g2(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Zl(this.firestore,e,this._query)}}class ei{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ei(this.firestore,e,this._key)}toJSON(){return{type:ei._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Sh(n,ei._jsonSchema))return new ei(e,i||null,new $t(rr.fromString(n.referencePath)))}}ei._jsonSchemaVersion="firestore/documentReference/1.0",ei._jsonSchema={type:Vr("string",ei._jsonSchemaVersion),referencePath:Vr("string")};class Ha extends Zl{constructor(e,n,i){super(e,n,D2(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ei(this.firestore,null,new $t(e))}withConverter(e){return new Ha(this.firestore,e,this._path)}}function lI(r,e,...n){if(r=bs(r),y2("collection","path",e),r instanceof Um){const i=rr.fromString(e,...n);return ES(i),new Ha(r,null,i)}{if(!(r instanceof ei||r instanceof Ha))throw new It(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(rr.fromString(e,...n));return ES(i),new Ha(r.firestore,null,i)}}function m8(r,e,...n){if(r=bs(r),arguments.length===1&&(e=Jv.newId()),y2("doc","path",e),r instanceof Um){const i=rr.fromString(e,...n);return vS(i),new ei(r,null,new $t(i))}{if(!(r instanceof ei||r instanceof Ha))throw new It(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(rr.fromString(e,...n));return vS(i),new ei(r.firestore,r instanceof Ha?r.converter:null,new $t(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="AsyncQueue";class uI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uR(this,"async_queue_retry"),this._c=()=>{const i=ey();i&&Tt(cI,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=ey();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ey();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ka;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Cu(e))throw e;Tt(cI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ea("INTERNAL UNHANDLED ERROR: ",dI(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=p1.createAndSchedule(this,e,n,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&en(47125,{Pc:dI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function dI(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class v1 extends Um{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new uI,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uI(e),this._firestoreClient=void 0,await e}}}function g8(r,e){const n=typeof r=="object"?r:kT(),i=typeof r=="string"?r:$p,s=Vv(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=FM("firestore");o&&p8(s,...o)}return s}function kR(r){if(r._terminated)throw new It(qe.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||y8(r),r._firestoreClient}function y8(r){const e=r._freezeSettings(),n=(function(s,o,l,u){return new L5(s,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,TR(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new c8(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _s(hi.fromBase64String(e))}catch(n){throw new It(qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _s(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_s._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sh(e,_s._jsonSchema))return _s.fromBase64String(e.bytes)}}_s._jsonSchemaVersion="firestore/bytes/1.0",_s._jsonSchema={type:Vr("string",_s._jsonSchemaVersion),bytes:Vr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new It(qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ui(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new It(qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new It(qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pn(this._lat,e._lat)||Pn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wo._jsonSchemaVersion}}static fromJSON(e){if(Sh(e,wo._jsonSchema))return new wo(e.latitude,e.longitude)}}wo._jsonSchemaVersion="firestore/geoPoint/1.0",wo._jsonSchema={type:Vr("string",wo._jsonSchemaVersion),latitude:Vr("number"),longitude:Vr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sh(e,vo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new vo(e.vectorValues);throw new It(qe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vo._jsonSchemaVersion="firestore/vectorValue/1.0",vo._jsonSchema={type:Vr("string",vo._jsonSchemaVersion),vectorValues:Vr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8=/^__.*__$/;class v8{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ql(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ih(e,this.data,n,this.fieldTransforms)}}function PR(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw en(40011,{Ac:r})}}class _1{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _1({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(PR(this.Ac)&&w8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class E8{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Dm(e)}Cc(e,n,i,s=!1){return new _1({Ac:e,methodName:n,Dc:i,path:ui.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function MR(r){const e=r._freezeSettings(),n=Dm(r._databaseId);return new E8(r._databaseId,!!e.ignoreUndefinedProperties,n)}function _8(r,e,n,i,s,o={}){const l=r.Cc(o.merge||o.mergeFields?2:0,e,n,s);DR("Data must be an object, but it was:",l,i);const u=NR(i,l);let d,f;if(o.merge)d=new Vs(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const E=S8(e,v,n);if(!l.contains(E))throw new It(qe.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);A8(p,E)||p.push(E)}d=new Vs(p),f=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=l.fieldTransforms;return new v8(new Es(u),d,f)}function b8(r,e,n,i=!1){return b1(n,r.Cc(i?4:3,e))}function b1(r,e){if(OR(r=bs(r)))return DR("Unsupported field value:",e,r),NR(r,e);if(r instanceof CR)return(function(i,s){if(!PR(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const o=[];let l=0;for(const u of i){let d=b1(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(r,e)}return(function(i,s){if((i=bs(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return sD(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=lr.fromDate(i);return{timestampValue:Yp(s.serializer,o)}}if(i instanceof lr){const o=new lr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yp(s.serializer,o)}}if(i instanceof wo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _s)return{bytesValue:Z2(s.serializer,i._byteString)};if(i instanceof ei){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:s1(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof vo)return(function(l,u){return{mapValue:{fields:{[x2]:{stringValue:T2},[qp]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return n1(u.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${xm(i)}`)})(r,e)}function NR(r,e){const n={};return E2(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yl(r,((i,s)=>{const o=b1(s,e.mc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function OR(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof lr||r instanceof wo||r instanceof _s||r instanceof ei||r instanceof CR||r instanceof vo)}function DR(r,e,n){if(!OR(n)||!w2(n)){const i=xm(n);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function S8(r,e,n){if((e=bs(e))instanceof E1)return e._internalPath;if(typeof e=="string")return LR(r,e);throw Zp("Field path arguments must be of type string or ",r,!1,void 0,n)}const I8=new RegExp("[~\\*/\\[\\]]");function LR(r,e,n){if(e.search(I8)>=0)throw Zp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new E1(...e.split("."))._internalPath}catch{throw Zp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Zp(r,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new It(qe.INVALID_ARGUMENT,u+r+d)}function A8(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ei(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(S1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class x8 extends BR{data(){return super.data()}}function S1(r,e){return typeof e=="string"?LR(r,e):e instanceof E1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new It(qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class I1{}class UR extends I1{}function R8(r,e,...n){let i=[];e instanceof I1&&i.push(e),i=i.concat(n),(function(o){const l=o.filter((d=>d instanceof x1)).length,u=o.filter((d=>d instanceof A1)).length;if(l>1||l>0&&u>0)throw new It(qe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)r=s._apply(r);return r}class A1 extends UR{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new A1(e,n,i)}_apply(e){const n=this._parse(e);return VR(e._query,n),new Zl(e.firestore,e.converter,Uw(e._query,n))}_parse(e){const n=MR(e.firestore);return(function(o,l,u,d,f,p,v){let E;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new It(qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){fI(v,p);const R=[];for(const T of v)R.push(hI(d,o,T));E={arrayValue:{values:R}}}else E=hI(d,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||fI(v,p),E=b8(u,l,v,p==="in"||p==="not-in");return Ur.create(f,p,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class x1 extends I1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new x1(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ws.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)VR(l,d),l=Uw(l,d)})(e._query,n),new Zl(e.firestore,e.converter,Uw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class T1 extends UR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new T1(e,n)}_apply(e){const n=(function(s,o,l){if(s.startAt!==null)throw new It(qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new It(qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rh(o,l)})(e._query,this._field,this._direction);return new Zl(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new Pu(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function k8(r,e="asc"){const n=e,i=S1("orderBy",r);return T1._create(i,n)}function hI(r,e,n){if(typeof(n=bs(n))=="string"){if(n==="")throw new It(qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L2(e)&&n.indexOf("/")!==-1)throw new It(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(rr.fromString(n));if(!$t.isDocumentKey(i))throw new It(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return RS(r,new $t(i))}if(n instanceof ei)return RS(r,n._key);throw new It(qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xm(n)}.`)}function fI(r,e){if(!Array.isArray(r)||r.length===0)throw new It(qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VR(r,e){const n=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new It(qe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new It(qe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class C8{convertValue(e,n="none"){switch(Xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw en(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Yl(e,((s,o)=>{i[s]=this.convertValue(o,n)})),i}convertVectorValue(e){const n=e.fields?.[qp].arrayValue?.values?.map((i=>Pr(i.doubleValue)));return new vo(n)}convertGeoPoint(e){return new wo(Pr(e.latitude),Pr(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=km(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(eh(e));default:return null}}convertTimestamp(e){const n=Ja(e);return new lr(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=rr.fromString(e);$n(sR(i),9688,{name:e});const s=new th(i.get(1),i.get(3)),o=new $t(i.popFirst(5));return s.isEqual(n)||ea(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(r,e,n){let i;return i=r?r.toFirestore(e):e,i}class Qf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ru extends BR{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(S1("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new It(qe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ru._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ru._jsonSchemaVersion="firestore/documentSnapshot/1.0",ru._jsonSchema={type:Vr("string",ru._jsonSchemaVersion),bundleSource:Vr("string","DocumentSnapshot"),bundleName:Vr("string"),bundle:Vr("string")};class bp extends ru{data(e={}){return super.data(e)}}class iu{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Qf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new bp(this._firestore,this._userDataWriter,i.key,i,new Qf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new It(qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new bp(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Qf(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new bp(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Qf(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),p=l.indexOf(u.doc.key)),{type:M8(u.type),doc:d,oldIndex:f,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new It(qe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=iu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function M8(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return en(61501,{type:r})}}iu._jsonSchemaVersion="firestore/querySnapshot/1.0",iu._jsonSchema={type:Vr("string",iu._jsonSchemaVersion),bundleSource:Vr("string","QuerySnapshot"),bundleName:Vr("string"),bundle:Vr("string")};class N8 extends C8{constructor(e){super(),this.firestore=e}convertBytes(e){return new _s(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,n)}}function O8(r){r=Wp(r,Zl);const e=Wp(r.firestore,v1),n=kR(e),i=new N8(e);return T8(r._query),f8(n,r._query).then((s=>new iu(e,i,r,s)))}function D8(r,e){const n=Wp(r.firestore,v1),i=m8(r),s=P8(r.converter,e);return L8(n,[_8(MR(r.firestore),"addDoc",i._key,s,r.converter!==null,{}).toMutation(i._key,Yo.exists(!1))]).then((()=>i))}function L8(r,e){return(function(i,s){const o=new Ka;return i.asyncQueue.enqueueAndForget((async()=>ZL(await d8(i),s,o))),o.promise})(kR(r),e)}(function(e,n=!0){(function(s){Ru=s})(xu),uu(new Fl("firestore",((i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),u=new v1(new y5(i.getProvider("auth-internal")),new E5(l,i.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new It(qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new th(f.options.projectId,p)})(l,s),l);return o={useFetchStreams:n,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),$a(mS,gS,e),$a(mS,gS,"esm2020")})();const B8={apiKey:"AIzaSyC5kkeOckjhvVHSxpiTXP56GyaipaEbmQc",authDomain:"solstice-14da8.firebaseapp.com",projectId:"solstice-14da8",storageBucket:"solstice-14da8.appspot.com",messagingSenderId:"834230457430",appId:"1:834230457430:web:3c7439e1ae4123a89517f7",measurementId:"G-TJS20KZ48R"},FR=RT(B8);f5(FR);const pI=g8(FR);function U8({t:r}){const[e,n]=pe.useState([]),[i,s]=pe.useState(""),[o,l]=pe.useState(""),[u,d]=pe.useState(""),[f,p]=pe.useState(1),[v,E]=pe.useState(!1),[S,R]=pe.useState(!1),[T,M]=pe.useState(!1),[W,z]=pe.useState(!1),[j,se]=pe.useState(!1),le=async()=>{se(!0);try{const Z=R8(lI(pI,"airdrop_participants"),k8("created","desc")),D=(await O8(Z)).docs.map(U=>U.data());n(D)}catch{n([])}se(!1)};pe.useEffect(()=>{le()},[]);const de=async Z=>{if(Z.preventDefault(),d(""),!o||o.length<3){d("Por favor, ingresa tu usuario de Twitter.");return}if(!/^([1-9A-HJ-NP-Za-km-z]{32,44})$/.test(i)){d("Wallet de Solana no vlida");return}se(!0);try{await D8(lI(pI,"airdrop_participants"),{wallet:i,twitter:o,created:Date.now()}),d("Wallet registrada para el airdrop!"),s(""),l(""),le()}catch{d("Error al registrar. Intenta de nuevo.")}se(!1)};return me.jsxs("section",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[me.jsx("h1",{className:"text-3xl font-bold text-[#66fcf1] mb-6",children:r["airdrop-title"]}),me.jsxs("div",{className:"max-w-2xl text-gray-200 text-base mb-8 text-center",children:[me.jsx("strong",{className:"block text-lg text-[#66fcf1] mb-2",children:r["airdrop-hero-title"]}),me.jsx("p",{className:"mb-2",children:r["airdrop-hero-desc1"]}),me.jsx("p",{className:"mb-2 font-semibold text-[#66fcf1]",children:r["airdrop-why-title"]}),me.jsx("p",{className:"mb-2",children:r["airdrop-why-desc"]}),me.jsxs("ul",{className:"list-disc list-inside mb-2 text-left mx-auto",style:{maxWidth:"600px"},children:[me.jsxs("li",{children:[me.jsxs("strong",{children:[r["airdrop-why-pioneer"].split(":")[0],":"]})," ",r["airdrop-why-pioneer"].split(":")[1]]}),me.jsxs("li",{children:[me.jsxs("strong",{children:[r["airdrop-why-governance"].split(":")[0],":"]})," ",r["airdrop-why-governance"].split(":")[1]]}),me.jsxs("li",{children:[me.jsxs("strong",{children:[r["airdrop-why-utility"].split(":")[0],":"]})," ",r["airdrop-why-utility"].split(":")[1]]})]}),me.jsx("p",{className:"mb-2 font-semibold text-[#66fcf1]",children:r["airdrop-how-title"]}),me.jsx("p",{className:"mb-2",children:r["airdrop-how-desc"]}),me.jsx("p",{className:"mt-4",children:r["airdrop-join-desc"]})]}),me.jsxs("p",{className:"text-gray-400 text-center mb-8",children:[r["airdrop-steps-title"],me.jsx("br",{}),r["airdrop-steps-desc"],me.jsx("br",{}),me.jsxs("span",{className:"block mt-4 text-left",children:[me.jsx("span",{children:"1. "}),me.jsx("a",{href:"https://x.com/SolsticeSols",target:"_blank",rel:"noopener noreferrer",className:`text-[#66fcf1] underline ${T?"font-bold":""}`,onClick:()=>M(!0),children:r["airdrop-step1"].replace(/^\d+\.\s*/,"")})," ",me.jsx("br",{}),me.jsx("span",{children:"2. "}),me.jsx("a",{href:"https://x.com/SolsticeSols",target:"_blank",rel:"noopener noreferrer",className:`text-[#66fcf1] underline ${W?"font-bold":""}`,onClick:()=>z(!0),children:r["airdrop-step2"].replace(/^\d+\.\s*/,"")})]})]}),f===1&&me.jsxs("div",{className:"flex flex-col items-start gap-4 mb-8",children:[me.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[me.jsx("input",{type:"checkbox",checked:v,onChange:Z=>E(Z.target.checked)}),me.jsx("span",{className:"text-gray-300",children:r["airdrop-checkbox-follow"]})]}),me.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[me.jsx("input",{type:"checkbox",checked:S,onChange:Z=>R(Z.target.checked)}),me.jsx("span",{className:"text-gray-300",children:r["airdrop-checkbox-retweet"]})]}),me.jsx("button",{className:`mt-4 px-6 py-2 rounded-lg font-bold text-lg transition w-fit ${v&&S?"bg-gradient-to-r from-[#45a29e] to-[#66fcf1] text-[#0b0c10] hover:scale-105":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,disabled:!(v&&S),onClick:()=>p(2),children:r["airdrop-continue"]})]}),f===2&&me.jsxs(me.Fragment,{children:[me.jsxs("form",{onSubmit:de,className:"flex flex-col items-center gap-6 w-fit",children:[me.jsx("input",{type:"text",placeholder:r["airdrop-twitter-placeholder"],value:o,onChange:Z=>l(Z.target.value),className:"input border border-[#45a29e] bg-[#0b0c10] rounded-lg px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-[#66fcf1]/40 transition text-white",autoComplete:"off",maxLength:30,style:{minWidth:"220px",color:"#fff"},required:!0,"aria-label":"Usuario de Twitter"}),me.jsx("input",{type:"text",placeholder:r["airdrop-wallet-placeholder"],value:i,onChange:Z=>s(Z.target.value),className:"input border border-[#45a29e] bg-[#0b0c10] rounded-lg px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-[#66fcf1]/40 transition text-white",autoComplete:"off",maxLength:44,style:{minWidth:"220px",color:"#fff"},required:!0,"aria-label":"Wallet de Solana"}),me.jsx("button",{type:"submit",className:`bg-gradient-to-r from-[#45a29e] to-[#66fcf1] text-[#0b0c10] px-8 py-3 rounded-lg font-bold text-lg shadow hover:scale-105 transition w-fit mt-4 ${T&&W?"":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,disabled:!(T&&W),children:r["airdrop-btn-participate"]}),u&&me.jsx("p",{className:"text-[#66fcf1] text-center font-semibold mt-4",children:u})]}),me.jsxs("div",{className:"mt-10 w-full flex flex-col items-center",children:[me.jsx("h3",{className:"text-lg font-bold text-[#66fcf1] mb-2",children:r["airdrop-participants-title"]}),me.jsx("div",{className:"w-full max-w-xl overflow-x-auto rounded-lg shadow-lg",children:me.jsxs("table",{className:"min-w-[340px] w-full bg-[#1f2833] rounded-lg text-sm",children:[me.jsx("thead",{className:"sticky top-0 bg-[#162025] z-10",children:me.jsxs("tr",{children:[me.jsx("th",{className:"px-4 py-3 text-left text-[#66fcf1] font-bold w-32 min-w-[120px]",children:r["airdrop-table-twitter"]}),me.jsx("th",{className:"px-4 py-3 text-left text-[#66fcf1] font-bold w-64 min-w-[200px]",children:r["airdrop-table-wallet"]})]})}),me.jsx("tbody",{children:j?me.jsx("tr",{children:me.jsx("td",{colSpan:2,className:"px-4 py-4 text-gray-400 text-center",children:"Cargando..."})}):e.length===0?me.jsx("tr",{children:me.jsx("td",{colSpan:2,className:"px-4 py-4 text-gray-400 text-center",children:"An no hay participantes registrados."})}):e.map((Z,$)=>me.jsxs("tr",{className:`border-t border-[#45a29e]/30 ${$%2===0?"bg-[#232b33]":"bg-[#1f2833]"} hover:bg-[#28343d] transition`,children:[me.jsx("td",{className:"px-4 py-3 text-gray-200 font-mono w-64 min-w-[200px] max-w-[320px] truncate",children:me.jsx("a",{href:`https://solscan.io/token/${Z.wallet}`,target:"_blank",rel:"noopener noreferrer",className:"text-[#66fcf1] underline hover:text-[#45a29e]",title:Z.wallet,children:Z.wallet.length>16?`${Z.wallet.slice(0,6)}...${Z.wallet.slice(-4)}`:Z.wallet})}),me.jsxs("td",{className:"px-4 py-3 text-gray-200 w-32 min-w-[120px]",children:["@",Z.twitter]})]},$))})]})})]})]})]})}function zR(r,e){return function(){return r.apply(e,arguments)}}const{toString:V8}=Object.prototype,{getPrototypeOf:R1}=Object,{iterator:Vm,toStringTag:WR}=Symbol,Fm=(r=>e=>{const n=V8.call(e);return r[n]||(r[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),qs=r=>(r=r.toLowerCase(),e=>Fm(e)===r),zm=r=>e=>typeof e===r,{isArray:Nu}=Array,oh=zm("undefined");function Rh(r){return r!==null&&!oh(r)&&r.constructor!==null&&!oh(r.constructor)&&Ji(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const jR=qs("ArrayBuffer");function F8(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&jR(r.buffer),e}const z8=zm("string"),Ji=zm("function"),$R=zm("number"),kh=r=>r!==null&&typeof r=="object",W8=r=>r===!0||r===!1,Sp=r=>{if(Fm(r)!=="object")return!1;const e=R1(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(WR in r)&&!(Vm in r)},j8=r=>{if(!kh(r)||Rh(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},$8=qs("Date"),q8=qs("File"),K8=qs("Blob"),H8=qs("FileList"),G8=r=>kh(r)&&Ji(r.pipe),Y8=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Ji(r.append)&&((e=Fm(r))==="formdata"||e==="object"&&Ji(r.toString)&&r.toString()==="[object FormData]"))},J8=qs("URLSearchParams"),[Q8,X8,Z8,eB]=["ReadableStream","Request","Response","Headers"].map(qs),tB=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ch(r,e,{allOwnKeys:n=!1}={}){if(r===null||typeof r>"u")return;let i,s;if(typeof r!="object"&&(r=[r]),Nu(r))for(i=0,s=r.length;i<s;i++)e.call(null,r[i],i,r);else{if(Rh(r))return;const o=n?Object.getOwnPropertyNames(r):Object.keys(r),l=o.length;let u;for(i=0;i<l;i++)u=o[i],e.call(null,r[u],u,r)}}function qR(r,e){if(Rh(r))return null;e=e.toLowerCase();const n=Object.keys(r);let i=n.length,s;for(;i-- >0;)if(s=n[i],e===s.toLowerCase())return s;return null}const xl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,KR=r=>!oh(r)&&r!==xl;function Yw(){const{caseless:r}=KR(this)&&this||{},e={},n=(i,s)=>{const o=r&&qR(e,s)||s;Sp(e[o])&&Sp(i)?e[o]=Yw(e[o],i):Sp(i)?e[o]=Yw({},i):Nu(i)?e[o]=i.slice():e[o]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Ch(arguments[i],n);return e}const nB=(r,e,n,{allOwnKeys:i}={})=>(Ch(e,(s,o)=>{n&&Ji(s)?r[o]=zR(s,n):r[o]=s},{allOwnKeys:i}),r),rB=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),iB=(r,e,n,i)=>{r.prototype=Object.create(e.prototype,i),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),n&&Object.assign(r.prototype,n)},sB=(r,e,n,i)=>{let s,o,l;const u={};if(e=e||{},r==null)return e;do{for(s=Object.getOwnPropertyNames(r),o=s.length;o-- >0;)l=s[o],(!i||i(l,r,e))&&!u[l]&&(e[l]=r[l],u[l]=!0);r=n!==!1&&R1(r)}while(r&&(!n||n(r,e))&&r!==Object.prototype);return e},oB=(r,e,n)=>{r=String(r),(n===void 0||n>r.length)&&(n=r.length),n-=e.length;const i=r.indexOf(e,n);return i!==-1&&i===n},aB=r=>{if(!r)return null;if(Nu(r))return r;let e=r.length;if(!$R(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=r[e];return n},lB=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&R1(Uint8Array)),cB=(r,e)=>{const i=(r&&r[Vm]).call(r);let s;for(;(s=i.next())&&!s.done;){const o=s.value;e.call(r,o[0],o[1])}},uB=(r,e)=>{let n;const i=[];for(;(n=r.exec(e))!==null;)i.push(n);return i},dB=qs("HTMLFormElement"),hB=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),mI=(({hasOwnProperty:r})=>(e,n)=>r.call(e,n))(Object.prototype),fB=qs("RegExp"),HR=(r,e)=>{const n=Object.getOwnPropertyDescriptors(r),i={};Ch(n,(s,o)=>{let l;(l=e(s,o,r))!==!1&&(i[o]=l||s)}),Object.defineProperties(r,i)},pB=r=>{HR(r,(e,n)=>{if(Ji(r)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=r[n];if(Ji(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},mB=(r,e)=>{const n={},i=s=>{s.forEach(o=>{n[o]=!0})};return Nu(r)?i(r):i(String(r).split(e)),n},gB=()=>{},yB=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function wB(r){return!!(r&&Ji(r.append)&&r[WR]==="FormData"&&r[Vm])}const vB=r=>{const e=new Array(10),n=(i,s)=>{if(kh(i)){if(e.indexOf(i)>=0)return;if(Rh(i))return i;if(!("toJSON"in i)){e[s]=i;const o=Nu(i)?[]:{};return Ch(i,(l,u)=>{const d=n(l,s+1);!oh(d)&&(o[u]=d)}),e[s]=void 0,o}}return i};return n(r,0)},EB=qs("AsyncFunction"),_B=r=>r&&(kh(r)||Ji(r))&&Ji(r.then)&&Ji(r.catch),GR=((r,e)=>r?setImmediate:e?((n,i)=>(xl.addEventListener("message",({source:s,data:o})=>{s===xl&&o===n&&i.length&&i.shift()()},!1),s=>{i.push(s),xl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ji(xl.postMessage)),bB=typeof queueMicrotask<"u"?queueMicrotask.bind(xl):typeof process<"u"&&process.nextTick||GR,SB=r=>r!=null&&Ji(r[Vm]),Be={isArray:Nu,isArrayBuffer:jR,isBuffer:Rh,isFormData:Y8,isArrayBufferView:F8,isString:z8,isNumber:$R,isBoolean:W8,isObject:kh,isPlainObject:Sp,isEmptyObject:j8,isReadableStream:Q8,isRequest:X8,isResponse:Z8,isHeaders:eB,isUndefined:oh,isDate:$8,isFile:q8,isBlob:K8,isRegExp:fB,isFunction:Ji,isStream:G8,isURLSearchParams:J8,isTypedArray:lB,isFileList:H8,forEach:Ch,merge:Yw,extend:nB,trim:tB,stripBOM:rB,inherits:iB,toFlatObject:sB,kindOf:Fm,kindOfTest:qs,endsWith:oB,toArray:aB,forEachEntry:cB,matchAll:uB,isHTMLForm:dB,hasOwnProperty:mI,hasOwnProp:mI,reduceDescriptors:HR,freezeMethods:pB,toObjectSet:mB,toCamelCase:hB,noop:gB,toFiniteNumber:yB,findKey:qR,global:xl,isContextDefined:KR,isSpecCompliantForm:wB,toJSONObject:vB,isAsyncFn:EB,isThenable:_B,setImmediate:GR,asap:bB,isIterable:SB};function pn(r,e,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}Be.inherits(pn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.status}}});const YR=pn.prototype,JR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{JR[r]={value:r}});Object.defineProperties(pn,JR);Object.defineProperty(YR,"isAxiosError",{value:!0});pn.from=(r,e,n,i,s,o)=>{const l=Object.create(YR);return Be.toFlatObject(r,l,function(d){return d!==Error.prototype},u=>u!=="isAxiosError"),pn.call(l,r.message,e,n,i,s),l.cause=r,l.name=r.name,o&&Object.assign(l,o),l};const IB=null;function Jw(r){return Be.isPlainObject(r)||Be.isArray(r)}function QR(r){return Be.endsWith(r,"[]")?r.slice(0,-2):r}function gI(r,e,n){return r?r.concat(e).map(function(s,o){return s=QR(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function AB(r){return Be.isArray(r)&&!r.some(Jw)}const xB=Be.toFlatObject(Be,{},null,function(e){return/^is[A-Z]/.test(e)});function Wm(r,e,n){if(!Be.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,n=Be.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,M){return!Be.isUndefined(M[T])});const i=n.metaTokens,s=n.visitor||p,o=n.dots,l=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(e);if(!Be.isFunction(s))throw new TypeError("visitor must be a function");function f(R){if(R===null)return"";if(Be.isDate(R))return R.toISOString();if(Be.isBoolean(R))return R.toString();if(!d&&Be.isBlob(R))throw new pn("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(R)||Be.isTypedArray(R)?d&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function p(R,T,M){let W=R;if(R&&!M&&typeof R=="object"){if(Be.endsWith(T,"{}"))T=i?T:T.slice(0,-2),R=JSON.stringify(R);else if(Be.isArray(R)&&AB(R)||(Be.isFileList(R)||Be.endsWith(T,"[]"))&&(W=Be.toArray(R)))return T=QR(T),W.forEach(function(j,se){!(Be.isUndefined(j)||j===null)&&e.append(l===!0?gI([T],se,o):l===null?T:T+"[]",f(j))}),!1}return Jw(R)?!0:(e.append(gI(M,T,o),f(R)),!1)}const v=[],E=Object.assign(xB,{defaultVisitor:p,convertValue:f,isVisitable:Jw});function S(R,T){if(!Be.isUndefined(R)){if(v.indexOf(R)!==-1)throw Error("Circular reference detected in "+T.join("."));v.push(R),Be.forEach(R,function(W,z){(!(Be.isUndefined(W)||W===null)&&s.call(e,W,Be.isString(z)?z.trim():z,T,E))===!0&&S(W,T?T.concat(z):[z])}),v.pop()}}if(!Be.isObject(r))throw new TypeError("data must be an object");return S(r),e}function yI(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function k1(r,e){this._pairs=[],r&&Wm(r,this,e)}const XR=k1.prototype;XR.append=function(e,n){this._pairs.push([e,n])};XR.toString=function(e){const n=e?function(i){return e.call(this,i,yI)}:yI;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function TB(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ZR(r,e,n){if(!e)return r;const i=n&&n.encode||TB;Be.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(e,n):o=Be.isURLSearchParams(e)?e.toString():new k1(e,n).toString(i),o){const l=r.indexOf("#");l!==-1&&(r=r.slice(0,l)),r+=(r.indexOf("?")===-1?"?":"&")+o}return r}class wI{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Be.forEach(this.handlers,function(i){i!==null&&e(i)})}}const ek={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},RB=typeof URLSearchParams<"u"?URLSearchParams:k1,kB=typeof FormData<"u"?FormData:null,CB=typeof Blob<"u"?Blob:null,PB={isBrowser:!0,classes:{URLSearchParams:RB,FormData:kB,Blob:CB},protocols:["http","https","file","blob","url","data"]},C1=typeof window<"u"&&typeof document<"u",Qw=typeof navigator=="object"&&navigator||void 0,MB=C1&&(!Qw||["ReactNative","NativeScript","NS"].indexOf(Qw.product)<0),NB=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",OB=C1&&window.location.href||"http://localhost",DB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:C1,hasStandardBrowserEnv:MB,hasStandardBrowserWebWorkerEnv:NB,navigator:Qw,origin:OB},Symbol.toStringTag,{value:"Module"})),Ri={...DB,...PB};function LB(r,e){return Wm(r,new Ri.classes.URLSearchParams,{visitor:function(n,i,s,o){return Ri.isNode&&Be.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function BB(r){return Be.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function UB(r){const e={},n=Object.keys(r);let i;const s=n.length;let o;for(i=0;i<s;i++)o=n[i],e[o]=r[o];return e}function tk(r){function e(n,i,s,o){let l=n[o++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),d=o>=n.length;return l=!l&&Be.isArray(s)?s.length:l,d?(Be.hasOwnProp(s,l)?s[l]=[s[l],i]:s[l]=i,!u):((!s[l]||!Be.isObject(s[l]))&&(s[l]=[]),e(n,i,s[l],o)&&Be.isArray(s[l])&&(s[l]=UB(s[l])),!u)}if(Be.isFormData(r)&&Be.isFunction(r.entries)){const n={};return Be.forEachEntry(r,(i,s)=>{e(BB(i),s,n,0)}),n}return null}function VB(r,e,n){if(Be.isString(r))try{return(e||JSON.parse)(r),Be.trim(r)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(r)}const Ph={transitional:ek,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,o=Be.isObject(e);if(o&&Be.isHTMLForm(e)&&(e=new FormData(e)),Be.isFormData(e))return s?JSON.stringify(tk(e)):e;if(Be.isArrayBuffer(e)||Be.isBuffer(e)||Be.isStream(e)||Be.isFile(e)||Be.isBlob(e)||Be.isReadableStream(e))return e;if(Be.isArrayBufferView(e))return e.buffer;if(Be.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return LB(e,this.formSerializer).toString();if((u=Be.isFileList(e))||i.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Wm(u?{"files[]":e}:e,d&&new d,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),VB(e)):e}],transformResponse:[function(e){const n=this.transitional||Ph.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(Be.isResponse(e)||Be.isReadableStream(e))return e;if(e&&Be.isString(e)&&(i&&!this.responseType||s)){const l=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(u){if(l)throw u.name==="SyntaxError"?pn.from(u,pn.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ri.classes.FormData,Blob:Ri.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],r=>{Ph.headers[r]={}});const FB=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zB=r=>{const e={};let n,i,s;return r&&r.split(`
`).forEach(function(l){s=l.indexOf(":"),n=l.substring(0,s).trim().toLowerCase(),i=l.substring(s+1).trim(),!(!n||e[n]&&FB[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},vI=Symbol("internals");function vd(r){return r&&String(r).trim().toLowerCase()}function Ip(r){return r===!1||r==null?r:Be.isArray(r)?r.map(Ip):String(r)}function WB(r){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(r);)e[i[1]]=i[2];return e}const jB=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function ny(r,e,n,i,s){if(Be.isFunction(i))return i.call(this,e,n);if(s&&(e=n),!!Be.isString(e)){if(Be.isString(i))return e.indexOf(i)!==-1;if(Be.isRegExp(i))return i.test(e)}}function $B(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function qB(r,e){const n=Be.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(r,i+n,{value:function(s,o,l){return this[i].call(this,e,s,o,l)},configurable:!0})})}let Qi=class{constructor(e){e&&this.set(e)}set(e,n,i){const s=this;function o(u,d,f){const p=vd(d);if(!p)throw new Error("header name must be a non-empty string");const v=Be.findKey(s,p);(!v||s[v]===void 0||f===!0||f===void 0&&s[v]!==!1)&&(s[v||d]=Ip(u))}const l=(u,d)=>Be.forEach(u,(f,p)=>o(f,p,d));if(Be.isPlainObject(e)||e instanceof this.constructor)l(e,n);else if(Be.isString(e)&&(e=e.trim())&&!jB(e))l(zB(e),n);else if(Be.isObject(e)&&Be.isIterable(e)){let u={},d,f;for(const p of e){if(!Be.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[f=p[0]]=(d=u[f])?Be.isArray(d)?[...d,p[1]]:[d,p[1]]:p[1]}l(u,n)}else e!=null&&o(n,e,i);return this}get(e,n){if(e=vd(e),e){const i=Be.findKey(this,e);if(i){const s=this[i];if(!n)return s;if(n===!0)return WB(s);if(Be.isFunction(n))return n.call(this,s,i);if(Be.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=vd(e),e){const i=Be.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||ny(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let s=!1;function o(l){if(l=vd(l),l){const u=Be.findKey(i,l);u&&(!n||ny(i,i[u],u,n))&&(delete i[u],s=!0)}}return Be.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const o=n[i];(!e||ny(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const n=this,i={};return Be.forEach(this,(s,o)=>{const l=Be.findKey(i,o);if(l){n[l]=Ip(s),delete n[o];return}const u=e?$B(o):String(o).trim();u!==o&&delete n[o],n[u]=Ip(s),i[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Be.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=e&&Be.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[vI]=this[vI]={accessors:{}}).accessors,s=this.prototype;function o(l){const u=vd(l);i[u]||(qB(s,l),i[u]=!0)}return Be.isArray(e)?e.forEach(o):o(e),this}};Qi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(Qi.prototype,({value:r},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(i){this[n]=i}}});Be.freezeMethods(Qi);function ry(r,e){const n=this||Ph,i=e||n,s=Qi.from(i.headers);let o=i.data;return Be.forEach(r,function(u){o=u.call(n,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function nk(r){return!!(r&&r.__CANCEL__)}function Ou(r,e,n){pn.call(this,r??"canceled",pn.ERR_CANCELED,e,n),this.name="CanceledError"}Be.inherits(Ou,pn,{__CANCEL__:!0});function rk(r,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?r(n):e(new pn("Request failed with status code "+n.status,[pn.ERR_BAD_REQUEST,pn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function KB(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function HB(r,e){r=r||10;const n=new Array(r),i=new Array(r);let s=0,o=0,l;return e=e!==void 0?e:1e3,function(d){const f=Date.now(),p=i[o];l||(l=f),n[s]=d,i[s]=f;let v=o,E=0;for(;v!==s;)E+=n[v++],v=v%r;if(s=(s+1)%r,s===o&&(o=(o+1)%r),f-l<e)return;const S=p&&f-p;return S?Math.round(E*1e3/S):void 0}}function GB(r,e){let n=0,i=1e3/e,s,o;const l=(f,p=Date.now())=>{n=p,s=null,o&&(clearTimeout(o),o=null),r(...f)};return[(...f)=>{const p=Date.now(),v=p-n;v>=i?l(f,p):(s=f,o||(o=setTimeout(()=>{o=null,l(s)},i-v)))},()=>s&&l(s)]}const em=(r,e,n=3)=>{let i=0;const s=HB(50,250);return GB(o=>{const l=o.loaded,u=o.lengthComputable?o.total:void 0,d=l-i,f=s(d),p=l<=u;i=l;const v={loaded:l,total:u,progress:u?l/u:void 0,bytes:d,rate:f||void 0,estimated:f&&u&&p?(u-l)/f:void 0,event:o,lengthComputable:u!=null,[e?"download":"upload"]:!0};r(v)},n)},EI=(r,e)=>{const n=r!=null;return[i=>e[0]({lengthComputable:n,total:r,loaded:i}),e[1]]},_I=r=>(...e)=>Be.asap(()=>r(...e)),YB=Ri.hasStandardBrowserEnv?((r,e)=>n=>(n=new URL(n,Ri.origin),r.protocol===n.protocol&&r.host===n.host&&(e||r.port===n.port)))(new URL(Ri.origin),Ri.navigator&&/(msie|trident)/i.test(Ri.navigator.userAgent)):()=>!0,JB=Ri.hasStandardBrowserEnv?{write(r,e,n,i,s,o){const l=[r+"="+encodeURIComponent(e)];Be.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),Be.isString(i)&&l.push("path="+i),Be.isString(s)&&l.push("domain="+s),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function QB(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function XB(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function ik(r,e,n){let i=!QB(e);return r&&(i||n==!1)?XB(r,e):e}const bI=r=>r instanceof Qi?{...r}:r;function $l(r,e){e=e||{};const n={};function i(f,p,v,E){return Be.isPlainObject(f)&&Be.isPlainObject(p)?Be.merge.call({caseless:E},f,p):Be.isPlainObject(p)?Be.merge({},p):Be.isArray(p)?p.slice():p}function s(f,p,v,E){if(Be.isUndefined(p)){if(!Be.isUndefined(f))return i(void 0,f,v,E)}else return i(f,p,v,E)}function o(f,p){if(!Be.isUndefined(p))return i(void 0,p)}function l(f,p){if(Be.isUndefined(p)){if(!Be.isUndefined(f))return i(void 0,f)}else return i(void 0,p)}function u(f,p,v){if(v in e)return i(f,p);if(v in r)return i(void 0,f)}const d={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(f,p,v)=>s(bI(f),bI(p),v,!0)};return Be.forEach(Object.keys({...r,...e}),function(p){const v=d[p]||s,E=v(r[p],e[p],p);Be.isUndefined(E)&&v!==u||(n[p]=E)}),n}const sk=r=>{const e=$l({},r);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:u}=e;e.headers=l=Qi.from(l),e.url=ZR(ik(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let d;if(Be.isFormData(n)){if(Ri.hasStandardBrowserEnv||Ri.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((d=l.getContentType())!==!1){const[f,...p]=d?d.split(";").map(v=>v.trim()).filter(Boolean):[];l.setContentType([f||"multipart/form-data",...p].join("; "))}}if(Ri.hasStandardBrowserEnv&&(i&&Be.isFunction(i)&&(i=i(e)),i||i!==!1&&YB(e.url))){const f=s&&o&&JB.read(o);f&&l.set(s,f)}return e},ZB=typeof XMLHttpRequest<"u",eU=ZB&&function(r){return new Promise(function(n,i){const s=sk(r);let o=s.data;const l=Qi.from(s.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:f}=s,p,v,E,S,R;function T(){S&&S(),R&&R(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let M=new XMLHttpRequest;M.open(s.method.toUpperCase(),s.url,!0),M.timeout=s.timeout;function W(){if(!M)return;const j=Qi.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),le={data:!u||u==="text"||u==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:j,config:r,request:M};rk(function(Z){n(Z),T()},function(Z){i(Z),T()},le),M=null}"onloadend"in M?M.onloadend=W:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(W)},M.onabort=function(){M&&(i(new pn("Request aborted",pn.ECONNABORTED,r,M)),M=null)},M.onerror=function(){i(new pn("Network Error",pn.ERR_NETWORK,r,M)),M=null},M.ontimeout=function(){let se=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const le=s.transitional||ek;s.timeoutErrorMessage&&(se=s.timeoutErrorMessage),i(new pn(se,le.clarifyTimeoutError?pn.ETIMEDOUT:pn.ECONNABORTED,r,M)),M=null},o===void 0&&l.setContentType(null),"setRequestHeader"in M&&Be.forEach(l.toJSON(),function(se,le){M.setRequestHeader(le,se)}),Be.isUndefined(s.withCredentials)||(M.withCredentials=!!s.withCredentials),u&&u!=="json"&&(M.responseType=s.responseType),f&&([E,R]=em(f,!0),M.addEventListener("progress",E)),d&&M.upload&&([v,S]=em(d),M.upload.addEventListener("progress",v),M.upload.addEventListener("loadend",S)),(s.cancelToken||s.signal)&&(p=j=>{M&&(i(!j||j.type?new Ou(null,r,M):j),M.abort(),M=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const z=KB(s.url);if(z&&Ri.protocols.indexOf(z)===-1){i(new pn("Unsupported protocol "+z+":",pn.ERR_BAD_REQUEST,r));return}M.send(o||null)})},tU=(r,e)=>{const{length:n}=r=r?r.filter(Boolean):[];if(e||n){let i=new AbortController,s;const o=function(f){if(!s){s=!0,u();const p=f instanceof Error?f:this.reason;i.abort(p instanceof pn?p:new Ou(p instanceof Error?p.message:p))}};let l=e&&setTimeout(()=>{l=null,o(new pn(`timeout ${e} of ms exceeded`,pn.ETIMEDOUT))},e);const u=()=>{r&&(l&&clearTimeout(l),l=null,r.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),r=null)};r.forEach(f=>f.addEventListener("abort",o));const{signal:d}=i;return d.unsubscribe=()=>Be.asap(u),d}},nU=function*(r,e){let n=r.byteLength;if(n<e){yield r;return}let i=0,s;for(;i<n;)s=i+e,yield r.slice(i,s),i=s},rU=async function*(r,e){for await(const n of iU(r))yield*nU(n,e)},iU=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},SI=(r,e,n,i)=>{const s=rU(r,e);let o=0,l,u=d=>{l||(l=!0,i&&i(d))};return new ReadableStream({async pull(d){try{const{done:f,value:p}=await s.next();if(f){u(),d.close();return}let v=p.byteLength;if(n){let E=o+=v;n(E)}d.enqueue(new Uint8Array(p))}catch(f){throw u(f),f}},cancel(d){return u(d),s.return()}},{highWaterMark:2})},jm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ok=jm&&typeof ReadableStream=="function",sU=jm&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),ak=(r,...e)=>{try{return!!r(...e)}catch{return!1}},oU=ok&&ak(()=>{let r=!1;const e=new Request(Ri.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),II=64*1024,Xw=ok&&ak(()=>Be.isReadableStream(new Response("").body)),tm={stream:Xw&&(r=>r.body)};jm&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!tm[e]&&(tm[e]=Be.isFunction(r[e])?n=>n[e]():(n,i)=>{throw new pn(`Response type '${e}' is not supported`,pn.ERR_NOT_SUPPORT,i)})})})(new Response);const aU=async r=>{if(r==null)return 0;if(Be.isBlob(r))return r.size;if(Be.isSpecCompliantForm(r))return(await new Request(Ri.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(Be.isArrayBufferView(r)||Be.isArrayBuffer(r))return r.byteLength;if(Be.isURLSearchParams(r)&&(r=r+""),Be.isString(r))return(await sU(r)).byteLength},lU=async(r,e)=>{const n=Be.toFiniteNumber(r.getContentLength());return n??aU(e)},cU=jm&&(async r=>{let{url:e,method:n,data:i,signal:s,cancelToken:o,timeout:l,onDownloadProgress:u,onUploadProgress:d,responseType:f,headers:p,withCredentials:v="same-origin",fetchOptions:E}=sk(r);f=f?(f+"").toLowerCase():"text";let S=tU([s,o&&o.toAbortSignal()],l),R;const T=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let M;try{if(d&&oU&&n!=="get"&&n!=="head"&&(M=await lU(p,i))!==0){let le=new Request(e,{method:"POST",body:i,duplex:"half"}),de;if(Be.isFormData(i)&&(de=le.headers.get("content-type"))&&p.setContentType(de),le.body){const[Z,$]=EI(M,em(_I(d)));i=SI(le.body,II,Z,$)}}Be.isString(v)||(v=v?"include":"omit");const W="credentials"in Request.prototype;R=new Request(e,{...E,signal:S,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:i,duplex:"half",credentials:W?v:void 0});let z=await fetch(R,E);const j=Xw&&(f==="stream"||f==="response");if(Xw&&(u||j&&T)){const le={};["status","statusText","headers"].forEach(D=>{le[D]=z[D]});const de=Be.toFiniteNumber(z.headers.get("content-length")),[Z,$]=u&&EI(de,em(_I(u),!0))||[];z=new Response(SI(z.body,II,Z,()=>{$&&$(),T&&T()}),le)}f=f||"text";let se=await tm[Be.findKey(tm,f)||"text"](z,r);return!j&&T&&T(),await new Promise((le,de)=>{rk(le,de,{data:se,headers:Qi.from(z.headers),status:z.status,statusText:z.statusText,config:r,request:R})})}catch(W){throw T&&T(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new pn("Network Error",pn.ERR_NETWORK,r,R),{cause:W.cause||W}):pn.from(W,W&&W.code,r,R)}}),Zw={http:IB,xhr:eU,fetch:cU};Be.forEach(Zw,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const AI=r=>`- ${r}`,uU=r=>Be.isFunction(r)||r===null||r===!1,lk={getAdapter:r=>{r=Be.isArray(r)?r:[r];const{length:e}=r;let n,i;const s={};for(let o=0;o<e;o++){n=r[o];let l;if(i=n,!uU(n)&&(i=Zw[(l=String(n)).toLowerCase()],i===void 0))throw new pn(`Unknown adapter '${l}'`);if(i)break;s[l||"#"+o]=i}if(!i){const o=Object.entries(s).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=e?o.length>1?`since :
`+o.map(AI).join(`
`):" "+AI(o[0]):"as no adapter specified";throw new pn("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:Zw};function iy(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Ou(null,r)}function xI(r){return iy(r),r.headers=Qi.from(r.headers),r.data=ry.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),lk.getAdapter(r.adapter||Ph.adapter)(r).then(function(i){return iy(r),i.data=ry.call(r,r.transformResponse,i),i.headers=Qi.from(i.headers),i},function(i){return nk(i)||(iy(r),i&&i.response&&(i.response.data=ry.call(r,r.transformResponse,i.response),i.response.headers=Qi.from(i.response.headers))),Promise.reject(i)})}const ck="1.11.0",$m={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{$m[r]=function(i){return typeof i===r||"a"+(e<1?"n ":" ")+r}});const TI={};$m.transitional=function(e,n,i){function s(o,l){return"[Axios v"+ck+"] Transitional option '"+o+"'"+l+(i?". "+i:"")}return(o,l,u)=>{if(e===!1)throw new pn(s(l," has been removed"+(n?" in "+n:"")),pn.ERR_DEPRECATED);return n&&!TI[l]&&(TI[l]=!0,console.warn(s(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,l,u):!0}};$m.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function dU(r,e,n){if(typeof r!="object")throw new pn("options must be an object",pn.ERR_BAD_OPTION_VALUE);const i=Object.keys(r);let s=i.length;for(;s-- >0;){const o=i[s],l=e[o];if(l){const u=r[o],d=u===void 0||l(u,o,r);if(d!==!0)throw new pn("option "+o+" must be "+d,pn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new pn("Unknown option "+o,pn.ERR_BAD_OPTION)}}const Ap={assertOptions:dU,validators:$m},no=Ap.validators;let Bl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new wI,response:new wI}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=$l(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:o}=n;i!==void 0&&Ap.assertOptions(i,{silentJSONParsing:no.transitional(no.boolean),forcedJSONParsing:no.transitional(no.boolean),clarifyTimeoutError:no.transitional(no.boolean)},!1),s!=null&&(Be.isFunction(s)?n.paramsSerializer={serialize:s}:Ap.assertOptions(s,{encode:no.function,serialize:no.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ap.assertOptions(n,{baseUrl:no.spelling("baseURL"),withXsrfToken:no.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=o&&Be.merge(o.common,o[n.method]);o&&Be.forEach(["delete","get","head","post","put","patch","common"],R=>{delete o[R]}),n.headers=Qi.concat(l,o);const u=[];let d=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(d=d&&T.synchronous,u.unshift(T.fulfilled,T.rejected))});const f=[];this.interceptors.response.forEach(function(T){f.push(T.fulfilled,T.rejected)});let p,v=0,E;if(!d){const R=[xI.bind(this),void 0];for(R.unshift(...u),R.push(...f),E=R.length,p=Promise.resolve(n);v<E;)p=p.then(R[v++],R[v++]);return p}E=u.length;let S=n;for(v=0;v<E;){const R=u[v++],T=u[v++];try{S=R(S)}catch(M){T.call(this,M);break}}try{p=xI.call(this,S)}catch(R){return Promise.reject(R)}for(v=0,E=f.length;v<E;)p=p.then(f[v++],f[v++]);return p}getUri(e){e=$l(this.defaults,e);const n=ik(e.baseURL,e.url,e.allowAbsoluteUrls);return ZR(n,e.params,e.paramsSerializer)}};Be.forEach(["delete","get","head","options"],function(e){Bl.prototype[e]=function(n,i){return this.request($l(i||{},{method:e,url:n,data:(i||{}).data}))}});Be.forEach(["post","put","patch"],function(e){function n(i){return function(o,l,u){return this.request($l(u||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Bl.prototype[e]=n(),Bl.prototype[e+"Form"]=n(!0)});let hU=class uk{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(s=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](s);i._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(u=>{i.subscribe(u),o=u}).then(s);return l.cancel=function(){i.unsubscribe(o)},l},e(function(o,l,u){i.reason||(i.reason=new Ou(o,l,u),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new uk(function(s){e=s}),cancel:e}}};function fU(r){return function(n){return r.apply(null,n)}}function pU(r){return Be.isObject(r)&&r.isAxiosError===!0}const ev={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ev).forEach(([r,e])=>{ev[e]=r});function dk(r){const e=new Bl(r),n=zR(Bl.prototype.request,e);return Be.extend(n,Bl.prototype,e,{allOwnKeys:!0}),Be.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return dk($l(r,s))},n}const vr=dk(Ph);vr.Axios=Bl;vr.CanceledError=Ou;vr.CancelToken=hU;vr.isCancel=nk;vr.VERSION=ck;vr.toFormData=Wm;vr.AxiosError=pn;vr.Cancel=vr.CanceledError;vr.all=function(e){return Promise.all(e)};vr.spread=fU;vr.isAxiosError=pU;vr.mergeConfig=$l;vr.AxiosHeaders=Qi;vr.formToJSON=r=>tk(Be.isHTMLForm(r)?new FormData(r):r);vr.getAdapter=lk.getAdapter;vr.HttpStatusCode=ev;vr.default=vr;const{Axios:Oq,AxiosError:Dq,CanceledError:Lq,isCancel:Bq,CancelToken:Uq,VERSION:Vq,all:Fq,Cancel:zq,isAxiosError:Wq,spread:jq,toFormData:$q,AxiosHeaders:qq,HttpStatusCode:Kq,formToJSON:Hq,getAdapter:Gq,mergeConfig:Yq}=vr;var sy={},Ed={},RI;function mU(){if(RI)return Ed;RI=1,Ed.byteLength=u,Ed.toByteArray=f,Ed.fromByteArray=E;for(var r=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=i.length;s<o;++s)r[s]=i[s],e[i.charCodeAt(s)]=s;e[45]=62,e[95]=63;function l(S){var R=S.length;if(R%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=S.indexOf("=");T===-1&&(T=R);var M=T===R?0:4-T%4;return[T,M]}function u(S){var R=l(S),T=R[0],M=R[1];return(T+M)*3/4-M}function d(S,R,T){return(R+T)*3/4-T}function f(S){var R,T=l(S),M=T[0],W=T[1],z=new n(d(S,M,W)),j=0,se=W>0?M-4:M,le;for(le=0;le<se;le+=4)R=e[S.charCodeAt(le)]<<18|e[S.charCodeAt(le+1)]<<12|e[S.charCodeAt(le+2)]<<6|e[S.charCodeAt(le+3)],z[j++]=R>>16&255,z[j++]=R>>8&255,z[j++]=R&255;return W===2&&(R=e[S.charCodeAt(le)]<<2|e[S.charCodeAt(le+1)]>>4,z[j++]=R&255),W===1&&(R=e[S.charCodeAt(le)]<<10|e[S.charCodeAt(le+1)]<<4|e[S.charCodeAt(le+2)]>>2,z[j++]=R>>8&255,z[j++]=R&255),z}function p(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,R,T){for(var M,W=[],z=R;z<T;z+=3)M=(S[z]<<16&16711680)+(S[z+1]<<8&65280)+(S[z+2]&255),W.push(p(M));return W.join("")}function E(S){for(var R,T=S.length,M=T%3,W=[],z=16383,j=0,se=T-M;j<se;j+=z)W.push(v(S,j,j+z>se?se:j+z));return M===1?(R=S[T-1],W.push(r[R>>2]+r[R<<4&63]+"==")):M===2&&(R=(S[T-2]<<8)+S[T-1],W.push(r[R>>10]+r[R>>4&63]+r[R<<2&63]+"=")),W.join("")}return Ed}var Xf={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var kI;function gU(){return kI||(kI=1,Xf.read=function(r,e,n,i,s){var o,l,u=s*8-i-1,d=(1<<u)-1,f=d>>1,p=-7,v=n?s-1:0,E=n?-1:1,S=r[e+v];for(v+=E,o=S&(1<<-p)-1,S>>=-p,p+=u;p>0;o=o*256+r[e+v],v+=E,p-=8);for(l=o&(1<<-p)-1,o>>=-p,p+=i;p>0;l=l*256+r[e+v],v+=E,p-=8);if(o===0)o=1-f;else{if(o===d)return l?NaN:(S?-1:1)*(1/0);l=l+Math.pow(2,i),o=o-f}return(S?-1:1)*l*Math.pow(2,o-i)},Xf.write=function(r,e,n,i,s,o){var l,u,d,f=o*8-s-1,p=(1<<f)-1,v=p>>1,E=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=i?0:o-1,R=i?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=p):(l=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-l))<1&&(l--,d*=2),l+v>=1?e+=E/d:e+=E*Math.pow(2,1-v),e*d>=2&&(l++,d/=2),l+v>=p?(u=0,l=p):l+v>=1?(u=(e*d-1)*Math.pow(2,s),l=l+v):(u=e*Math.pow(2,v-1)*Math.pow(2,s),l=0));s>=8;r[n+S]=u&255,S+=R,u/=256,s-=8);for(l=l<<s|u,f+=s;f>0;r[n+S]=l&255,S+=R,l/=256,f-=8);r[n+S-R]|=T*128}),Xf}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var CI;function P1(){return CI||(CI=1,(function(r){const e=mU(),n=gU(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=z,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=o(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const Y=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(Y,C),Y.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(Y){if(Y>s)throw new RangeError('The value "'+Y+'" is invalid for option "size"');const C=new Uint8Array(Y);return Object.setPrototypeOf(C,u.prototype),C}function u(Y,C,N){if(typeof Y=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(Y)}return d(Y,C,N)}u.poolSize=8192;function d(Y,C,N){if(typeof Y=="string")return E(Y,C);if(ArrayBuffer.isView(Y))return R(Y);if(Y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y);if(Qn(Y,ArrayBuffer)||Y&&Qn(Y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Qn(Y,SharedArrayBuffer)||Y&&Qn(Y.buffer,SharedArrayBuffer)))return T(Y,C,N);if(typeof Y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const oe=Y.valueOf&&Y.valueOf();if(oe!=null&&oe!==Y)return u.from(oe,C,N);const ye=M(Y);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Y[Symbol.toPrimitive]=="function")return u.from(Y[Symbol.toPrimitive]("string"),C,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y)}u.from=function(Y,C,N){return d(Y,C,N)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function f(Y){if(typeof Y!="number")throw new TypeError('"size" argument must be of type number');if(Y<0)throw new RangeError('The value "'+Y+'" is invalid for option "size"')}function p(Y,C,N){return f(Y),Y<=0?l(Y):C!==void 0?typeof N=="string"?l(Y).fill(C,N):l(Y).fill(C):l(Y)}u.alloc=function(Y,C,N){return p(Y,C,N)};function v(Y){return f(Y),l(Y<0?0:W(Y)|0)}u.allocUnsafe=function(Y){return v(Y)},u.allocUnsafeSlow=function(Y){return v(Y)};function E(Y,C){if((typeof C!="string"||C==="")&&(C="utf8"),!u.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const N=j(Y,C)|0;let oe=l(N);const ye=oe.write(Y,C);return ye!==N&&(oe=oe.slice(0,ye)),oe}function S(Y){const C=Y.length<0?0:W(Y.length)|0,N=l(C);for(let oe=0;oe<C;oe+=1)N[oe]=Y[oe]&255;return N}function R(Y){if(Qn(Y,Uint8Array)){const C=new Uint8Array(Y);return T(C.buffer,C.byteOffset,C.byteLength)}return S(Y)}function T(Y,C,N){if(C<0||Y.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<C+(N||0))throw new RangeError('"length" is outside of buffer bounds');let oe;return C===void 0&&N===void 0?oe=new Uint8Array(Y):N===void 0?oe=new Uint8Array(Y,C):oe=new Uint8Array(Y,C,N),Object.setPrototypeOf(oe,u.prototype),oe}function M(Y){if(u.isBuffer(Y)){const C=W(Y.length)|0,N=l(C);return N.length===0||Y.copy(N,0,0,C),N}if(Y.length!==void 0)return typeof Y.length!="number"||gn(Y.length)?l(0):S(Y);if(Y.type==="Buffer"&&Array.isArray(Y.data))return S(Y.data)}function W(Y){if(Y>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return Y|0}function z(Y){return+Y!=Y&&(Y=0),u.alloc(+Y)}u.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==u.prototype},u.compare=function(C,N){if(Qn(C,Uint8Array)&&(C=u.from(C,C.offset,C.byteLength)),Qn(N,Uint8Array)&&(N=u.from(N,N.offset,N.byteLength)),!u.isBuffer(C)||!u.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===N)return 0;let oe=C.length,ye=N.length;for(let be=0,Pe=Math.min(oe,ye);be<Pe;++be)if(C[be]!==N[be]){oe=C[be],ye=N[be];break}return oe<ye?-1:ye<oe?1:0},u.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(C,N){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return u.alloc(0);let oe;if(N===void 0)for(N=0,oe=0;oe<C.length;++oe)N+=C[oe].length;const ye=u.allocUnsafe(N);let be=0;for(oe=0;oe<C.length;++oe){let Pe=C[oe];if(Qn(Pe,Uint8Array))be+Pe.length>ye.length?(u.isBuffer(Pe)||(Pe=u.from(Pe)),Pe.copy(ye,be)):Uint8Array.prototype.set.call(ye,Pe,be);else if(u.isBuffer(Pe))Pe.copy(ye,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=Pe.length}return ye};function j(Y,C){if(u.isBuffer(Y))return Y.length;if(ArrayBuffer.isView(Y)||Qn(Y,ArrayBuffer))return Y.byteLength;if(typeof Y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Y);const N=Y.length,oe=arguments.length>2&&arguments[2]===!0;if(!oe&&N===0)return 0;let ye=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return _n(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return dn(Y).length;default:if(ye)return oe?-1:_n(Y).length;C=(""+C).toLowerCase(),ye=!0}}u.byteLength=j;function se(Y,C,N){let oe=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,C>>>=0,N<=C))return"";for(Y||(Y="utf8");;)switch(Y){case"hex":return re(this,C,N);case"utf8":case"utf-8":return y(this,C,N);case"ascii":return J(this,C,N);case"latin1":case"binary":return G(this,C,N);case"base64":return I(this,C,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,C,N);default:if(oe)throw new TypeError("Unknown encoding: "+Y);Y=(Y+"").toLowerCase(),oe=!0}}u.prototype._isBuffer=!0;function le(Y,C,N){const oe=Y[C];Y[C]=Y[N],Y[N]=oe}u.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<C;N+=2)le(this,N,N+1);return this},u.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<C;N+=4)le(this,N,N+3),le(this,N+1,N+2);return this},u.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<C;N+=8)le(this,N,N+7),le(this,N+1,N+6),le(this,N+2,N+5),le(this,N+3,N+4);return this},u.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?y(this,0,C):se.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(C){if(!u.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:u.compare(this,C)===0},u.prototype.inspect=function(){let C="";const N=r.INSPECT_MAX_BYTES;return C=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(C+=" ... "),"<Buffer "+C+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(C,N,oe,ye,be){if(Qn(C,Uint8Array)&&(C=u.from(C,C.offset,C.byteLength)),!u.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(N===void 0&&(N=0),oe===void 0&&(oe=C?C.length:0),ye===void 0&&(ye=0),be===void 0&&(be=this.length),N<0||oe>C.length||ye<0||be>this.length)throw new RangeError("out of range index");if(ye>=be&&N>=oe)return 0;if(ye>=be)return-1;if(N>=oe)return 1;if(N>>>=0,oe>>>=0,ye>>>=0,be>>>=0,this===C)return 0;let Pe=be-ye,Vt=oe-N;const Et=Math.min(Pe,Vt),Rt=this.slice(ye,be),on=C.slice(N,oe);for(let xt=0;xt<Et;++xt)if(Rt[xt]!==on[xt]){Pe=Rt[xt],Vt=on[xt];break}return Pe<Vt?-1:Vt<Pe?1:0};function de(Y,C,N,oe,ye){if(Y.length===0)return-1;if(typeof N=="string"?(oe=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,gn(N)&&(N=ye?0:Y.length-1),N<0&&(N=Y.length+N),N>=Y.length){if(ye)return-1;N=Y.length-1}else if(N<0)if(ye)N=0;else return-1;if(typeof C=="string"&&(C=u.from(C,oe)),u.isBuffer(C))return C.length===0?-1:Z(Y,C,N,oe,ye);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?ye?Uint8Array.prototype.indexOf.call(Y,C,N):Uint8Array.prototype.lastIndexOf.call(Y,C,N):Z(Y,[C],N,oe,ye);throw new TypeError("val must be string, number or Buffer")}function Z(Y,C,N,oe,ye){let be=1,Pe=Y.length,Vt=C.length;if(oe!==void 0&&(oe=String(oe).toLowerCase(),oe==="ucs2"||oe==="ucs-2"||oe==="utf16le"||oe==="utf-16le")){if(Y.length<2||C.length<2)return-1;be=2,Pe/=2,Vt/=2,N/=2}function Et(on,xt){return be===1?on[xt]:on.readUInt16BE(xt*be)}let Rt;if(ye){let on=-1;for(Rt=N;Rt<Pe;Rt++)if(Et(Y,Rt)===Et(C,on===-1?0:Rt-on)){if(on===-1&&(on=Rt),Rt-on+1===Vt)return on*be}else on!==-1&&(Rt-=Rt-on),on=-1}else for(N+Vt>Pe&&(N=Pe-Vt),Rt=N;Rt>=0;Rt--){let on=!0;for(let xt=0;xt<Vt;xt++)if(Et(Y,Rt+xt)!==Et(C,xt)){on=!1;break}if(on)return Rt}return-1}u.prototype.includes=function(C,N,oe){return this.indexOf(C,N,oe)!==-1},u.prototype.indexOf=function(C,N,oe){return de(this,C,N,oe,!0)},u.prototype.lastIndexOf=function(C,N,oe){return de(this,C,N,oe,!1)};function $(Y,C,N,oe){N=Number(N)||0;const ye=Y.length-N;oe?(oe=Number(oe),oe>ye&&(oe=ye)):oe=ye;const be=C.length;oe>be/2&&(oe=be/2);let Pe;for(Pe=0;Pe<oe;++Pe){const Vt=parseInt(C.substr(Pe*2,2),16);if(gn(Vt))return Pe;Y[N+Pe]=Vt}return Pe}function D(Y,C,N,oe){return hn(_n(C,Y.length-N),Y,N,oe)}function U(Y,C,N,oe){return hn(xn(C),Y,N,oe)}function q(Y,C,N,oe){return hn(dn(C),Y,N,oe)}function H(Y,C,N,oe){return hn(ir(C,Y.length-N),Y,N,oe)}u.prototype.write=function(C,N,oe,ye){if(N===void 0)ye="utf8",oe=this.length,N=0;else if(oe===void 0&&typeof N=="string")ye=N,oe=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite(oe)?(oe=oe>>>0,ye===void 0&&(ye="utf8")):(ye=oe,oe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-N;if((oe===void 0||oe>be)&&(oe=be),C.length>0&&(oe<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");let Pe=!1;for(;;)switch(ye){case"hex":return $(this,C,N,oe);case"utf8":case"utf-8":return D(this,C,N,oe);case"ascii":case"latin1":case"binary":return U(this,C,N,oe);case"base64":return q(this,C,N,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,C,N,oe);default:if(Pe)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),Pe=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(Y,C,N){return C===0&&N===Y.length?e.fromByteArray(Y):e.fromByteArray(Y.slice(C,N))}function y(Y,C,N){N=Math.min(Y.length,N);const oe=[];let ye=C;for(;ye<N;){const be=Y[ye];let Pe=null,Vt=be>239?4:be>223?3:be>191?2:1;if(ye+Vt<=N){let Et,Rt,on,xt;switch(Vt){case 1:be<128&&(Pe=be);break;case 2:Et=Y[ye+1],(Et&192)===128&&(xt=(be&31)<<6|Et&63,xt>127&&(Pe=xt));break;case 3:Et=Y[ye+1],Rt=Y[ye+2],(Et&192)===128&&(Rt&192)===128&&(xt=(be&15)<<12|(Et&63)<<6|Rt&63,xt>2047&&(xt<55296||xt>57343)&&(Pe=xt));break;case 4:Et=Y[ye+1],Rt=Y[ye+2],on=Y[ye+3],(Et&192)===128&&(Rt&192)===128&&(on&192)===128&&(xt=(be&15)<<18|(Et&63)<<12|(Rt&63)<<6|on&63,xt>65535&&xt<1114112&&(Pe=xt))}}Pe===null?(Pe=65533,Vt=1):Pe>65535&&(Pe-=65536,oe.push(Pe>>>10&1023|55296),Pe=56320|Pe&1023),oe.push(Pe),ye+=Vt}return V(oe)}const x=4096;function V(Y){const C=Y.length;if(C<=x)return String.fromCharCode.apply(String,Y);let N="",oe=0;for(;oe<C;)N+=String.fromCharCode.apply(String,Y.slice(oe,oe+=x));return N}function J(Y,C,N){let oe="";N=Math.min(Y.length,N);for(let ye=C;ye<N;++ye)oe+=String.fromCharCode(Y[ye]&127);return oe}function G(Y,C,N){let oe="";N=Math.min(Y.length,N);for(let ye=C;ye<N;++ye)oe+=String.fromCharCode(Y[ye]);return oe}function re(Y,C,N){const oe=Y.length;(!C||C<0)&&(C=0),(!N||N<0||N>oe)&&(N=oe);let ye="";for(let be=C;be<N;++be)ye+=vn[Y[be]];return ye}function ae(Y,C,N){const oe=Y.slice(C,N);let ye="";for(let be=0;be<oe.length-1;be+=2)ye+=String.fromCharCode(oe[be]+oe[be+1]*256);return ye}u.prototype.slice=function(C,N){const oe=this.length;C=~~C,N=N===void 0?oe:~~N,C<0?(C+=oe,C<0&&(C=0)):C>oe&&(C=oe),N<0?(N+=oe,N<0&&(N=0)):N>oe&&(N=oe),N<C&&(N=C);const ye=this.subarray(C,N);return Object.setPrototypeOf(ye,u.prototype),ye};function O(Y,C,N){if(Y%1!==0||Y<0)throw new RangeError("offset is not uint");if(Y+C>N)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(C,N,oe){C=C>>>0,N=N>>>0,oe||O(C,N,this.length);let ye=this[C],be=1,Pe=0;for(;++Pe<N&&(be*=256);)ye+=this[C+Pe]*be;return ye},u.prototype.readUintBE=u.prototype.readUIntBE=function(C,N,oe){C=C>>>0,N=N>>>0,oe||O(C,N,this.length);let ye=this[C+--N],be=1;for(;N>0&&(be*=256);)ye+=this[C+--N]*be;return ye},u.prototype.readUint8=u.prototype.readUInt8=function(C,N){return C=C>>>0,N||O(C,1,this.length),this[C]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(C,N){return C=C>>>0,N||O(C,2,this.length),this[C]|this[C+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(C,N){return C=C>>>0,N||O(C,2,this.length),this[C]<<8|this[C+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(C,N){return C=C>>>0,N||O(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(C,N){return C=C>>>0,N||O(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},u.prototype.readBigUInt64LE=sr(function(C){C=C>>>0,qn(C,"offset");const N=this[C],oe=this[C+7];(N===void 0||oe===void 0)&&un(C,this.length-8);const ye=N+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,be=this[++C]+this[++C]*2**8+this[++C]*2**16+oe*2**24;return BigInt(ye)+(BigInt(be)<<BigInt(32))}),u.prototype.readBigUInt64BE=sr(function(C){C=C>>>0,qn(C,"offset");const N=this[C],oe=this[C+7];(N===void 0||oe===void 0)&&un(C,this.length-8);const ye=N*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],be=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+oe;return(BigInt(ye)<<BigInt(32))+BigInt(be)}),u.prototype.readIntLE=function(C,N,oe){C=C>>>0,N=N>>>0,oe||O(C,N,this.length);let ye=this[C],be=1,Pe=0;for(;++Pe<N&&(be*=256);)ye+=this[C+Pe]*be;return be*=128,ye>=be&&(ye-=Math.pow(2,8*N)),ye},u.prototype.readIntBE=function(C,N,oe){C=C>>>0,N=N>>>0,oe||O(C,N,this.length);let ye=N,be=1,Pe=this[C+--ye];for(;ye>0&&(be*=256);)Pe+=this[C+--ye]*be;return be*=128,Pe>=be&&(Pe-=Math.pow(2,8*N)),Pe},u.prototype.readInt8=function(C,N){return C=C>>>0,N||O(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},u.prototype.readInt16LE=function(C,N){C=C>>>0,N||O(C,2,this.length);const oe=this[C]|this[C+1]<<8;return oe&32768?oe|4294901760:oe},u.prototype.readInt16BE=function(C,N){C=C>>>0,N||O(C,2,this.length);const oe=this[C+1]|this[C]<<8;return oe&32768?oe|4294901760:oe},u.prototype.readInt32LE=function(C,N){return C=C>>>0,N||O(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},u.prototype.readInt32BE=function(C,N){return C=C>>>0,N||O(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},u.prototype.readBigInt64LE=sr(function(C){C=C>>>0,qn(C,"offset");const N=this[C],oe=this[C+7];(N===void 0||oe===void 0)&&un(C,this.length-8);const ye=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(oe<<24);return(BigInt(ye)<<BigInt(32))+BigInt(N+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),u.prototype.readBigInt64BE=sr(function(C){C=C>>>0,qn(C,"offset");const N=this[C],oe=this[C+7];(N===void 0||oe===void 0)&&un(C,this.length-8);const ye=(N<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(ye)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+oe)}),u.prototype.readFloatLE=function(C,N){return C=C>>>0,N||O(C,4,this.length),n.read(this,C,!0,23,4)},u.prototype.readFloatBE=function(C,N){return C=C>>>0,N||O(C,4,this.length),n.read(this,C,!1,23,4)},u.prototype.readDoubleLE=function(C,N){return C=C>>>0,N||O(C,8,this.length),n.read(this,C,!0,52,8)},u.prototype.readDoubleBE=function(C,N){return C=C>>>0,N||O(C,8,this.length),n.read(this,C,!1,52,8)};function w(Y,C,N,oe,ye,be){if(!u.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>ye||C<be)throw new RangeError('"value" argument is out of bounds');if(N+oe>Y.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(C,N,oe,ye){if(C=+C,N=N>>>0,oe=oe>>>0,!ye){const Vt=Math.pow(2,8*oe)-1;w(this,C,N,oe,Vt,0)}let be=1,Pe=0;for(this[N]=C&255;++Pe<oe&&(be*=256);)this[N+Pe]=C/be&255;return N+oe},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(C,N,oe,ye){if(C=+C,N=N>>>0,oe=oe>>>0,!ye){const Vt=Math.pow(2,8*oe)-1;w(this,C,N,oe,Vt,0)}let be=oe-1,Pe=1;for(this[N+be]=C&255;--be>=0&&(Pe*=256);)this[N+be]=C/Pe&255;return N+oe},u.prototype.writeUint8=u.prototype.writeUInt8=function(C,N,oe){return C=+C,N=N>>>0,oe||w(this,C,N,1,255,0),this[N]=C&255,N+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(C,N,oe){return C=+C,N=N>>>0,oe||w(this,C,N,2,65535,0),this[N]=C&255,this[N+1]=C>>>8,N+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(C,N,oe){return C=+C,N=N>>>0,oe||w(this,C,N,2,65535,0),this[N]=C>>>8,this[N+1]=C&255,N+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(C,N,oe){return C=+C,N=N>>>0,oe||w(this,C,N,4,4294967295,0),this[N+3]=C>>>24,this[N+2]=C>>>16,this[N+1]=C>>>8,this[N]=C&255,N+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(C,N,oe){return C=+C,N=N>>>0,oe||w(this,C,N,4,4294967295,0),this[N]=C>>>24,this[N+1]=C>>>16,this[N+2]=C>>>8,this[N+3]=C&255,N+4};function _(Y,C,N,oe,ye){rn(C,oe,ye,Y,N,7);let be=Number(C&BigInt(4294967295));Y[N++]=be,be=be>>8,Y[N++]=be,be=be>>8,Y[N++]=be,be=be>>8,Y[N++]=be;let Pe=Number(C>>BigInt(32)&BigInt(4294967295));return Y[N++]=Pe,Pe=Pe>>8,Y[N++]=Pe,Pe=Pe>>8,Y[N++]=Pe,Pe=Pe>>8,Y[N++]=Pe,N}function F(Y,C,N,oe,ye){rn(C,oe,ye,Y,N,7);let be=Number(C&BigInt(4294967295));Y[N+7]=be,be=be>>8,Y[N+6]=be,be=be>>8,Y[N+5]=be,be=be>>8,Y[N+4]=be;let Pe=Number(C>>BigInt(32)&BigInt(4294967295));return Y[N+3]=Pe,Pe=Pe>>8,Y[N+2]=Pe,Pe=Pe>>8,Y[N+1]=Pe,Pe=Pe>>8,Y[N]=Pe,N+8}u.prototype.writeBigUInt64LE=sr(function(C,N=0){return _(this,C,N,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=sr(function(C,N=0){return F(this,C,N,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(C,N,oe,ye){if(C=+C,N=N>>>0,!ye){const Et=Math.pow(2,8*oe-1);w(this,C,N,oe,Et-1,-Et)}let be=0,Pe=1,Vt=0;for(this[N]=C&255;++be<oe&&(Pe*=256);)C<0&&Vt===0&&this[N+be-1]!==0&&(Vt=1),this[N+be]=(C/Pe>>0)-Vt&255;return N+oe},u.prototype.writeIntBE=function(C,N,oe,ye){if(C=+C,N=N>>>0,!ye){const Et=Math.pow(2,8*oe-1);w(this,C,N,oe,Et-1,-Et)}let be=oe-1,Pe=1,Vt=0;for(this[N+be]=C&255;--be>=0&&(Pe*=256);)C<0&&Vt===0&&this[N+be+1]!==0&&(Vt=1),this[N+be]=(C/Pe>>0)-Vt&255;return N+oe},u.prototype.writeInt8=function(C,N,oe){return C=+C,N=N>>>0,oe||w(this,C,N,1,127,-128),C<0&&(C=255+C+1),this[N]=C&255,N+1},u.prototype.writeInt16LE=function(C,N,oe){return C=+C,N=N>>>0,oe||w(this,C,N,2,32767,-32768),this[N]=C&255,this[N+1]=C>>>8,N+2},u.prototype.writeInt16BE=function(C,N,oe){return C=+C,N=N>>>0,oe||w(this,C,N,2,32767,-32768),this[N]=C>>>8,this[N+1]=C&255,N+2},u.prototype.writeInt32LE=function(C,N,oe){return C=+C,N=N>>>0,oe||w(this,C,N,4,2147483647,-2147483648),this[N]=C&255,this[N+1]=C>>>8,this[N+2]=C>>>16,this[N+3]=C>>>24,N+4},u.prototype.writeInt32BE=function(C,N,oe){return C=+C,N=N>>>0,oe||w(this,C,N,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[N]=C>>>24,this[N+1]=C>>>16,this[N+2]=C>>>8,this[N+3]=C&255,N+4},u.prototype.writeBigInt64LE=sr(function(C,N=0){return _(this,C,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=sr(function(C,N=0){return F(this,C,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ee(Y,C,N,oe,ye,be){if(N+oe>Y.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function ce(Y,C,N,oe,ye){return C=+C,N=N>>>0,ye||ee(Y,C,N,4),n.write(Y,C,N,oe,23,4),N+4}u.prototype.writeFloatLE=function(C,N,oe){return ce(this,C,N,!0,oe)},u.prototype.writeFloatBE=function(C,N,oe){return ce(this,C,N,!1,oe)};function we(Y,C,N,oe,ye){return C=+C,N=N>>>0,ye||ee(Y,C,N,8),n.write(Y,C,N,oe,52,8),N+8}u.prototype.writeDoubleLE=function(C,N,oe){return we(this,C,N,!0,oe)},u.prototype.writeDoubleBE=function(C,N,oe){return we(this,C,N,!1,oe)},u.prototype.copy=function(C,N,oe,ye){if(!u.isBuffer(C))throw new TypeError("argument should be a Buffer");if(oe||(oe=0),!ye&&ye!==0&&(ye=this.length),N>=C.length&&(N=C.length),N||(N=0),ye>0&&ye<oe&&(ye=oe),ye===oe||C.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(oe<0||oe>=this.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),C.length-N<ye-oe&&(ye=C.length-N+oe);const be=ye-oe;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,oe,ye):Uint8Array.prototype.set.call(C,this.subarray(oe,ye),N),be},u.prototype.fill=function(C,N,oe,ye){if(typeof C=="string"){if(typeof N=="string"?(ye=N,N=0,oe=this.length):typeof oe=="string"&&(ye=oe,oe=this.length),ye!==void 0&&typeof ye!="string")throw new TypeError("encoding must be a string");if(typeof ye=="string"&&!u.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);if(C.length===1){const Pe=C.charCodeAt(0);(ye==="utf8"&&Pe<128||ye==="latin1")&&(C=Pe)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(N<0||this.length<N||this.length<oe)throw new RangeError("Out of range index");if(oe<=N)return this;N=N>>>0,oe=oe===void 0?this.length:oe>>>0,C||(C=0);let be;if(typeof C=="number")for(be=N;be<oe;++be)this[be]=C;else{const Pe=u.isBuffer(C)?C:u.from(C,ye),Vt=Pe.length;if(Vt===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(be=0;be<oe-N;++be)this[be+N]=Pe[be%Vt]}return this};const Oe={};function ze(Y,C,N){Oe[Y]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Y}]`,this.stack,delete this.name}get code(){return Y}set code(ye){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ye,writable:!0})}toString(){return`${this.name} [${Y}]: ${this.message}`}}}ze("ERR_BUFFER_OUT_OF_BOUNDS",function(Y){return Y?`${Y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ze("ERR_INVALID_ARG_TYPE",function(Y,C){return`The "${Y}" argument must be of type number. Received type ${typeof C}`},TypeError),ze("ERR_OUT_OF_RANGE",function(Y,C,N){let oe=`The value of "${Y}" is out of range.`,ye=N;return Number.isInteger(N)&&Math.abs(N)>2**32?ye=At(String(N)):typeof N=="bigint"&&(ye=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(ye=At(ye)),ye+="n"),oe+=` It must be ${C}. Received ${ye}`,oe},RangeError);function At(Y){let C="",N=Y.length;const oe=Y[0]==="-"?1:0;for(;N>=oe+4;N-=3)C=`_${Y.slice(N-3,N)}${C}`;return`${Y.slice(0,N)}${C}`}function qt(Y,C,N){qn(C,"offset"),(Y[C]===void 0||Y[C+N]===void 0)&&un(C,Y.length-(N+1))}function rn(Y,C,N,oe,ye,be){if(Y>N||Y<C){const Pe=typeof C=="bigint"?"n":"";let Vt;throw C===0||C===BigInt(0)?Vt=`>= 0${Pe} and < 2${Pe} ** ${(be+1)*8}${Pe}`:Vt=`>= -(2${Pe} ** ${(be+1)*8-1}${Pe}) and < 2 ** ${(be+1)*8-1}${Pe}`,new Oe.ERR_OUT_OF_RANGE("value",Vt,Y)}qt(oe,ye,be)}function qn(Y,C){if(typeof Y!="number")throw new Oe.ERR_INVALID_ARG_TYPE(C,"number",Y)}function un(Y,C,N){throw Math.floor(Y)!==Y?(qn(Y,N),new Oe.ERR_OUT_OF_RANGE("offset","an integer",Y)):C<0?new Oe.ERR_BUFFER_OUT_OF_BOUNDS:new Oe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${C}`,Y)}const kn=/[^+/0-9A-Za-z-_]/g;function $r(Y){if(Y=Y.split("=")[0],Y=Y.trim().replace(kn,""),Y.length<2)return"";for(;Y.length%4!==0;)Y=Y+"=";return Y}function _n(Y,C){C=C||1/0;let N;const oe=Y.length;let ye=null;const be=[];for(let Pe=0;Pe<oe;++Pe){if(N=Y.charCodeAt(Pe),N>55295&&N<57344){if(!ye){if(N>56319){(C-=3)>-1&&be.push(239,191,189);continue}else if(Pe+1===oe){(C-=3)>-1&&be.push(239,191,189);continue}ye=N;continue}if(N<56320){(C-=3)>-1&&be.push(239,191,189),ye=N;continue}N=(ye-55296<<10|N-56320)+65536}else ye&&(C-=3)>-1&&be.push(239,191,189);if(ye=null,N<128){if((C-=1)<0)break;be.push(N)}else if(N<2048){if((C-=2)<0)break;be.push(N>>6|192,N&63|128)}else if(N<65536){if((C-=3)<0)break;be.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((C-=4)<0)break;be.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return be}function xn(Y){const C=[];for(let N=0;N<Y.length;++N)C.push(Y.charCodeAt(N)&255);return C}function ir(Y,C){let N,oe,ye;const be=[];for(let Pe=0;Pe<Y.length&&!((C-=2)<0);++Pe)N=Y.charCodeAt(Pe),oe=N>>8,ye=N%256,be.push(ye),be.push(oe);return be}function dn(Y){return e.toByteArray($r(Y))}function hn(Y,C,N,oe){let ye;for(ye=0;ye<oe&&!(ye+N>=C.length||ye>=Y.length);++ye)C[ye+N]=Y[ye];return ye}function Qn(Y,C){return Y instanceof C||Y!=null&&Y.constructor!=null&&Y.constructor.name!=null&&Y.constructor.name===C.name}function gn(Y){return Y!==Y}const vn=(function(){const Y="0123456789abcdef",C=new Array(256);for(let N=0;N<16;++N){const oe=N*16;for(let ye=0;ye<16;++ye)C[oe+ye]=Y[N]+Y[ye]}return C})();function sr(Y){return typeof BigInt>"u"?Qt:Y}function Qt(){throw new Error("BigInt not supported")}})(sy)),sy}var zt=P1();const hk="http://localhost:8000".replace(/\/+$/,"");class yU{constructor(e,n=hk,i=vr){var s;this.basePath=n,this.axios=i,e&&(this.configuration=e,this.basePath=(s=e.basePath)!==null&&s!==void 0?s:n)}}class wU extends Error{constructor(e,n){super(n),this.field=e,this.name="RequiredError"}}const vU={},EU="https://example.com",_U=function(r,e,n){if(n==null)throw new wU(e,`Required parameter ${e} was null or undefined when calling ${r}.`)};function tv(r,e,n=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(i=>tv(r,i,n)):Object.keys(e).forEach(i=>tv(r,e[i],`${n}${n!==""?".":""}${i}`)):r.has(n)?r.append(n,e):r.set(n,e))}const bU=function(r,...e){const n=new URLSearchParams(r.search);tv(n,e),r.search=n.toString()},SU=function(r,e,n){const i=typeof r!="string";return(i&&n&&n.isJsonMime?n.isJsonMime(e.headers["Content-Type"]):i)?JSON.stringify(r!==void 0?r:{}):r||""},IU=function(r){return r.pathname+r.search+r.hash},AU=function(r,e,n,i){return(s=e,o=n)=>{var l;const u=Object.assign(Object.assign({},r.options),{url:(s.defaults.baseURL?"":(l=i?.basePath)!==null&&l!==void 0?l:o)+r.url});return s.request(u)}};var fk=function(r,e,n,i){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{f(i.next(p))}catch(v){l(v)}}function d(p){try{f(i.throw(p))}catch(v){l(v)}}function f(p){p.done?o(p.value):s(p.value).then(u,d)}f((i=i.apply(r,e||[])).next())})};const xU=function(r){return{postKmsRpc:(e,...n)=>fk(this,[e,...n],void 0,function*(i,s={}){_U("postKmsRpc","kmsRpcRequest",i);const o="/kms/rpc",l=new URL(o,EU);let u;r&&(u=r.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),s),f={},p={};f["Content-Type"]="application/json",bU(l,p);let v=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),v),s.headers),d.data=SU(i,d,r),{url:IU(l),options:d}})}},TU=function(r){const e=xU(r);return{postKmsRpc(n,i){return fk(this,void 0,void 0,function*(){var s,o,l;const u=yield e.postKmsRpc(n,i),d=(s=r?.serverIndex)!==null&&s!==void 0?s:0,f=(l=(o=vU["KMSRPCApi.postKmsRpc"])===null||o===void 0?void 0:o[d])===null||l===void 0?void 0:l.url;return(p,v)=>AU(u,vr,hk,r)(p,f||v)})}}};class RU extends yU{postKmsRpc(e,n){return TU(this.configuration).postKmsRpc(e,n).then(i=>i(this.axios,this.basePath))}}class kU{constructor(e={}){var n;this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.serverIndex=e.serverIndex,this.baseOptions=Object.assign(Object.assign({},e.baseOptions),{headers:Object.assign({},(n=e.baseOptions)===null||n===void 0?void 0:n.headers)}),this.formDataCtor=e.formDataCtor}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(n.test(e)||e.toLowerCase()==="application/json-patch+json")}}var Tl;(function(r){r.ed25519="Ed25519",r.secp256r1="Secp256r1",r.secp256k1="Secp256k1",r.secp256k1Keccak256="Secp256k1Keccak256"})(Tl||(Tl={}));var nv;(function(r){r.createAuthenticator="createAuthenticator"})(nv||(nv={}));var rv;(function(r){r.createOrganization="createOrganization"})(rv||(rv={}));var iv;(function(r){r.createWallet="createWallet"})(iv||(iv={}));var sv;(function(r){r.deleteAuthenticator="deleteAuthenticator"})(sv||(sv={}));var Hc;(function(r){r.ed25519="Ed25519",r.secp256k1="Secp256k1"})(Hc||(Hc={}));var Yn;(function(r){r.ethereum="Ethereum",r.solana="Solana",r.bitcoinSegwit="BitcoinSegwit",r.sui="Sui"})(Yn||(Yn={}));var nm;(function(r){r.getAccounts="getAccounts"})(nm||(nm={}));var ov;(function(r){r.grantOrganizationAccess="grantOrganizationAccess"})(ov||(ov={}));var $d;(function(r){r.admin="ADMIN",r.user="USER"})($d||($d={}));var av;(function(r){r.signRawPayload="signRawPayload"})(av||(av={}));var lv;(function(r){r.signTransaction="signTransaction"})(lv||(lv={}));var Or=(r=>(r.SOLANA_MAINNET="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",r.SOLANA_DEVNET="solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",r.SOLANA_TESTNET="solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",r.ETHEREUM_MAINNET="eip155:1",r.ETHEREUM_GOERLI="eip155:5",r.ETHEREUM_SEPOLIA="eip155:11155111",r.POLYGON_MAINNET="eip155:137",r.POLYGON_MUMBAI="eip155:80001",r.OPTIMISM_MAINNET="eip155:10",r.OPTIMISM_GOERLI="eip155:420",r.ARBITRUM_ONE="eip155:42161",r.ARBITRUM_GOERLI="eip155:421613",r.BASE_MAINNET="eip155:8453",r.BASE_GOERLI="eip155:84531",r.BASE_SEPOLIA="eip155:84532",r.BITCOIN_MAINNET="bip122:000000000019d6689c085ae165831e93",r.BITCOIN_TESTNET="bip122:000000000933ea01ad0ee984209779ba",r.SUI_MAINNET="sui:35834a8a",r.SUI_TESTNET="sui:4c78adac",r))(Or||{}),CU={"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":{name:"Solana Mainnet",chain:"solana",network:"mainnet",explorer:{name:"Solscan",transactionUrl:"https://solscan.io/tx/{hash}",addressUrl:"https://solscan.io/account/{address}"}},"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":{name:"Solana Devnet",chain:"solana",network:"devnet",explorer:{name:"Solscan",transactionUrl:"https://solscan.io/tx/{hash}?cluster=devnet",addressUrl:"https://solscan.io/account/{address}?cluster=devnet"}},"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":{name:"Solana Testnet",chain:"solana",network:"testnet",explorer:{name:"Solscan",transactionUrl:"https://solscan.io/tx/{hash}?cluster=testnet",addressUrl:"https://solscan.io/account/{address}?cluster=testnet"}},"eip155:1":{name:"Ethereum Mainnet",chain:"ethereum",network:"mainnet",explorer:{name:"Etherscan",transactionUrl:"https://etherscan.io/tx/{hash}",addressUrl:"https://etherscan.io/address/{address}"}},"eip155:5":{name:"Ethereum Goerli",chain:"ethereum",network:"goerli",explorer:{name:"Etherscan",transactionUrl:"https://goerli.etherscan.io/tx/{hash}",addressUrl:"https://goerli.etherscan.io/address/{address}"}},"eip155:11155111":{name:"Ethereum Sepolia",chain:"ethereum",network:"sepolia",explorer:{name:"Etherscan",transactionUrl:"https://sepolia.etherscan.io/tx/{hash}",addressUrl:"https://sepolia.etherscan.io/address/{address}"}},"eip155:137":{name:"Polygon Mainnet",chain:"polygon",network:"mainnet",explorer:{name:"Polygonscan",transactionUrl:"https://polygonscan.com/tx/{hash}",addressUrl:"https://polygonscan.com/address/{address}"}},"eip155:80001":{name:"Polygon Mumbai",chain:"polygon",network:"mumbai",explorer:{name:"Polygonscan",transactionUrl:"https://mumbai.polygonscan.com/tx/{hash}",addressUrl:"https://mumbai.polygonscan.com/address/{address}"}},"eip155:8453":{name:"Base Mainnet",chain:"base",network:"mainnet",explorer:{name:"Basescan",transactionUrl:"https://basescan.org/tx/{hash}",addressUrl:"https://basescan.org/address/{address}"}},"eip155:84531":{name:"Base Goerli",chain:"base",network:"goerli",explorer:{name:"Basescan",transactionUrl:"https://goerli.basescan.org/tx/{hash}",addressUrl:"https://goerli.basescan.org/address/{address}"}},"eip155:84532":{name:"Base Sepolia",chain:"base",network:"sepolia",explorer:{name:"Basescan",transactionUrl:"https://sepolia.basescan.org/tx/{hash}",addressUrl:"https://sepolia.basescan.org/address/{address}"}},"eip155:42161":{name:"Arbitrum One",chain:"arbitrum",network:"mainnet",explorer:{name:"Arbiscan",transactionUrl:"https://arbiscan.io/tx/{hash}",addressUrl:"https://arbiscan.io/address/{address}"}},"eip155:421613":{name:"Arbitrum Goerli",chain:"arbitrum",network:"goerli",explorer:{name:"Arbiscan",transactionUrl:"https://goerli.arbiscan.io/tx/{hash}",addressUrl:"https://goerli.arbiscan.io/address/{address}"}},"eip155:10":{name:"Optimism Mainnet",chain:"optimism",network:"mainnet",explorer:{name:"Optimistic Etherscan",transactionUrl:"https://optimistic.etherscan.io/tx/{hash}",addressUrl:"https://optimistic.etherscan.io/address/{address}"}},"eip155:420":{name:"Optimism Goerli",chain:"optimism",network:"goerli",explorer:{name:"Optimistic Etherscan",transactionUrl:"https://goerli-optimism.etherscan.io/tx/{hash}",addressUrl:"https://goerli-optimism.etherscan.io/address/{address}"}},"bip122:000000000019d6689c085ae165831e93":{name:"Bitcoin Mainnet",chain:"bitcoin",network:"mainnet",explorer:{name:"Blockstream",transactionUrl:"https://blockstream.info/tx/{hash}",addressUrl:"https://blockstream.info/address/{address}"}},"bip122:000000000933ea01ad0ee984209779ba":{name:"Bitcoin Testnet",chain:"bitcoin",network:"testnet",explorer:{name:"Blockstream",transactionUrl:"https://blockstream.info/testnet/tx/{hash}",addressUrl:"https://blockstream.info/testnet/address/{address}"}},"sui:35834a8a":{name:"Sui Mainnet",chain:"sui",network:"mainnet",explorer:{name:"Sui Explorer",transactionUrl:"https://explorer.sui.io/txblock/{hash}?network=mainnet",addressUrl:"https://explorer.sui.io/address/{address}?network=mainnet"}},"sui:4c78adac":{name:"Sui Testnet",chain:"sui",network:"testnet",explorer:{name:"Sui Explorer",transactionUrl:"https://explorer.sui.io/txblock/{hash}?network=testnet",addressUrl:"https://explorer.sui.io/address/{address}?network=testnet"}}};function PU(r){return CU[r]}function cv(r,e,n){const i=PU(r);return i?.explorer?i.explorer.transactionUrl.replace("{hash}",n):void 0}function MU(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oy={exports:{}};const NU={},OU=Object.freeze(Object.defineProperty({__proto__:null,default:NU},Symbol.toStringTag,{value:"Module"})),pk=ph(OU);var PI;function DU(){return PI||(PI=1,(function(r){(function(e){var n=function(L){var X,te=new Float64Array(16);if(L)for(X=0;X<L.length;X++)te[X]=L[X];return te},i=function(){throw new Error("no PRNG")},s=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var l=n(),u=n([1]),d=n([56129,1]),f=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),v=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),E=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function R(L,X,te,A){L[X]=te>>24&255,L[X+1]=te>>16&255,L[X+2]=te>>8&255,L[X+3]=te&255,L[X+4]=A>>24&255,L[X+5]=A>>16&255,L[X+6]=A>>8&255,L[X+7]=A&255}function T(L,X,te,A,ne){var _e,ve=0;for(_e=0;_e<ne;_e++)ve|=L[X+_e]^te[A+_e];return(1&ve-1>>>8)-1}function M(L,X,te,A){return T(L,X,te,A,16)}function W(L,X,te,A){return T(L,X,te,A,32)}function z(L,X,te,A){for(var ne=A[0]&255|(A[1]&255)<<8|(A[2]&255)<<16|(A[3]&255)<<24,_e=te[0]&255|(te[1]&255)<<8|(te[2]&255)<<16|(te[3]&255)<<24,ve=te[4]&255|(te[5]&255)<<8|(te[6]&255)<<16|(te[7]&255)<<24,De=te[8]&255|(te[9]&255)<<8|(te[10]&255)<<16|(te[11]&255)<<24,Ge=te[12]&255|(te[13]&255)<<8|(te[14]&255)<<16|(te[15]&255)<<24,st=A[4]&255|(A[5]&255)<<8|(A[6]&255)<<16|(A[7]&255)<<24,He=X[0]&255|(X[1]&255)<<8|(X[2]&255)<<16|(X[3]&255)<<24,sn=X[4]&255|(X[5]&255)<<8|(X[6]&255)<<16|(X[7]&255)<<24,pt=X[8]&255|(X[9]&255)<<8|(X[10]&255)<<16|(X[11]&255)<<24,Nt=X[12]&255|(X[13]&255)<<8|(X[14]&255)<<16|(X[15]&255)<<24,Dt=A[8]&255|(A[9]&255)<<8|(A[10]&255)<<16|(A[11]&255)<<24,jt=te[16]&255|(te[17]&255)<<8|(te[18]&255)<<16|(te[19]&255)<<24,Kt=te[20]&255|(te[21]&255)<<8|(te[22]&255)<<16|(te[23]&255)<<24,Wt=te[24]&255|(te[25]&255)<<8|(te[26]&255)<<16|(te[27]&255)<<24,ft=te[28]&255|(te[29]&255)<<8|(te[30]&255)<<16|(te[31]&255)<<24,Ft=A[12]&255|(A[13]&255)<<8|(A[14]&255)<<16|(A[15]&255)<<24,mt=ne,bt=_e,ot=ve,yt=De,_t=Ge,lt=st,xe=He,Ce=sn,Fe=pt,Ue=Nt,We=Dt,Je=jt,Ot=Kt,Xt=Wt,je=ft,Re=Ft,K,fe=0;fe<20;fe+=2)K=mt+Ot|0,_t^=K<<7|K>>>25,K=_t+mt|0,Fe^=K<<9|K>>>23,K=Fe+_t|0,Ot^=K<<13|K>>>19,K=Ot+Fe|0,mt^=K<<18|K>>>14,K=lt+bt|0,Ue^=K<<7|K>>>25,K=Ue+lt|0,Xt^=K<<9|K>>>23,K=Xt+Ue|0,bt^=K<<13|K>>>19,K=bt+Xt|0,lt^=K<<18|K>>>14,K=We+xe|0,je^=K<<7|K>>>25,K=je+We|0,ot^=K<<9|K>>>23,K=ot+je|0,xe^=K<<13|K>>>19,K=xe+ot|0,We^=K<<18|K>>>14,K=Re+Je|0,yt^=K<<7|K>>>25,K=yt+Re|0,Ce^=K<<9|K>>>23,K=Ce+yt|0,Je^=K<<13|K>>>19,K=Je+Ce|0,Re^=K<<18|K>>>14,K=mt+yt|0,bt^=K<<7|K>>>25,K=bt+mt|0,ot^=K<<9|K>>>23,K=ot+bt|0,yt^=K<<13|K>>>19,K=yt+ot|0,mt^=K<<18|K>>>14,K=lt+_t|0,xe^=K<<7|K>>>25,K=xe+lt|0,Ce^=K<<9|K>>>23,K=Ce+xe|0,_t^=K<<13|K>>>19,K=_t+Ce|0,lt^=K<<18|K>>>14,K=We+Ue|0,Je^=K<<7|K>>>25,K=Je+We|0,Fe^=K<<9|K>>>23,K=Fe+Je|0,Ue^=K<<13|K>>>19,K=Ue+Fe|0,We^=K<<18|K>>>14,K=Re+je|0,Ot^=K<<7|K>>>25,K=Ot+Re|0,Xt^=K<<9|K>>>23,K=Xt+Ot|0,je^=K<<13|K>>>19,K=je+Xt|0,Re^=K<<18|K>>>14;mt=mt+ne|0,bt=bt+_e|0,ot=ot+ve|0,yt=yt+De|0,_t=_t+Ge|0,lt=lt+st|0,xe=xe+He|0,Ce=Ce+sn|0,Fe=Fe+pt|0,Ue=Ue+Nt|0,We=We+Dt|0,Je=Je+jt|0,Ot=Ot+Kt|0,Xt=Xt+Wt|0,je=je+ft|0,Re=Re+Ft|0,L[0]=mt>>>0&255,L[1]=mt>>>8&255,L[2]=mt>>>16&255,L[3]=mt>>>24&255,L[4]=bt>>>0&255,L[5]=bt>>>8&255,L[6]=bt>>>16&255,L[7]=bt>>>24&255,L[8]=ot>>>0&255,L[9]=ot>>>8&255,L[10]=ot>>>16&255,L[11]=ot>>>24&255,L[12]=yt>>>0&255,L[13]=yt>>>8&255,L[14]=yt>>>16&255,L[15]=yt>>>24&255,L[16]=_t>>>0&255,L[17]=_t>>>8&255,L[18]=_t>>>16&255,L[19]=_t>>>24&255,L[20]=lt>>>0&255,L[21]=lt>>>8&255,L[22]=lt>>>16&255,L[23]=lt>>>24&255,L[24]=xe>>>0&255,L[25]=xe>>>8&255,L[26]=xe>>>16&255,L[27]=xe>>>24&255,L[28]=Ce>>>0&255,L[29]=Ce>>>8&255,L[30]=Ce>>>16&255,L[31]=Ce>>>24&255,L[32]=Fe>>>0&255,L[33]=Fe>>>8&255,L[34]=Fe>>>16&255,L[35]=Fe>>>24&255,L[36]=Ue>>>0&255,L[37]=Ue>>>8&255,L[38]=Ue>>>16&255,L[39]=Ue>>>24&255,L[40]=We>>>0&255,L[41]=We>>>8&255,L[42]=We>>>16&255,L[43]=We>>>24&255,L[44]=Je>>>0&255,L[45]=Je>>>8&255,L[46]=Je>>>16&255,L[47]=Je>>>24&255,L[48]=Ot>>>0&255,L[49]=Ot>>>8&255,L[50]=Ot>>>16&255,L[51]=Ot>>>24&255,L[52]=Xt>>>0&255,L[53]=Xt>>>8&255,L[54]=Xt>>>16&255,L[55]=Xt>>>24&255,L[56]=je>>>0&255,L[57]=je>>>8&255,L[58]=je>>>16&255,L[59]=je>>>24&255,L[60]=Re>>>0&255,L[61]=Re>>>8&255,L[62]=Re>>>16&255,L[63]=Re>>>24&255}function j(L,X,te,A){for(var ne=A[0]&255|(A[1]&255)<<8|(A[2]&255)<<16|(A[3]&255)<<24,_e=te[0]&255|(te[1]&255)<<8|(te[2]&255)<<16|(te[3]&255)<<24,ve=te[4]&255|(te[5]&255)<<8|(te[6]&255)<<16|(te[7]&255)<<24,De=te[8]&255|(te[9]&255)<<8|(te[10]&255)<<16|(te[11]&255)<<24,Ge=te[12]&255|(te[13]&255)<<8|(te[14]&255)<<16|(te[15]&255)<<24,st=A[4]&255|(A[5]&255)<<8|(A[6]&255)<<16|(A[7]&255)<<24,He=X[0]&255|(X[1]&255)<<8|(X[2]&255)<<16|(X[3]&255)<<24,sn=X[4]&255|(X[5]&255)<<8|(X[6]&255)<<16|(X[7]&255)<<24,pt=X[8]&255|(X[9]&255)<<8|(X[10]&255)<<16|(X[11]&255)<<24,Nt=X[12]&255|(X[13]&255)<<8|(X[14]&255)<<16|(X[15]&255)<<24,Dt=A[8]&255|(A[9]&255)<<8|(A[10]&255)<<16|(A[11]&255)<<24,jt=te[16]&255|(te[17]&255)<<8|(te[18]&255)<<16|(te[19]&255)<<24,Kt=te[20]&255|(te[21]&255)<<8|(te[22]&255)<<16|(te[23]&255)<<24,Wt=te[24]&255|(te[25]&255)<<8|(te[26]&255)<<16|(te[27]&255)<<24,ft=te[28]&255|(te[29]&255)<<8|(te[30]&255)<<16|(te[31]&255)<<24,Ft=A[12]&255|(A[13]&255)<<8|(A[14]&255)<<16|(A[15]&255)<<24,mt=ne,bt=_e,ot=ve,yt=De,_t=Ge,lt=st,xe=He,Ce=sn,Fe=pt,Ue=Nt,We=Dt,Je=jt,Ot=Kt,Xt=Wt,je=ft,Re=Ft,K,fe=0;fe<20;fe+=2)K=mt+Ot|0,_t^=K<<7|K>>>25,K=_t+mt|0,Fe^=K<<9|K>>>23,K=Fe+_t|0,Ot^=K<<13|K>>>19,K=Ot+Fe|0,mt^=K<<18|K>>>14,K=lt+bt|0,Ue^=K<<7|K>>>25,K=Ue+lt|0,Xt^=K<<9|K>>>23,K=Xt+Ue|0,bt^=K<<13|K>>>19,K=bt+Xt|0,lt^=K<<18|K>>>14,K=We+xe|0,je^=K<<7|K>>>25,K=je+We|0,ot^=K<<9|K>>>23,K=ot+je|0,xe^=K<<13|K>>>19,K=xe+ot|0,We^=K<<18|K>>>14,K=Re+Je|0,yt^=K<<7|K>>>25,K=yt+Re|0,Ce^=K<<9|K>>>23,K=Ce+yt|0,Je^=K<<13|K>>>19,K=Je+Ce|0,Re^=K<<18|K>>>14,K=mt+yt|0,bt^=K<<7|K>>>25,K=bt+mt|0,ot^=K<<9|K>>>23,K=ot+bt|0,yt^=K<<13|K>>>19,K=yt+ot|0,mt^=K<<18|K>>>14,K=lt+_t|0,xe^=K<<7|K>>>25,K=xe+lt|0,Ce^=K<<9|K>>>23,K=Ce+xe|0,_t^=K<<13|K>>>19,K=_t+Ce|0,lt^=K<<18|K>>>14,K=We+Ue|0,Je^=K<<7|K>>>25,K=Je+We|0,Fe^=K<<9|K>>>23,K=Fe+Je|0,Ue^=K<<13|K>>>19,K=Ue+Fe|0,We^=K<<18|K>>>14,K=Re+je|0,Ot^=K<<7|K>>>25,K=Ot+Re|0,Xt^=K<<9|K>>>23,K=Xt+Ot|0,je^=K<<13|K>>>19,K=je+Xt|0,Re^=K<<18|K>>>14;L[0]=mt>>>0&255,L[1]=mt>>>8&255,L[2]=mt>>>16&255,L[3]=mt>>>24&255,L[4]=lt>>>0&255,L[5]=lt>>>8&255,L[6]=lt>>>16&255,L[7]=lt>>>24&255,L[8]=We>>>0&255,L[9]=We>>>8&255,L[10]=We>>>16&255,L[11]=We>>>24&255,L[12]=Re>>>0&255,L[13]=Re>>>8&255,L[14]=Re>>>16&255,L[15]=Re>>>24&255,L[16]=xe>>>0&255,L[17]=xe>>>8&255,L[18]=xe>>>16&255,L[19]=xe>>>24&255,L[20]=Ce>>>0&255,L[21]=Ce>>>8&255,L[22]=Ce>>>16&255,L[23]=Ce>>>24&255,L[24]=Fe>>>0&255,L[25]=Fe>>>8&255,L[26]=Fe>>>16&255,L[27]=Fe>>>24&255,L[28]=Ue>>>0&255,L[29]=Ue>>>8&255,L[30]=Ue>>>16&255,L[31]=Ue>>>24&255}function se(L,X,te,A){z(L,X,te,A)}function le(L,X,te,A){j(L,X,te,A)}var de=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Z(L,X,te,A,ne,_e,ve){var De=new Uint8Array(16),Ge=new Uint8Array(64),st,He;for(He=0;He<16;He++)De[He]=0;for(He=0;He<8;He++)De[He]=_e[He];for(;ne>=64;){for(se(Ge,De,ve,de),He=0;He<64;He++)L[X+He]=te[A+He]^Ge[He];for(st=1,He=8;He<16;He++)st=st+(De[He]&255)|0,De[He]=st&255,st>>>=8;ne-=64,X+=64,A+=64}if(ne>0)for(se(Ge,De,ve,de),He=0;He<ne;He++)L[X+He]=te[A+He]^Ge[He];return 0}function $(L,X,te,A,ne){var _e=new Uint8Array(16),ve=new Uint8Array(64),De,Ge;for(Ge=0;Ge<16;Ge++)_e[Ge]=0;for(Ge=0;Ge<8;Ge++)_e[Ge]=A[Ge];for(;te>=64;){for(se(ve,_e,ne,de),Ge=0;Ge<64;Ge++)L[X+Ge]=ve[Ge];for(De=1,Ge=8;Ge<16;Ge++)De=De+(_e[Ge]&255)|0,_e[Ge]=De&255,De>>>=8;te-=64,X+=64}if(te>0)for(se(ve,_e,ne,de),Ge=0;Ge<te;Ge++)L[X+Ge]=ve[Ge];return 0}function D(L,X,te,A,ne){var _e=new Uint8Array(32);le(_e,A,ne,de);for(var ve=new Uint8Array(8),De=0;De<8;De++)ve[De]=A[De+16];return $(L,X,te,ve,_e)}function U(L,X,te,A,ne,_e,ve){var De=new Uint8Array(32);le(De,_e,ve,de);for(var Ge=new Uint8Array(8),st=0;st<8;st++)Ge[st]=_e[st+16];return Z(L,X,te,A,ne,Ge,De)}var q=function(L){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var X,te,A,ne,_e,ve,De,Ge;X=L[0]&255|(L[1]&255)<<8,this.r[0]=X&8191,te=L[2]&255|(L[3]&255)<<8,this.r[1]=(X>>>13|te<<3)&8191,A=L[4]&255|(L[5]&255)<<8,this.r[2]=(te>>>10|A<<6)&7939,ne=L[6]&255|(L[7]&255)<<8,this.r[3]=(A>>>7|ne<<9)&8191,_e=L[8]&255|(L[9]&255)<<8,this.r[4]=(ne>>>4|_e<<12)&255,this.r[5]=_e>>>1&8190,ve=L[10]&255|(L[11]&255)<<8,this.r[6]=(_e>>>14|ve<<2)&8191,De=L[12]&255|(L[13]&255)<<8,this.r[7]=(ve>>>11|De<<5)&8065,Ge=L[14]&255|(L[15]&255)<<8,this.r[8]=(De>>>8|Ge<<8)&8191,this.r[9]=Ge>>>5&127,this.pad[0]=L[16]&255|(L[17]&255)<<8,this.pad[1]=L[18]&255|(L[19]&255)<<8,this.pad[2]=L[20]&255|(L[21]&255)<<8,this.pad[3]=L[22]&255|(L[23]&255)<<8,this.pad[4]=L[24]&255|(L[25]&255)<<8,this.pad[5]=L[26]&255|(L[27]&255)<<8,this.pad[6]=L[28]&255|(L[29]&255)<<8,this.pad[7]=L[30]&255|(L[31]&255)<<8};q.prototype.blocks=function(L,X,te){for(var A=this.fin?0:2048,ne,_e,ve,De,Ge,st,He,sn,pt,Nt,Dt,jt,Kt,Wt,ft,Ft,mt,bt,ot,yt=this.h[0],_t=this.h[1],lt=this.h[2],xe=this.h[3],Ce=this.h[4],Fe=this.h[5],Ue=this.h[6],We=this.h[7],Je=this.h[8],Ot=this.h[9],Xt=this.r[0],je=this.r[1],Re=this.r[2],K=this.r[3],fe=this.r[4],Me=this.r[5],$e=this.r[6],Ve=this.r[7],Ze=this.r[8],Qe=this.r[9];te>=16;)ne=L[X+0]&255|(L[X+1]&255)<<8,yt+=ne&8191,_e=L[X+2]&255|(L[X+3]&255)<<8,_t+=(ne>>>13|_e<<3)&8191,ve=L[X+4]&255|(L[X+5]&255)<<8,lt+=(_e>>>10|ve<<6)&8191,De=L[X+6]&255|(L[X+7]&255)<<8,xe+=(ve>>>7|De<<9)&8191,Ge=L[X+8]&255|(L[X+9]&255)<<8,Ce+=(De>>>4|Ge<<12)&8191,Fe+=Ge>>>1&8191,st=L[X+10]&255|(L[X+11]&255)<<8,Ue+=(Ge>>>14|st<<2)&8191,He=L[X+12]&255|(L[X+13]&255)<<8,We+=(st>>>11|He<<5)&8191,sn=L[X+14]&255|(L[X+15]&255)<<8,Je+=(He>>>8|sn<<8)&8191,Ot+=sn>>>5|A,pt=0,Nt=pt,Nt+=yt*Xt,Nt+=_t*(5*Qe),Nt+=lt*(5*Ze),Nt+=xe*(5*Ve),Nt+=Ce*(5*$e),pt=Nt>>>13,Nt&=8191,Nt+=Fe*(5*Me),Nt+=Ue*(5*fe),Nt+=We*(5*K),Nt+=Je*(5*Re),Nt+=Ot*(5*je),pt+=Nt>>>13,Nt&=8191,Dt=pt,Dt+=yt*je,Dt+=_t*Xt,Dt+=lt*(5*Qe),Dt+=xe*(5*Ze),Dt+=Ce*(5*Ve),pt=Dt>>>13,Dt&=8191,Dt+=Fe*(5*$e),Dt+=Ue*(5*Me),Dt+=We*(5*fe),Dt+=Je*(5*K),Dt+=Ot*(5*Re),pt+=Dt>>>13,Dt&=8191,jt=pt,jt+=yt*Re,jt+=_t*je,jt+=lt*Xt,jt+=xe*(5*Qe),jt+=Ce*(5*Ze),pt=jt>>>13,jt&=8191,jt+=Fe*(5*Ve),jt+=Ue*(5*$e),jt+=We*(5*Me),jt+=Je*(5*fe),jt+=Ot*(5*K),pt+=jt>>>13,jt&=8191,Kt=pt,Kt+=yt*K,Kt+=_t*Re,Kt+=lt*je,Kt+=xe*Xt,Kt+=Ce*(5*Qe),pt=Kt>>>13,Kt&=8191,Kt+=Fe*(5*Ze),Kt+=Ue*(5*Ve),Kt+=We*(5*$e),Kt+=Je*(5*Me),Kt+=Ot*(5*fe),pt+=Kt>>>13,Kt&=8191,Wt=pt,Wt+=yt*fe,Wt+=_t*K,Wt+=lt*Re,Wt+=xe*je,Wt+=Ce*Xt,pt=Wt>>>13,Wt&=8191,Wt+=Fe*(5*Qe),Wt+=Ue*(5*Ze),Wt+=We*(5*Ve),Wt+=Je*(5*$e),Wt+=Ot*(5*Me),pt+=Wt>>>13,Wt&=8191,ft=pt,ft+=yt*Me,ft+=_t*fe,ft+=lt*K,ft+=xe*Re,ft+=Ce*je,pt=ft>>>13,ft&=8191,ft+=Fe*Xt,ft+=Ue*(5*Qe),ft+=We*(5*Ze),ft+=Je*(5*Ve),ft+=Ot*(5*$e),pt+=ft>>>13,ft&=8191,Ft=pt,Ft+=yt*$e,Ft+=_t*Me,Ft+=lt*fe,Ft+=xe*K,Ft+=Ce*Re,pt=Ft>>>13,Ft&=8191,Ft+=Fe*je,Ft+=Ue*Xt,Ft+=We*(5*Qe),Ft+=Je*(5*Ze),Ft+=Ot*(5*Ve),pt+=Ft>>>13,Ft&=8191,mt=pt,mt+=yt*Ve,mt+=_t*$e,mt+=lt*Me,mt+=xe*fe,mt+=Ce*K,pt=mt>>>13,mt&=8191,mt+=Fe*Re,mt+=Ue*je,mt+=We*Xt,mt+=Je*(5*Qe),mt+=Ot*(5*Ze),pt+=mt>>>13,mt&=8191,bt=pt,bt+=yt*Ze,bt+=_t*Ve,bt+=lt*$e,bt+=xe*Me,bt+=Ce*fe,pt=bt>>>13,bt&=8191,bt+=Fe*K,bt+=Ue*Re,bt+=We*je,bt+=Je*Xt,bt+=Ot*(5*Qe),pt+=bt>>>13,bt&=8191,ot=pt,ot+=yt*Qe,ot+=_t*Ze,ot+=lt*Ve,ot+=xe*$e,ot+=Ce*Me,pt=ot>>>13,ot&=8191,ot+=Fe*fe,ot+=Ue*K,ot+=We*Re,ot+=Je*je,ot+=Ot*Xt,pt+=ot>>>13,ot&=8191,pt=(pt<<2)+pt|0,pt=pt+Nt|0,Nt=pt&8191,pt=pt>>>13,Dt+=pt,yt=Nt,_t=Dt,lt=jt,xe=Kt,Ce=Wt,Fe=ft,Ue=Ft,We=mt,Je=bt,Ot=ot,X+=16,te-=16;this.h[0]=yt,this.h[1]=_t,this.h[2]=lt,this.h[3]=xe,this.h[4]=Ce,this.h[5]=Fe,this.h[6]=Ue,this.h[7]=We,this.h[8]=Je,this.h[9]=Ot},q.prototype.finish=function(L,X){var te=new Uint16Array(10),A,ne,_e,ve;if(this.leftover){for(ve=this.leftover,this.buffer[ve++]=1;ve<16;ve++)this.buffer[ve]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(A=this.h[1]>>>13,this.h[1]&=8191,ve=2;ve<10;ve++)this.h[ve]+=A,A=this.h[ve]>>>13,this.h[ve]&=8191;for(this.h[0]+=A*5,A=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=A,A=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=A,te[0]=this.h[0]+5,A=te[0]>>>13,te[0]&=8191,ve=1;ve<10;ve++)te[ve]=this.h[ve]+A,A=te[ve]>>>13,te[ve]&=8191;for(te[9]-=8192,ne=(A^1)-1,ve=0;ve<10;ve++)te[ve]&=ne;for(ne=~ne,ve=0;ve<10;ve++)this.h[ve]=this.h[ve]&ne|te[ve];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,_e=this.h[0]+this.pad[0],this.h[0]=_e&65535,ve=1;ve<8;ve++)_e=(this.h[ve]+this.pad[ve]|0)+(_e>>>16)|0,this.h[ve]=_e&65535;L[X+0]=this.h[0]>>>0&255,L[X+1]=this.h[0]>>>8&255,L[X+2]=this.h[1]>>>0&255,L[X+3]=this.h[1]>>>8&255,L[X+4]=this.h[2]>>>0&255,L[X+5]=this.h[2]>>>8&255,L[X+6]=this.h[3]>>>0&255,L[X+7]=this.h[3]>>>8&255,L[X+8]=this.h[4]>>>0&255,L[X+9]=this.h[4]>>>8&255,L[X+10]=this.h[5]>>>0&255,L[X+11]=this.h[5]>>>8&255,L[X+12]=this.h[6]>>>0&255,L[X+13]=this.h[6]>>>8&255,L[X+14]=this.h[7]>>>0&255,L[X+15]=this.h[7]>>>8&255},q.prototype.update=function(L,X,te){var A,ne;if(this.leftover){for(ne=16-this.leftover,ne>te&&(ne=te),A=0;A<ne;A++)this.buffer[this.leftover+A]=L[X+A];if(te-=ne,X+=ne,this.leftover+=ne,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(te>=16&&(ne=te-te%16,this.blocks(L,X,ne),X+=ne,te-=ne),te){for(A=0;A<te;A++)this.buffer[this.leftover+A]=L[X+A];this.leftover+=te}};function H(L,X,te,A,ne,_e){var ve=new q(_e);return ve.update(te,A,ne),ve.finish(L,X),0}function I(L,X,te,A,ne,_e){var ve=new Uint8Array(16);return H(ve,0,te,A,ne,_e),M(L,X,ve,0)}function y(L,X,te,A,ne){var _e;if(te<32)return-1;for(U(L,0,X,0,te,A,ne),H(L,16,L,32,te-32,L),_e=0;_e<16;_e++)L[_e]=0;return 0}function x(L,X,te,A,ne){var _e,ve=new Uint8Array(32);if(te<32||(D(ve,0,32,A,ne),I(X,16,X,32,te-32,ve)!==0))return-1;for(U(L,0,X,0,te,A,ne),_e=0;_e<32;_e++)L[_e]=0;return 0}function V(L,X){var te;for(te=0;te<16;te++)L[te]=X[te]|0}function J(L){var X,te,A=1;for(X=0;X<16;X++)te=L[X]+A+65535,A=Math.floor(te/65536),L[X]=te-A*65536;L[0]+=A-1+37*(A-1)}function G(L,X,te){for(var A,ne=~(te-1),_e=0;_e<16;_e++)A=ne&(L[_e]^X[_e]),L[_e]^=A,X[_e]^=A}function re(L,X){var te,A,ne,_e=n(),ve=n();for(te=0;te<16;te++)ve[te]=X[te];for(J(ve),J(ve),J(ve),A=0;A<2;A++){for(_e[0]=ve[0]-65517,te=1;te<15;te++)_e[te]=ve[te]-65535-(_e[te-1]>>16&1),_e[te-1]&=65535;_e[15]=ve[15]-32767-(_e[14]>>16&1),ne=_e[15]>>16&1,_e[14]&=65535,G(ve,_e,1-ne)}for(te=0;te<16;te++)L[2*te]=ve[te]&255,L[2*te+1]=ve[te]>>8}function ae(L,X){var te=new Uint8Array(32),A=new Uint8Array(32);return re(te,L),re(A,X),W(te,0,A,0)}function O(L){var X=new Uint8Array(32);return re(X,L),X[0]&1}function w(L,X){var te;for(te=0;te<16;te++)L[te]=X[2*te]+(X[2*te+1]<<8);L[15]&=32767}function _(L,X,te){for(var A=0;A<16;A++)L[A]=X[A]+te[A]}function F(L,X,te){for(var A=0;A<16;A++)L[A]=X[A]-te[A]}function ee(L,X,te){var A,ne,_e=0,ve=0,De=0,Ge=0,st=0,He=0,sn=0,pt=0,Nt=0,Dt=0,jt=0,Kt=0,Wt=0,ft=0,Ft=0,mt=0,bt=0,ot=0,yt=0,_t=0,lt=0,xe=0,Ce=0,Fe=0,Ue=0,We=0,Je=0,Ot=0,Xt=0,je=0,Re=0,K=te[0],fe=te[1],Me=te[2],$e=te[3],Ve=te[4],Ze=te[5],Qe=te[6],kt=te[7],dt=te[8],Tn=te[9],Kn=te[10],Wn=te[11],cr=te[12],Tr=te[13],Rr=te[14],br=te[15];A=X[0],_e+=A*K,ve+=A*fe,De+=A*Me,Ge+=A*$e,st+=A*Ve,He+=A*Ze,sn+=A*Qe,pt+=A*kt,Nt+=A*dt,Dt+=A*Tn,jt+=A*Kn,Kt+=A*Wn,Wt+=A*cr,ft+=A*Tr,Ft+=A*Rr,mt+=A*br,A=X[1],ve+=A*K,De+=A*fe,Ge+=A*Me,st+=A*$e,He+=A*Ve,sn+=A*Ze,pt+=A*Qe,Nt+=A*kt,Dt+=A*dt,jt+=A*Tn,Kt+=A*Kn,Wt+=A*Wn,ft+=A*cr,Ft+=A*Tr,mt+=A*Rr,bt+=A*br,A=X[2],De+=A*K,Ge+=A*fe,st+=A*Me,He+=A*$e,sn+=A*Ve,pt+=A*Ze,Nt+=A*Qe,Dt+=A*kt,jt+=A*dt,Kt+=A*Tn,Wt+=A*Kn,ft+=A*Wn,Ft+=A*cr,mt+=A*Tr,bt+=A*Rr,ot+=A*br,A=X[3],Ge+=A*K,st+=A*fe,He+=A*Me,sn+=A*$e,pt+=A*Ve,Nt+=A*Ze,Dt+=A*Qe,jt+=A*kt,Kt+=A*dt,Wt+=A*Tn,ft+=A*Kn,Ft+=A*Wn,mt+=A*cr,bt+=A*Tr,ot+=A*Rr,yt+=A*br,A=X[4],st+=A*K,He+=A*fe,sn+=A*Me,pt+=A*$e,Nt+=A*Ve,Dt+=A*Ze,jt+=A*Qe,Kt+=A*kt,Wt+=A*dt,ft+=A*Tn,Ft+=A*Kn,mt+=A*Wn,bt+=A*cr,ot+=A*Tr,yt+=A*Rr,_t+=A*br,A=X[5],He+=A*K,sn+=A*fe,pt+=A*Me,Nt+=A*$e,Dt+=A*Ve,jt+=A*Ze,Kt+=A*Qe,Wt+=A*kt,ft+=A*dt,Ft+=A*Tn,mt+=A*Kn,bt+=A*Wn,ot+=A*cr,yt+=A*Tr,_t+=A*Rr,lt+=A*br,A=X[6],sn+=A*K,pt+=A*fe,Nt+=A*Me,Dt+=A*$e,jt+=A*Ve,Kt+=A*Ze,Wt+=A*Qe,ft+=A*kt,Ft+=A*dt,mt+=A*Tn,bt+=A*Kn,ot+=A*Wn,yt+=A*cr,_t+=A*Tr,lt+=A*Rr,xe+=A*br,A=X[7],pt+=A*K,Nt+=A*fe,Dt+=A*Me,jt+=A*$e,Kt+=A*Ve,Wt+=A*Ze,ft+=A*Qe,Ft+=A*kt,mt+=A*dt,bt+=A*Tn,ot+=A*Kn,yt+=A*Wn,_t+=A*cr,lt+=A*Tr,xe+=A*Rr,Ce+=A*br,A=X[8],Nt+=A*K,Dt+=A*fe,jt+=A*Me,Kt+=A*$e,Wt+=A*Ve,ft+=A*Ze,Ft+=A*Qe,mt+=A*kt,bt+=A*dt,ot+=A*Tn,yt+=A*Kn,_t+=A*Wn,lt+=A*cr,xe+=A*Tr,Ce+=A*Rr,Fe+=A*br,A=X[9],Dt+=A*K,jt+=A*fe,Kt+=A*Me,Wt+=A*$e,ft+=A*Ve,Ft+=A*Ze,mt+=A*Qe,bt+=A*kt,ot+=A*dt,yt+=A*Tn,_t+=A*Kn,lt+=A*Wn,xe+=A*cr,Ce+=A*Tr,Fe+=A*Rr,Ue+=A*br,A=X[10],jt+=A*K,Kt+=A*fe,Wt+=A*Me,ft+=A*$e,Ft+=A*Ve,mt+=A*Ze,bt+=A*Qe,ot+=A*kt,yt+=A*dt,_t+=A*Tn,lt+=A*Kn,xe+=A*Wn,Ce+=A*cr,Fe+=A*Tr,Ue+=A*Rr,We+=A*br,A=X[11],Kt+=A*K,Wt+=A*fe,ft+=A*Me,Ft+=A*$e,mt+=A*Ve,bt+=A*Ze,ot+=A*Qe,yt+=A*kt,_t+=A*dt,lt+=A*Tn,xe+=A*Kn,Ce+=A*Wn,Fe+=A*cr,Ue+=A*Tr,We+=A*Rr,Je+=A*br,A=X[12],Wt+=A*K,ft+=A*fe,Ft+=A*Me,mt+=A*$e,bt+=A*Ve,ot+=A*Ze,yt+=A*Qe,_t+=A*kt,lt+=A*dt,xe+=A*Tn,Ce+=A*Kn,Fe+=A*Wn,Ue+=A*cr,We+=A*Tr,Je+=A*Rr,Ot+=A*br,A=X[13],ft+=A*K,Ft+=A*fe,mt+=A*Me,bt+=A*$e,ot+=A*Ve,yt+=A*Ze,_t+=A*Qe,lt+=A*kt,xe+=A*dt,Ce+=A*Tn,Fe+=A*Kn,Ue+=A*Wn,We+=A*cr,Je+=A*Tr,Ot+=A*Rr,Xt+=A*br,A=X[14],Ft+=A*K,mt+=A*fe,bt+=A*Me,ot+=A*$e,yt+=A*Ve,_t+=A*Ze,lt+=A*Qe,xe+=A*kt,Ce+=A*dt,Fe+=A*Tn,Ue+=A*Kn,We+=A*Wn,Je+=A*cr,Ot+=A*Tr,Xt+=A*Rr,je+=A*br,A=X[15],mt+=A*K,bt+=A*fe,ot+=A*Me,yt+=A*$e,_t+=A*Ve,lt+=A*Ze,xe+=A*Qe,Ce+=A*kt,Fe+=A*dt,Ue+=A*Tn,We+=A*Kn,Je+=A*Wn,Ot+=A*cr,Xt+=A*Tr,je+=A*Rr,Re+=A*br,_e+=38*bt,ve+=38*ot,De+=38*yt,Ge+=38*_t,st+=38*lt,He+=38*xe,sn+=38*Ce,pt+=38*Fe,Nt+=38*Ue,Dt+=38*We,jt+=38*Je,Kt+=38*Ot,Wt+=38*Xt,ft+=38*je,Ft+=38*Re,ne=1,A=_e+ne+65535,ne=Math.floor(A/65536),_e=A-ne*65536,A=ve+ne+65535,ne=Math.floor(A/65536),ve=A-ne*65536,A=De+ne+65535,ne=Math.floor(A/65536),De=A-ne*65536,A=Ge+ne+65535,ne=Math.floor(A/65536),Ge=A-ne*65536,A=st+ne+65535,ne=Math.floor(A/65536),st=A-ne*65536,A=He+ne+65535,ne=Math.floor(A/65536),He=A-ne*65536,A=sn+ne+65535,ne=Math.floor(A/65536),sn=A-ne*65536,A=pt+ne+65535,ne=Math.floor(A/65536),pt=A-ne*65536,A=Nt+ne+65535,ne=Math.floor(A/65536),Nt=A-ne*65536,A=Dt+ne+65535,ne=Math.floor(A/65536),Dt=A-ne*65536,A=jt+ne+65535,ne=Math.floor(A/65536),jt=A-ne*65536,A=Kt+ne+65535,ne=Math.floor(A/65536),Kt=A-ne*65536,A=Wt+ne+65535,ne=Math.floor(A/65536),Wt=A-ne*65536,A=ft+ne+65535,ne=Math.floor(A/65536),ft=A-ne*65536,A=Ft+ne+65535,ne=Math.floor(A/65536),Ft=A-ne*65536,A=mt+ne+65535,ne=Math.floor(A/65536),mt=A-ne*65536,_e+=ne-1+37*(ne-1),ne=1,A=_e+ne+65535,ne=Math.floor(A/65536),_e=A-ne*65536,A=ve+ne+65535,ne=Math.floor(A/65536),ve=A-ne*65536,A=De+ne+65535,ne=Math.floor(A/65536),De=A-ne*65536,A=Ge+ne+65535,ne=Math.floor(A/65536),Ge=A-ne*65536,A=st+ne+65535,ne=Math.floor(A/65536),st=A-ne*65536,A=He+ne+65535,ne=Math.floor(A/65536),He=A-ne*65536,A=sn+ne+65535,ne=Math.floor(A/65536),sn=A-ne*65536,A=pt+ne+65535,ne=Math.floor(A/65536),pt=A-ne*65536,A=Nt+ne+65535,ne=Math.floor(A/65536),Nt=A-ne*65536,A=Dt+ne+65535,ne=Math.floor(A/65536),Dt=A-ne*65536,A=jt+ne+65535,ne=Math.floor(A/65536),jt=A-ne*65536,A=Kt+ne+65535,ne=Math.floor(A/65536),Kt=A-ne*65536,A=Wt+ne+65535,ne=Math.floor(A/65536),Wt=A-ne*65536,A=ft+ne+65535,ne=Math.floor(A/65536),ft=A-ne*65536,A=Ft+ne+65535,ne=Math.floor(A/65536),Ft=A-ne*65536,A=mt+ne+65535,ne=Math.floor(A/65536),mt=A-ne*65536,_e+=ne-1+37*(ne-1),L[0]=_e,L[1]=ve,L[2]=De,L[3]=Ge,L[4]=st,L[5]=He,L[6]=sn,L[7]=pt,L[8]=Nt,L[9]=Dt,L[10]=jt,L[11]=Kt,L[12]=Wt,L[13]=ft,L[14]=Ft,L[15]=mt}function ce(L,X){ee(L,X,X)}function we(L,X){var te=n(),A;for(A=0;A<16;A++)te[A]=X[A];for(A=253;A>=0;A--)ce(te,te),A!==2&&A!==4&&ee(te,te,X);for(A=0;A<16;A++)L[A]=te[A]}function Oe(L,X){var te=n(),A;for(A=0;A<16;A++)te[A]=X[A];for(A=250;A>=0;A--)ce(te,te),A!==1&&ee(te,te,X);for(A=0;A<16;A++)L[A]=te[A]}function ze(L,X,te){var A=new Uint8Array(32),ne=new Float64Array(80),_e,ve,De=n(),Ge=n(),st=n(),He=n(),sn=n(),pt=n();for(ve=0;ve<31;ve++)A[ve]=X[ve];for(A[31]=X[31]&127|64,A[0]&=248,w(ne,te),ve=0;ve<16;ve++)Ge[ve]=ne[ve],He[ve]=De[ve]=st[ve]=0;for(De[0]=He[0]=1,ve=254;ve>=0;--ve)_e=A[ve>>>3]>>>(ve&7)&1,G(De,Ge,_e),G(st,He,_e),_(sn,De,st),F(De,De,st),_(st,Ge,He),F(Ge,Ge,He),ce(He,sn),ce(pt,De),ee(De,st,De),ee(st,Ge,sn),_(sn,De,st),F(De,De,st),ce(Ge,De),F(st,He,pt),ee(De,st,d),_(De,De,He),ee(st,st,De),ee(De,He,pt),ee(He,Ge,ne),ce(Ge,sn),G(De,Ge,_e),G(st,He,_e);for(ve=0;ve<16;ve++)ne[ve+16]=De[ve],ne[ve+32]=st[ve],ne[ve+48]=Ge[ve],ne[ve+64]=He[ve];var Nt=ne.subarray(32),Dt=ne.subarray(16);return we(Nt,Nt),ee(Dt,Dt,Nt),re(L,Dt),0}function At(L,X){return ze(L,X,o)}function qt(L,X){return i(X,32),At(L,X)}function rn(L,X,te){var A=new Uint8Array(32);return ze(A,te,X),le(L,s,A,de)}var qn=y,un=x;function kn(L,X,te,A,ne,_e){var ve=new Uint8Array(32);return rn(ve,ne,_e),qn(L,X,te,A,ve)}function $r(L,X,te,A,ne,_e){var ve=new Uint8Array(32);return rn(ve,ne,_e),un(L,X,te,A,ve)}var _n=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function xn(L,X,te,A){for(var ne=new Int32Array(16),_e=new Int32Array(16),ve,De,Ge,st,He,sn,pt,Nt,Dt,jt,Kt,Wt,ft,Ft,mt,bt,ot,yt,_t,lt,xe,Ce,Fe,Ue,We,Je,Ot=L[0],Xt=L[1],je=L[2],Re=L[3],K=L[4],fe=L[5],Me=L[6],$e=L[7],Ve=X[0],Ze=X[1],Qe=X[2],kt=X[3],dt=X[4],Tn=X[5],Kn=X[6],Wn=X[7],cr=0;A>=128;){for(_t=0;_t<16;_t++)lt=8*_t+cr,ne[_t]=te[lt+0]<<24|te[lt+1]<<16|te[lt+2]<<8|te[lt+3],_e[_t]=te[lt+4]<<24|te[lt+5]<<16|te[lt+6]<<8|te[lt+7];for(_t=0;_t<80;_t++)if(ve=Ot,De=Xt,Ge=je,st=Re,He=K,sn=fe,pt=Me,Nt=$e,Dt=Ve,jt=Ze,Kt=Qe,Wt=kt,ft=dt,Ft=Tn,mt=Kn,bt=Wn,xe=$e,Ce=Wn,Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=(K>>>14|dt<<18)^(K>>>18|dt<<14)^(dt>>>9|K<<23),Ce=(dt>>>14|K<<18)^(dt>>>18|K<<14)^(K>>>9|dt<<23),Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,xe=K&fe^~K&Me,Ce=dt&Tn^~dt&Kn,Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,xe=_n[_t*2],Ce=_n[_t*2+1],Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,xe=ne[_t%16],Ce=_e[_t%16],Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,ot=We&65535|Je<<16,yt=Fe&65535|Ue<<16,xe=ot,Ce=yt,Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=(Ot>>>28|Ve<<4)^(Ve>>>2|Ot<<30)^(Ve>>>7|Ot<<25),Ce=(Ve>>>28|Ot<<4)^(Ot>>>2|Ve<<30)^(Ot>>>7|Ve<<25),Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,xe=Ot&Xt^Ot&je^Xt&je,Ce=Ve&Ze^Ve&Qe^Ze&Qe,Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,Nt=We&65535|Je<<16,bt=Fe&65535|Ue<<16,xe=st,Ce=Wt,Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=ot,Ce=yt,Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,st=We&65535|Je<<16,Wt=Fe&65535|Ue<<16,Xt=ve,je=De,Re=Ge,K=st,fe=He,Me=sn,$e=pt,Ot=Nt,Ze=Dt,Qe=jt,kt=Kt,dt=Wt,Tn=ft,Kn=Ft,Wn=mt,Ve=bt,_t%16===15)for(lt=0;lt<16;lt++)xe=ne[lt],Ce=_e[lt],Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=ne[(lt+9)%16],Ce=_e[(lt+9)%16],Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,ot=ne[(lt+1)%16],yt=_e[(lt+1)%16],xe=(ot>>>1|yt<<31)^(ot>>>8|yt<<24)^ot>>>7,Ce=(yt>>>1|ot<<31)^(yt>>>8|ot<<24)^(yt>>>7|ot<<25),Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,ot=ne[(lt+14)%16],yt=_e[(lt+14)%16],xe=(ot>>>19|yt<<13)^(yt>>>29|ot<<3)^ot>>>6,Ce=(yt>>>19|ot<<13)^(ot>>>29|yt<<3)^(yt>>>6|ot<<26),Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,ne[lt]=We&65535|Je<<16,_e[lt]=Fe&65535|Ue<<16;xe=Ot,Ce=Ve,Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=L[0],Ce=X[0],Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,L[0]=Ot=We&65535|Je<<16,X[0]=Ve=Fe&65535|Ue<<16,xe=Xt,Ce=Ze,Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=L[1],Ce=X[1],Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,L[1]=Xt=We&65535|Je<<16,X[1]=Ze=Fe&65535|Ue<<16,xe=je,Ce=Qe,Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=L[2],Ce=X[2],Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,L[2]=je=We&65535|Je<<16,X[2]=Qe=Fe&65535|Ue<<16,xe=Re,Ce=kt,Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=L[3],Ce=X[3],Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,L[3]=Re=We&65535|Je<<16,X[3]=kt=Fe&65535|Ue<<16,xe=K,Ce=dt,Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=L[4],Ce=X[4],Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,L[4]=K=We&65535|Je<<16,X[4]=dt=Fe&65535|Ue<<16,xe=fe,Ce=Tn,Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=L[5],Ce=X[5],Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,L[5]=fe=We&65535|Je<<16,X[5]=Tn=Fe&65535|Ue<<16,xe=Me,Ce=Kn,Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=L[6],Ce=X[6],Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,L[6]=Me=We&65535|Je<<16,X[6]=Kn=Fe&65535|Ue<<16,xe=$e,Ce=Wn,Fe=Ce&65535,Ue=Ce>>>16,We=xe&65535,Je=xe>>>16,xe=L[7],Ce=X[7],Fe+=Ce&65535,Ue+=Ce>>>16,We+=xe&65535,Je+=xe>>>16,Ue+=Fe>>>16,We+=Ue>>>16,Je+=We>>>16,L[7]=$e=We&65535|Je<<16,X[7]=Wn=Fe&65535|Ue<<16,cr+=128,A-=128}return A}function ir(L,X,te){var A=new Int32Array(8),ne=new Int32Array(8),_e=new Uint8Array(256),ve,De=te;for(A[0]=1779033703,A[1]=3144134277,A[2]=1013904242,A[3]=2773480762,A[4]=1359893119,A[5]=2600822924,A[6]=528734635,A[7]=1541459225,ne[0]=4089235720,ne[1]=2227873595,ne[2]=4271175723,ne[3]=1595750129,ne[4]=2917565137,ne[5]=725511199,ne[6]=4215389547,ne[7]=327033209,xn(A,ne,X,te),te%=128,ve=0;ve<te;ve++)_e[ve]=X[De-te+ve];for(_e[te]=128,te=256-128*(te<112?1:0),_e[te-9]=0,R(_e,te-8,De/536870912|0,De<<3),xn(A,ne,_e,te),ve=0;ve<8;ve++)R(L,8*ve,A[ve],ne[ve]);return 0}function dn(L,X){var te=n(),A=n(),ne=n(),_e=n(),ve=n(),De=n(),Ge=n(),st=n(),He=n();F(te,L[1],L[0]),F(He,X[1],X[0]),ee(te,te,He),_(A,L[0],L[1]),_(He,X[0],X[1]),ee(A,A,He),ee(ne,L[3],X[3]),ee(ne,ne,p),ee(_e,L[2],X[2]),_(_e,_e,_e),F(ve,A,te),F(De,_e,ne),_(Ge,_e,ne),_(st,A,te),ee(L[0],ve,De),ee(L[1],st,Ge),ee(L[2],Ge,De),ee(L[3],ve,st)}function hn(L,X,te){var A;for(A=0;A<4;A++)G(L[A],X[A],te)}function Qn(L,X){var te=n(),A=n(),ne=n();we(ne,X[2]),ee(te,X[0],ne),ee(A,X[1],ne),re(L,A),L[31]^=O(te)<<7}function gn(L,X,te){var A,ne;for(V(L[0],l),V(L[1],u),V(L[2],u),V(L[3],l),ne=255;ne>=0;--ne)A=te[ne/8|0]>>(ne&7)&1,hn(L,X,A),dn(X,L),dn(L,L),hn(L,X,A)}function vn(L,X){var te=[n(),n(),n(),n()];V(te[0],v),V(te[1],E),V(te[2],u),ee(te[3],v,E),gn(L,te,X)}function sr(L,X,te){var A=new Uint8Array(64),ne=[n(),n(),n(),n()],_e;for(te||i(X,32),ir(A,X,32),A[0]&=248,A[31]&=127,A[31]|=64,vn(ne,A),Qn(L,ne),_e=0;_e<32;_e++)X[_e+32]=L[_e];return 0}var Qt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Y(L,X){var te,A,ne,_e;for(A=63;A>=32;--A){for(te=0,ne=A-32,_e=A-12;ne<_e;++ne)X[ne]+=te-16*X[A]*Qt[ne-(A-32)],te=Math.floor((X[ne]+128)/256),X[ne]-=te*256;X[ne]+=te,X[A]=0}for(te=0,ne=0;ne<32;ne++)X[ne]+=te-(X[31]>>4)*Qt[ne],te=X[ne]>>8,X[ne]&=255;for(ne=0;ne<32;ne++)X[ne]-=te*Qt[ne];for(A=0;A<32;A++)X[A+1]+=X[A]>>8,L[A]=X[A]&255}function C(L){var X=new Float64Array(64),te;for(te=0;te<64;te++)X[te]=L[te];for(te=0;te<64;te++)L[te]=0;Y(L,X)}function N(L,X,te,A){var ne=new Uint8Array(64),_e=new Uint8Array(64),ve=new Uint8Array(64),De,Ge,st=new Float64Array(64),He=[n(),n(),n(),n()];ir(ne,A,32),ne[0]&=248,ne[31]&=127,ne[31]|=64;var sn=te+64;for(De=0;De<te;De++)L[64+De]=X[De];for(De=0;De<32;De++)L[32+De]=ne[32+De];for(ir(ve,L.subarray(32),te+32),C(ve),vn(He,ve),Qn(L,He),De=32;De<64;De++)L[De]=A[De];for(ir(_e,L,te+64),C(_e),De=0;De<64;De++)st[De]=0;for(De=0;De<32;De++)st[De]=ve[De];for(De=0;De<32;De++)for(Ge=0;Ge<32;Ge++)st[De+Ge]+=_e[De]*ne[Ge];return Y(L.subarray(32),st),sn}function oe(L,X){var te=n(),A=n(),ne=n(),_e=n(),ve=n(),De=n(),Ge=n();return V(L[2],u),w(L[1],X),ce(ne,L[1]),ee(_e,ne,f),F(ne,ne,L[2]),_(_e,L[2],_e),ce(ve,_e),ce(De,ve),ee(Ge,De,ve),ee(te,Ge,ne),ee(te,te,_e),Oe(te,te),ee(te,te,ne),ee(te,te,_e),ee(te,te,_e),ee(L[0],te,_e),ce(A,L[0]),ee(A,A,_e),ae(A,ne)&&ee(L[0],L[0],S),ce(A,L[0]),ee(A,A,_e),ae(A,ne)?-1:(O(L[0])===X[31]>>7&&F(L[0],l,L[0]),ee(L[3],L[0],L[1]),0)}function ye(L,X,te,A){var ne,_e=new Uint8Array(32),ve=new Uint8Array(64),De=[n(),n(),n(),n()],Ge=[n(),n(),n(),n()];if(te<64||oe(Ge,A))return-1;for(ne=0;ne<te;ne++)L[ne]=X[ne];for(ne=0;ne<32;ne++)L[ne+32]=A[ne];if(ir(ve,L,te),C(ve),gn(De,Ge,ve),vn(Ge,X.subarray(32)),dn(De,Ge),Qn(_e,De),te-=64,W(X,0,_e,0)){for(ne=0;ne<te;ne++)L[ne]=0;return-1}for(ne=0;ne<te;ne++)L[ne]=X[ne+64];return te}var be=32,Pe=24,Vt=32,Et=16,Rt=32,on=32,xt=32,mn=32,qr=32,fn=Pe,bn=Vt,fi=Et,Gt=64,Sn=32,_r=64,Ln=32,In=64;e.lowlevel={crypto_core_hsalsa20:le,crypto_stream_xor:U,crypto_stream:D,crypto_stream_salsa20_xor:Z,crypto_stream_salsa20:$,crypto_onetimeauth:H,crypto_onetimeauth_verify:I,crypto_verify_16:M,crypto_verify_32:W,crypto_secretbox:y,crypto_secretbox_open:x,crypto_scalarmult:ze,crypto_scalarmult_base:At,crypto_box_beforenm:rn,crypto_box_afternm:qn,crypto_box:kn,crypto_box_open:$r,crypto_box_keypair:qt,crypto_hash:ir,crypto_sign:N,crypto_sign_keypair:sr,crypto_sign_open:ye,crypto_secretbox_KEYBYTES:be,crypto_secretbox_NONCEBYTES:Pe,crypto_secretbox_ZEROBYTES:Vt,crypto_secretbox_BOXZEROBYTES:Et,crypto_scalarmult_BYTES:Rt,crypto_scalarmult_SCALARBYTES:on,crypto_box_PUBLICKEYBYTES:xt,crypto_box_SECRETKEYBYTES:mn,crypto_box_BEFORENMBYTES:qr,crypto_box_NONCEBYTES:fn,crypto_box_ZEROBYTES:bn,crypto_box_BOXZEROBYTES:fi,crypto_sign_BYTES:Gt,crypto_sign_PUBLICKEYBYTES:Sn,crypto_sign_SECRETKEYBYTES:_r,crypto_sign_SEEDBYTES:Ln,crypto_hash_BYTES:In,gf:n,D:f,L:Qt,pack25519:re,unpack25519:w,M:ee,A:_,S:ce,Z:F,pow2523:Oe,add:dn,set25519:V,modL:Y,scalarmult:gn,scalarbase:vn};function pi(L,X){if(L.length!==be)throw new Error("bad key size");if(X.length!==Pe)throw new Error("bad nonce size")}function Zt(L,X){if(L.length!==xt)throw new Error("bad public key size");if(X.length!==mn)throw new Error("bad secret key size")}function an(){for(var L=0;L<arguments.length;L++)if(!(arguments[L]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function hr(L){for(var X=0;X<L.length;X++)L[X]=0}e.randomBytes=function(L){var X=new Uint8Array(L);return i(X,L),X},e.secretbox=function(L,X,te){an(L,X,te),pi(te,X);for(var A=new Uint8Array(Vt+L.length),ne=new Uint8Array(A.length),_e=0;_e<L.length;_e++)A[_e+Vt]=L[_e];return y(ne,A,A.length,X,te),ne.subarray(Et)},e.secretbox.open=function(L,X,te){an(L,X,te),pi(te,X);for(var A=new Uint8Array(Et+L.length),ne=new Uint8Array(A.length),_e=0;_e<L.length;_e++)A[_e+Et]=L[_e];return A.length<32||x(ne,A,A.length,X,te)!==0?null:ne.subarray(Vt)},e.secretbox.keyLength=be,e.secretbox.nonceLength=Pe,e.secretbox.overheadLength=Et,e.scalarMult=function(L,X){if(an(L,X),L.length!==on)throw new Error("bad n size");if(X.length!==Rt)throw new Error("bad p size");var te=new Uint8Array(Rt);return ze(te,L,X),te},e.scalarMult.base=function(L){if(an(L),L.length!==on)throw new Error("bad n size");var X=new Uint8Array(Rt);return At(X,L),X},e.scalarMult.scalarLength=on,e.scalarMult.groupElementLength=Rt,e.box=function(L,X,te,A){var ne=e.box.before(te,A);return e.secretbox(L,X,ne)},e.box.before=function(L,X){an(L,X),Zt(L,X);var te=new Uint8Array(qr);return rn(te,L,X),te},e.box.after=e.secretbox,e.box.open=function(L,X,te,A){var ne=e.box.before(te,A);return e.secretbox.open(L,X,ne)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var L=new Uint8Array(xt),X=new Uint8Array(mn);return qt(L,X),{publicKey:L,secretKey:X}},e.box.keyPair.fromSecretKey=function(L){if(an(L),L.length!==mn)throw new Error("bad secret key size");var X=new Uint8Array(xt);return At(X,L),{publicKey:X,secretKey:new Uint8Array(L)}},e.box.publicKeyLength=xt,e.box.secretKeyLength=mn,e.box.sharedKeyLength=qr,e.box.nonceLength=fn,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(L,X){if(an(L,X),X.length!==_r)throw new Error("bad secret key size");var te=new Uint8Array(Gt+L.length);return N(te,L,L.length,X),te},e.sign.open=function(L,X){if(an(L,X),X.length!==Sn)throw new Error("bad public key size");var te=new Uint8Array(L.length),A=ye(te,L,L.length,X);if(A<0)return null;for(var ne=new Uint8Array(A),_e=0;_e<ne.length;_e++)ne[_e]=te[_e];return ne},e.sign.detached=function(L,X){for(var te=e.sign(L,X),A=new Uint8Array(Gt),ne=0;ne<A.length;ne++)A[ne]=te[ne];return A},e.sign.detached.verify=function(L,X,te){if(an(L,X,te),X.length!==Gt)throw new Error("bad signature size");if(te.length!==Sn)throw new Error("bad public key size");var A=new Uint8Array(Gt+L.length),ne=new Uint8Array(Gt+L.length),_e;for(_e=0;_e<Gt;_e++)A[_e]=X[_e];for(_e=0;_e<L.length;_e++)A[_e+Gt]=L[_e];return ye(ne,A,A.length,te)>=0},e.sign.keyPair=function(){var L=new Uint8Array(Sn),X=new Uint8Array(_r);return sr(L,X),{publicKey:L,secretKey:X}},e.sign.keyPair.fromSecretKey=function(L){if(an(L),L.length!==_r)throw new Error("bad secret key size");for(var X=new Uint8Array(Sn),te=0;te<X.length;te++)X[te]=L[32+te];return{publicKey:X,secretKey:new Uint8Array(L)}},e.sign.keyPair.fromSeed=function(L){if(an(L),L.length!==Ln)throw new Error("bad seed size");for(var X=new Uint8Array(Sn),te=new Uint8Array(_r),A=0;A<32;A++)te[A]=L[A];return sr(X,te,!0),{publicKey:X,secretKey:te}},e.sign.publicKeyLength=Sn,e.sign.secretKeyLength=_r,e.sign.seedLength=Ln,e.sign.signatureLength=Gt,e.hash=function(L){an(L);var X=new Uint8Array(In);return ir(X,L,L.length),X},e.hash.hashLength=In,e.verify=function(L,X){return an(L,X),L.length===0||X.length===0||L.length!==X.length?!1:T(L,0,X,0,L.length)===0},e.setPRNG=function(L){i=L},(function(){var L=typeof self<"u"?self.crypto||self.msCrypto:null;if(L&&L.getRandomValues){var X=65536;e.setPRNG(function(te,A){var ne,_e=new Uint8Array(A);for(ne=0;ne<A;ne+=X)L.getRandomValues(_e.subarray(ne,ne+Math.min(A-ne,X)));for(ne=0;ne<A;ne++)te[ne]=_e[ne];hr(_e)})}else typeof MU<"u"&&(L=pk,L&&L.randomBytes&&e.setPRNG(function(te,A){var ne,_e=L.randomBytes(A);for(ne=0;ne<A;ne++)te[ne]=_e[ne];hr(_e)}))})()})(r.exports?r.exports:self.nacl=self.nacl||{})})(oy)),oy.exports}DU();var ay,MI;function LU(){if(MI)return ay;MI=1;function r(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<e.length;s++){var o=e.charAt(s),l=o.charCodeAt(0);if(n[l]!==255)throw new TypeError(o+" is ambiguous");n[l]=s}var u=e.length,d=e.charAt(0),f=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function v(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var T=0,M=0,W=0,z=R.length;W!==z&&R[W]===0;)W++,T++;for(var j=(z-W)*p+1>>>0,se=new Uint8Array(j);W!==z;){for(var le=R[W],de=0,Z=j-1;(le!==0||de<M)&&Z!==-1;Z--,de++)le+=256*se[Z]>>>0,se[Z]=le%u>>>0,le=le/u>>>0;if(le!==0)throw new Error("Non-zero carry");M=de,W++}for(var $=j-M;$!==j&&se[$]===0;)$++;for(var D=d.repeat(T);$<j;++$)D+=e.charAt(se[$]);return D}function E(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;for(var T=0,M=0,W=0;R[T]===d;)M++,T++;for(var z=(R.length-T)*f+1>>>0,j=new Uint8Array(z);R[T];){var se=R.charCodeAt(T);if(se>255)return;var le=n[se];if(le===255)return;for(var de=0,Z=z-1;(le!==0||de<W)&&Z!==-1;Z--,de++)le+=u*j[Z]>>>0,j[Z]=le%256>>>0,le=le/256>>>0;if(le!==0)throw new Error("Non-zero carry");W=de,T++}for(var $=z-W;$!==z&&j[$]===0;)$++;for(var D=new Uint8Array(M+(z-$)),U=M;$!==z;)D[U++]=j[$++];return D}function S(R){var T=E(R);if(T)return T;throw new Error("Non-base"+u+" character")}return{encode:v,decodeUnsafe:E,decode:S}}return ay=r,ay}var ly,NI;function mk(){return NI||(NI=1,ly=LU()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),ly}mk();var Ai={Solana:(r=0)=>`m/44'/501'/${r}'/0'`,Ethereum:(r=0)=>`m/44'/60'/0'/0/${r}`,Bitcoin:(r=0)=>`m/84'/0'/${r}'/0`,Sui:(r=0)=>`m/44'/784'/${r}'/0'/0'`};function OI(r,e=0){switch(r.split(":")[0].toLowerCase()){case"solana":return{derivationPath:Ai.Solana(e),curve:Hc.ed25519,algorithm:Tl.ed25519,addressFormat:Yn.solana};case"sui":return{derivationPath:Ai.Sui(e),curve:Hc.ed25519,algorithm:Tl.ed25519,addressFormat:Yn.sui};case"bitcoin":case"btc":return{derivationPath:Ai.Bitcoin(e),curve:Hc.secp256k1,algorithm:Tl.secp256k1,addressFormat:Yn.bitcoinSegwit};case"eip155":return{derivationPath:Ai.Ethereum(e),curve:Hc.secp256k1,algorithm:Tl.secp256k1,addressFormat:Yn.ethereum};default:return null}}var BU={[Or.SOLANA_MAINNET]:{chain:"solana",network:"mainnet",description:"Solana Mainnet-Beta"},[Or.SOLANA_DEVNET]:{chain:"solana",network:"devnet",description:"Solana Devnet"},[Or.SOLANA_TESTNET]:{chain:"solana",network:"testnet",description:"Solana Testnet"},[Or.ETHEREUM_MAINNET]:{chain:"ethereum",network:"mainnet",description:"Ethereum Mainnet"},[Or.ETHEREUM_GOERLI]:{chain:"ethereum",network:"goerli",description:"Goerli Testnet"},[Or.ETHEREUM_SEPOLIA]:{chain:"ethereum",network:"sepolia",description:"Sepolia Testnet"},[Or.POLYGON_MAINNET]:{chain:"polygon",network:"mainnet",description:"Polygon Mainnet"},[Or.POLYGON_MUMBAI]:{chain:"polygon",network:"mumbai",description:"Polygon Mumbai Testnet"},[Or.OPTIMISM_MAINNET]:{chain:"optimism",network:"mainnet",description:"Optimism Mainnet"},[Or.OPTIMISM_GOERLI]:{chain:"optimism",network:"goerli",description:"Optimism Goerli Testnet"},[Or.ARBITRUM_ONE]:{chain:"arbitrum",network:"mainnet",description:"Arbitrum One"},[Or.ARBITRUM_GOERLI]:{chain:"arbitrum",network:"goerli",description:"Arbitrum Goerli"},[Or.BASE_MAINNET]:{chain:"base",network:"mainnet",description:"Base Mainnet"},[Or.BASE_GOERLI]:{chain:"base",network:"goerli",description:"Base Goerli Testnet"},[Or.BASE_SEPOLIA]:{chain:"base",network:"sepolia",description:"Base Sepolia Testnet"},[Or.BITCOIN_MAINNET]:{chain:"bitcoin",network:"mainnet",description:"Bitcoin Mainnet"},[Or.BITCOIN_TESTNET]:{chain:"bitcoin",network:"testnet",description:"Bitcoin Testnet"},[Or.SUI_MAINNET]:{chain:"sui",network:"mainnet",description:"Sui Mainnet"},[Or.SUI_TESTNET]:{chain:"sui",network:"testnet",description:"Sui Testnet"}};function UU(r){const e=BU[r];if(e)return{chain:e.chain,network:e.network}}var cy=class{constructor(r,e){if(this.config=r,!r.apiBaseUrl)throw new Error("apiBaseUrl is required");this.axiosInstance=vr.create(),e&&(this.axiosInstance.interceptors.request.use(async i=>await this.stampRequest(i,e)),this.stamper=e);const n=new kU({basePath:r.apiBaseUrl});this.kmsApi=new RU(n,r.apiBaseUrl,this.axiosInstance)}setOrganizationId(r){if(!r)throw new Error("organizationId is required");this.config.organizationId=r}async createWallet(r){try{if(!this.config.organizationId)throw new Error("organizationId is required to create a wallet");const e={organizationId:this.config.organizationId,walletName:r||`Wallet ${Date.now()}`,accounts:[Ai.Solana(),Ai.Ethereum(),Ai.Bitcoin(),Ai.Sui()]},n={method:iv.createWallet,params:e,timestampMs:Date.now()},s=(await this.kmsApi.postKmsRpc(n)).data.result,o={method:nm.getAccounts,params:{accounts:[Ai.Solana(),Ai.Ethereum(),Ai.Bitcoin(),Ai.Sui()],organizationId:this.config.organizationId,walletId:s.walletId},timestampMs:Date.now()},u=(await this.kmsApi.postKmsRpc(o)).data.result;return{walletId:s.walletId,addresses:u.map(d=>({addressType:d.addressFormat,address:d.address}))}}catch(e){throw console.error("Failed to create wallet:",e.response?.data||e.message),new Error(`Failed to create wallet: ${e.response?.data?.message||e.message}`)}}async signAndSendTransaction(r){const e=r.walletId,n=r.transaction,i=r.networkId,s=r.derivationIndex??0;try{if(!this.config.organizationId)throw new Error("organizationId is required to sign and send a transaction");const o=n,l=UU(i);l||console.error(`No submission config available for network ${i}. Transaction will be signed but not submitted.`);const u=OI(i,s);if(!u)throw new Error(`Unsupported network ID: ${i}`);const d={derivationPath:u.derivationPath,curve:u.curve,addressFormat:u.addressFormat},f={organizationId:this.config.organizationId,walletId:e,transaction:o,derivationInfo:d};l&&(f.submissionConfig=l);const p={method:lv.signTransaction,params:f,timestampMs:Date.now()},v=await this.kmsApi.postKmsRpc(p),E=v.data.result,S=v.data.rpc_submission_result,R=S?S.result:null;return{rawTransaction:E.transaction,hash:R}}catch(o){throw console.error("Failed to sign and send transaction:",o.response?.data||o.message),new Error(`Failed to sign and send transaction: ${o.response?.data?.message||o.message}`)}}async getWalletAddresses(r,e,n){try{const i=n??0,s=e||[Ai.Solana(i),Ai.Ethereum(i),Ai.Bitcoin(i),Ai.Sui(i)],o={method:nm.getAccounts,params:{accounts:s,organizationId:this.config.organizationId,walletId:r},timestampMs:Date.now()};return(await this.kmsApi.postKmsRpc(o)).data.result.map(d=>({addressType:d.addressFormat,address:d.address}))}catch(i){throw console.error("Failed to get wallet addresses:",i.response?.data||i.message),new Error(`Failed to get wallet addresses: ${i.response?.data?.message||i.message}`)}}async signMessage(r){const e=r.walletId,n=r.message,i=r.networkId,s=r.derivationIndex??0;try{if(!this.config.organizationId)throw new Error("organizationId is required to sign a message");const o=OI(i,s);if(!o)throw new Error(`Unsupported network ID: ${i}`);const l={derivationPath:o.derivationPath,curve:o.curve,addressFormat:o.addressFormat},u=n,d={organizationId:this.config.organizationId,walletId:e,payload:u,algorithm:o.algorithm,derivationInfo:l},f={method:av.signRawPayload,params:d,timestampMs:Date.now()};return(await this.kmsApi.postKmsRpc(f)).data.result.signature}catch(o){throw console.error("Failed to sign message:",o.response?.data||o.message),new Error(`Failed to sign message: ${o.response?.data?.message||o.message}`)}}async getWallets(r,e){try{const n={method:"getOrganizationWallets",params:{organizationId:this.config.organizationId,limit:r||20,offset:e||0},timestampMs:Date.now()},s=(await this.kmsApi.postKmsRpc(n)).data.result;return{wallets:s.wallets.map(o=>({walletId:o.walletId,walletName:o.walletName})),totalCount:s.totalCount,limit:s.limit,offset:s.offset}}catch(n){throw console.error("Failed to get wallets:",n.response?.data||n.message),new Error(`Failed to get wallets: ${n.response?.data?.message||n.message}`)}}async getOrganization(r){try{const e={method:"getOrganization",params:{organizationId:r},timestampMs:Date.now()};return(await this.kmsApi.postKmsRpc(e)).data.result}catch(e){throw console.error("Failed to get organization:",e.response?.data||e.message),new Error(`Failed to get organization: ${e.response?.data?.message||e.message}`)}}async getOrCreateOrganization(r,e){try{return await this.createOrganization(r,[{username:`user-${Date.now()}`,role:$d.admin,authenticators:[{authenticatorName:`auth-${Date.now()}`,authenticatorKind:"keypair",publicKey:e,algorithm:"Ed25519"}]}])}catch(n){throw console.error("Failed to get or create organization:",n.response?.data||n.message),new Error(`Failed to get or create organization: ${n.response?.data?.message||n.message}`)}}async createOrganization(r,e,n){try{if(!r)throw new Error("Organization name is required");if(!e||e.length===0)throw new Error("At least one user is required");const i={organizationName:r,users:e.map(u=>({role:u.role==="ADMIN"?$d.admin:$d.user,username:u.username||`user-${Date.now()}`,authenticators:u.authenticators})),tags:n},s={method:rv.createOrganization,params:i,timestampMs:Date.now()};return(await this.kmsApi.postKmsRpc(s)).data.result}catch(i){throw console.error("Failed to create organization:",i.response?.data||i.message),new Error(`Failed to create organization: ${i.response?.data?.message||i.message}`)}}async createAuthenticator(r){try{const e={organizationId:r.organizationId,username:r.username,authenticatorName:r.authenticatorName,authenticator:r.authenticator,replaceExpirable:r.replaceExpirable},n={method:nv.createAuthenticator,params:e,timestampMs:Date.now()};return(await this.kmsApi.postKmsRpc(n)).data.result}catch(e){throw console.error("Failed to create authenticator:",e.response?.data||e.message),new Error(`Failed to create authenticator: ${e.response?.data?.message||e.message}`)}}async deleteAuthenticator(r){try{const e={organizationId:r.organizationId,username:r.username,authenticatorId:r.authenticatorId},n={method:sv.deleteAuthenticator,params:e,timestampMs:Date.now()};return(await this.kmsApi.postKmsRpc(n)).data.result}catch(e){throw console.error("Failed to delete authenticator:",e.response?.data||e.message),new Error(`Failed to delete authenticator: ${e.response?.data?.message||e.message}`)}}async grantOrganizationAccess(r){try{const e={method:ov.grantOrganizationAccess,params:r,timestampMs:Date.now()};return(await this.kmsApi.postKmsRpc(e)).data.result}catch(e){throw console.error("Failed to grant organization access:",e.response?.data||e.message),new Error(`Failed to grant organization access: ${e.response?.data?.message||e.message}`)}}async getWalletWithTag(r){try{const e={method:"getWalletWithTag",params:{organizationId:r.organizationId,tag:r.tag,derivationPaths:r.derivationPaths},timestampMs:Date.now()};return(await this.kmsApi.postKmsRpc(e)).data.result}catch(e){throw console.error("Failed to get wallet with tag:",e.response?.data||e.message),new Error(`Failed to get wallet with tag: ${e.response?.data?.message||e.message}`)}}async stampRequest(r,e){const n=typeof r.data=="string"?r.data:r.data===void 0?"":JSON.stringify(r.data),i=zt.Buffer.from(n,"utf8"),s=await e.stamp({data:i});return r.headers=r.headers||{},r.headers["X-Phantom-Stamp"]=s,r}},VU=(r,e,n)=>{if(!e.has(r))throw TypeError("Cannot "+n)},gk=(r,e,n)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,n)},Ir=(r,e,n)=>(VU(r,e,"access private method"),n),FU=4,zU=100,$i,is,WU=class{constructor(){gk(this,$i),this.type="injected"}load(){let r=0;const e=(n,i)=>{const s=zU*Math.pow(2,Math.min(r,5));setTimeout(()=>{if(Ir(this,$i,is).call(this)){n();return}r++,r>=FU?i():e(n,i)},s)};return new Promise((n,i)=>{e(()=>n(this),i)})}get isConnected(){const r=Ir(this,$i,is).call(this);return!!(r?.isConnected&&r.selectedAddress)}async connect({onlyIfTrusted:r}){const e=Ir(this,$i,is).call(this);if(!e)throw new Error("Provider not found.");if(e.isConnected&&e.selectedAddress)return this.getAccounts();try{return await e.request({method:r?"eth_accounts":"eth_requestAccounts"})}catch{return}}async disconnect(){return Promise.resolve()}async getAccounts(){const r=Ir(this,$i,is).call(this);if(!r)return[];try{return await r.request({method:"eth_accounts"})||[]}catch{return[]}}async signMessage(r,e){const n=Ir(this,$i,is).call(this);if(!n)throw new Error("Provider not found.");if(!n.isConnected)throw new Error("Provider is not connected.");return await n.request({method:"eth_sign",params:[e,r]})}async signPersonalMessage(r,e){const n=Ir(this,$i,is).call(this);if(!n)throw new Error("Provider not found.");if(!n.isConnected)throw new Error("Provider is not connected.");return await n.request({method:"personal_sign",params:[r,e]})}async signTypedData(r,e){const n=Ir(this,$i,is).call(this);if(!n)throw new Error("Provider not found.");if(!n.isConnected)throw new Error("Provider is not connected.");return await n.request({method:"eth_signTypedData_v4",params:[e,JSON.stringify(r)]})}async signIn(r){const e=Ir(this,$i,is).call(this);if(!e)throw new Error("Provider not found.");const n=`Sign in to ${r.domain||"this application"}`,i=e.selectedAddress;if(!i)throw new Error("No address available.");const s=await this.signPersonalMessage(n,i);return{address:i,signature:s,signedMessage:n}}async sendTransaction(r){const e=Ir(this,$i,is).call(this);if(!e)throw new Error("Provider not found.");if(!e.isConnected)throw new Error("Provider is not connected.");return await e.request({method:"eth_sendTransaction",params:[r]})}async signTransaction(r){const e=Ir(this,$i,is).call(this);if(!e)throw new Error("Provider not found.");if(!e.isConnected)throw new Error("Provider is not connected.");return await e.request({method:"eth_signTransaction",params:[r]})}async getChainId(){const r=Ir(this,$i,is).call(this);if(!r)throw new Error("Provider not found.");return await r.request({method:"eth_chainId"})}async switchChain(r){const e=Ir(this,$i,is).call(this);if(!e)throw new Error("Provider not found.");await e.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]})}};$i=new WeakSet;is=function(){return window?.phantom?.ethereum};async function Ks(r="injected"){if(r==="injected"){const e=new WU;try{return await e.load(),e}catch{throw new Error("Provider not found.")}}else throw new Error("Invalid provider type.")}var qd=new Map;function jU(r,e){return qd.has(r)||qd.set(r,new Set),qd.get(r).add(e),()=>yk(r,e)}function yk(r,e){const n=qd.get(r);n&&n.delete(e)}function uv(r,e){const n=qd.get(r);n&&n.forEach(i=>{try{i(e)}catch(s){console.error(`Error in ${r} event listener:`,s)}})}async function $U(){const r=await Ks();if(!r)throw new Error("Provider not found.");if(r.isConnected)return await r.getAccounts();try{const e=await r.connect({onlyIfTrusted:!0});if(e&&e.length>0)return uv("connect",e),e}catch{}try{const e=await r.connect({onlyIfTrusted:!1});if(e&&e.length>0)return uv("connect",e),e}catch{}throw new Error("Failed to connect to Phantom.")}async function qU(){const r=await Ks();if(!r)throw new Error("Provider not found.");await r.disconnect(),uv("disconnect",[])}async function KU(){const r=await Ks();if(!r)throw new Error("Provider not found.");return r.getAccounts()}async function HU(r,e){const n=await Ks();if(!n)throw new Error("Provider not found.");return n.isConnected||await n.connect({onlyIfTrusted:!1}),n.signMessage(r,e)}async function GU(r,e){const n=await Ks();if(!n)throw new Error("Provider not found.");return n.isConnected||await n.connect({onlyIfTrusted:!1}),n.signPersonalMessage(r,e)}async function YU(r,e){const n=await Ks();if(!n)throw new Error("Provider not found.");return n.isConnected||await n.connect({onlyIfTrusted:!1}),n.signTypedData(r,e)}async function JU(r){const e=await Ks();if(!e)throw new Error("Provider not found.");return e.isConnected||await e.connect({onlyIfTrusted:!1}),e.signIn(r)}async function QU(r){const e=await Ks();if(!e)throw new Error("Provider not found.");return e.isConnected||await e.connect({onlyIfTrusted:!1}),e.sendTransaction(r)}async function XU(r){const e=await Ks();if(!e)throw new Error("Provider not found.");return e.isConnected||await e.connect({onlyIfTrusted:!1}),e.signTransaction(r)}async function ZU(){const r=await Ks();if(!r)throw new Error("Provider not found.");return r.getChainId()}async function eV(r){const e=await Ks();if(!e)throw new Error("Provider not found.");return e.switchChain(r)}var tV={connect:$U,disconnect:qU,getAccounts:KU,signMessage:HU,signPersonalMessage:GU,signTypedData:YU,signIn:JU,sendTransaction:QU,signTransaction:XU,getChainId:ZU,switchChain:eV,addEventListener:jU,removeEventListener:yk};function nV(){return{name:"ethereum",create:()=>tV}}function wk(){try{return!!window.phantom}catch{return!1}}var rV={isInstalled:wk};function iV(){return{name:"extension",create:()=>rV}}function sV({plugins:r=[]}){const e={};for(const n of r)e[n.name]=n.create();return e}var oV=4,aV=100,ws,Ds,lV=class{constructor(){gk(this,ws),this.type="injected"}load(){let r=0;const e=(n,i)=>{const s=aV*Math.pow(2,Math.min(r,5));setTimeout(()=>{if(Ir(this,ws,Ds).call(this)){n();return}r++,r>=oV?i():e(n,i)},s)};return new Promise((n,i)=>{e(()=>n(this),i)})}get isConnected(){const r=Ir(this,ws,Ds).call(this);return!!(r?.isConnected&&r.publicKey)}async connect({onlyIfTrusted:r}){const e=Ir(this,ws,Ds).call(this);if(!e)throw new Error("Provider not found.");if(e.isConnected&&e.publicKey)return this.getAccount()??void 0;try{return(await e.connect({onlyIfTrusted:r})).publicKey.toString()}catch{return}}async disconnect(){const r=Ir(this,ws,Ds).call(this);if(!r)throw new Error("Provider not found.");await r.disconnect()}async getAccount(){const r=Ir(this,ws,Ds).call(this);return r&&r.isConnected&&r.publicKey?Promise.resolve(r.publicKey.toString()):Promise.resolve(void 0)}async signMessage(r,e){const n=Ir(this,ws,Ds).call(this);if(!n)throw new Error("Provider not found.");if(!n.isConnected)throw new Error("Provider is not connected.");const i=await n.signMessage(r,e);return{signature:i.signature,address:i.publicKey.toString()}}async signIn(r){const e=Ir(this,ws,Ds).call(this);if(!e)throw new Error("Provider not found.");const n=await e.signIn(r);return{address:n.address.toString(),signature:n.signature,signedMessage:n.signedMessage}}async signAndSendTransaction(r){const e=Ir(this,ws,Ds).call(this);if(!e)throw new Error("Provider not found.");if(!e.isConnected)throw new Error("Provider is not connected.");const n=await e.signAndSendTransaction(r);return{signature:n.signature,address:n.publicKey}}async signTransaction(r){const e=Ir(this,ws,Ds).call(this);if(!e)throw new Error("Provider not found.");if(!e.isConnected)throw new Error("Provider is not connected.");return await e.signTransaction(r)}async signAllTransactions(r){const e=Ir(this,ws,Ds).call(this);if(!e)throw new Error("Provider not found.");if(!e.isConnected)throw new Error("Provider is not connected.");return await e.signAllTransactions(r)}};ws=new WeakSet;Ds=function(){return window?.phantom?.solana};var cV=class{constructor(){this.type="deeplink"}load(){return Promise.resolve(this)}get isConnected(){return!0}async connect({onlyIfTrusted:r}){const e=`phantom://connect?onlyIfTrusted=${r}`;return window.location.href=e,Promise.resolve(void 0)}async disconnect(){const r="phantom://disconnect";return window.location.href=r,Promise.resolve()}async getAccount(){const r="phantom://account";return window.location.href=r,Promise.resolve(void 0)}async signMessage(r,e){const i=`phantom://sign-message?message=${Buffer.from(r).toString("base64")}&display=${e}`;return window.location.href=i,Promise.resolve({signature:new Uint8Array,address:""})}async signIn(r){const e=`phantom://sign-in?signInData=${encodeURIComponent(JSON.stringify(r))}`;return window.location.href=e,Promise.resolve({address:"",signature:new Uint8Array,signedMessage:new Uint8Array})}async signAndSendTransaction(r){const e=`phantom://sign-and-send-transaction?transaction=${r}`;return window.location.href=e,Promise.resolve({signature:"",address:""})}async signTransaction(r){const e=`phantom://sign-transaction?transaction=${r}`;return window.location.href=e,Promise.resolve(r)}async signAllTransactions(r){const e=`phantom://sign-all-transactions?transactions=${r}`;return window.location.href=e,Promise.resolve(r)}};async function Du(r="injected"){if(r==="injected"){const e=new lV;try{return await e.load(),e}catch{throw new Error("Provider not found.")}}else{if(r==="deeplink")return new cV;throw new Error("Invalid provider type.")}}var qo=new Map;function uV(r,e){return qo.has(r)||qo.set(r,new Set),qo.get(r).add(e),()=>{vk(r,e)}}function vk(r,e){qo.has(r)&&(qo.get(r).delete(e),qo.get(r).size===0&&qo.delete(r))}function rm(r,...e){qo.has(r)&&qo.get(r).forEach(n=>{r==="connect"&&e[0]&&typeof e[0]=="string"?n(e[0]):r==="disconnect"?n():r==="accountChanged"&&e[0]&&typeof e[0]=="string"&&n(e[0])})}async function dV(){const r=await Du();if(!r)throw new Error("Provider not found.");if(r.isConnected)return r.getAccount();try{const e=await r.connect({onlyIfTrusted:!0});if(e)return rm("connect",e),e}catch{}try{const e=await r.connect({onlyIfTrusted:!1});if(e)return rm("connect",e),e}catch{}throw new Error("Failed to connect to Phantom.")}async function hV(){const r=await Du();if(!r)throw new Error("Provider not found.");await r.disconnect(),rm("disconnect")}async function fV(){return(await Du()).getAccount()}async function pV(r){const e=await Du();if(!e)throw new Error("Provider not found.");return e.isConnected||await e.connect({onlyIfTrusted:!1}),e.signAndSendTransaction(r)}async function mV(r){const e=await Du();if(!e)throw new Error("Provider not found.");const n=await e.signIn(r);return n.address&&rm("connect",n.address),n}async function gV(r,e){const n=await Du();if(!n)throw new Error("Provider not found.");return n.isConnected||await n.connect({onlyIfTrusted:!1}),n.signMessage(r,e)}var yV={connect:dV,disconnect:hV,getAccount:fV,signMessage:gV,signIn:mV,signAndSendTransaction:pV,addEventListener:uV,removeEventListener:vk};function wV(){return{name:"solana",create:()=>yV}}var im=typeof window<"u"&&typeof window.btoa<"u";function Zn(r){let e;return im?typeof r=="string"?e=btoa(r):e=btoa(String.fromCharCode(...Array.from(r))):typeof r=="string"?e=Buffer.from(r,"utf8").toString("base64"):e=Buffer.from(r).toString("base64"),e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function qm(r){const e=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"=");if(im){const n=atob(e),i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}else return new Uint8Array(Buffer.from(e,"base64"))}function vV(r){if(im&&typeof TextEncoder<"u"){const e=new TextEncoder().encode(r);return Zn(e)}else return Zn(r)}function EV(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<r.length;f++){const p=r.charAt(f),v=p.charCodeAt(0);if(e[v]!==255)throw new TypeError(p+" is ambiguous");e[v]=f}const n=r.length,i=r.charAt(0),s=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function l(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let p=0,v=0,E=0;const S=f.length;for(;E!==S&&f[E]===0;)E++,p++;const R=(S-E)*o+1>>>0,T=new Uint8Array(R);for(;E!==S;){let z=f[E],j=0;for(let se=R-1;(z!==0||j<v)&&se!==-1;se--,j++)z+=256*T[se]>>>0,T[se]=z%n>>>0,z=z/n>>>0;if(z!==0)throw new Error("Non-zero carry");v=j,E++}let M=R-v;for(;M!==R&&T[M]===0;)M++;let W=i.repeat(p);for(;M<R;++M)W+=r.charAt(T[M]);return W}function u(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let p=0,v=0,E=0;for(;f[p]===i;)v++,p++;const S=(f.length-p)*s+1>>>0,R=new Uint8Array(S);for(;p<f.length;){const z=f.charCodeAt(p);if(z>255)return;let j=e[z];if(j===255)return;let se=0;for(let le=S-1;(j!==0||se<E)&&le!==-1;le--,se++)j+=n*R[le]>>>0,R[le]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");E=se,p++}let T=S-E;for(;T!==S&&R[T]===0;)T++;const M=new Uint8Array(v+(S-T));let W=v;for(;T!==S;)M[W++]=R[T++];return M}function d(f){const p=u(f);if(p)return p;throw new Error("Non-base"+n+" character")}return{encode:l,decodeUnsafe:u,decode:d}}var _V="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const bV=EV(_V);function SV(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<r.length;f++){const p=r.charAt(f),v=p.charCodeAt(0);if(e[v]!==255)throw new TypeError(p+" is ambiguous");e[v]=f}const n=r.length,i=r.charAt(0),s=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function l(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let p=0,v=0,E=0;const S=f.length;for(;E!==S&&f[E]===0;)E++,p++;const R=(S-E)*o+1>>>0,T=new Uint8Array(R);for(;E!==S;){let z=f[E],j=0;for(let se=R-1;(z!==0||j<v)&&se!==-1;se--,j++)z+=256*T[se]>>>0,T[se]=z%n>>>0,z=z/n>>>0;if(z!==0)throw new Error("Non-zero carry");v=j,E++}let M=R-v;for(;M!==R&&T[M]===0;)M++;let W=i.repeat(p);for(;M<R;++M)W+=r.charAt(T[M]);return W}function u(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let p=0,v=0,E=0;for(;f[p]===i;)v++,p++;const S=(f.length-p)*s+1>>>0,R=new Uint8Array(S);for(;p<f.length;){const z=f.charCodeAt(p);if(z>255)return;let j=e[z];if(j===255)return;let se=0;for(let le=S-1;(j!==0||se<E)&&le!==-1;le--,se++)j+=n*R[le]>>>0,R[le]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");E=se,p++}let T=S-E;for(;T!==S&&R[T]===0;)T++;const M=new Uint8Array(v+(S-T));let W=v;for(;T!==S;)M[W++]=R[T++];return M}function d(f){const p=u(f);if(p)return p;throw new Error("Non-base"+n+" character")}return{encode:l,decodeUnsafe:u,decode:d}}var IV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const DI=SV(IV);function AV(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<r.length;f++){const p=r.charAt(f),v=p.charCodeAt(0);if(e[v]!==255)throw new TypeError(p+" is ambiguous");e[v]=f}const n=r.length,i=r.charAt(0),s=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function l(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let p=0,v=0,E=0;const S=f.length;for(;E!==S&&f[E]===0;)E++,p++;const R=(S-E)*o+1>>>0,T=new Uint8Array(R);for(;E!==S;){let z=f[E],j=0;for(let se=R-1;(z!==0||j<v)&&se!==-1;se--,j++)z+=256*T[se]>>>0,T[se]=z%n>>>0,z=z/n>>>0;if(z!==0)throw new Error("Non-zero carry");v=j,E++}let M=R-v;for(;M!==R&&T[M]===0;)M++;let W=i.repeat(p);for(;M<R;++M)W+=r.charAt(T[M]);return W}function u(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let p=0,v=0,E=0;for(;f[p]===i;)v++,p++;const S=(f.length-p)*s+1>>>0,R=new Uint8Array(S);for(;p<f.length;){const z=f.charCodeAt(p);if(z>255)return;let j=e[z];if(j===255)return;let se=0;for(let le=S-1;(j!==0||se<E)&&le!==-1;le--,se++)j+=n*R[le]>>>0,R[le]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");E=se,p++}let T=S-E;for(;T!==S&&R[T]===0;)T++;const M=new Uint8Array(v+(S-T));let W=v;for(;T!==S;)M[W++]=R[T++];return M}function d(f){const p=u(f);if(p)return p;throw new Error("Non-base"+n+" character")}return{encode:l,decodeUnsafe:u,decode:d}}var xV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const TV=AV(xV);function RV(r,e){switch(e.split(":")[0].toLowerCase()){case"solana":return CV(r);case"eip155":case"ethereum":return PV(r);case"sui":return MV(r);case"bip122":case"bitcoin":return NV(r);default:return{signature:r,rawSignature:r}}}function kV(r,e,n){return n?{hash:n,rawTransaction:r,blockExplorer:cv(e,"transaction",n)}:{rawTransaction:r}}function CV(r){try{const e=qm(r);return{signature:TV.encode(e),rawSignature:r}}catch{return{signature:r,rawSignature:r}}}function PV(r){try{const e=qm(r);return{signature:"0x"+zt.Buffer.from(e).toString("hex"),rawSignature:r}}catch{return{signature:r.startsWith("0x")?r:"0x"+r,rawSignature:r}}}function MV(r){try{const e=qm(r);return{signature:zt.Buffer.from(e).toString("base64"),rawSignature:r}}catch{return{signature:r,rawSignature:r}}}function NV(r){try{const e=qm(r);return{signature:zt.Buffer.from(e).toString("hex"),rawSignature:r}}catch{return{signature:r,rawSignature:r}}}function OV(r){return{base64url:vV(r)}}async function DV(r,e){const n=e.split(":")[0].toLowerCase();switch(n){case"solana":return LV(r);case"ethereum":case"eip155":case"polygon":case"optimism":case"arbitrum":case"base":return BV(r);case"sui":return await UV(r);case"bitcoin":return VV(r);default:throw new Error(`Unsupported network: ${n}`)}}function LV(r){if(r?.messageBytes!=null)return{base64url:Zn(r.messageBytes),originalFormat:"@solana/kit"};if(typeof r?.serialize=="function"){const e=r.serialize({requireAllSignatures:!1,verifySignatures:!1});return{base64url:Zn(e),originalFormat:"@solana/web3.js"}}if(r instanceof Uint8Array)return{base64url:Zn(r),originalFormat:"bytes"};if(typeof r=="string")try{const e=zt.Buffer.from(r,"base64");return{base64url:Zn(new Uint8Array(e)),originalFormat:"base64"}}catch{throw new Error("Unsupported Solana transaction format")}throw new Error("Unsupported Solana transaction format")}function BV(r){if(r&&typeof r=="object"&&(r.to||r.data)){const e=new TextEncoder().encode(JSON.stringify(r,(n,i)=>typeof i=="bigint"?i.toString():i));return{base64url:Zn(e),originalFormat:"viem"}}if(r?.serialize&&typeof r.serialize=="function"){const e=r.serialize(),n=new Uint8Array(zt.Buffer.from(e.slice(2),"hex"));return{base64url:Zn(n),originalFormat:"ethers"}}if(r instanceof Uint8Array)return{base64url:Zn(r),originalFormat:"bytes"};if(typeof r=="string"&&r.startsWith("0x")){const e=new Uint8Array(zt.Buffer.from(r.slice(2),"hex"));return{base64url:Zn(e),originalFormat:"hex"}}throw new Error("Unsupported EVM transaction format")}async function UV(r){if(r?.serialize&&typeof r.serialize=="function"){const e=r.serialize();return{base64url:Zn(e),originalFormat:"sui-sdk"}}if(r instanceof Uint8Array)return{base64url:Zn(r),originalFormat:"bytes"};if(r?.build&&typeof r.build=="function"){const e=await r.build();if(e?.serialize&&typeof e.serialize=="function"){const n=e.serialize();return{base64url:Zn(n),originalFormat:"transaction-block"}}}throw new Error("Unsupported Sui transaction format")}function VV(r){if(r?.toBuffer&&typeof r.toBuffer=="function"){const e=r.toBuffer();return{base64url:Zn(new Uint8Array(e)),originalFormat:"bitcoinjs-lib"}}if(r instanceof Uint8Array)return{base64url:Zn(r),originalFormat:"bytes"};if(typeof r=="string"){const e=new Uint8Array(zt.Buffer.from(r,"hex"));return{base64url:Zn(e),originalFormat:"hex"}}throw new Error("Unsupported Bitcoin transaction format")}var uy=10080*60*1e3,FV=2880*60*1e3,zV=class{async authenticate(r){if(!r.jwtToken||typeof r.jwtToken!="string")throw new Error("Invalid JWT token: token must be a non-empty string");if(r.jwtToken.split(".").length!==3)throw new Error("Invalid JWT token format: token must have 3 parts separated by dots");try{const n=await fetch("/api/auth/jwt",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.jwtToken}`},body:JSON.stringify({organizationId:r.organizationId,parentOrganizationId:r.parentOrganizationId,customAuthData:r.customAuthData})});if(!n.ok){let s=`HTTP ${n.status}`;try{const o=await n.json();s=o.message||o.error||s}catch{s=n.statusText||s}switch(n.status){case 400:throw new Error(`Invalid JWT authentication request: ${s}`);case 401:throw new Error(`JWT token is invalid or expired: ${s}`);case 403:throw new Error(`JWT authentication forbidden: ${s}`);case 404:throw new Error(`JWT authentication endpoint not found: ${s}`);case 429:throw new Error(`Too many JWT authentication requests: ${s}`);case 500:case 502:case 503:case 504:throw new Error(`JWT authentication server error: ${s}`);default:throw new Error(`JWT authentication failed: ${s}`)}}let i;try{i=await n.json()}catch{throw new Error("Invalid response from JWT authentication server: response is not valid JSON")}if(!i.walletId)throw new Error("Invalid JWT authentication response: missing walletId");return{walletId:i.walletId,provider:"jwt",userInfo:i.userInfo||{}}}catch(n){throw n instanceof TypeError&&n.message.includes("fetch")?new Error("JWT authentication failed: network error or invalid endpoint"):n instanceof Error?n:new Error(`JWT authentication error: ${String(n)}`)}}};function dy(){return"session_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+"_"+Date.now()}async function WV(r,e,n,i=3,s=1e3){let o;for(let l=1;l<=i;l++)try{return n.log("EMBEDDED_PROVIDER",`Attempting ${e}`,{attempt:l,maxRetries:i}),await r()}catch(u){if(o=u,n.warn("EMBEDDED_PROVIDER",`${e} failed`,{attempt:l,maxRetries:i,error:u instanceof Error?u.message:String(u)}),l===i){n.error("EMBEDDED_PROVIDER",`${e} failed after ${i} attempts`,{finalError:u instanceof Error?u.message:String(u)});break}const d=s*Math.pow(2,l-1);n.log("EMBEDDED_PROVIDER",`Retrying ${e} in ${d}ms`,{attempt:l+1,delay:d}),await new Promise(f=>setTimeout(f,d))}throw o}var jV=class{constructor(e,n,i){this.client=null,this.walletId=null,this.addresses=[],this.eventListeners=new Map,this.logger=i,this.logger.log("EMBEDDED_PROVIDER","Initializing EmbeddedProvider",{config:e}),this.config=e,this.platform=n,this.storage=n.storage,this.authProvider=n.authProvider,this.urlParamsAccessor=n.urlParamsAccessor,this.stamper=n.stamper,this.jwtAuth=new zV,e.solanaProvider,this.logger.info("EMBEDDED_PROVIDER","EmbeddedProvider initialized")}on(e,n){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e).add(n),this.logger.log("EMBEDDED_PROVIDER","Event listener added",{event:e})}off(e,n){const i=this.eventListeners.get(e);i&&(i.delete(n),this.logger.log("EMBEDDED_PROVIDER","Event listener removed",{event:e}))}emit(e,n){const i=this.eventListeners.get(e);i&&i.size>0&&(this.logger.log("EMBEDDED_PROVIDER","Emitting event",{event:e,listenerCount:i.size,data:n}),i.forEach(s=>{try{s(n)}catch(o){this.logger.error("EMBEDDED_PROVIDER","Event callback error",{event:e,error:o})}}))}async getAndFilterWalletAddresses(e){const i=(await this.storage.getSession())?.accountDerivationIndex??0;return(await WV(()=>this.client.getWalletAddresses(e,void 0,i),"getWalletAddresses",this.logger).catch(async o=>{throw this.logger.error("EMBEDDED_PROVIDER","getWalletAddresses failed after retries, disconnecting",{walletId:e,error:o.message,derivationIndex:i}),await this.storage.clearSession(),this.client=null,this.walletId=null,this.addresses=[],o})).filter(o=>this.config.addressTypes.some(l=>l===o.addressType))}async validateAndCleanSession(e){if(!e)return null;if(this.logger.log("EMBEDDED_PROVIDER","Found existing session, validating",{sessionId:e.sessionId,status:e.status,walletId:e.walletId}),e.status!=="completed"){const n=this.urlParamsAccessor.getParam("session_id");if(e.status==="pending"&&!n)return this.logger.warn("EMBEDDED_PROVIDER","Session mismatch detected - pending session without redirect context",{sessionId:e.sessionId,status:e.status}),await this.storage.clearSession(),null;if(n&&n!==e.sessionId)return this.logger.warn("EMBEDDED_PROVIDER","Session ID mismatch detected",{storedSessionId:e.sessionId,urlSessionId:n}),await this.storage.clearSession(),null}return e.status==="completed"&&!this.isSessionValid(e)?(this.logger.warn("EMBEDDED_PROVIDER","Session invalid due to authenticator expiration",{sessionId:e.sessionId,authenticatorExpiresAt:e.authenticatorExpiresAt}),await this.storage.clearSession(),null):e}async tryExistingConnection(){this.logger.log("EMBEDDED_PROVIDER","Getting existing session");let e=await this.storage.getSession();if(e=await this.validateAndCleanSession(e),this.logger.log("EMBEDDED_PROVIDER","Checking for redirect resume"),this.authProvider.resumeAuthFromRedirect){const n=this.authProvider.resumeAuthFromRedirect();if(n)return this.logger.info("EMBEDDED_PROVIDER","Resuming from redirect",{walletId:n.walletId,provider:n.provider}),this.completeAuthConnection(n)}if(e&&e.status==="completed"){this.logger.info("EMBEDDED_PROVIDER","Using existing completed session",{sessionId:e.sessionId,walletId:e.walletId}),await this.initializeClientFromSession(e),e.lastUsed=Date.now(),await this.storage.saveSession(e),this.logger.info("EMBEDDED_PROVIDER","Connection from existing session successful",{walletId:this.walletId,addressCount:this.addresses.length}),await this.ensureValidAuthenticator();const n={walletId:this.walletId,addresses:this.addresses,status:"completed"};return this.emit("connect",{walletId:this.walletId,addresses:this.addresses,source:"existing-session"}),n}return null}validateAuthOptions(e){if(e){if(e.provider&&!["google","apple","jwt"].includes(e.provider))throw new Error(`Invalid auth provider: ${e.provider}. Must be "google", "apple", or "jwt"`);if(e.provider==="jwt"&&!e.jwtToken)throw new Error("JWT token is required when using JWT authentication")}}isSessionValid(e){return e?!e.walletId||!e.organizationId||!e.stamperInfo?(this.logger.log("EMBEDDED_PROVIDER","Session missing required fields",{hasWalletId:!!e.walletId,hasOrganizationId:!!e.organizationId,hasStamperInfo:!!e.stamperInfo}),!1):e.status!=="completed"?(this.logger.log("EMBEDDED_PROVIDER","Session not completed",{status:e.status}),!1):e.authenticatorExpiresAt?Date.now()>=e.authenticatorExpiresAt?(this.logger.log("EMBEDDED_PROVIDER","Authenticator expired, session invalid",{authenticatorExpiresAt:new Date(e.authenticatorExpiresAt).toISOString(),now:new Date().toISOString()}),!1):(this.logger.log("EMBEDDED_PROVIDER","Session is valid",{sessionId:e.sessionId,walletId:e.walletId,authenticatorExpires:new Date(e.authenticatorExpiresAt).toISOString()}),!0):(this.logger.log("EMBEDDED_PROVIDER","Session invalid - missing authenticator timing",{sessionId:e.sessionId}),!1):!1}async autoConnect(){try{this.logger.log("EMBEDDED_PROVIDER","Starting auto-connect attempt"),this.emit("connect_start",{source:"auto-connect"});const e=await this.tryExistingConnection();if(e){this.logger.info("EMBEDDED_PROVIDER","Auto-connect successful",{walletId:e.walletId,addressCount:e.addresses.length}),this.emit("connect",{walletId:e.walletId,addresses:e.addresses,source:"auto-connect"});return}this.logger.log("EMBEDDED_PROVIDER","Auto-connect failed: no valid session found"),this.emit("connect_error",{error:"No valid session found",source:"auto-connect"})}catch(e){this.logger.error("EMBEDDED_PROVIDER","Auto-connect failed",{error:e instanceof Error?e.message:String(e)}),this.emit("connect_error",{error:e instanceof Error?e.message:"Auto-connect failed",source:"auto-connect"})}}async createOrganizationAndStamper(){this.logger.log("EMBEDDED_PROVIDER","Initializing stamper");const e=await this.stamper.init();this.logger.log("EMBEDDED_PROVIDER","Stamper initialized",{publicKey:e.publicKey,keyId:e.keyId,algorithm:this.stamper.algorithm}),this.logger.log("EMBEDDED_PROVIDER","Creating temporary PhantomClient");const n=new cy({apiBaseUrl:this.config.apiBaseUrl},this.stamper),i=this.platform.name||"unknown",s=e.publicKey.slice(0,8),o=`${this.config.organizationId}-${i}-${s}`;this.logger.log("EMBEDDED_PROVIDER","Creating organization",{organizationName:o,publicKey:e.publicKey,platform:i});const l=Zn(DI.decode(e.publicKey)),u=Date.now()+uy,d=`user-${s}`,{organizationId:f}=await n.createOrganization(o,[{username:d,role:"ADMIN",authenticators:[{authenticatorName:`auth-${s}`,authenticatorKind:"keypair",publicKey:l,algorithm:"Ed25519"}]}]);return this.logger.info("EMBEDDED_PROVIDER","Organization created",{organizationId:f}),{organizationId:f,stamperInfo:e,expiresAtMs:u,username:d}}async connect(e){try{this.logger.info("EMBEDDED_PROVIDER","Starting embedded provider connect",{authOptions:e?{provider:e.provider,hasJwtToken:!!e.jwtToken}:void 0}),this.emit("connect_start",{source:"manual-connect",authOptions:e?{provider:e.provider}:void 0});const n=await this.tryExistingConnection();if(n)return this.logger.info("EMBEDDED_PROVIDER","Manual connect using existing connection",{walletId:n.walletId,addressCount:n.addresses.length}),this.emit("connect",{walletId:n.walletId,addresses:n.addresses,source:"manual-existing"}),n;this.validateAuthOptions(e),this.logger.info("EMBEDDED_PROVIDER","No existing connection, creating new auth flow");const{organizationId:i,stamperInfo:s,expiresAtMs:o,username:l}=await this.createOrganizationAndStamper(),u=await this.handleAuthFlow(i,s,e,o,l);if(!u)return{addresses:[],status:"pending"};(!e||e.provider==="jwt"||this.config.embeddedWalletType==="app-wallet")&&(u.lastUsed=Date.now(),await this.storage.saveSession(u)),await this.initializeClientFromSession(u),await this.ensureValidAuthenticator();const d={walletId:this.walletId,addresses:this.addresses,status:"completed"};return this.emit("connect",{walletId:this.walletId,addresses:this.addresses,source:"manual"}),d}catch(n){throw this.logger.error("EMBEDDED_PROVIDER","Connect failed with error",{error:n instanceof Error?{name:n.name,message:n.message,stack:n.stack}:n}),this.emit("connect_error",{error:n instanceof Error?n.message:String(n),source:"manual-connect"}),n instanceof Error?n.message.includes("IndexedDB")||n.message.includes("storage")?new Error("Storage error: Unable to access browser storage. Please ensure storage is available and try again."):n.message.includes("network")||n.message.includes("fetch")?new Error("Network error: Unable to connect to authentication server. Please check your internet connection and try again."):n.message.includes("JWT")||n.message.includes("jwt")?new Error(`JWT Authentication error: ${n.message}`):n.message.includes("Authentication")||n.message.includes("auth")?new Error(`Authentication error: ${n.message}`):n.message.includes("organization")||n.message.includes("wallet")?new Error(`Wallet creation error: ${n.message}`):n:new Error(`Embedded wallet connection failed: ${String(n)}`)}}async disconnect(){const e=this.client!==null;await this.storage.clearSession(),this.client=null,this.walletId=null,this.addresses=[],this.logger.info("EMBEDDED_PROVIDER","Disconnected from embedded wallet"),e&&this.emit("disconnect",{source:"manual"})}async signMessage(e){if(!this.client||!this.walletId)throw new Error("Not connected");await this.ensureValidAuthenticator(),this.logger.info("EMBEDDED_PROVIDER","Signing message",{walletId:this.walletId,message:e.message});const n=OV(e.message),s=(await this.storage.getSession())?.accountDerivationIndex??0,o=await this.client.signMessage({walletId:this.walletId,message:n.base64url,networkId:e.networkId,derivationIndex:s});return this.logger.info("EMBEDDED_PROVIDER","Message signed successfully",{walletId:this.walletId,message:e.message}),RV(o,e.networkId)}async signAndSendTransaction(e){if(!this.client||!this.walletId)throw new Error("Not connected");await this.ensureValidAuthenticator(),this.logger.info("EMBEDDED_PROVIDER","Signing and sending transaction",{walletId:this.walletId,networkId:e.networkId});const n=await DV(e.transaction,e.networkId),s=(await this.storage.getSession())?.accountDerivationIndex??0;this.logger.log("EMBEDDED_PROVIDER","Parsed transaction for signing",{walletId:this.walletId,transaction:n,derivationIndex:s});const o=await this.client.signAndSendTransaction({walletId:this.walletId,transaction:n.base64url,networkId:e.networkId,derivationIndex:s});return this.logger.info("EMBEDDED_PROVIDER","Transaction signed and sent successfully",{walletId:this.walletId,networkId:e.networkId,hash:o.hash,rawTransaction:o.rawTransaction}),await kV(o.rawTransaction,e.networkId,o.hash)}getAddresses(){return this.addresses}isConnected(){return this.client!==null&&this.walletId!==null}async handleAuthFlow(e,n,i,s,o){if(this.config.embeddedWalletType==="user-wallet")return this.logger.info("EMBEDDED_PROVIDER","Creating user-wallet, routing authentication",{authProvider:i?.provider||"phantom-connect"}),i?.provider==="jwt"?await this.handleJWTAuth(e,n,i,s,o):(this.logger.info("EMBEDDED_PROVIDER","Starting redirect-based authentication flow",{organizationId:e,parentOrganizationId:this.config.organizationId,provider:i?.provider}),await this.handleRedirectAuth(e,n,i,o));{this.logger.info("EMBEDDED_PROVIDER","Creating app-wallet",{organizationId:e});const d=(await new cy({apiBaseUrl:this.config.apiBaseUrl,organizationId:e},this.stamper).createWallet(`Wallet ${Date.now()}`)).walletId,f=Date.now(),p={sessionId:dy(),walletId:d,organizationId:e,stamperInfo:n,authProvider:"app-wallet",userInfo:{embeddedWalletType:this.config.embeddedWalletType},accountDerivationIndex:0,status:"completed",createdAt:f,lastUsed:f,authenticatorCreatedAt:f,authenticatorExpiresAt:s,lastRenewalAttempt:void 0,username:o};return await this.storage.saveSession(p),this.logger.info("EMBEDDED_PROVIDER","App-wallet created successfully",{walletId:d,organizationId:e}),p}}async handleJWTAuth(e,n,i,s,o){if(this.logger.info("EMBEDDED_PROVIDER","Using JWT authentication flow"),!i.jwtToken)throw this.logger.error("EMBEDDED_PROVIDER","JWT token missing for JWT authentication"),new Error("JWT token is required for JWT authentication");this.logger.log("EMBEDDED_PROVIDER","Starting JWT authentication");const l=await this.jwtAuth.authenticate({organizationId:e,parentOrganizationId:this.config.organizationId,jwtToken:i.jwtToken,customAuthData:i.customAuthData}),u=l.walletId;this.logger.info("EMBEDDED_PROVIDER","JWT authentication completed",{walletId:u});const d=Date.now(),f={sessionId:dy(),walletId:u,organizationId:e,stamperInfo:n,authProvider:l.provider,userInfo:l.userInfo,accountDerivationIndex:l.accountDerivationIndex,status:"completed",createdAt:d,lastUsed:d,authenticatorCreatedAt:d,authenticatorExpiresAt:s,lastRenewalAttempt:void 0,username:o};return this.logger.log("EMBEDDED_PROVIDER","Saving JWT session"),await this.storage.saveSession(f),f}async handleRedirectAuth(e,n,i,s){this.logger.info("EMBEDDED_PROVIDER","Using Phantom Connect authentication flow (redirect-based)",{provider:i?.provider,hasRedirectUrl:!!this.config.authOptions?.redirectUrl,authUrl:this.config.authOptions?.authUrl});const o=Date.now(),l=dy(),u={sessionId:l,walletId:`temp-${o}`,organizationId:e,stamperInfo:n,authProvider:"phantom-connect",userInfo:{provider:i?.provider},accountDerivationIndex:void 0,status:"pending",createdAt:o,lastUsed:o,authenticatorCreatedAt:o,authenticatorExpiresAt:o+uy,lastRenewalAttempt:void 0,username:s||`user-${n.keyId.substring(0,8)}`};this.logger.log("EMBEDDED_PROVIDER","Saving temporary session before redirect",{sessionId:u.sessionId,tempWalletId:u.walletId}),u.lastUsed=Date.now(),await this.storage.saveSession(u),this.logger.info("EMBEDDED_PROVIDER","Starting Phantom Connect redirect",{organizationId:e,parentOrganizationId:this.config.organizationId,provider:i?.provider,authUrl:this.config.authOptions?.authUrl});const d=await this.authProvider.authenticate({organizationId:e,parentOrganizationId:this.config.organizationId,provider:i?.provider,redirectUrl:this.config.authOptions?.redirectUrl,customAuthData:i?.customAuthData,authUrl:this.config.authOptions?.authUrl,sessionId:l,appName:this.config.appName,appLogo:this.config.appLogo});return d&&"walletId"in d?(this.logger.info("EMBEDDED_PROVIDER","Authentication completed after redirect",{walletId:d.walletId,provider:d.provider}),u.walletId=d.walletId,u.authProvider=d.provider||u.authProvider,u.accountDerivationIndex=d.accountDerivationIndex,u.status="completed",u.lastUsed=Date.now(),await this.storage.saveSession(u),u):(this.logger.info("EMBEDDED_PROVIDER","Redirect authentication initiated, waiting for redirect completion"),null)}async completeAuthConnection(e){const n=await this.storage.getSession();if(!n)throw new Error("No session found after redirect - session may have expired");return n.walletId=e.walletId,n.authProvider=e.provider||n.authProvider,n.accountDerivationIndex=e.accountDerivationIndex,n.status="completed",n.lastUsed=Date.now(),await this.storage.saveSession(n),await this.initializeClientFromSession(n),await this.ensureValidAuthenticator(),{walletId:this.walletId,addresses:this.addresses,status:"completed"}}async ensureValidAuthenticator(){const e=await this.storage.getSession();if(!e)throw new Error("No active session found");const n=Date.now();if(!e.authenticatorExpiresAt)throw this.logger.warn("EMBEDDED_PROVIDER","Session missing authenticator timing - treating as invalid session"),await this.disconnect(),new Error("Invalid session - missing authenticator timing");const i=e.authenticatorExpiresAt-n;if(this.logger.log("EMBEDDED_PROVIDER","Checking authenticator expiration",{expiresAt:new Date(e.authenticatorExpiresAt).toISOString(),timeUntilExpiry:i}),i<=0)throw this.logger.error("EMBEDDED_PROVIDER","Authenticator has expired, disconnecting"),await this.disconnect(),new Error("Authenticator expired");const s=FV;if(i<=s){this.logger.info("EMBEDDED_PROVIDER","Authenticator needs renewal",{expiresAt:new Date(e.authenticatorExpiresAt).toISOString(),timeUntilExpiry:i,renewalWindow:s});try{await this.renewAuthenticator(e),this.logger.info("EMBEDDED_PROVIDER","Authenticator renewed successfully")}catch(o){this.logger.error("EMBEDDED_PROVIDER","Failed to renew authenticator",{error:o instanceof Error?o.message:String(o)})}}}async renewAuthenticator(e){if(!this.client)throw new Error("Client not initialized");this.logger.info("EMBEDDED_PROVIDER","Starting authenticator renewal");try{const n=await this.stamper.rotateKeyPair();this.logger.log("EMBEDDED_PROVIDER","Generated new keypair for renewal",{newKeyId:n.keyId,newPublicKey:n.publicKey});const i=Zn(DI.decode(n.publicKey)),s=Date.now()+uy;let o;try{o=await this.client.createAuthenticator({organizationId:e.organizationId,username:e.username,authenticatorName:`auth-${n.keyId.substring(0,8)}`,authenticator:{authenticatorName:`auth-${n.keyId.substring(0,8)}`,authenticatorKind:"keypair",publicKey:i,algorithm:"Ed25519"},replaceExpirable:!0})}catch(u){throw this.logger.error("EMBEDDED_PROVIDER","Failed to create new authenticator",{error:u instanceof Error?u.message:String(u)}),await this.stamper.rollbackRotation(),new Error(`Failed to create new authenticator: ${u instanceof Error?u.message:String(u)}`)}this.logger.info("EMBEDDED_PROVIDER","Created new authenticator",{authenticatorId:o.id}),await this.stamper.commitRotation(o.id||"unknown");const l=Date.now();e.stamperInfo=n,e.authenticatorCreatedAt=l,e.authenticatorExpiresAt=s,e.lastRenewalAttempt=l,await this.storage.saveSession(e),this.logger.info("EMBEDDED_PROVIDER","Authenticator renewal completed successfully",{newKeyId:n.keyId,expiresAt:new Date(s).toISOString()})}catch(n){throw await this.stamper.rollbackRotation(),n}}async initializeClientFromSession(e){this.logger.log("EMBEDDED_PROVIDER","Initializing PhantomClient from session",{organizationId:e.organizationId,walletId:e.walletId}),this.stamper.getKeyInfo()||await this.stamper.init(),this.client=new cy({apiBaseUrl:this.config.apiBaseUrl,organizationId:e.organizationId},this.stamper),this.walletId=e.walletId,this.addresses=await this.getAndFilterWalletAddresses(e.walletId)}};function $V(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<r.length;f++){const p=r.charAt(f),v=p.charCodeAt(0);if(e[v]!==255)throw new TypeError(p+" is ambiguous");e[v]=f}const n=r.length,i=r.charAt(0),s=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function l(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let p=0,v=0,E=0;const S=f.length;for(;E!==S&&f[E]===0;)E++,p++;const R=(S-E)*o+1>>>0,T=new Uint8Array(R);for(;E!==S;){let z=f[E],j=0;for(let se=R-1;(z!==0||j<v)&&se!==-1;se--,j++)z+=256*T[se]>>>0,T[se]=z%n>>>0,z=z/n>>>0;if(z!==0)throw new Error("Non-zero carry");v=j,E++}let M=R-v;for(;M!==R&&T[M]===0;)M++;let W=i.repeat(p);for(;M<R;++M)W+=r.charAt(T[M]);return W}function u(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let p=0,v=0,E=0;for(;f[p]===i;)v++,p++;const S=(f.length-p)*s+1>>>0,R=new Uint8Array(S);for(;p<f.length;){const z=f.charCodeAt(p);if(z>255)return;let j=e[z];if(j===255)return;let se=0;for(let le=S-1;(j!==0||se<E)&&le!==-1;le--,se++)j+=n*R[le]>>>0,R[le]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");E=se,p++}let T=S-E;for(;T!==S&&R[T]===0;)T++;const M=new Uint8Array(v+(S-T));let W=v;for(;T!==S;)M[W++]=R[T++];return M}function d(f){const p=u(f);if(p)return p;throw new Error("Non-base"+n+" character")}return{encode:l,decodeUnsafe:u,decode:d}}var qV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const hy=$V(qV);var KV=class{constructor(r={}){if(this.db=null,this.activeKeyPairRecord=null,this.pendingKeyPairRecord=null,this.algorithm=Tl.ed25519,this.type="PKI",typeof window>"u"||!window.indexedDB)throw new Error("IndexedDbStamper requires a browser environment with IndexedDB support");this.dbName=r.dbName||"phantom-indexed-db-stamper",this.storeName=r.storeName||"crypto-keys",this.keyName=r.keyName||"signing-key",this.type=r.type||"PKI",this.idToken=r.idToken,this.salt=r.salt}async init(){return await this.openDB(),this.activeKeyPairRecord=await this.loadActiveKeyPairRecord(),this.activeKeyPairRecord||(this.activeKeyPairRecord=await this.generateAndStoreNewKeyPair("active")),this.pendingKeyPairRecord=await this.loadPendingKeyPairRecord(),this.activeKeyPairRecord.keyInfo}getKeyInfo(){return this.activeKeyPairRecord?.keyInfo||null}async resetKeyPair(){return await this.clearStoredKeys(),this.activeKeyPairRecord=await this.generateAndStoreNewKeyPair("active"),this.pendingKeyPairRecord=null,this.activeKeyPairRecord.keyInfo}async stamp(r){const{data:e}=r;if(!this.activeKeyPairRecord)throw new Error("Stamper not initialized. Call init() first.");const n=new Uint8Array(e),i=await crypto.subtle.sign({name:this.algorithm,hash:"SHA-256"},this.activeKeyPairRecord.keyPair.privateKey,n),s=Zn(new Uint8Array(i)),o=r.type||this.type,l=r.type==="OIDC"?r.idToken:this.idToken,u=r.type==="OIDC"?r.salt:this.salt,d=o==="PKI"?{publicKey:Zn(hy.decode(this.activeKeyPairRecord.keyInfo.publicKey)),signature:s,kind:"PKI",algorithm:this.algorithm}:{kind:"OIDC",idToken:l,publicKey:Zn(hy.decode(this.activeKeyPairRecord.keyInfo.publicKey)),salt:u,algorithm:this.algorithm,signature:s},f=JSON.stringify(d);return Zn(f)}async clear(){await this.clearStoredKeys(),this.activeKeyPairRecord=null,this.pendingKeyPairRecord=null}async clearStoredKeys(){return this.db||await this.openDB(),new Promise((r,e)=>{const i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName),s=i.delete(`${this.keyName}-active`),o=i.delete(`${this.keyName}-pending`);let l=0;const u=2,d=()=>{l++,l===u&&r()};s.onsuccess=d,o.onsuccess=d,s.onerror=()=>e(s.error),o.onerror=()=>e(o.error)})}async openDB(){return new Promise((r,e)=>{const n=indexedDB.open(this.dbName,1);n.onerror=()=>e(n.error),n.onsuccess=()=>{this.db=n.result,r()},n.onupgradeneeded=i=>{const s=i.target.result;s.objectStoreNames.contains(this.storeName)||s.createObjectStore(this.storeName)}})}async rotateKeyPair(){return this.db||await this.openDB(),this.pendingKeyPairRecord=await this.generateAndStoreNewKeyPair("pending"),this.pendingKeyPairRecord.keyInfo}async commitRotation(r){if(!this.pendingKeyPairRecord)throw new Error("No pending keypair to commit");this.activeKeyPairRecord&&await this.removeKeyPairRecord("active"),this.pendingKeyPairRecord.status="active",this.pendingKeyPairRecord.authenticatorId=r,this.pendingKeyPairRecord.keyInfo.authenticatorId=r,this.activeKeyPairRecord=this.pendingKeyPairRecord,this.pendingKeyPairRecord=null,await this.storeKeyPairRecord(this.activeKeyPairRecord,"active"),await this.removeKeyPairRecord("pending")}async rollbackRotation(){this.pendingKeyPairRecord&&(await this.removeKeyPairRecord("pending"),this.pendingKeyPairRecord=null)}async generateAndStoreNewKeyPair(r){const e=await crypto.subtle.generateKey({name:"Ed25519"},!1,["sign","verify"]),n=await crypto.subtle.exportKey("raw",e.publicKey),i=hy.encode(new Uint8Array(n)),s=await crypto.subtle.digest("SHA-256",n),o=Zn(new Uint8Array(s)).substring(0,16),l=Date.now(),d={keyPair:e,keyInfo:{keyId:o,publicKey:i,createdAt:l},createdAt:l,expiresAt:0,status:r};return await this.storeKeyPairRecord(d,r),d}async storeKeyPairRecord(r,e){if(!this.db)throw new Error("Database not initialized");return new Promise((n,i)=>{const l=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(r,`${this.keyName}-${e}`);l.onsuccess=()=>n(),l.onerror=()=>i(l.error)})}async loadActiveKeyPairRecord(){return this.db?new Promise((r,e)=>{const s=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(`${this.keyName}-active`);s.onsuccess=()=>r(s.result||null),s.onerror=()=>e(s.error)}):null}async loadPendingKeyPairRecord(){return this.db?new Promise((r,e)=>{const s=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(`${this.keyName}-pending`);s.onsuccess=()=>r(s.result||null),s.onerror=()=>e(s.error)}):null}async removeKeyPairRecord(r){if(this.db)return new Promise((e,n)=>{const o=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(`${this.keyName}-${r}`);o.onsuccess=()=>e(),o.onerror=()=>n(o.error)})}},Dd=class{constructor(){this.level=0,this.enabled=!1}static getInstance(){return Dd.instance||(Dd.instance=new Dd),Dd.instance}setCallback(r){this.callback=r}setLevel(r){this.level=r}enable(){this.enabled=!0}disable(){this.enabled=!1}writeLog(r,e,n,i){if(!this.enabled||r>this.level)return;const s={timestamp:Date.now(),level:r,category:e,message:n,data:i};this.callback&&this.callback(s)}error(r,e,n){this.writeLog(0,r,e,n)}warn(r,e,n){this.writeLog(1,r,e,n)}info(r,e,n){this.writeLog(2,r,e,n)}debug(r,e,n){this.writeLog(3,r,e,n)}log(r,e,n){this.writeLog(3,r,e,n)}},Ye=Dd.getInstance(),nt={BROWSER_SDK:"BrowserSDK",PROVIDER_MANAGER:"ProviderManager",EMBEDDED_PROVIDER:"EmbeddedProvider",INJECTED_PROVIDER:"InjectedProvider",PHANTOM_CONNECT_AUTH:"PhantomConnectAuth",JWT_AUTH:"JWTAuth",STORAGE:"Storage",SESSION:"Session"},HV=class{constructor(r){this.connected=!1,this.addresses=[],this.eventListeners=new Map,this.browserInjectedCleanupFunctions=[],this.eventsInitialized=!1,Ye.log(nt.INJECTED_PROVIDER,"Initializing InjectedProvider",{config:r}),this.addressTypes=r.addressTypes,Ye.log(nt.INJECTED_PROVIDER,"Address types configured",{addressTypes:this.addressTypes});const e=[iV()];this.addressTypes.includes(Yn.solana)&&(e.push(wV()),Ye.log(nt.INJECTED_PROVIDER,"Solana plugin added")),this.addressTypes.includes(Yn.ethereum)&&(e.push(nV()),Ye.log(nt.INJECTED_PROVIDER,"Ethereum plugin added")),Ye.log(nt.INJECTED_PROVIDER,"Creating Phantom instance with plugins",{pluginCount:e.length}),this.phantom=sV({plugins:e}),Ye.info(nt.INJECTED_PROVIDER,"InjectedProvider initialized")}async connect(r){Ye.info(nt.INJECTED_PROVIDER,"Starting injected provider connect",{addressTypes:this.addressTypes,authOptionsIgnored:!!r}),this.emit("connect_start",{source:"manual-connect",providerType:"injected"});try{if(!this.phantom.extension.isInstalled()){Ye.error(nt.INJECTED_PROVIDER,"Phantom wallet extension not found");const i=new Error("Phantom wallet not found");throw this.emit("connect_error",{error:i.message,source:"manual-connect"}),i}Ye.log(nt.INJECTED_PROVIDER,"Phantom extension detected");const e=[];if(this.addressTypes.includes(Yn.solana)){Ye.log(nt.INJECTED_PROVIDER,"Attempting Solana connection");try{const i=await this.phantom.solana.connect();i&&(e.push({addressType:Yn.solana,address:i}),Ye.info(nt.INJECTED_PROVIDER,"Solana connected successfully",{address:i}))}catch(i){Ye.warn(nt.INJECTED_PROVIDER,"Failed to connect Solana",{error:i})}}if(this.addressTypes.includes(Yn.ethereum))try{const i=await this.phantom.ethereum.connect();i&&i.length>0&&e.push(...i.map(s=>({addressType:Yn.ethereum,address:s})))}catch(i){Ye.warn(nt.INJECTED_PROVIDER,"Failed to connect Ethereum",{error:i})}if(e.length===0){const i=new Error("Failed to connect to any supported wallet provider");throw this.emit("connect_error",{error:i.message,source:"manual-connect"}),i}this.addresses=e,this.connected=!0;const n={addresses:this.addresses,status:"completed"};return this.emit("connect",{addresses:this.addresses,source:"manual-connect"}),n}catch(e){throw e instanceof Error&&!e.message.includes("Phantom wallet not found")&&!e.message.includes("Failed to connect to any supported wallet provider")&&this.emit("connect_error",{error:e.message,source:"manual-connect"}),e}}async disconnect(){if(Ye.info(nt.INJECTED_PROVIDER,"Starting injected provider disconnect"),this.addressTypes.includes(Yn.solana))try{await this.phantom.solana.disconnect(),Ye.log(nt.INJECTED_PROVIDER,"Solana disconnected successfully")}catch(r){Ye.warn(nt.INJECTED_PROVIDER,"Failed to disconnect Solana",{error:r})}if(this.addressTypes.includes(Yn.ethereum))try{await this.phantom.ethereum.disconnect(),Ye.log(nt.INJECTED_PROVIDER,"Ethereum disconnected successfully")}catch(r){Ye.warn(nt.INJECTED_PROVIDER,"Failed to disconnect Ethereum",{error:r})}this.browserInjectedCleanupFunctions.forEach(r=>r()),this.browserInjectedCleanupFunctions=[],this.connected=!1,this.addresses=[],this.emit("disconnect",{source:"manual-disconnect"}),Ye.info(nt.INJECTED_PROVIDER,"Injected provider disconnected successfully")}async signMessage(r){if(!this.connected)throw new Error("Wallet not connected");const e=r.networkId.split(":")[0].toLowerCase();let n;if(e==="solana"){const{signature:i}=await this.phantom.solana.signMessage(new TextEncoder().encode(r.message));n=bV.encode(i)}else if(e==="ethereum"||e==="polygon"||e==="eip155"){const i=this.addresses.find(o=>o.addressType===Yn.ethereum)?.address;if(!i)throw new Error("No address available");n=await this.phantom.ethereum.signPersonalMessage(r.message,i)}else throw new Error(`Network ${r.networkId} is not supported for injected wallets`);return{signature:n,rawSignature:Zn(n)}}async signAndSendTransaction(r){if(!this.connected)throw new Error("Wallet not connected");const e=r.networkId.split(":")[0].toLowerCase();if(e==="solana"){const n=r.transaction,i=await this.phantom.solana.signAndSendTransaction(n);return{hash:i.signature,rawTransaction:Zn(i.signature),blockExplorer:cv(r.networkId,"transaction",i.signature)}}else if(e==="ethereum"||e==="polygon"||e==="eip155"){const n=o=>{if(o)return typeof o=="string"&&o.startsWith("0x")||typeof o=="string"?o:"0x"+o.toString(16)},i={to:r.transaction.to,value:r.transaction.value?n(r.transaction.value):"0x0",gas:n(r.transaction.gas),gasPrice:n(r.transaction.gasPrice),maxFeePerGas:n(r.transaction.maxFeePerGas),maxPriorityFeePerGas:n(r.transaction.maxPriorityFeePerGas),data:r.transaction.data||"0x"},s=await this.phantom.ethereum.sendTransaction(i);return{hash:s,rawTransaction:Zn(s),blockExplorer:cv(r.networkId,"transaction",s)}}throw new Error(`Network ${r.networkId} is not supported for injected wallets`)}getAddresses(){return this.addresses}isConnected(){return this.connected}on(r,e){Ye.log(nt.INJECTED_PROVIDER,"Adding event listener",{event:r}),this.eventsInitialized||(this.setupBrowserInjectedEvents(),this.eventsInitialized=!0),this.eventListeners.has(r)||this.eventListeners.set(r,new Set),this.eventListeners.get(r).add(e)}off(r,e){Ye.log(nt.INJECTED_PROVIDER,"Removing event listener",{event:r}),this.eventListeners.has(r)&&(this.eventListeners.get(r).delete(e),this.eventListeners.get(r).size===0&&this.eventListeners.delete(r))}emit(r,e){Ye.log(nt.INJECTED_PROVIDER,"Emitting event",{event:r,listenerCount:this.eventListeners.get(r)?.size||0,data:e});const n=this.eventListeners.get(r);n&&n.size>0&&n.forEach(i=>{try{i(e)}catch(s){Ye.error(nt.INJECTED_PROVIDER,"Event callback error",{event:r,error:s})}})}setupBrowserInjectedEvents(){Ye.log(nt.INJECTED_PROVIDER,"Setting up browser-injected-sdk event listeners"),this.addressTypes.includes(Yn.solana)&&this.phantom.solana&&this.setupSolanaEvents(),this.addressTypes.includes(Yn.ethereum)&&this.phantom.ethereum&&this.setupEthereumEvents()}setupSolanaEvents(){Ye.log(nt.INJECTED_PROVIDER,"Setting up Solana event listeners");const r=this.phantom.solana.addEventListener("connect",i=>{Ye.log(nt.INJECTED_PROVIDER,"Solana connect event received",{publicKey:i});const s={addressType:Yn.solana,address:i};this.addresses.find(o=>o.addressType===Yn.solana)||this.addresses.push(s),this.connected=!0,this.emit("connect",{addresses:this.addresses,source:"injected-extension"})}),e=this.phantom.solana.addEventListener("disconnect",()=>{Ye.log(nt.INJECTED_PROVIDER,"Solana disconnect event received"),this.addresses=this.addresses.filter(i=>i.addressType!==Yn.solana),this.connected=this.addresses.length>0,this.emit("disconnect",{source:"injected-extension"})}),n=this.phantom.solana.addEventListener("accountChanged",i=>{Ye.log(nt.INJECTED_PROVIDER,"Solana account changed event received",{publicKey:i});const s=this.addresses.findIndex(o=>o.addressType===Yn.solana);s>=0?this.addresses[s]={addressType:Yn.solana,address:i}:this.addresses.push({addressType:Yn.solana,address:i}),this.emit("connect",{addresses:this.addresses,source:"injected-extension-account-change"})});this.browserInjectedCleanupFunctions.push(r,e,n)}setupEthereumEvents(){Ye.log(nt.INJECTED_PROVIDER,"Setting up Ethereum event listeners");const r=this.phantom.ethereum.addEventListener("connect",i=>{Ye.log(nt.INJECTED_PROVIDER,"Ethereum connect event received",{accounts:i}),this.addresses=this.addresses.filter(s=>s.addressType!==Yn.ethereum),i&&i.length>0&&this.addresses.push(...i.map(s=>({addressType:Yn.ethereum,address:s}))),this.connected=this.addresses.length>0,this.emit("connect",{addresses:this.addresses,source:"injected-extension"})}),e=this.phantom.ethereum.addEventListener("disconnect",()=>{Ye.log(nt.INJECTED_PROVIDER,"Ethereum disconnect event received"),this.addresses=this.addresses.filter(i=>i.addressType!==Yn.ethereum),this.connected=this.addresses.length>0,this.emit("disconnect",{source:"injected-extension"})}),n=this.phantom.ethereum.addEventListener("accountChanged",i=>{Ye.log(nt.INJECTED_PROVIDER,"Ethereum account changed event received",{accounts:i}),this.addresses=this.addresses.filter(s=>s.addressType!==Yn.ethereum),i&&i.length>0&&this.addresses.push(...i.map(s=>({addressType:Yn.ethereum,address:s}))),this.emit("connect",{addresses:this.addresses,source:"injected-extension-account-change"})});this.browserInjectedCleanupFunctions.push(r,e,n)}},GV=class{constructor(){this.dbName="phantom-browser-sdk",this.storeName="sessions",this.version=1}async getDB(){return new Promise((r,e)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>e(n.error),n.onsuccess=()=>r(n.result),n.onupgradeneeded=i=>{const s=i.target.result;s.objectStoreNames.contains(this.storeName)||s.createObjectStore(this.storeName)}})}async getSession(){Ye.log(nt.STORAGE,"Getting session from IndexedDB");const r=await this.getDB();return new Promise((e,n)=>{const o=r.transaction([this.storeName],"readonly").objectStore(this.storeName).get("currentSession");o.onsuccess=()=>{const l=o.result||null;Ye.log(nt.STORAGE,"Retrieved session from IndexedDB",{hasSession:!!l,sessionId:l?.sessionId}),e(l)},o.onerror=()=>{Ye.error(nt.STORAGE,"Failed to get session from IndexedDB",{error:o.error}),n(o.error)}})}async saveSession(r){Ye.log(nt.STORAGE,"Saving session to IndexedDB",{sessionId:r.sessionId,walletId:r.walletId,status:r.status});const e=await this.getDB();return new Promise((n,i)=>{const l=e.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(r,"currentSession");l.onsuccess=()=>{Ye.log(nt.STORAGE,"Successfully saved session to IndexedDB"),n()},l.onerror=()=>{Ye.error(nt.STORAGE,"Failed to save session to IndexedDB",{error:l.error}),i(l.error)}})}async clearSession(){Ye.log(nt.STORAGE,"Clearing session from IndexedDB");const r=await this.getDB();return new Promise((e,n)=>{const o=r.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete("currentSession");o.onsuccess=()=>{Ye.log(nt.STORAGE,"Successfully cleared session from IndexedDB"),e()},o.onerror=()=>{Ye.error(nt.STORAGE,"Failed to clear session from IndexedDB",{error:o.error}),n(o.error)}})}},YV=class{getParam(r){return new URLSearchParams(window.location.search).get(r)}},JV="https://connect.phantom.app",QV=class{constructor(r){this.urlParamsAccessor=r}authenticate(r){return new Promise(e=>{if("jwtToken"in r)throw new Error("JWT authentication should be handled by the core JWTAuth class");const n=r;Ye.info(nt.PHANTOM_CONNECT_AUTH,"Starting Phantom Connect authentication",{organizationId:n.organizationId,parentOrganizationId:n.parentOrganizationId,provider:n.provider,authUrl:n.authUrl,hasCustomData:!!n.customAuthData});const i=n.authUrl||JV;Ye.log(nt.PHANTOM_CONNECT_AUTH,"Using auth URL",{baseUrl:i});const s=new URLSearchParams({organization_id:n.organizationId,parent_organization_id:n.parentOrganizationId,redirect_uri:n.redirectUrl||(typeof window<"u"?window.location.href:""),session_id:n.sessionId,clear_previous_session:"true",app_name:n.appName||"",app_logo:n.appLogo||""});n.provider?(Ye.log(nt.PHANTOM_CONNECT_AUTH,"Provider specified, will skip selection",{provider:n.provider}),s.append("provider",n.provider)):(Ye.log(nt.PHANTOM_CONNECT_AUTH,"No provider specified, defaulting to Google"),s.append("provider","google")),n.customAuthData&&(Ye.log(nt.PHANTOM_CONNECT_AUTH,"Adding custom auth data"),s.append("authData",JSON.stringify(n.customAuthData)));const o={organizationId:n.organizationId,parentOrganizationId:n.parentOrganizationId,provider:n.provider,sessionId:n.sessionId};sessionStorage.setItem("phantom-auth-context",JSON.stringify(o)),Ye.log(nt.PHANTOM_CONNECT_AUTH,"Stored auth context in session storage",{authContext:o});const l=`${i}?${s.toString()}`;Ye.info(nt.PHANTOM_CONNECT_AUTH,"Redirecting to Phantom Connect",{authUrl:l}),window.location.href=l,e()})}resumeAuthFromRedirect(){try{const r=this.urlParamsAccessor.getParam("wallet_id"),e=this.urlParamsAccessor.getParam("session_id"),n=this.urlParamsAccessor.getParam("selected_account_index"),i=this.urlParamsAccessor.getParam("error"),s=this.urlParamsAccessor.getParam("error_description");if(i){const u=s||i;switch(i){case"access_denied":throw new Error(`Authentication cancelled: ${u}`);case"invalid_request":throw new Error(`Invalid authentication request: ${u}`);case"server_error":throw new Error(`Authentication server error: ${u}`);case"temporarily_unavailable":throw new Error(`Authentication service temporarily unavailable: ${u}`);default:throw new Error(`Authentication failed: ${u}`)}}if(!r||!e)return Ye.log(nt.PHANTOM_CONNECT_AUTH,"Missing auth parameters in URL",{hasWalletId:!!r,hasSessionId:!!e}),null;const o=sessionStorage.getItem("phantom-auth-context");let l={};if(o)try{l=JSON.parse(o)}catch(u){Ye.warn(nt.PHANTOM_CONNECT_AUTH,"Failed to parse stored auth context",{error:u})}if(l.sessionId&&e!==l.sessionId)throw Ye.error(nt.PHANTOM_CONNECT_AUTH,"Session ID mismatch",{urlSessionId:e,storedSessionId:l.sessionId}),new Error("Session ID mismatch - possible session corruption or replay attack");return sessionStorage.removeItem("phantom-auth-context"),Ye.info(nt.PHANTOM_CONNECT_AUTH,"Successfully resumed auth from redirect",{walletId:r,sessionId:e,accountDerivationIndex:n?parseInt(n):void 0}),{walletId:r,userInfo:l,accountDerivationIndex:n?parseInt(n):void 0}}catch(r){throw sessionStorage.removeItem("phantom-auth-context"),r}}},XV=class{info(r,e,n){Ye.info(r,e,n)}warn(r,e,n){Ye.warn(r,e,n)}error(r,e,n){Ye.error(r,e,n)}log(r,e,n){Ye.log(r,e,n)}};function ZV(r,e){let n="unknown",i="unknown";if(!r||typeof r!="string")return{name:n,version:i};try{if(r.includes("Edg/")){n="edge";const s=r.match(/Edg\/([0-9]+(?:\.[0-9]+)*)/);s&&(i=s[1].split(".")[0])}else if(r.includes("OPR/")||r.includes("Opera/")){n="opera";const s=r.match(/(?:OPR|Opera)\/([0-9]+(?:\.[0-9]+)*)/);s&&(i=s[1].split(".")[0])}else if(r.includes("SamsungBrowser/")){n="samsung";const s=r.match(/SamsungBrowser\/([0-9]+(?:\.[0-9]+)*)/);s&&(i=s[1].split(".")[0])}else if(r.includes("DuckDuckGo/")){n="duckduckgo";const s=r.match(/DuckDuckGo\/([0-9]+(?:\.[0-9]+)*)/);s&&(i=s[1].split(".")[0])}else if(r.includes("Chrome/")&&e){n="brave";const s=r.match(/Chrome\/([0-9]+(?:\.[0-9]+)*)/);s&&(i=s[1].split(".")[0])}else if(r.includes("Mobile/")||r.includes("Android"))if(r.includes("Chrome/")){n="chrome-mobile";const s=r.match(/Chrome\/([0-9]+(?:\.[0-9]+)*)/);s&&(i=s[1].split(".")[0])}else if(r.includes("Firefox/")){n="firefox-mobile";const s=r.match(/Firefox\/([0-9]+(?:\.[0-9]+)*)/);s&&(i=s[1].split(".")[0])}else if(r.includes("Safari/")&&r.includes("Mobile/")){n="safari-mobile";const s=r.match(/Version\/([0-9]+(?:\.[0-9]+)*)/);s&&(i=s[1].split(".")[0])}else n="mobile";else if(r.includes("Chrome/")){n="chrome";const s=r.match(/Chrome\/([0-9]+(?:\.[0-9]+)*)/);s&&(i=s[1].split(".")[0])}else if(r.includes("Firefox/")){n="firefox";const s=r.match(/Firefox\/([0-9]+(?:\.[0-9]+)*)/);s&&(i=s[1].split(".")[0])}else if(r.includes("Safari/")&&!r.includes("Chrome/")){n="safari";const s=r.match(/Version\/([0-9]+(?:\.[0-9]+)*)/);s&&(i=s[1].split(".")[0])}if(n==="unknown"){const s=[{regex:/Chrome\/([0-9]+)/,name:"chrome"},{regex:/Firefox\/([0-9]+)/,name:"firefox"},{regex:/Safari\/([0-9]+)/,name:"safari"},{regex:/Edge\/([0-9]+)/,name:"edge"},{regex:/Opera\/([0-9]+)/,name:"opera"}];for(const o of s){const l=r.match(o.regex);if(l){n=o.name,i=l[1];break}}}}catch{}return{name:n,version:i}}function eF(){if(typeof window>"u"||!window.navigator?.userAgent)return{name:"unknown",version:"unknown"};const r=window.navigator.userAgent,e=!!navigator.brave;return ZV(r,e)}function tF(){const{name:r,version:e}=eF();return e!=="unknown"?`${r}-v${e}`:r}var nF=class extends jV{constructor(r){Ye.log(nt.EMBEDDED_PROVIDER,"Initializing Browser EmbeddedProvider",{config:r});const e=new YV,n=new KV({dbName:`phantom-embedded-sdk-${r.organizationId}`,storeName:"crypto-keys",keyName:"signing-key"}),i=tF(),s={storage:new GV,authProvider:new QV(e),urlParamsAccessor:e,stamper:n,name:i};Ye.log(nt.EMBEDDED_PROVIDER,"Detected platform",{platformName:i});const o=new XV;super(r,s,o),Ye.info(nt.EMBEDDED_PROVIDER,"Browser EmbeddedProvider initialized")}},rF=class{constructor(r){this.providers=new Map,this.currentProvider=null,this.currentProviderKey=null,this.walletId=null,this.eventListeners=new Map,this.providerForwardingSetup=new WeakSet,Ye.log(nt.PROVIDER_MANAGER,"Initializing ProviderManager",{config:r}),this.config=r,Ye.log(nt.PROVIDER_MANAGER,"Setting default provider"),this.setDefaultProvider(),Ye.info(nt.PROVIDER_MANAGER,"ProviderManager initialized",{currentProviderKey:this.currentProviderKey})}switchProvider(r,e){if(e?.embeddedWalletType&&!["app-wallet","user-wallet"].includes(e.embeddedWalletType))throw new Error(`Invalid embeddedWalletType: ${e.embeddedWalletType}. Must be "app-wallet" or "user-wallet".`);const n=this.getProviderKey(r,e?.embeddedWalletType);return this.providers.has(n)||this.createProvider(r,e?.embeddedWalletType),this.currentProvider=this.providers.get(n),this.currentProviderKey=n,this.walletId=null,this.ensureProviderEventForwarding(),this.currentProvider}getCurrentProvider(){return this.currentProvider}getCurrentProviderInfo(){if(!this.currentProviderKey)return null;const[r,e]=this.currentProviderKey.split("-");return{type:r,embeddedWalletType:e}}async connect(r){if(Ye.info(nt.PROVIDER_MANAGER,"Starting connection",{currentProviderKey:this.currentProviderKey,authOptions:r?{provider:r.provider,hasJwtToken:!!r.jwtToken}:void 0}),!this.currentProvider)throw Ye.error(nt.PROVIDER_MANAGER,"No provider selected"),new Error("No provider selected");Ye.log(nt.PROVIDER_MANAGER,"Delegating to provider connect method");const e=await this.currentProvider.connect(r);return this.walletId=e.walletId||null,Ye.log(nt.PROVIDER_MANAGER,"Connection successful, saving preferences",{walletId:this.walletId,addressCount:e.addresses?.length||0}),this.saveProviderPreference(),Ye.info(nt.PROVIDER_MANAGER,"Connect completed",{walletId:this.walletId,addresses:e.addresses}),e}async disconnect(){this.currentProvider&&(await this.currentProvider.disconnect(),this.walletId=null)}async signMessage(r){if(!this.currentProvider)throw new Error("No provider connected");return this.currentProvider.signMessage(r)}async signAndSendTransaction(r){if(!this.currentProvider)throw new Error("No provider connected");return this.currentProvider.signAndSendTransaction(r)}getAddresses(){return this.currentProvider?this.currentProvider.getAddresses():[]}isConnected(){return this.currentProvider?.isConnected()??!1}getWalletId(){return this.walletId}on(r,e){Ye.log(nt.PROVIDER_MANAGER,"Adding event listener",{event:r}),this.eventListeners.has(r)||this.eventListeners.set(r,new Set),this.eventListeners.get(r).add(e),this.ensureProviderEventForwarding()}off(r,e){Ye.log(nt.PROVIDER_MANAGER,"Removing event listener",{event:r}),this.eventListeners.has(r)&&(this.eventListeners.get(r).delete(e),this.eventListeners.get(r).size===0&&this.eventListeners.delete(r))}emit(r,e){Ye.log(nt.PROVIDER_MANAGER,"Emitting event to stored callbacks",{event:r,listenerCount:this.eventListeners.get(r)?.size||0,data:e});const n=this.eventListeners.get(r);n&&n.size>0?n.forEach(i=>{try{Ye.log(nt.PROVIDER_MANAGER,"Calling stored callback for event",{event:r}),i(e)}catch(s){Ye.error(nt.PROVIDER_MANAGER,"Event callback error",{event:r,error:s})}}):Ye.warn(nt.PROVIDER_MANAGER,"No stored callbacks for event",{event:r})}ensureProviderEventForwarding(){if(!this.currentProvider||!("on"in this.currentProvider)){Ye.warn(nt.PROVIDER_MANAGER,"Current provider does not support events",{providerType:this.getCurrentProviderInfo()?.type});return}if(this.providerForwardingSetup.has(this.currentProvider)){Ye.log(nt.PROVIDER_MANAGER,"Event forwarding already set up for current provider");return}Ye.log(nt.PROVIDER_MANAGER,"Setting up event forwarding from current provider");const r=["connect_start","connect","connect_error","disconnect","error"];for(const e of r){const n=i=>{Ye.log(nt.PROVIDER_MANAGER,"Forwarding event from provider",{event:e,data:i}),this.emit(e,i)};Ye.log(nt.PROVIDER_MANAGER,"Attaching forwarding callback for event",{event:e}),this.currentProvider.on(e,n)}this.providerForwardingSetup.add(this.currentProvider)}setDefaultProvider(){const r=this.config.providerType||"embedded",e=this.config.embeddedWalletType||"app-wallet";this.createProvider(r,e),this.switchProvider(r,{embeddedWalletType:e})}createProvider(r,e){const n=this.getProviderKey(r,e);if(this.providers.has(n))return;let i;if(r==="injected")i=new HV({solanaProvider:this.config.solanaProvider||"web3js",addressTypes:this.config.addressTypes});else{if(!this.config.apiBaseUrl||!this.config.organizationId)throw new Error("apiBaseUrl and organizationId are required for embedded provider");i=new nF({apiBaseUrl:this.config.apiBaseUrl,organizationId:this.config.organizationId,authOptions:this.config.authOptions,embeddedWalletType:e||"app-wallet",addressTypes:this.config.addressTypes,solanaProvider:this.config.solanaProvider||"web3js",appLogo:this.config.appLogo,appName:this.config.appName})}this.providers.set(n,i)}getProviderKey(r,e){return r==="injected"?"injected":`embedded-${e||"app-wallet"}`}saveProviderPreference(){try{const r=this.getCurrentProviderInfo();r&&localStorage.setItem("phantom-provider-preference",JSON.stringify(r))}catch(r){console.error("Failed to save provider preference:",r)}}},iF=class{constructor(r){if(Ye.info(nt.BROWSER_SDK,"Initializing BrowserSDK",{providerType:r.providerType,embeddedWalletType:r.embeddedWalletType,addressTypes:r.addressTypes}),!["injected","embedded"].includes(r.providerType))throw Ye.error(nt.BROWSER_SDK,"Invalid providerType",{providerType:r.providerType}),new Error(`Invalid providerType: ${r.providerType}. Must be "injected" or "embedded".`);const e=r.embeddedWalletType||"app-wallet";if(r.providerType==="embedded"&&!["app-wallet","user-wallet"].includes(e))throw Ye.error(nt.BROWSER_SDK,"Invalid embeddedWalletType",{embeddedWalletType:r.embeddedWalletType}),new Error(`Invalid embeddedWalletType: ${r.embeddedWalletType}. Must be "app-wallet" or "user-wallet".`);r.embeddedWalletType=e,Ye.log(nt.BROWSER_SDK,"Creating ProviderManager",{config:r}),this.providerManager=new rF(r),Ye.info(nt.BROWSER_SDK,"BrowserSDK initialized successfully")}async connect(r){if(Ye.info(nt.BROWSER_SDK,"Starting connect process",{options:r}),r?.providerType){if(Ye.log(nt.BROWSER_SDK,"Provider switch requested",{providerType:r.providerType,embeddedWalletType:r.embeddedWalletType}),!["injected","embedded"].includes(r.providerType))throw Ye.error(nt.BROWSER_SDK,"Invalid providerType in connect options",{providerType:r.providerType}),new Error(`Invalid providerType: ${r.providerType}. Must be "injected" or "embedded".`);if(r.embeddedWalletType&&!["app-wallet","user-wallet"].includes(r.embeddedWalletType))throw Ye.error(nt.BROWSER_SDK,"Invalid embeddedWalletType in connect options",{embeddedWalletType:r.embeddedWalletType}),new Error(`Invalid embeddedWalletType: ${r.embeddedWalletType}. Must be "app-wallet" or "user-wallet".`);Ye.log(nt.BROWSER_SDK,"Switching provider",{providerType:r.providerType,embeddedWalletType:r.embeddedWalletType}),await this.providerManager.switchProvider(r.providerType,{embeddedWalletType:r.embeddedWalletType})}Ye.log(nt.BROWSER_SDK,"Delegating to ProviderManager.connect",{authOptions:r?.authOptions});const e=await this.providerManager.connect(r?.authOptions);return Ye.info(nt.BROWSER_SDK,"Connect completed successfully",e),e}async switchProvider(r,e){if(!["injected","embedded"].includes(r))throw new Error(`Invalid providerType: ${r}. Must be "injected" or "embedded".`);await this.providerManager.switchProvider(r,e)}getCurrentProviderInfo(){return this.providerManager.getCurrentProviderInfo()}async waitForPhantomExtension(r){const e=async(n=3,i=0)=>wk()?!0:n<=0||i>=(r||3e3)?!1:new Promise(o=>{setTimeout(async()=>{const l=await e(n-1,i+100);o(l)},100)});return e()}async disconnect(){return this.providerManager.disconnect()}async signMessage(r){Ye.info(nt.BROWSER_SDK,"Signing message",{message:r.message,networkId:r.networkId});const e=await this.providerManager.signMessage(r);return Ye.info(nt.BROWSER_SDK,"Message signed successfully",{message:r.message,networkId:r.networkId,result:e}),e}async signAndSendTransaction(r){Ye.info(nt.BROWSER_SDK,"Signing and sending transaction",{networkId:r.networkId});const e=await this.providerManager.signAndSendTransaction(r);return Ye.info(nt.BROWSER_SDK,"Transaction signed and sent successfully",{networkId:r.networkId,result:e}),e}getAddresses(){return this.providerManager.getAddresses()}isConnected(){return this.providerManager.isConnected()}getWalletId(){return this.providerManager.getWalletId()}on(r,e){Ye.log(nt.BROWSER_SDK,"Adding event listener",{event:r}),this.providerManager.on(r,e)}off(r,e){Ye.log(nt.BROWSER_SDK,"Removing event listener",{event:r}),this.providerManager.off(r,e)}async autoConnect(){Ye.log(nt.BROWSER_SDK,"Attempting auto-connect");const r=this.providerManager.getCurrentProvider();r&&"autoConnect"in r?await r.autoConnect():Ye.warn(nt.BROWSER_SDK,"Current provider does not support auto-connect",{providerType:this.getCurrentProviderInfo()?.type})}enableDebug(){Ye.enable(),Ye.info(nt.BROWSER_SDK,"Debug logging enabled")}disableDebug(){Ye.disable()}setDebugLevel(r){Ye.setLevel(r),Ye.info(nt.BROWSER_SDK,"Debug level updated",{level:r})}setDebugCallback(r){Ye.setCallback(r),Ye.info(nt.BROWSER_SDK,"Debug callback updated")}configureDebug(r){r.enabled!==void 0&&(r.enabled?this.enableDebug():this.disableDebug()),r.level!==void 0&&this.setDebugLevel(r.level),r.callback!==void 0&&this.setDebugCallback(r.callback)}},Ek=pe.createContext(void 0);function sF({children:r,config:e,debugConfig:n}){const[i,s]=pe.useState(!1),[o,l]=pe.useState(!1),[u,d]=pe.useState(null),[f,p]=pe.useState([]),[v,E]=pe.useState(null),[S,R]=pe.useState(e.providerType||null),[T,M]=pe.useState(!1),[W,z]=pe.useState(null),j=pe.useMemo(()=>({...e,providerType:e.providerType||"embedded"}),[e]);pe.useEffect(()=>{const le=new iF(j),de=()=>{l(!0),d(null)},Z=async()=>{try{s(!0),l(!1);const U=le.getCurrentProviderInfo();R(U?.type||null);const q=await le.getAddresses();p(q),E(le.getWalletId())}catch(U){console.error("Error connecting:",U);try{await le.disconnect()}catch(q){console.error("Error disconnecting:",q)}}},$=U=>{l(!1),s(!1),d(new Error(U.error||"Connection failed"))},D=()=>{s(!1),l(!1),d(null),p([]),E(null)};return le.on("connect_start",de),le.on("connect",Z),le.on("connect_error",$),le.on("disconnect",D),z(le),()=>{le.off("connect_start",de),le.off("connect",Z),le.off("connect_error",$),le.off("disconnect",D)}},[j]),pe.useEffect(()=>{!W||!n||W.configureDebug(n)},[W,n]),pe.useEffect(()=>{if(!W)return;(async()=>{try{const de=await W.waitForPhantomExtension(1e3);M(de)}catch(de){console.error("Error checking Phantom extension:",de),M(!1)}e.autoConnect!==!1&&W.autoConnect().catch(()=>{})})()},[W,e.autoConnect]);const se=pe.useMemo(()=>({sdk:W,isConnected:i,isConnecting:o,connectError:u,addresses:f,walletId:v,currentProviderType:S,isPhantomAvailable:T}),[W,i,o,u,f,v,S,T]);return me.jsx(Ek.Provider,{value:se,children:r})}function M1(){const r=pe.useContext(Ek);if(!r)throw new Error("usePhantom must be used within a PhantomProvider");return r}function Xq(){const{sdk:r,isConnecting:e,connectError:n,currentProviderType:i,isPhantomAvailable:s}=M1();return{connect:pe.useCallback(async l=>{if(!r)throw new Error("SDK not initialized");try{return await r.connect(l)}catch(u){throw console.error("Error connecting to Phantom:",u),u}},[r]),isConnecting:e,error:n,currentProviderType:i,isPhantomAvailable:s}}function Zq(){const{sdk:r}=M1(),[e,n]=pe.useState(!1),[i,s]=pe.useState(null);return{disconnect:pe.useCallback(async()=>{if(!r)throw new Error("SDK not initialized");n(!0),s(null);try{await r.disconnect()}catch(l){throw s(l),l}finally{n(!1)}},[r]),isDisconnecting:e,error:i}}function eK(){const{addresses:r,isConnected:e}=M1();return e?r:null}const wu={es:{"team-title":"Conoce al Equipo","team-subtitle":"Un grupo dedicado de visionarios y expertos que trabajan para construir un futuro descentralizado en Solana.","team-jonathan-name":"Jonathan","team-jonathan-role":"CEO & Founder","team-jonathan-desc":"Apasionado por blockchain. Lder visionario.","team-photo":"Foto","team-comingSoon":"PRXIMAMENTE","presale-loading-txs":"Cargando transacciones...","airdrop-twitter-placeholder":"Usuario de Twitter (sin @)","airdrop-wallet-placeholder":"Tu wallet de Solana","airdrop-btn-participate":"Participar en el Airdrop","airdrop-title":"Airdrop","airdrop-hero-title":"nete al Amanecer de Solstice: Tu Participacin en la Gobernanza Comienza Aqu","airdrop-hero-desc1":"En Solstice, creemos firmemente que el futuro de Solana se construye de manera colectiva. Nuestro airdrop no es solo una distribucin de tokens; es una invitacin para que te conviertas en un miembro activo y fundamental de nuestro ecosistema.","airdrop-why-title":"Por qu unirte a nuestro Airdrop?","airdrop-why-desc":"Este es tu momento para ser parte del cambio. Al reclamar tus tokens $SOLS, no solo obtienes una pieza de nuestro proyecto, sino que adquieres el poder de influir directamente en las decisiones de la comunidad.","airdrop-why-pioneer":"S un Pionero: Posicinate como uno de los primeros en adoptar $SOLS y nete a una comunidad que valora la participacin.","airdrop-why-governance":"Gobernanza Activa: Tus tokens te otorgan derechos de voto para dar forma al futuro de Solstice, desde las propuestas de desarrollo hasta las asignaciones de fondos.","airdrop-why-utility":"Utilidad Real: Accede a beneficios exclusivos y s parte de la creacin de un ecosistema que prioriza la utilidad sobre la especulacin.","airdrop-how-title":"Cmo Reclamar tus $SOLS?","airdrop-how-desc":"Pronto anunciaremos los pasos detallados para reclamar tus tokens. Sigue nuestras redes sociales para no perderte las ltimas actualizaciones.","airdrop-join-desc":"nete a nosotros en este viaje! Juntos, iluminaremos el camino hacia una comunidad ms fuerte y descentralizada en Solana.","airdrop-steps-title":"Aceptar reglas del Airdrop.","airdrop-steps-desc":"Para participar debes seguir estos pasos:","airdrop-step1":"1. Sigue nuestra cuenta de Twitter/X","airdrop-step2":"2. Haz retweet al ltimo post fijado","airdrop-checkbox-follow":"Aceptar reglas del Airdrop.","airdrop-checkbox-retweet":"Aceptar trminos y condiciones.","airdrop-continue":"Continuar","airdrop-participants-title":"Participantes","airdrop-table-twitter":"Usuario Twitter","airdrop-table-wallet":"Wallet",disconnect:"Desconectar","pay-commission":"Pagar comisin 0.001 SOL",connect_phantom:"Conectar Phantom","presale-recent-purchases-title":"Compras recientes","presale-no-recent-purchases":"No hay compras recientes.","presale-launch-label":"Preventa de Solstice 200.000.000 SOLS","phantom-connected":"Phantom conectada","presale-buy":"Comprar","presale-buy-loading":"Procesando...","page-title":"Solstice - Ecosistema DAO en Solana","nav-home":"Inicio","nav-presale":"Preventa","nav-whitepaper":"Libro Blanco","nav-team":"Equipo","nav-dao":"DAO","hero-title":"Construyendo el futuro de la gobernanza comunitaria en Solana","hero-subtitle":"Solstice es la nueva generacin de proyectos DeFi, empoderando a la comunidad con transparencia y control total sobre el ecosistema.","hero-btn-presale":"Participa en la Preventa","hero-btn-whitepaper":"Lee el Libro Blanco","features-title":"Nuestras Caractersticas","feature1-title":"Gobernanza DAO","feature1-text":"La comunidad controla el futuro del proyecto a travs de un modelo de gobernanza descentralizada.","feature2-title":"Tokenoma Justa","feature2-text":"Una distribucin de tokens que recompensa la participacin y promueve la sostenibilidad a largo plazo.","feature3-title":"Transparencia Total","feature3-text":"Cada decisin y transaccin es visible en la blockchain, asegurando la mxima transparencia.","tokenomics-title":"Tokenoma ($SOLS)","tokenomics-intro":"El token $SOLS es el corazn del ecosistema Solstice. Su tokenoma est diseada para incentivar la participacin y garantizar un crecimiento saludable.","tokenomics-total-supply":"Suministro Total: 1,000,000,000 $SOLS","tokenomics-distribution":"Distribucin:","tokenomics-presale":"Preventa (20%): Destinado a la financiacin inicial del proyecto.","tokenomics-rewards":"Recompensas de la Comunidad (30%): Fomenta el crecimiento y la lealtad.","tokenomics-treasury":"Fondo de Tesorera de la DAO (35%): Controlado por la comunidad para financiar futuras iniciativas.","tokenomics-liquidity":"Liquidez Inicial (10%): Para garantizar una liquidez robusta en los intercambios.","tokenomics-airdrop":"Airdrop (5%): Repartido entre 500,000 personas, 100 SOLS cada una.","presale-page-title":"Oficial $SOLS Preventa","presale-page-subtitle":"Asegura tu participacin en el futuro del ecosistema Solstice. El tiempo es limitado!","presale-price-label":"Precio por Token: 0,0001 SOLS","presale-raised":"0 SOL Recaudado","presale-goal":"20,000 SOL Objetivo","presale-status-title":"Prximamente disponible, esperando lanzamiento","presale-disclaimer":"Al participar, aceptas los trminos y condiciones de la preventa. Por favor, lee nuestro Libro Blanco para ms detalles.","whitepaper-page-title":"Libro Blanco de Solstice","whitepaper-page-subtitle":"El documento fundamental que detalla la visin, la tecnologa y el futuro de nuestro proyecto en la red de Solana.","team-page-title":"Conoce al Equipo","team-page-subtitle":"Un grupo dedicado de visionarios y expertos que trabajan para construir un futuro descentralizado en Solana.","dao-page-title":"Panel de Control de la DAO","dao-page-subtitle":"Participa en la toma de decisiones y vota en las propuestas que darn forma al futuro de Solstice.","dao-wallet-status-title":"Estado de la Billetera","dao-btn-connect-wallet":"Conectar Billetera Solana","dao-btn-create-proposal":"Crear Nueva Propuesta","dao-active-proposals-title":"Propuestas Activas","proposal-form-page-title":"Crear Nueva Propuesta","proposal-form-page-subtitle":"Presenta una idea para la comunidad. Si es aprobada, ser implementada.","proposal-form-title-label":"Ttulo de la Propuesta","proposal-form-desc-label":"Descripcin Completa","proposal-form-btn-submit":"Enviar Propuesta","footer-text":" 2024 Solstice. Todos los derechos reservados.","language-selector":"Idioma:",connected:"Conectada","wallet-connected":"Billetera Conectada:","wallet-connect-success":"Billetera conectada con xito.","phantom-not-found":"Phantom Wallet no encontrada! Por favor, instlala para continuar.","phantom-connect-error":"No se pudo conectar con Phantom. Intenta de nuevo.","presale-connect-required":"Conecta tu wallet Phantom para participar.","presale-amount-invalid":"Introduce una cantidad vlida.","presale-amount-placeholder":"Cantidad a comprar","presale-max-tokens-wallet":"Mximo = 4,000,000 tokens solstice por cartera","presale-min-label-05":"Mnimo de compra: 0.5 SOL","presale-min-label-025":"Mnimo de compra: 0.25 SOL","presale-min-label-01":"Mnimo de compra: 0.1 SOL","presale-min-label-001":"Mnimo de compra: 0.01 SOL","presale-success":"Transaccin enviada correctamente! Recibirs tus $SOLS automticamente en tu wallet Phantom tras la confirmacin.","presale-tx-error":"Error en la transaccin. Intenta de nuevo.","proposal-creation-success":"Propuesta creada con xito!","member1-name":"PROXIMAMENTE","member1-role":"PROXIMAMENTE","member1-bio":"PROXIMAMENTE","member2-name":"PROXIMAMENTE","member2-role":"PROXIMAMENTE","member2-bio":"PROXIMAMENTE","member3-name":"PROXIMAMENTE","member3-role":"PROXIMAMENTE","member3-bio":"PROXIMAMENTE","member4-name":"PROXIMAMENTE","member4-role":"PROXIMAMENTE","member4-bio":"PROXIMAMENTE","dao-connecting":"Conectando...","dao-loading-proposals":"Cargando propuestas...","dao-no-proposals":"No hay propuestas activas en este momento.","dao-proposal-status":"Estado:","dao-proposal-status-active":"Activa","dao-proposal-status-voted":"Votado!","dao-proposal-votes":"Votos:","dao-wallet-connect-rejected":"Conexin de billetera rechazada.","dao-wallet-connect-error":"Error al conectar la billetera.","proposal-form-title-placeholder":"Ttulo de la Propuesta","proposal-form-desc-placeholder":"Descripcin Completa","proposal-form-title-desc-empty":"El ttulo y la descripcin no pueden estar vacos.","proposal-creation-error":"Error al crear la propuesta:","back-to-top":"Arriba","back-to-top-aria":"Volver arriba","copy-link":"Copiar enlace","link-copied":"Enlace copiado al portapapeles","copy-failed":"No se pudo copiar el enlace",whitepaper:{tocTitle:"ndice",toc:["1. Introduccin: El Problema y Nuestra Solucin","2. Visin y Misin del Ecosistema","3. Tecnologa y Arquitectura de la Blockchain","4. Tokenoma Detallada ($SOLS)","5. Hoja de Ruta Completa y Futuros Hitos","6. Mecanismos de Gobernanza Descentralizada","7. Seguridad y Auditoras del Protocolo","8. Conclusin: El Futuro de Solstice","9. Transparencia de tokens $SOLS","10. Preventa: Cmo Participar, Requisitos y Seguridad","11. DAO: Funcionamiento, Propuestas y Votaciones","12. Preguntas Frecuentes (FAQ)","13. Condiciones Legales, Trminos y Privacidad"],sections:{presale:{title:"Preventa: Cmo Participar, Requisitos y Seguridad",content:["<b>Cmo participar?</b> Para unirse a la preventa, simplemente conecta tu billetera Phantom y sigue las instrucciones en la pestaa de preventa. Solo se permite la conexin mediante Phantom para mxima seguridad y facilidad de uso.","<b>Requisitos:</b> Debes tener una billetera Phantom activa y saldo suficiente en SOL para cubrir la compra y las comisiones de red.","<b>Seguridad:</b> Todas las transacciones se realizan en la blockchain de Solana, garantizando transparencia y seguridad. No almacenamos claves privadas ni accedemos a tus fondos.","El progreso de la preventa y los lmites de compra se muestran en tiempo real en la plataforma."]},dao:{title:"DAO: Funcionamiento, Propuestas y Votaciones",content:["<b>Creacin de propuestas:</b> Para crear una propuesta, debes conectar tu billetera Phantom y pagar una comisin de 0.001 SOL. El botn de crear propuesta solo se habilita tras el pago de la comisin.","<b>Votacin:</b> Cada wallet puede votar una sola vez por propuesta, garantizando un proceso justo y descentralizado. El recuento de votos y el estado de cada propuesta se muestran en tiempo real.","La DAO permite a la comunidad tomar decisiones clave sobre el futuro del proyecto de forma transparente y segura."]},faq:{title:"Preguntas Frecuentes (FAQ)",content:["<b>Qu billetera puedo usar?</b> Solo Phantom es compatible para mxima seguridad y experiencia de usuario.","<b>Cmo participo en la preventa?</b> Conecta tu Phantom y sigue las instrucciones en la pestaa de preventa.","<b>Cmo creo una propuesta en la DAO?</b> Conecta tu Phantom, paga la comisin y rellena el formulario de propuesta.","<b>Puedo votar varias veces?</b> No, solo puedes votar una vez por propuesta con cada wallet.","<b>Mis fondos estn seguros?</b> S, todas las operaciones se realizan en la blockchain de Solana y nunca almacenamos tus claves privadas."]},legal:{title:"Condiciones Legales, Trminos y Privacidad",content:["El uso de la plataforma implica la aceptacin de los trminos y condiciones publicados. La plataforma no solicita ni almacena datos personales sensibles. Todas las operaciones se realizan en la blockchain de Solana.","Para ms informacin sobre privacidad y trminos legales, consulta la seccin correspondiente en la web oficial o contacta con el equipo de Solstice."]},transparencia:{title:"Transparencia de tokens $SOLS",content:'<b>Wallet donde estn los tokens de la preventa:</b><br/><span class="break-all font-mono text-[#66fcf1]">CgAkPzZpdKAY9Cwzd2AiKmrRHgAK6DyVFn1n6VCQknEb</span><br/>Esta wallet contiene los $SOLS que se estn vendiendo actualmente en la preventa.<br/><br/><b>Wallet donde estn el resto de tokens $SOLS:</b><br/><span class="break-all font-mono text-[#66fcf1]">EZwVQKnP5c3K2etpt24VjE1hG3ycq2SZe52NUcZpgo2F</span><br/>Aqu se guardan los tokens que no forman parte de la preventa, hasta la creacin del pool de liquidez.<br/><br/>Ambas direcciones pueden ser auditadas en cualquier explorador de Solana.'},intro:{title:"1. Introduccin: El Problema y Nuestra Solucin",content:"La mayora de los proyectos DeFi se enfrentan a problemas de centralizacin, falta de transparencia y una distribucin de valor injusta. Solstice aborda estos desafos aprovechando la infraestructura de alta velocidad de Solana para crear un ecosistema totalmente descentralizado..."},vision:{title:"2. Visin y Misin del Ecosistema",content:"Nuestra visin es que Solstice se convierta en la plataforma de lanzamiento de referencia para proyectos transparentes y orientados a la comunidad en la red de Solana..."},tech:{title:"3. Tecnologa y Arquitectura de la Blockchain",content:"Solstice est construido sobre la blockchain de Solana, una de las redes ms rpidas y de menor costo del sector..."},tokenomics:{title:"4. Tokenoma Detallada ($SOLS)",totalSupply:"Suministro Total: 1,000,000,000 $SOLS",distribution:"Distribucin:",presale:"Preventa (20%): Destinado a la financiacin inicial del proyecto.",rewards:"Recompensas de la Comunidad (30%): Fomenta el crecimiento y la lealtad.",treasury:"Fondo de Tesorera de la DAO (35%): Controlado por la comunidad para financiar futuras iniciativas.",liquidity:"Liquidez Inicial (10%): Para garantizar una liquidez robusta en los intercambios.",airdrop:"Airdrop (5%): Repartido entre 500,000 personas, 100 SOLS cada una."},roadmap:{title:"5. Hoja de Ruta Completa y Futuros Hitos",phase1:"Fase 1 (Q3 2024): Lanzamiento y Establecimiento...",phase2:"Fase 2 (Q4 2024): Expansin del Ecosistema...",phase3:"Fase 3 (Q1 2025): Madurez y Adopcin..."},governance:{title:"6. Mecanismos de Gobernanza Descentralizada",content:"La gobernanza de Solstice se ejecutar a travs de una DAO, empoderando a los titulares de $SOLS para tomar decisiones crticas..."},security:{title:"7. Seguridad y Auditoras del Protocolo",content:"La seguridad es nuestra mxima prioridad. Todos los contratos inteligentes de Solstice sern sometidos a una auditora..."},conclusion:{title:"8. Conclusin: El Futuro de Solstice",content:"Solstice representa un nuevo amanecer para las finanzas descentralizadas en Solana..."}}}},en:{"team-title":"Meet the Team","team-subtitle":"A dedicated group of visionaries and experts working to build a decentralized future on Solana.","team-jonathan-name":"Jonathan","team-jonathan-role":"CEO & Founder","team-jonathan-desc":"Passionate about blockchain. Visionary leader.","team-photo":"Photo","team-comingSoon":"COMING SOON","tokenomics-airdrop":"Airdrop (5%): Distributed among 500,000 people, 100 SOLS each.","presale-loading-txs":"Loading transactions...","airdrop-twitter-placeholder":"Twitter user (without @)","airdrop-wallet-placeholder":"Your Solana wallet","airdrop-btn-participate":"Participate in the Airdrop","airdrop-title":"Airdrop","airdrop-hero-title":"Join the Dawn of Solstice: Your Governance Journey Starts Here","airdrop-hero-desc1":"At Solstice, we firmly believe the future of Solana is built collectively. Our airdrop is not just a token distribution; it is an invitation to become an active and essential member of our ecosystem.","airdrop-why-title":"Why join our Airdrop?","airdrop-why-desc":"This is your moment to be part of the change. By claiming your $SOLS tokens, you not only get a piece of our project, but you gain the power to directly influence community decisions.","airdrop-why-pioneer":"Be a Pioneer: Position yourself as one of the first to adopt $SOLS and join a community that values participation.","airdrop-why-governance":"Active Governance: Your tokens grant you voting rights to shape the future of Solstice, from development proposals to fund allocations.","airdrop-why-utility":"Real Utility: Access exclusive benefits and be part of building an ecosystem that prioritizes utility over speculation.","airdrop-how-title":"How to Claim your $SOLS?","airdrop-how-desc":"We will soon announce the detailed steps to claim your tokens. Follow our social networks to stay up to date.","airdrop-join-desc":"Join us on this journey! Together, we will light the way to a stronger, more decentralized community on Solana.","airdrop-steps-title":"Participate in our airdrop.","airdrop-steps-desc":"To participate you must follow these steps:","airdrop-step1":"1. Follow our Twitter/X account","airdrop-step2":"2. Retweet the latest pinned post","airdrop-checkbox-follow":"Accept the Airdrop rules.","airdrop-checkbox-retweet":"Accept terms and conditions.","airdrop-continue":"Continue","airdrop-participants-title":"Participants","airdrop-table-twitter":"Twitter User","airdrop-table-wallet":"Wallet",disconnect:"Disconnect","pay-commission":"Pay 0.001 SOL fee",connect_phantom:"Connect Phantom","presale-recent-purchases-title":"Recent purchases","presale-no-recent-purchases":"No recent purchases.","presale-launch-label":"Solstice Presale 200,000,000 SOLS","phantom-connected":"Phantom connected","presale-buy":"Buy","presale-buy-loading":"Processing...","page-title":"Solstice - DAO Ecosystem on Solana","nav-home":"Home","nav-presale":"Presale","nav-whitepaper":"Whitepaper","nav-team":"Team","nav-dao":"DAO","hero-title":"Building the future of community governance on Solana","hero-subtitle":"Solstice is the next generation of DeFi projects, empowering the community with transparency and full control over the ecosystem.","hero-btn-presale":"Join the Presale","hero-btn-whitepaper":"Read the Whitepaper","features-title":"Our Features","feature1-title":"DAO Governance","feature1-text":"The community controls the future of the project through a decentralized governance model.","feature2-title":"Fair Tokenomics","feature2-text":"A token distribution that rewards participation and promotes long-term sustainability.","feature3-title":"Total Transparency","feature3-text":"Every decision and transaction is visible on the blockchain, ensuring maximum transparency.","tokenomics-title":"Tokenomics ($SOLS)","tokenomics-intro":"The $SOLS token is the heart of the Solstice ecosystem. Its tokenomics are designed to incentivize participation and ensure healthy growth.","tokenomics-total-supply":"Total Supply: 1,000,000,000 $SOLS.","tokenomics-distribution":"Distribution:","tokenomics-presale":"Presale (20%): Initial funding and marketing.","tokenomics-rewards":"Community Rewards (30%): Fosters growth and loyalty.","tokenomics-treasury":"DAO Treasury Fund (40%): For future development and sustainability.","tokenomics-liquidity":"Initial Liquidity (10%): Ensures market stability.","presale-page-title":"Official $SOLS Presale","presale-page-subtitle":"Secure your stake in the future of the Solstice ecosystem. Time is limited!","presale-price-label":"Price per Token: 0.0001 SOLS","presale-raised":"0 SOL Raised","presale-goal":"20,000 SOL Goal","presale-status-title":"Coming soon, awaiting launch","presale-disclaimer":"By participating, you agree to the terms and conditions of the presale. Please read our Whitepaper for more details.","whitepaper-page-title":"Solstice Whitepaper","whitepaper-page-subtitle":"The foundational document detailing the vision, technology, and future of our project on the Solana network.","team-page-title":"Meet the Team","team-page-subtitle":"A dedicated group of visionaries and experts working to build a decentralized future on Solana.","dao-page-title":"DAO Dashboard","dao-page-subtitle":"Participate in decision-making and vote on proposals that will shape the future of Solstice.","dao-wallet-status-title":"Wallet Status","dao-btn-connect-wallet":"Connect Solana Wallet","dao-btn-create-proposal":"Create New Proposal","dao-active-proposals-title":"Active Proposals","proposal-form-page-title":"Create New Proposal","proposal-form-page-subtitle":"Submit an idea for the community. If approved, it will be implemented.","proposal-form-title-label":"Proposal Title","proposal-form-desc-label":"Full Description","proposal-form-btn-submit":"Submit Proposal","footer-text":" 2024 Solstice. All rights reserved.","language-selector":"Language:",connected:"Connected","wallet-connected":"Wallet Connected:","wallet-connect-success":"Wallet connected successfully.","phantom-not-found":"Phantom Wallet not found! Please install it to continue.","phantom-connect-error":"Could not connect to Phantom. Please try again.","presale-connect-required":"Connect your Phantom wallet to participate.","presale-amount-invalid":"Enter a valid amount.","presale-amount-placeholder":"Amount to buy","presale-max-tokens-wallet":"Max = 4,000,000 solstice tokens per wallet","presale-min-label-05":"Minimum purchase: 0.5 SOL","presale-min-label-025":"Minimum purchase: 0.25 SOL","presale-min-label-01":"Minimum purchase: 0.1 SOL","presale-min-label-001":"Minimum purchase: 0.01 SOL","presale-success":"Transaction sent successfully! You will receive your $SOLS automatically in your Phantom wallet after confirmation.","presale-tx-error":"Transaction error. Please try again.","proposal-creation-success":"Proposal created successfully!","member1-name":"COMING SOON","member1-role":"COMING SOON","member1-bio":"COMING SOON","member2-name":"COMING SOON","member2-role":"COMING SOON","member2-bio":"COMING SOON","member3-name":"COMING SOON","member3-role":"COMING SOON","member3-bio":"COMING SOON","member4-name":"COMING SOON","member4-role":"COMING SOON","member4-bio":"COMING SOON","dao-connecting":"Connecting...","dao-loading-proposals":"Loading proposals...","dao-no-proposals":"No active proposals at this time.","dao-proposal-status":"Status:","dao-proposal-status-active":"Active","dao-proposal-status-voted":"Voted!","dao-proposal-votes":"Votes:","dao-wallet-connect-rejected":"Wallet connection rejected.","dao-wallet-connect-error":"Error connecting wallet.","proposal-form-title-placeholder":"Proposal Title","proposal-form-desc-placeholder":"Full Description","proposal-form-title-desc-empty":"Title and description cannot be empty.","proposal-creation-error":"Error creating proposal:","back-to-top":"Back to top","back-to-top-aria":"Back to top","copy-link":"Copy link","link-copied":"Link copied to clipboard","copy-failed":"Failed to copy link",whitepaper:{tocTitle:"Table of Contents",toc:["1. Introduction: The Problem and Our Solution","2. Vision and Mission of the Ecosystem","3. Blockchain Technology and Architecture","4. Detailed Tokenomics ($SOLS)","5. Complete Roadmap and Future Milestones","6. Decentralized Governance Mechanisms","7. Protocol Security and Audits","8. Conclusion: The Future of Solstice","9. Token $SOLS Transparency","10. Presale: How to Participate, Requirements & Security","11. DAO: Operation, Proposals & Voting","12. Frequently Asked Questions (FAQ)","13. Legal Terms, Conditions & Privacy"],sections:{intro:{title:"1. Introduction: The Problem and Our Solution",content:"Most DeFi projects face issues of centralization, lack of transparency, and unfair value distribution. Solstice addresses these challenges by leveraging Solana's high-speed infrastructure to create a fully decentralized ecosystem..."},vision:{title:"2. Vision and Mission of the Ecosystem",content:"Our vision is for Solstice to become the reference launchpad for transparent, community-driven projects on the Solana network..."},tech:{title:"3. Blockchain Technology and Architecture",content:"Solstice is built on the Solana blockchain, one of the fastest and lowest-cost networks in the industry..."},tokenomics:{title:"4. Detailed Tokenomics ($SOLS)",totalSupply:"Total Supply: 1,000,000,000 $SOLS",distribution:"Distribution:",presale:"Presale (20%): Allocated for initial project funding.",rewards:"Community Rewards (30%): Fosters growth and loyalty.",treasury:"DAO Treasury Fund (35%): Controlled by the community to finance future initiatives.",liquidity:"Initial Liquidity (10%): To ensure robust liquidity on exchanges.",airdrop:"Airdrop (5%): Distributed among 500,000 people, 100 SOLS each."},roadmap:{title:"5. Complete Roadmap and Future Milestones",phase1:"Phase 1 (Q3 2024): Launch and Establishment...",phase2:"Phase 2 (Q4 2024): Ecosystem Expansion...",phase3:"Phase 3 (Q1 2025): Maturity and Adoption..."},governance:{title:"6. Decentralized Governance Mechanisms",content:"Solstice governance will be executed through a DAO, empowering $SOLS holders to make critical decisions..."},security:{title:"7. Protocol Security and Audits",content:"Security is our top priority. All Solstice smart contracts will undergo an audit..."},conclusion:{title:"8. Conclusion: The Future of Solstice",content:"Solstice represents a new dawn for decentralized finance on Solana..."},transparencia:{title:"9. Token $SOLS Transparency",content:'<b>Wallet holding the presale tokens:</b><br/><span class="break-all font-mono text-[#66fcf1]">CgAkPzZpdKAY9Cwzd2AiKmrRHgAK6DyVFn1n6VCQknEb</span><br/>This wallet contains the $SOLS currently being sold in the presale.<br/><br/><b>Wallet holding the remaining $SOLS tokens:</b><br/><span class="break-all font-mono text-[#66fcf1]">EZwVQKnP5c3K2etpt24VjE1hG3ycq2SZe52NUcZpgo2F</span><br/>Here are stored the tokens not included in the presale, until the liquidity pool is created.<br/><br/>Both addresses can be audited on any Solana explorer.'},presale:{title:"10. Presale: How to Participate, Requirements & Security",content:["<b>How to participate?</b> To join the presale, simply connect your Phantom wallet and follow the instructions in the presale tab. Only Phantom is allowed for maximum security and ease of use.","<b>Requirements:</b> You must have an active Phantom wallet and enough SOL to cover the purchase and network fees.","<b>Security:</b> All transactions are performed on the Solana blockchain, ensuring transparency and security. We do not store private keys or access your funds.","Presale progress and purchase limits are displayed in real time on the platform."]},dao:{title:"11. DAO: Operation, Proposals & Voting",content:["<b>Proposal creation:</b> To create a proposal, connect your Phantom wallet and pay a 0.001 SOL fee. The create proposal button is only enabled after the fee is paid.","<b>Voting:</b> Each wallet can vote only once per proposal, ensuring a fair and decentralized process. Vote counts and proposal status are shown in real time.","The DAO allows the community to make key decisions about the projects future in a transparent and secure way."]},faq:{title:"12. Frequently Asked Questions (FAQ)",content:["<b>Which wallet can I use?</b> Only Phantom is supported for maximum security and user experience.","<b>How do I participate in the presale?</b> Connect your Phantom and follow the instructions in the presale tab.","<b>How do I create a proposal in the DAO?</b> Connect your Phantom, pay the fee, and fill out the proposal form.","<b>Can I vote multiple times?</b> No, you can only vote once per proposal with each wallet.","<b>Are my funds safe?</b> Yes, all operations are performed on the Solana blockchain and we never store your private keys."]},legal:{title:"13. Legal Terms, Conditions & Privacy",content:["Using the platform implies acceptance of the published terms and conditions. The platform does not request or store sensitive personal data. All operations are performed on the Solana blockchain.","For more information about privacy and legal terms, see the relevant section on the official website or contact the Solstice team."]}}}},zh:{"team-jonathan-name":"Jonathan","team-jonathan-role":" & ","team-jonathan-desc":"","team-title":"","team-subtitle":" Solana ","team-photo":"","team-comingSoon":"","tokenomics-airdrop":" (5%) 500,000  100 SOLS","presale-loading-txs":"","airdrop-twitter-placeholder":"Twitter @","airdrop-wallet-placeholder":" Solana ","airdrop-btn-participate":"","airdrop-title":"","airdrop-hero-title":" Solstice ","airdrop-hero-desc1":" Solstice Solana ","airdrop-why-title":"","airdrop-why-desc":" $SOLS ","airdrop-why-pioneer":":  $SOLS ","airdrop-why-governance":":  Solstice ","airdrop-why-utility":": ","airdrop-how-title":" $SOLS","airdrop-how-desc":"","airdrop-join-desc":" Solana ","airdrop-steps-title":"","airdrop-steps-desc":"","airdrop-step1":"1.  Twitter/X ","airdrop-step2":"2. ","airdrop-checkbox-follow":"","airdrop-checkbox-retweet":"","airdrop-continue":"","airdrop-participants-title":"","airdrop-table-twitter":"Twitter ","airdrop-table-wallet":"",disconnect:"","pay-commission":" 0.001 SOL ",connect_phantom:" Phantom","presale-recent-purchases-title":"","presale-no-recent-purchases":"","presale-launch-label":"Solstice  200,000,000 SOLS","phantom-connected":"Phantom ","presale-buy":"","presale-buy-loading":"...","page-title":"Solstice - SolanaDAO","nav-home":"","nav-presale":"","nav-whitepaper":"","nav-team":"","nav-dao":"DAO","hero-title":"Solana","hero-subtitle":"SolsticeDeFi","hero-btn-presale":"","hero-btn-whitepaper":"","features-title":"","feature1-title":"DAO","feature1-text":"","feature2-title":"","feature2-text":"","feature3-title":"","feature3-text":"","tokenomics-title":" ($SOLS)","tokenomics-intro":"$SOLS  Solstice ","tokenomics-total-supply":"1,000,000,000 $SOLS","tokenomics-distribution":"","tokenomics-presale":" (20%)","tokenomics-rewards":" (30%)","tokenomics-treasury":"DAO  (40%)","tokenomics-liquidity":" (10%)","presale-page-title":" $SOLS ","presale-page-subtitle":" Solstice ","presale-price-label":"0.0001 SOLS","presale-raised":" 0 SOL","presale-goal":"20,000 SOL ","presale-status-title":"","presale-disclaimer":"","whitepaper-page-title":"Solstice ","whitepaper-page-subtitle":" Solana ","team-page-title":"","team-page-subtitle":" Solana ","dao-page-title":"DAO ","dao-page-subtitle":" Solstice ","dao-wallet-status-title":"","dao-btn-connect-wallet":" Solana ","dao-btn-create-proposal":"","dao-active-proposals-title":"","proposal-form-page-title":"","proposal-form-page-subtitle":"","proposal-form-title-label":"","proposal-form-desc-label":"","proposal-form-btn-submit":"","footer-text":" 2024 Solstice. ","language-selector":"",connected:"","wallet-connected":":","wallet-connect-success":"","phantom-not-found":" Phantom ","phantom-connect-error":" Phantom","presale-connect-required":" Phantom ","presale-amount-invalid":"","presale-amount-placeholder":"","presale-max-tokens-wallet":" 4,000,000  solstice ","presale-min-label-05":"0.5 SOL","presale-min-label-025":"0.25 SOL","presale-min-label-01":"0.1 SOL","presale-min-label-001":"0.01 SOL","presale-success":" $SOLS  Phantom ","presale-tx-error":"","proposal-creation-success":"","member1-name":"","member1-role":"","member1-bio":"","member2-name":"","member2-role":"","member2-bio":"","member3-name":"","member3-role":"","member3-bio":"","member4-name":"","member4-role":"","member4-bio":"","dao-connecting":"...","dao-loading-proposals":"...","dao-no-proposals":"","dao-proposal-status":"","dao-proposal-status-active":"","dao-proposal-status-voted":"","dao-proposal-votes":"","dao-wallet-connect-rejected":"","dao-wallet-connect-error":"","proposal-form-title-placeholder":"","proposal-form-desc-placeholder":"","proposal-form-title-desc-empty":"","proposal-creation-error":"","back-to-top":"","back-to-top-aria":"","copy-link":"","link-copied":"","copy-failed":"",whitepaper:{tocTitle:"",toc:["1. ","2. ","3. ","4. $SOLS","5. ","6. ","7. ","8. Solstice ","9. SOLS ","10. ","11. DAO","12.  (FAQ)","13. "],sections:{presale:{title:"",content:["<b></b>  Phantom  Phantom","<b></b>  Phantom  SOL ","<b></b>  Solana ",""]},dao:{title:"DAO",content:["<b></b>  Phantom  0.001 SOL ","<b></b> ","DAO "]},faq:{title:" (FAQ)",content:["<b></b>  Phantom","<b></b>  Phantom ","<b> DAO </b>  Phantom","<b></b> ","<b></b>  Solana "]},legal:{title:"",content:[" Solana "," Solstice "]},transparencia:{title:"SOLS ",content:'<b></b><br/><span class="break-all font-mono text-[#66fcf1]">CgAkPzZpdKAY9Cwzd2AiKmrRHgAK6DyVFn1n6VCQknEb</span><br/> $SOLS<br/><br/><b> $SOLS </b><br/><span class="break-all font-mono text-[#66fcf1]">EZwVQKnP5c3K2etpt24VjE1hG3ycq2SZe52NUcZpgo2F</span><br/><br/><br/> Solana '},intro:{title:"1. ",content:"DeFiSolstice  Solana ..."},vision:{title:"2. ",content:" Solstice  Solana ..."},tech:{title:"3. ",content:"Solstice  Solana ..."},tokenomics:{title:"4.  ($SOLS)",totalSupply:"1,000,000,000 $SOLS",distribution:"",presale:" (20%)",rewards:" (30%)",treasury:"DAO  (35%)",liquidity:" (10%)",airdrop:" (5%) 500,000  100 SOLS"},roadmap:{title:"5. ",phase1:" (Q3 2024)...",phase2:" (Q4 2024)...",phase3:" (Q1 2025)..."},governance:{title:"6. ",content:"Solstice  DAO  $SOLS ..."},security:{title:"7. ",content:" Solstice ..."},conclusion:{title:"8. Solstice ",content:"Solstice  Solana ..."}}}}},Kd={PHANTOM:"Phantom",NONE:null},oF=()=>window?.solana&&window.solana.isPhantom?Kd.PHANTOM:Kd.NONE,aF=()=>{const[r,e]=pe.useState(Kd.NONE),[n,i]=pe.useState(null),[s,o]=pe.useState(!1);pe.useEffect(()=>{e(oF())},[]);const l=async()=>{r===Kd.PHANTOM&&window.solana?.isConnected&&await window.solana.disconnect(),i(null),o(!1)},u=()=>!s||!n?null:r===Kd.PHANTOM?me.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:me.jsxs("div",{className:"bg-purple-900 rounded-lg p-6 shadow-lg w-80 text-center text-white",children:[me.jsx("img",{src:"/solstice_SOLS/solstice-logo.png",alt:"Phantom",className:"mx-auto mb-4 w-16 h-16"}),me.jsx("h2",{className:"text-xl font-bold mb-2",children:"Phantom Conectado"}),me.jsx("p",{className:"mb-4 text-sm break-all",children:n}),me.jsx("button",{onClick:l,className:"bg-gray-700 text-white px-4 py-2 rounded hover:bg-gray-800",children:t.disconnect||"Desconectar"})]})}):null;return me.jsx("div",{children:u()})},LI={es:{"language-selector":"Idioma:",home:"Inicio",presale:"Preventa",whitepaper:"Libro Blanco",team:"Equipo",dao:"DAO",airdrop:"Airdrop"},en:{"language-selector":"Language:",home:"Home",presale:"Presale",whitepaper:"Whitepaper",team:"Team",dao:"DAO",airdrop:"Airdrop"},zh:{"language-selector":"",home:"",presale:"",whitepaper:"",team:"",dao:"DAO",airdrop:""}},lF=[{id:"home",labelKey:"home"},{id:"presale",labelKey:"presale"},{id:"whitepaper",labelKey:"whitepaper"},{id:"dao",labelKey:"dao"},{id:"airdrop",labelKey:"airdrop"}],cF=({currentPage:r,setCurrentPage:e,language:n,setLanguage:i})=>{const s=Pv(),o=ia(),l=LI[n]||LI.es,u=pe.useRef(null),d=pe.useRef(null),[f,p]=pe.useState(!1),[v,E]=pe.useState(!1);pe.useEffect(()=>{},[n,r]),pe.useEffect(()=>{const T=d.current;if(!T)return;const M=()=>{const{scrollLeft:z,scrollWidth:j,clientWidth:se}=T;p(z>0),E(z+se<j-1)};M(),T.addEventListener("scroll",M,{passive:!0});const W=()=>M();return window.addEventListener("resize",W),()=>{T.removeEventListener("scroll",M),window.removeEventListener("resize",W)}},[n,r]);const S={presale:()=>Ba(()=>import("./Presale-BN7fd4TG.js"),[]),whitepaper:()=>Ba(()=>import("./Whitepaper-C4u-yhMp.js"),[]),dao:()=>Ba(()=>import("./DaoDashboard-B5upP7OA.js"),[]),"create-proposal":()=>Ba(()=>import("./CreateProposal-BWfk_E-q.js"),[])},R=T=>{s(T==="home"?"/":"/"+T)};return me.jsx("header",{ref:u,className:"header-glass sticky top-0 z-50",children:me.jsxs("div",{className:"mx-auto w-full max-w-[var(--container-max)] relative flex flex-row items-center justify-between gap-2 px-2 md:px-6 py-2 overflow-x-auto no-scrollbar",children:[me.jsxs("div",{className:"flex flex-row items-center space-x-3 shrink-0 ml-0",children:[me.jsx("img",{src:"/solstice_SOLS/solstice-custom-logo.png",alt:"Solstice Logo",width:"48",height:"48",className:"w-12 h-12 rounded-full object-contain shrink-0 -ml-1 md:-ml-2",loading:"lazy",decoding:"async",onError:T=>{if(!T.currentTarget.dataset.fallback){T.currentTarget.dataset.fallback="svg",T.currentTarget.src="/solstice_SOLS/solstice-logo.svg";return}T.currentTarget.dataset.fallback==="svg"&&(T.currentTarget.dataset.fallback="vite",T.currentTarget.src="/solstice_SOLS/vite.svg")}}),me.jsx("span",{className:"text-2xl md:text-[28px] font-bold gradient-text",children:"Solstice"})]}),me.jsx("nav",{className:"flex flex-row items-center gap-2 sm:gap-4 md:gap-6 lg:gap-8 xl:gap-10 text-white font-medium text-[13px] sm:text-sm md:text-base whitespace-nowrap overflow-x-auto no-scrollbar scroll-smooth px-0 ml-0 select-none custom-vertical-tabs","aria-label":"Main Navigation",role:"navigation",ref:d,style:{WebkitOverflowScrolling:"touch"},children:lF.map(T=>{let M=!1;return(T.id==="home"&&(o.pathname==="/"||o.pathname==="")||o.pathname==="/"+T.id)&&(M=!0),me.jsx("button",{onClick:()=>R(T.id),onMouseEnter:()=>S[T.id]?.(),onFocus:()=>S[T.id]?.(),"data-id":T.id,className:"tab-btn relative z-10 bg-transparent px-1 sm:px-2 md:px-3 pb-1 pt-1 transition-colors snap-start text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-[#66fcf1]/40","aria-label":l[T.labelKey],"aria-current":M?"page":void 0,children:l[T.labelKey]},T.id)})}),me.jsxs("div",{className:"flex flex-col items-center gap-2 ml-auto pr-6",children:[me.jsx("img",{src:"https://flagcdn.com/48x36/us.png",alt:"English",title:"English",className:"object-cover cursor-pointer",style:{width:"16px",height:"12px"},loading:"lazy",decoding:"async",onClick:()=>i("en"),"aria-label":"Seleccionar English"}),me.jsx("img",{src:"https://flagcdn.com/48x36/es.png",alt:"Espaol",title:"Espaol",className:"object-cover cursor-pointer",style:{width:"16px",height:"12px"},loading:"lazy",decoding:"async",onClick:()=>i("es"),"aria-label":"Seleccionar Espaol"}),me.jsx("img",{src:"https://flagcdn.com/48x36/cn.png",alt:"",title:"",className:"object-cover cursor-pointer",style:{width:"16px",height:"12px"},loading:"lazy",decoding:"async",onClick:()=>i("zh"),"aria-label":""}),me.jsx("div",{className:"ml-2",children:me.jsx(aF,{})})]})]})})},BI={sm:"px-3 py-2 text-sm",md:"px-5 py-3 text-base",lg:"px-6 py-3 text-lg"},uF="inline-flex items-center justify-center rounded-full font-bold transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--brand)]/40 disabled:opacity-60 disabled:cursor-not-allowed",UI={primary:"btn-primary",outline:"btn-outline text-[var(--brand)]",ghost:"bg-transparent text-gray-200 hover:bg-white/5",link:"bg-transparent px-0 py-0 text-[var(--brand)] hover:text-white underline-offset-4 hover:underline"};function VI({children:r,variant:e="primary",size:n="md",type:i="button",loading:s=!1,disabled:o=!1,className:l="",leftIcon:u=null,rightIcon:d=null,...f}){const p=[uF,BI[n]||BI.md,UI[e]||UI.primary,l].filter(Boolean).join(" ");return me.jsx("button",{type:i,className:p,disabled:o||s,...f,children:s?me.jsxs("span",{className:"inline-flex items-center gap-2",children:[me.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[me.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),me.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),me.jsx("span",{children:"..."})]}):me.jsxs("span",{className:"inline-flex items-center gap-2",children:[u,me.jsx("span",{children:r}),d]})})}const dF=({setCurrentPage:r,language:e})=>{const n=wu[e]||wu.es,i=Pv();return me.jsxs("section",{children:[me.jsxs("div",{className:"narrow min-h-[40vh] md:min-h-[50vh] flex flex-col items-center justify-center text-center",children:[me.jsx("h1",{className:"fluid-h1 font-extrabold gradient-text tracking-tight mt-0",children:n["hero-title"]}),me.jsx("p",{className:"fluid-subtitle text-gray-400 mt-3 md:mt-4 text-content",children:n["hero-subtitle"]}),me.jsxs("div",{className:"mt-6 md:mt-8 w-full flex flex-row justify-center items-center gap-3",children:[me.jsx(VI,{onClick:()=>i("presale"),size:"lg",variant:"primary",className:"w-fit",children:n["hero-btn-presale"]}),me.jsx(VI,{onClick:()=>i("whitepaper"),size:"lg",variant:"outline",className:"w-fit",children:n["hero-btn-whitepaper"]})]})]}),me.jsx("section",{className:"section narrow text-center !my-8 md:!my-12",children:me.jsxs("div",{className:"py-6 md:py-8 flex flex-col items-center",children:[me.jsx("div",{className:"section-header !mb-3 md:!mb-4",children:me.jsx("h2",{className:"fluid-h2 font-extrabold text-white text-center section-title",children:n["features-title"]})}),me.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 items-start justify-items-center gap-4 md:gap-6 w-full",children:[me.jsxs("div",{className:"w-full max-w-[360px] p-2 sm:p-2 md:p-2 justify-self-center text-center md:self-start",children:[me.jsx("h3",{className:"text-2xl font-bold text-[#66fcf1] mb-2",children:n["feature1-title"]}),me.jsx("p",{className:"text-gray-400 text-content",children:n["feature1-text"]})]}),me.jsxs("div",{className:"w-full max-w-[360px] p-2 sm:p-2 md:p-2 md:self-start justify-self-center text-center",children:[me.jsx("h3",{className:"text-2xl font-bold text-[#66fcf1] mb-2",children:n["feature2-title"]}),me.jsx("p",{className:"text-gray-400 text-content",children:n["feature2-text"]})]}),me.jsxs("div",{className:"w-full max-w-[360px] p-2 sm:p-2 md:p-2 justify-self-center text-center md:self-start",children:[me.jsx("h3",{className:"text-2xl font-bold text-[#66fcf1] mb-2",children:n["feature3-title"]}),me.jsx("p",{className:"text-gray-400 text-content",children:n["feature3-text"]})]})]})]})}),me.jsxs("section",{className:"section text-left narrow !my-8 md:!my-12",children:[me.jsx("div",{className:"section-header",children:me.jsx("h2",{className:"fluid-h2 font-extrabold text-white text-center section-title",children:n["tokenomics-title"]})}),me.jsx("div",{className:"card p-4 md:p-5",children:me.jsx("div",{className:"panel p-4 md:p-5",children:me.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_max-content] items-center gap-3 sm:gap-4 md:gap-6",children:[me.jsxs("div",{className:"w-full min-w-0",children:[me.jsx("p",{className:"text-gray-400 mb-4 text-content",children:n["tokenomics-intro"]}),me.jsxs("ul",{className:"list-enhanced text-gray-400 space-y-2 text-content",children:[me.jsx("li",{children:n["tokenomics-total-supply"]}),me.jsx("li",{children:n["tokenomics-presale"]}),me.jsx("li",{children:n["tokenomics-rewards"]}),me.jsx("li",{children:n["tokenomics-treasury"]}),me.jsx("li",{children:n["tokenomics-liquidity"]}),me.jsx("li",{children:n["tokenomics-airdrop"]})]})]}),me.jsx("div",{className:"justify-self-center md:justify-self-end self-center w-full max-w-[220px] sm:max-w-[260px] md:max-w-[300px] lg:max-w-[360px]",children:me.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-auto",role:"img","aria-label":"Distribucin de suministro",preserveAspectRatio:"xMidYMid meet",children:[me.jsx("path",{d:"M50 50 L50 5 A45 45 0 0 1 88.5 35.5 Z",fill:"#7b5ab7"}),me.jsx("path",{d:"M50 50 L88.5 35.5 A45 45 0 0 1 88.5 64.5 Z",fill:"#5a78e5"}),me.jsx("path",{d:"M50 50 L88.5 64.5 A45 45 0 0 1 11.5 64.5 Z",fill:"#3a9b9f"}),me.jsx("path",{d:"M50 50 L11.5 64.5 A45 45 0 0 1 50 5 Z",fill:"#7ef7ee"}),me.jsx("circle",{cx:"50",cy:"50",r:"41",fill:"none",stroke:"rgba(0,0,0,0.75)",strokeWidth:"5"}),me.jsx("circle",{cx:"50",cy:"50",r:"46",fill:"none",stroke:"#cbd5e1",strokeWidth:"4"})]})})]})})})]}),me.jsx("section",{className:"mt-16",children:me.jsxs("div",{className:"flex flex-col items-center",children:[me.jsx("div",{className:"section-header"}),me.jsx("h1",{className:"fluid-h1 font-extrabold gradient-text mb-4 section-title",children:n["team-title"]}),me.jsx("p",{className:"fluid-subtitle text-gray-400 text-content mb-8",children:n["team-subtitle"]}),me.jsx("div",{className:"section-separator mb-4"}),me.jsx("img",{src:"https://i.imgur.com/taMBQrE.png",alt:"Jonathan, CEO",width:"120",height:"120",loading:"lazy",decoding:"async",className:"rounded-full object-cover w-[120px] h-[120px] border-4 border-[#66fcf1] bg-[#111827] mb-4 mx-auto"}),me.jsx("h3",{className:"text-2xl font-bold text-white mb-1 text-center",children:n["team-jonathan-name"]||"Jonathan"}),me.jsx("p",{className:"text-[#66fcf1] font-semibold mb-2 text-center",children:n["team-jonathan-role"]||"CEO & Founder"}),me.jsx("p",{className:"text-gray-400 text-sm text-center mb-3",children:n["team-jonathan-desc"]||"Apasionado por blockchain. Lder visionario."}),me.jsx("a",{href:"https://x.com/glgdona",target:"_blank",rel:"noopener noreferrer",className:"block text-[#66fcf1] hover:underline text-center text-sm mb-4",children:"@glgdona"})]})})]})},hF={es:{title:"Conoce al Equipo",subtitle:"Un grupo dedicado de visionarios y expertos que trabajan para construir un futuro descentralizado en Solana.",comingSoon:"PROXIMAMENTE",photo:"Foto"},en:{title:"Meet the Team",subtitle:"A dedicated group of visionaries and experts working to build a decentralized future on Solana.",comingSoon:"COMING SOON",photo:"Photo"},zh:{title:"",subtitle:" Solana ",comingSoon:"",photo:""}},fF=({language:r})=>{const e=hF[r],n=({isLarge:i=!1})=>me.jsxs("div",{className:`flex flex-col items-center w-80 mx-auto ${i?"col-span-1 md:col-span-2 lg:col-span-3":""}`,children:[me.jsx("div",{className:"w-[170px] h-[170px] rounded-full border-3 border-[#66fcf1] bg-[#111827] flex items-center justify-center mb-4",children:me.jsx("span",{className:"text-[#45a29e] text-3xl font-semibold",children:e.photo})}),me.jsx("p",{className:"text-gray-400 text-lg mb-4",children:e.comingSoon}),me.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:e.comingSoon}),me.jsx("p",{className:"text-[#66fcf1] font-medium mb-4",children:e.comingSoon}),me.jsx("p",{className:"text-gray-400 text-sm text-center",children:e.comingSoon})]});return me.jsxs("section",{className:"space-y-8",children:[me.jsxs("div",{className:"text-center narrow",children:[me.jsx("div",{className:"section-header"}),me.jsx("h1",{className:"fluid-h1 font-extrabold gradient-text mb-4 section-title",children:e.title}),me.jsx("p",{className:"fluid-subtitle text-gray-400 text-content mb-8",children:e.subtitle}),me.jsx("div",{className:"section-separator"})]}),me.jsxs("div",{className:"flex flex-row gap-8 md:gap-10 section justify-center items-start overflow-x-auto w-full py-4",children:[me.jsx(n,{}),me.jsx(n,{}),me.jsx(n,{}),me.jsx(n,{})]})]})},pF=({label:r="Cargando"})=>me.jsxs("div",{className:"flex flex-col items-center justify-center py-16 gap-4",children:[me.jsxs("div",{className:"inline-flex items-center gap-3 text-[#66fcf1]",children:[me.jsx("span",{className:"animate-spin h-5 w-5 rounded-full border-2 border-[#66fcf1] border-t-transparent"}),me.jsx("span",{className:"text-sm opacity-80",children:r})]}),me.jsx("div",{className:"w-full max-w-md",children:me.jsx("div",{className:"h-2 w-full bg-white/5 rounded overflow-hidden",children:me.jsx("div",{className:"h-full w-1/3 bg-[#66fcf1]/50 animate-[loading_1.2s_ease_infinite]"})})}),me.jsx("style",{children:"@keyframes loading { 0% { transform: translateX(-100%);} 100% { transform: translateX(300%);} }"})]}),mF=({language:r="es"})=>{const e=wu[r]||wu.es;return me.jsx("footer",{className:"w-full flex justify-center px-4 md:px-6 pb-8 footer-glass mt-auto",children:me.jsxs("div",{className:"mx-auto w-full max-w-[var(--container-max)] flex items-center justify-center gap-3 text-sm text-gray-500",children:[me.jsx("p",{className:"text-center",children:e["footer-text"]}),me.jsx("div",{className:"flex items-center gap-3 shrink-0",children:me.jsx("a",{href:"https://x.com/SolsticeSols",target:"_blank",rel:"noopener noreferrer",className:"group inline-flex items-center justify-center rounded-full p-2 transition-colors hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/20","aria-label":"Twitter",children:me.jsx("img",{src:"https://cdn.simpleicons.org/x/ffffff",alt:"X (Twitter)",width:24,height:24,className:"w-5 h-5 md:w-6 md:h-6 select-none",loading:"lazy",decoding:"async"})})})]})})},gF=({message:r,type:e,onClose:n})=>{if(!r)return null;const i=e==="success";return me.jsx("div",{className:`fixed top-4 left-1/2 -translate-x-1/2 z-50 px-4 py-3 rounded-xl text-white shadow-lg border ${i?"bg-emerald-600/90 border-emerald-400/40":"bg-rose-600/90 border-rose-400/40"} backdrop-blur`,role:"status","aria-live":"polite",children:me.jsxs("div",{className:"flex items-center gap-3",children:[me.jsx("span",{className:`inline-flex h-2 w-2 rounded-full ${i?"bg-emerald-300":"bg-rose-300"}`}),me.jsx("span",{className:"text-sm font-medium",children:r}),me.jsx("button",{onClick:n,className:"ml-2 text-white/90 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-[#66fcf1]/40 rounded","aria-label":"Cerrar mensaje",children:""})]})})},yF=it.lazy(()=>Ba(()=>import("./Whitepaper-C4u-yhMp.js"),[])),wF=it.lazy(()=>Ba(()=>import("./DaoDashboard-B5upP7OA.js"),[])),vF=it.lazy(()=>Ba(()=>import("./CreateProposal-BWfk_E-q.js"),[])),EF=it.lazy(()=>Ba(()=>import("./Presale-BN7fd4TG.js"),[])),_F=()=>{pe.useEffect(()=>{localStorage.removeItem("language")},[]);const[r,e]=pe.useState("en"),n=ia(),[i,s]=pe.useState({message:"",type:"success"}),o=wu[r]||wu.es;let l="home";if(n&&n.pathname){const E=n.pathname.replace(/^\//,"");["home","",void 0].includes(E)?l="home":["presale","whitepaper","team","dao","create-proposal","airdrop"].includes(E)&&(l=E)}const u={home:o["page-title"]||o["hero-title"],presale:o["presale-page-title"],whitepaper:o["whitepaper-page-title"],team:o["team-page-title"],dao:o["dao-page-title"],"create-proposal":o["proposal-form-page-title"],airdrop:o.airdrop||"Airdrop"},d={home:o["hero-subtitle"],presale:o["presale-disclaimer"]||o["presale-page-title"],whitepaper:o["whitepaper-page-subtitle"],team:o["team-page-subtitle"],dao:o["dao-page-subtitle"],"create-proposal":o["proposal-form-page-subtitle"],airdrop:o["airdrop-participants-title"]||"Airdrop"},f=u[l]||o["page-title"]||"Solstice",p=d[l]||o["page-title"]||"Solstice",v=(E,S="success")=>{s({message:E,type:S}),setTimeout(()=>s({message:"",type:S}),3e3)};return me.jsxs(sF,{config:{providerType:"injected",addressTypes:[Yn.solana]},children:[me.jsxs(kM,{children:[me.jsx("html",{lang:r||"es"}),me.jsx("title",{children:f}),me.jsx("meta",{name:"description",content:p}),me.jsx("meta",{property:"og:title",content:f}),me.jsx("meta",{property:"og:description",content:p}),me.jsx("meta",{name:"twitter:title",content:f}),me.jsx("meta",{name:"twitter:description",content:p})]}),me.jsxs("div",{className:"min-h-screen flex flex-col items-stretch bg-[#0b0c10] text-[#c5c6c7]",children:[me.jsx(cF,{currentPage:null,setCurrentPage:()=>{},language:r,setLanguage:e,role:"banner"}),me.jsx("main",{id:"main",role:"main",className:"mx-auto w-full max-w-[var(--container-max)] mt-8 md:mt-10 mb-12 px-4 md:px-6",children:me.jsx(pe.Suspense,{fallback:me.jsx(pF,{label:n.pathname==="/whitepaper"?(o["whitepaper-page-title"]||"Whitepaper")+"":n.pathname==="/presale"?(o["presale-page-title"]||"Presale")+"":n.pathname==="/dao"?(o["dao-page-title"]||"DAO")+"":n.pathname==="/create-proposal"?(o["proposal-form-page-title"]||"Create Proposal")+"":"Cargando"}),children:me.jsxs(S3,{children:[me.jsx(Ca,{path:"/",element:me.jsx(dF,{language:r,t:o})}),me.jsx(Ca,{path:"/presale",element:me.jsx(EF,{language:r,t:o})}),me.jsx(Ca,{path:"/whitepaper",element:me.jsx(yF,{language:r,showMessage:v,t:o})}),me.jsx(Ca,{path:"/team",element:me.jsx(fF,{language:r,t:o})}),me.jsx(Ca,{path:"/dao",element:me.jsx(wF,{language:r,showMessage:v,t:o})}),me.jsx(Ca,{path:"/create-proposal",element:me.jsx(vF,{language:r,showMessage:v,t:o})}),me.jsx(Ca,{path:"/airdrop",element:me.jsx(U8,{t:o})})]})})}),me.jsx(mF,{language:r,role:"contentinfo"}),me.jsx(gF,{message:i.message,type:i.type,onClose:()=>s({message:"",type:i.type})})]})]})},Bc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Mh(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ah(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function na(r,...e){if(!Mh(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function _k(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ah(r.outputLen),ah(r.blockLen)}function vu(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function bk(r,e){na(r);const n=e.outputLen;if(r.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function bF(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function tl(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function fy(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function ro(r,e){return r<<32-e|r>>>e}const SF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function IF(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function AF(r){for(let e=0;e<r.length;e++)r[e]=IF(r[e]);return r}const FI=SF?r=>r:AF,Sk=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",xF=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Ul(r){if(na(r),Sk)return r.toHex();let e="";for(let n=0;n<r.length;n++)e+=xF[r[n]];return e}const Bo={_0:48,_9:57,A:65,F:70,a:97,f:102};function zI(r){if(r>=Bo._0&&r<=Bo._9)return r-Bo._0;if(r>=Bo.A&&r<=Bo.F)return r-(Bo.A-10);if(r>=Bo.a&&r<=Bo.f)return r-(Bo.a-10)}function sm(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Sk)return Uint8Array.fromHex(r);const e=r.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const l=zI(r.charCodeAt(o)),u=zI(r.charCodeAt(o+1));if(l===void 0||u===void 0){const d=r[o]+r[o+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+o)}i[s]=l*16+u}return i}function TF(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Km(r){return typeof r=="string"&&(r=TF(r)),na(r),r}function co(...r){let e=0;for(let i=0;i<r.length;i++){const s=r[i];na(s),e+=s.length}const n=new Uint8Array(e);for(let i=0,s=0;i<r.length;i++){const o=r[i];n.set(o,s),s+=o.length}return n}class N1{}function O1(r){const e=i=>r().update(Km(i)).digest(),n=r();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>r(),e}function D1(r=32){if(Bc&&typeof Bc.getRandomValues=="function")return Bc.getRandomValues(new Uint8Array(r));if(Bc&&typeof Bc.randomBytes=="function")return Uint8Array.from(Bc.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function RF(r,e,n,i){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,n,i);const s=BigInt(32),o=BigInt(4294967295),l=Number(n>>s&o),u=Number(n&o),d=i?4:0,f=i?0:4;r.setUint32(e+d,l,i),r.setUint32(e+f,u,i)}function kF(r,e,n){return r&e^~r&n}function CF(r,e,n){return r&e^r&n^e&n}class Ik extends N1{constructor(e,n,i,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=i,this.isLE=s,this.buffer=new Uint8Array(e),this.view=fy(this.buffer)}update(e){vu(this),e=Km(e),na(e);const{view:n,buffer:i,blockLen:s}=this,o=e.length;for(let l=0;l<o;){const u=Math.min(s-this.pos,o-l);if(u===s){const d=fy(e);for(;s<=o-l;l+=s)this.process(d,l);continue}i.set(e.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){vu(this),bk(e,this),this.finished=!0;const{buffer:n,view:i,blockLen:s,isLE:o}=this;let{pos:l}=this;n[l++]=128,tl(this.buffer.subarray(l)),this.padOffset>s-l&&(this.process(i,0),l=0);for(let v=l;v<s;v++)n[v]=0;RF(i,s-8,BigInt(this.length*8),o),this.process(i,0);const u=fy(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=d/4,p=this.get();if(f>p.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<f;v++)u.setUint32(4*v,p[v],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const i=e.slice(0,n);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:i,length:s,finished:o,destroyed:l,pos:u}=this;return e.destroyed=l,e.finished=o,e.length=s,e.pos=u,s%n&&e.buffer.set(i),e}clone(){return this._cloneInto()}}const Ia=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ei=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Zf=BigInt(2**32-1),WI=BigInt(32);function PF(r,e=!1){return e?{h:Number(r&Zf),l:Number(r>>WI&Zf)}:{h:Number(r>>WI&Zf)|0,l:Number(r&Zf)|0}}function Ak(r,e=!1){const n=r.length;let i=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:l,l:u}=PF(r[o],e);[i[o],s[o]]=[l,u]}return[i,s]}const jI=(r,e,n)=>r>>>n,$I=(r,e,n)=>r<<32-n|e>>>n,Uc=(r,e,n)=>r>>>n|e<<32-n,Vc=(r,e,n)=>r<<32-n|e>>>n,ep=(r,e,n)=>r<<64-n|e>>>n-32,tp=(r,e,n)=>r>>>n-32|e<<64-n,MF=(r,e,n)=>r<<n|e>>>32-n,NF=(r,e,n)=>e<<n|r>>>32-n,OF=(r,e,n)=>e<<n-32|r>>>64-n,DF=(r,e,n)=>r<<n-32|e>>>64-n;function Uo(r,e,n,i){const s=(e>>>0)+(i>>>0);return{h:r+n+(s/2**32|0)|0,l:s|0}}const LF=(r,e,n)=>(r>>>0)+(e>>>0)+(n>>>0),BF=(r,e,n,i)=>e+n+i+(r/2**32|0)|0,UF=(r,e,n,i)=>(r>>>0)+(e>>>0)+(n>>>0)+(i>>>0),VF=(r,e,n,i,s)=>e+n+i+s+(r/2**32|0)|0,FF=(r,e,n,i,s)=>(r>>>0)+(e>>>0)+(n>>>0)+(i>>>0)+(s>>>0),zF=(r,e,n,i,s,o)=>e+n+i+s+o+(r/2**32|0)|0,WF=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Aa=new Uint32Array(64);class jF extends Ik{constructor(e=32){super(64,e,8,!1),this.A=Ia[0]|0,this.B=Ia[1]|0,this.C=Ia[2]|0,this.D=Ia[3]|0,this.E=Ia[4]|0,this.F=Ia[5]|0,this.G=Ia[6]|0,this.H=Ia[7]|0}get(){const{A:e,B:n,C:i,D:s,E:o,F:l,G:u,H:d}=this;return[e,n,i,s,o,l,u,d]}set(e,n,i,s,o,l,u,d){this.A=e|0,this.B=n|0,this.C=i|0,this.D=s|0,this.E=o|0,this.F=l|0,this.G=u|0,this.H=d|0}process(e,n){for(let v=0;v<16;v++,n+=4)Aa[v]=e.getUint32(n,!1);for(let v=16;v<64;v++){const E=Aa[v-15],S=Aa[v-2],R=ro(E,7)^ro(E,18)^E>>>3,T=ro(S,17)^ro(S,19)^S>>>10;Aa[v]=T+Aa[v-7]+R+Aa[v-16]|0}let{A:i,B:s,C:o,D:l,E:u,F:d,G:f,H:p}=this;for(let v=0;v<64;v++){const E=ro(u,6)^ro(u,11)^ro(u,25),S=p+E+kF(u,d,f)+WF[v]+Aa[v]|0,T=(ro(i,2)^ro(i,13)^ro(i,22))+CF(i,s,o)|0;p=f,f=d,d=u,u=l+S|0,l=o,o=s,s=i,i=S+T|0}i=i+this.A|0,s=s+this.B|0,o=o+this.C|0,l=l+this.D|0,u=u+this.E|0,d=d+this.F|0,f=f+this.G|0,p=p+this.H|0,this.set(i,s,o,l,u,d,f,p)}roundClean(){tl(Aa)}destroy(){this.set(0,0,0,0,0,0,0,0),tl(this.buffer)}}const xk=Ak(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),$F=xk[0],qF=xk[1],xa=new Uint32Array(80),Ta=new Uint32Array(80);class KF extends Ik{constructor(e=64){super(128,e,16,!1),this.Ah=Ei[0]|0,this.Al=Ei[1]|0,this.Bh=Ei[2]|0,this.Bl=Ei[3]|0,this.Ch=Ei[4]|0,this.Cl=Ei[5]|0,this.Dh=Ei[6]|0,this.Dl=Ei[7]|0,this.Eh=Ei[8]|0,this.El=Ei[9]|0,this.Fh=Ei[10]|0,this.Fl=Ei[11]|0,this.Gh=Ei[12]|0,this.Gl=Ei[13]|0,this.Hh=Ei[14]|0,this.Hl=Ei[15]|0}get(){const{Ah:e,Al:n,Bh:i,Bl:s,Ch:o,Cl:l,Dh:u,Dl:d,Eh:f,El:p,Fh:v,Fl:E,Gh:S,Gl:R,Hh:T,Hl:M}=this;return[e,n,i,s,o,l,u,d,f,p,v,E,S,R,T,M]}set(e,n,i,s,o,l,u,d,f,p,v,E,S,R,T,M){this.Ah=e|0,this.Al=n|0,this.Bh=i|0,this.Bl=s|0,this.Ch=o|0,this.Cl=l|0,this.Dh=u|0,this.Dl=d|0,this.Eh=f|0,this.El=p|0,this.Fh=v|0,this.Fl=E|0,this.Gh=S|0,this.Gl=R|0,this.Hh=T|0,this.Hl=M|0}process(e,n){for(let j=0;j<16;j++,n+=4)xa[j]=e.getUint32(n),Ta[j]=e.getUint32(n+=4);for(let j=16;j<80;j++){const se=xa[j-15]|0,le=Ta[j-15]|0,de=Uc(se,le,1)^Uc(se,le,8)^jI(se,le,7),Z=Vc(se,le,1)^Vc(se,le,8)^$I(se,le,7),$=xa[j-2]|0,D=Ta[j-2]|0,U=Uc($,D,19)^ep($,D,61)^jI($,D,6),q=Vc($,D,19)^tp($,D,61)^$I($,D,6),H=UF(Z,q,Ta[j-7],Ta[j-16]),I=VF(H,de,U,xa[j-7],xa[j-16]);xa[j]=I|0,Ta[j]=H|0}let{Ah:i,Al:s,Bh:o,Bl:l,Ch:u,Cl:d,Dh:f,Dl:p,Eh:v,El:E,Fh:S,Fl:R,Gh:T,Gl:M,Hh:W,Hl:z}=this;for(let j=0;j<80;j++){const se=Uc(v,E,14)^Uc(v,E,18)^ep(v,E,41),le=Vc(v,E,14)^Vc(v,E,18)^tp(v,E,41),de=v&S^~v&T,Z=E&R^~E&M,$=FF(z,le,Z,qF[j],Ta[j]),D=zF($,W,se,de,$F[j],xa[j]),U=$|0,q=Uc(i,s,28)^ep(i,s,34)^ep(i,s,39),H=Vc(i,s,28)^tp(i,s,34)^tp(i,s,39),I=i&o^i&u^o&u,y=s&l^s&d^l&d;W=T|0,z=M|0,T=S|0,M=R|0,S=v|0,R=E|0,{h:v,l:E}=Uo(f|0,p|0,D|0,U|0),f=u|0,p=d|0,u=o|0,d=l|0,o=i|0,l=s|0;const x=LF(U,H,y);i=BF(x,D,q,I),s=x|0}({h:i,l:s}=Uo(this.Ah|0,this.Al|0,i|0,s|0)),{h:o,l}=Uo(this.Bh|0,this.Bl|0,o|0,l|0),{h:u,l:d}=Uo(this.Ch|0,this.Cl|0,u|0,d|0),{h:f,l:p}=Uo(this.Dh|0,this.Dl|0,f|0,p|0),{h:v,l:E}=Uo(this.Eh|0,this.El|0,v|0,E|0),{h:S,l:R}=Uo(this.Fh|0,this.Fl|0,S|0,R|0),{h:T,l:M}=Uo(this.Gh|0,this.Gl|0,T|0,M|0),{h:W,l:z}=Uo(this.Hh|0,this.Hl|0,W|0,z|0),this.set(i,s,o,l,u,d,f,p,v,E,S,R,T,M,W,z)}roundClean(){tl(xa,Ta)}destroy(){tl(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Tk=O1(()=>new jF),HF=O1(()=>new KF);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const L1=BigInt(0),dv=BigInt(1);function ql(r,e=""){if(typeof r!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof r)}return r}function Fs(r,e,n=""){const i=Mh(r),s=r?.length,o=e!==void 0;if(!i||o&&s!==e){const l=n&&`"${n}" `,u=o?` of length ${e}`:"",d=i?`length=${s}`:`type=${typeof r}`;throw new Error(l+"expected Uint8Array"+u+", got "+d)}return r}function np(r){const e=r.toString(16);return e.length&1?"0"+e:e}function Rk(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?L1:BigInt("0x"+r)}function Hm(r){return Rk(Ul(r))}function lh(r){return na(r),Rk(Ul(Uint8Array.from(r).reverse()))}function B1(r,e){return sm(r.toString(16).padStart(e*2,"0"))}function kk(r,e){return B1(r,e).reverse()}function xr(r,e,n){let i;if(typeof e=="string")try{i=sm(e)}catch(o){throw new Error(r+" must be hex string or Uint8Array, cause: "+o)}else if(Mh(e))i=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=i.length;if(typeof n=="number"&&s!==n)throw new Error(r+" of length "+n+" expected, got "+s);return i}function qI(r){return Uint8Array.from(r)}const py=r=>typeof r=="bigint"&&L1<=r;function GF(r,e,n){return py(r)&&py(e)&&py(n)&&e<=r&&r<n}function hv(r,e,n,i){if(!GF(e,n,i))throw new Error("expected valid "+r+": "+n+" <= n < "+i+", got "+e)}function Ck(r){let e;for(e=0;r>L1;r>>=dv,e+=1);return e}const Nh=r=>(dv<<BigInt(r))-dv;function YF(r,e,n){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const i=S=>new Uint8Array(S),s=S=>Uint8Array.of(S);let o=i(r),l=i(r),u=0;const d=()=>{o.fill(1),l.fill(0),u=0},f=(...S)=>n(l,o,...S),p=(S=i(0))=>{l=f(s(0),S),o=f(),S.length!==0&&(l=f(s(1),S),o=f())},v=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let S=0;const R=[];for(;S<e;){o=f();const T=o.slice();R.push(T),S+=o.length}return co(...R)};return(S,R)=>{d(),p(S);let T;for(;!(T=R(v()));)p();return d(),T}}function Oh(r,e,n={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function i(s,o,l){const u=r[s];if(l&&u===void 0)return;const d=typeof u;if(d!==o||u===null)throw new Error(`param "${s}" is invalid: expected ${o}, got ${d}`)}Object.entries(e).forEach(([s,o])=>i(s,o,!1)),Object.entries(n).forEach(([s,o])=>i(s,o,!0))}function om(r){const e=new WeakMap;return(n,...i)=>{const s=e.get(n);if(s!==void 0)return s;const o=r(n,...i);return e.set(n,o),o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yi=BigInt(0),di=BigInt(1),Rl=BigInt(2),Pk=BigInt(3),Mk=BigInt(4),Nk=BigInt(5),JF=BigInt(7),Ok=BigInt(8),QF=BigInt(9),Dk=BigInt(16);function Br(r,e){const n=r%e;return n>=Yi?n:e+n}function Ar(r,e,n){let i=r;for(;e-- >Yi;)i*=i,i%=n;return i}function KI(r,e){if(r===Yi)throw new Error("invert: expected non-zero number");if(e<=Yi)throw new Error("invert: expected positive modulus, got "+e);let n=Br(r,e),i=e,s=Yi,o=di;for(;n!==Yi;){const u=i/n,d=i%n,f=s-o*u;i=n,n=d,s=o,o=f}if(i!==di)throw new Error("invert: does not exist");return Br(s,e)}function U1(r,e,n){if(!r.eql(r.sqr(e),n))throw new Error("Cannot find square root")}function Lk(r,e){const n=(r.ORDER+di)/Mk,i=r.pow(e,n);return U1(r,i,e),i}function XF(r,e){const n=(r.ORDER-Nk)/Ok,i=r.mul(e,Rl),s=r.pow(i,n),o=r.mul(e,s),l=r.mul(r.mul(o,Rl),s),u=r.mul(o,r.sub(l,r.ONE));return U1(r,u,e),u}function ZF(r){const e=ec(r),n=Bk(r),i=n(e,e.neg(e.ONE)),s=n(e,i),o=n(e,e.neg(i)),l=(r+JF)/Dk;return(u,d)=>{let f=u.pow(d,l),p=u.mul(f,i);const v=u.mul(f,s),E=u.mul(f,o),S=u.eql(u.sqr(p),d),R=u.eql(u.sqr(v),d);f=u.cmov(f,p,S),p=u.cmov(E,v,R);const T=u.eql(u.sqr(p),d),M=u.cmov(f,p,T);return U1(u,M,d),M}}function Bk(r){if(r<Pk)throw new Error("sqrt is not defined for small field");let e=r-di,n=0;for(;e%Rl===Yi;)e/=Rl,n++;let i=Rl;const s=ec(r);for(;HI(s,i)===1;)if(i++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Lk;let o=s.pow(i,e);const l=(e+di)/Rl;return function(d,f){if(d.is0(f))return f;if(HI(d,f)!==1)throw new Error("Cannot find square root");let p=n,v=d.mul(d.ONE,o),E=d.pow(f,e),S=d.pow(f,l);for(;!d.eql(E,d.ONE);){if(d.is0(E))return d.ZERO;let R=1,T=d.sqr(E);for(;!d.eql(T,d.ONE);)if(R++,T=d.sqr(T),R===p)throw new Error("Cannot find square root");const M=di<<BigInt(p-R-1),W=d.pow(v,M);p=R,v=d.sqr(W),E=d.mul(E,v),S=d.mul(S,W)}return S}}function e9(r){return r%Mk===Pk?Lk:r%Ok===Nk?XF:r%Dk===QF?ZF(r):Bk(r)}const t9=(r,e)=>(Br(r,e)&di)===di,n9=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function r9(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=n9.reduce((i,s)=>(i[s]="function",i),e);return Oh(r,n),r}function i9(r,e,n){if(n<Yi)throw new Error("invalid exponent, negatives unsupported");if(n===Yi)return r.ONE;if(n===di)return e;let i=r.ONE,s=e;for(;n>Yi;)n&di&&(i=r.mul(i,s)),s=r.sqr(s),n>>=di;return i}function Uk(r,e,n=!1){const i=new Array(e.length).fill(n?r.ZERO:void 0),s=e.reduce((l,u,d)=>r.is0(u)?l:(i[d]=l,r.mul(l,u)),r.ONE),o=r.inv(s);return e.reduceRight((l,u,d)=>r.is0(u)?l:(i[d]=r.mul(l,i[d]),r.mul(l,u)),o),i}function HI(r,e){const n=(r.ORDER-di)/Rl,i=r.pow(e,n),s=r.eql(i,r.ONE),o=r.eql(i,r.ZERO),l=r.eql(i,r.neg(r.ONE));if(!s&&!o&&!l)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function Vk(r,e){e!==void 0&&ah(e);const n=e!==void 0?e:r.toString(2).length,i=Math.ceil(n/8);return{nBitLength:n,nByteLength:i}}function ec(r,e,n=!1,i={}){if(r<=Yi)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,o,l=!1,u;if(typeof e=="object"&&e!=null){if(i.sqrt||n)throw new Error("cannot specify opts in two arguments");const E=e;E.BITS&&(s=E.BITS),E.sqrt&&(o=E.sqrt),typeof E.isLE=="boolean"&&(n=E.isLE),typeof E.modFromBytes=="boolean"&&(l=E.modFromBytes),u=E.allowedLengths}else typeof e=="number"&&(s=e),i.sqrt&&(o=i.sqrt);const{nBitLength:d,nByteLength:f}=Vk(r,s);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let p;const v=Object.freeze({ORDER:r,isLE:n,BITS:d,BYTES:f,MASK:Nh(d),ZERO:Yi,ONE:di,allowedLengths:u,create:E=>Br(E,r),isValid:E=>{if(typeof E!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof E);return Yi<=E&&E<r},is0:E=>E===Yi,isValidNot0:E=>!v.is0(E)&&v.isValid(E),isOdd:E=>(E&di)===di,neg:E=>Br(-E,r),eql:(E,S)=>E===S,sqr:E=>Br(E*E,r),add:(E,S)=>Br(E+S,r),sub:(E,S)=>Br(E-S,r),mul:(E,S)=>Br(E*S,r),pow:(E,S)=>i9(v,E,S),div:(E,S)=>Br(E*KI(S,r),r),sqrN:E=>E*E,addN:(E,S)=>E+S,subN:(E,S)=>E-S,mulN:(E,S)=>E*S,inv:E=>KI(E,r),sqrt:o||(E=>(p||(p=e9(r)),p(v,E))),toBytes:E=>n?kk(E,f):B1(E,f),fromBytes:(E,S=!0)=>{if(u){if(!u.includes(E.length)||E.length>f)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+E.length);const T=new Uint8Array(f);T.set(E,n?0:T.length-E.length),E=T}if(E.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+E.length);let R=n?lh(E):Hm(E);if(l&&(R=Br(R,r)),!S&&!v.isValid(R))throw new Error("invalid field element: outside of range 0..ORDER");return R},invertBatch:E=>Uk(v,E),cmov:(E,S,R)=>R?S:E});return Object.freeze(v)}function Fk(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function zk(r){const e=Fk(r);return e+Math.ceil(e/2)}function s9(r,e,n=!1){const i=r.length,s=Fk(e),o=zk(e);if(i<16||i<o||i>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+i);const l=n?lh(r):Hm(r),u=Br(l,e-di)+di;return n?kk(u,s):B1(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Eu=BigInt(0),kl=BigInt(1);function am(r,e){const n=e.negate();return r?n:e}function Cl(r,e){const n=Uk(r.Fp,e.map(i=>i.Z));return e.map((i,s)=>r.fromAffine(i.toAffine(n[s])))}function Wk(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function my(r,e){Wk(r,e);const n=Math.ceil(e/r)+1,i=2**(r-1),s=2**r,o=Nh(r),l=BigInt(r);return{windows:n,windowSize:i,mask:o,maxNumber:s,shiftBy:l}}function GI(r,e,n){const{windowSize:i,mask:s,maxNumber:o,shiftBy:l}=n;let u=Number(r&s),d=r>>l;u>i&&(u-=o,d+=kl);const f=e*i,p=f+Math.abs(u)-1,v=u===0,E=u<0,S=e%2!==0;return{nextN:d,offset:p,isZero:v,isNeg:E,isNegF:S,offsetF:f}}function o9(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((n,i)=>{if(!(n instanceof e))throw new Error("invalid point at index "+i)})}function a9(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((n,i)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+i)})}const gy=new WeakMap,jk=new WeakMap;function yy(r){return jk.get(r)||1}function YI(r){if(r!==Eu)throw new Error("invalid wNAF")}class $k{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,i=this.ZERO){let s=e;for(;n>Eu;)n&kl&&(i=i.add(s)),s=s.double(),n>>=kl;return i}precomputeWindow(e,n){const{windows:i,windowSize:s}=my(n,this.bits),o=[];let l=e,u=l;for(let d=0;d<i;d++){u=l,o.push(u);for(let f=1;f<s;f++)u=u.add(l),o.push(u);l=u.double()}return o}wNAF(e,n,i){if(!this.Fn.isValid(i))throw new Error("invalid scalar");let s=this.ZERO,o=this.BASE;const l=my(e,this.bits);for(let u=0;u<l.windows;u++){const{nextN:d,offset:f,isZero:p,isNeg:v,isNegF:E,offsetF:S}=GI(i,u,l);i=d,p?o=o.add(am(E,n[S])):s=s.add(am(v,n[f]))}return YI(i),{p:s,f:o}}wNAFUnsafe(e,n,i,s=this.ZERO){const o=my(e,this.bits);for(let l=0;l<o.windows&&i!==Eu;l++){const{nextN:u,offset:d,isZero:f,isNeg:p}=GI(i,l,o);if(i=u,!f){const v=n[d];s=s.add(p?v.negate():v)}}return YI(i),s}getPrecomputes(e,n,i){let s=gy.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof i=="function"&&(s=i(s)),gy.set(n,s))),s}cached(e,n,i){const s=yy(e);return this.wNAF(s,this.getPrecomputes(s,e,i),n)}unsafe(e,n,i,s){const o=yy(e);return o===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,e,i),n,s)}createCache(e,n){Wk(n,this.bits),jk.set(e,n),gy.delete(e)}hasCache(e){return yy(e)!==1}}function l9(r,e,n,i){let s=e,o=r.ZERO,l=r.ZERO;for(;n>Eu||i>Eu;)n&kl&&(o=o.add(s)),i&kl&&(l=l.add(s)),s=s.double(),n>>=kl,i>>=kl;return{p1:o,p2:l}}function qk(r,e,n,i){o9(n,r),a9(i,e);const s=n.length,o=i.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");const l=r.ZERO,u=Ck(BigInt(s));let d=1;u>12?d=u-3:u>4?d=u-2:u>0&&(d=2);const f=Nh(d),p=new Array(Number(f)+1).fill(l),v=Math.floor((e.BITS-1)/d)*d;let E=l;for(let S=v;S>=0;S-=d){p.fill(l);for(let T=0;T<o;T++){const M=i[T],W=Number(M>>BigInt(S)&f);p[W]=p[W].add(n[T])}let R=l;for(let T=p.length-1,M=l;T>0;T--)M=M.add(p[T]),R=R.add(M);if(E=E.add(R),S!==0)for(let T=0;T<d;T++)E=E.double()}return E}function JI(r,e,n){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return r9(e),e}else return ec(r,{isLE:n})}function Kk(r,e,n={},i){if(i===void 0&&(i=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const d of["p","n","h"]){const f=e[d];if(!(typeof f=="bigint"&&f>Eu))throw new Error(`CURVE.${d} must be positive bigint`)}const s=JI(e.p,n.Fp,i),o=JI(e.n,n.Fn,i),u=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const d of u)if(!s.isValid(e[d]))throw new Error(`CURVE.${d} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ra=BigInt(0),Jr=BigInt(1),wy=BigInt(2),c9=BigInt(8);function u9(r,e,n,i){const s=r.sqr(n),o=r.sqr(i),l=r.add(r.mul(e.a,s),o),u=r.add(r.ONE,r.mul(e.d,r.mul(s,o)));return r.eql(l,u)}function d9(r,e={}){const n=Kk("edwards",r,e,e.FpFnLE),{Fp:i,Fn:s}=n;let o=n.CURVE;const{h:l}=o;Oh(e,{},{uvRatio:"function"});const u=wy<<BigInt(s.BYTES*8)-Jr,d=M=>i.create(M),f=e.uvRatio||((M,W)=>{try{return{isValid:!0,value:i.sqrt(i.div(M,W))}}catch{return{isValid:!1,value:Ra}}});if(!u9(i,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function p(M,W,z=!1){const j=z?Jr:Ra;return hv("coordinate "+M,W,j,u),W}function v(M){if(!(M instanceof R))throw new Error("ExtendedPoint expected")}const E=om((M,W)=>{const{X:z,Y:j,Z:se}=M,le=M.is0();W==null&&(W=le?c9:i.inv(se));const de=d(z*W),Z=d(j*W),$=i.mul(se,W);if(le)return{x:Ra,y:Jr};if($!==Jr)throw new Error("invZ was invalid");return{x:de,y:Z}}),S=om(M=>{const{a:W,d:z}=o;if(M.is0())throw new Error("bad point: ZERO");const{X:j,Y:se,Z:le,T:de}=M,Z=d(j*j),$=d(se*se),D=d(le*le),U=d(D*D),q=d(Z*W),H=d(D*d(q+$)),I=d(U+d(z*d(Z*$)));if(H!==I)throw new Error("bad point: equation left != right (1)");const y=d(j*se),x=d(le*de);if(y!==x)throw new Error("bad point: equation left != right (2)");return!0});class R{constructor(W,z,j,se){this.X=p("x",W),this.Y=p("y",z),this.Z=p("z",j,!0),this.T=p("t",se),Object.freeze(this)}static CURVE(){return o}static fromAffine(W){if(W instanceof R)throw new Error("extended point not allowed");const{x:z,y:j}=W||{};return p("x",z),p("y",j),new R(z,j,Jr,d(z*j))}static fromBytes(W,z=!1){const j=i.BYTES,{a:se,d:le}=o;W=qI(Fs(W,j,"point")),ql(z,"zip215");const de=qI(W),Z=W[j-1];de[j-1]=Z&-129;const $=lh(de),D=z?u:i.ORDER;hv("point.y",$,Ra,D);const U=d($*$),q=d(U-Jr),H=d(le*U-se);let{isValid:I,value:y}=f(q,H);if(!I)throw new Error("bad point: invalid y coordinate");const x=(y&Jr)===Jr,V=(Z&128)!==0;if(!z&&y===Ra&&V)throw new Error("bad point: x=0 and x_0=1");return V!==x&&(y=d(-y)),R.fromAffine({x:y,y:$})}static fromHex(W,z=!1){return R.fromBytes(xr("point",W),z)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(W=8,z=!0){return T.createCache(this,W),z||this.multiply(wy),this}assertValidity(){S(this)}equals(W){v(W);const{X:z,Y:j,Z:se}=this,{X:le,Y:de,Z}=W,$=d(z*Z),D=d(le*se),U=d(j*Z),q=d(de*se);return $===D&&U===q}is0(){return this.equals(R.ZERO)}negate(){return new R(d(-this.X),this.Y,this.Z,d(-this.T))}double(){const{a:W}=o,{X:z,Y:j,Z:se}=this,le=d(z*z),de=d(j*j),Z=d(wy*d(se*se)),$=d(W*le),D=z+j,U=d(d(D*D)-le-de),q=$+de,H=q-Z,I=$-de,y=d(U*H),x=d(q*I),V=d(U*I),J=d(H*q);return new R(y,x,J,V)}add(W){v(W);const{a:z,d:j}=o,{X:se,Y:le,Z:de,T:Z}=this,{X:$,Y:D,Z:U,T:q}=W,H=d(se*$),I=d(le*D),y=d(Z*j*q),x=d(de*U),V=d((se+le)*($+D)-H-I),J=x-y,G=x+y,re=d(I-z*H),ae=d(V*J),O=d(G*re),w=d(V*re),_=d(J*G);return new R(ae,O,_,w)}subtract(W){return this.add(W.negate())}multiply(W){if(!s.isValidNot0(W))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:z,f:j}=T.cached(this,W,se=>Cl(R,se));return Cl(R,[z,j])[0]}multiplyUnsafe(W,z=R.ZERO){if(!s.isValid(W))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return W===Ra?R.ZERO:this.is0()||W===Jr?this:T.unsafe(this,W,j=>Cl(R,j),z)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return T.unsafe(this,o.n).is0()}toAffine(W){return E(this,W)}clearCofactor(){return l===Jr?this:this.multiplyUnsafe(l)}toBytes(){const{x:W,y:z}=this.toAffine(),j=i.toBytes(z);return j[j.length-1]|=W&Jr?128:0,j}toHex(){return Ul(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(W){return Cl(R,W)}static msm(W,z){return qk(R,s,W,z)}_setWindowSize(W){this.precompute(W)}toRawBytes(){return this.toBytes()}}R.BASE=new R(o.Gx,o.Gy,Jr,d(o.Gx*o.Gy)),R.ZERO=new R(Ra,Jr,Jr,Ra),R.Fp=i,R.Fn=s;const T=new $k(R,s.BITS);return R.BASE.precompute(8),R}function h9(r,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');Oh(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:i}=n,{BASE:s,Fp:o,Fn:l}=r,u=n.randomBytes||D1,d=n.adjustScalarBytes||(D=>D),f=n.domain||((D,U,q)=>{if(ql(q,"phflag"),U.length||q)throw new Error("Contexts/pre-hash are not supported");return D});function p(D){return l.create(lh(D))}function v(D){const U=j.secretKey;D=xr("private key",D,U);const q=xr("hashed private key",e(D),2*U),H=d(q.slice(0,U)),I=q.slice(U,2*U),y=p(H);return{head:H,prefix:I,scalar:y}}function E(D){const{head:U,prefix:q,scalar:H}=v(D),I=s.multiply(H),y=I.toBytes();return{head:U,prefix:q,scalar:H,point:I,pointBytes:y}}function S(D){return E(D).pointBytes}function R(D=Uint8Array.of(),...U){const q=co(...U);return p(e(f(q,xr("context",D),!!i)))}function T(D,U,q={}){D=xr("message",D),i&&(D=i(D));const{prefix:H,scalar:I,pointBytes:y}=E(U),x=R(q.context,H,D),V=s.multiply(x).toBytes(),J=R(q.context,V,y,D),G=l.create(x+J*I);if(!l.isValid(G))throw new Error("sign failed: invalid s");const re=co(V,l.toBytes(G));return Fs(re,j.signature,"result")}const M={zip215:!0};function W(D,U,q,H=M){const{context:I,zip215:y}=H,x=j.signature;D=xr("signature",D,x),U=xr("message",U),q=xr("publicKey",q,j.publicKey),y!==void 0&&ql(y,"zip215"),i&&(U=i(U));const V=x/2,J=D.subarray(0,V),G=lh(D.subarray(V,x));let re,ae,O;try{re=r.fromBytes(q,y),ae=r.fromBytes(J,y),O=s.multiplyUnsafe(G)}catch{return!1}if(!y&&re.isSmallOrder())return!1;const w=R(I,ae.toBytes(),re.toBytes(),U);return ae.add(re.multiplyUnsafe(w)).subtract(O).clearCofactor().is0()}const z=o.BYTES,j={secretKey:z,publicKey:z,signature:2*z,seed:z};function se(D=u(j.seed)){return Fs(D,j.seed,"seed")}function le(D){const U=$.randomSecretKey(D);return{secretKey:U,publicKey:S(U)}}function de(D){return Mh(D)&&D.length===l.BYTES}function Z(D,U){try{return!!r.fromBytes(D,U)}catch{return!1}}const $={getExtendedPublicKey:E,randomSecretKey:se,isValidSecretKey:de,isValidPublicKey:Z,toMontgomery(D){const{y:U}=r.fromBytes(D),q=j.publicKey,H=q===32;if(!H&&q!==57)throw new Error("only defined for 25519 and 448");const I=H?o.div(Jr+U,Jr-U):o.div(U-Jr,U+Jr);return o.toBytes(I)},toMontgomerySecret(D){const U=j.secretKey;Fs(D,U);const q=e(D.subarray(0,U));return d(q).subarray(0,U)},randomPrivateKey:se,precompute(D=8,U=r.BASE){return U.precompute(D,!1)}};return Object.freeze({keygen:le,getPublicKey:S,sign:T,verify:W,utils:$,Point:r,lengths:j})}function f9(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},n=r.Fp,i=ec(e.n,r.nBitLength,!0),s={Fp:n,Fn:i,uvRatio:r.uvRatio},o={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:s,hash:r.hash,eddsaOpts:o}}function p9(r,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:r,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function m9(r){const{CURVE:e,curveOpts:n,hash:i,eddsaOpts:s}=f9(r),o=d9(e,n),l=h9(o,i,s);return p9(r,l)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const g9=BigInt(1),QI=BigInt(2);BigInt(3);const y9=BigInt(5),w9=BigInt(8),V1=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Hk={p:V1,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:w9,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function v9(r){const e=BigInt(10),n=BigInt(20),i=BigInt(40),s=BigInt(80),o=V1,u=r*r%o*r%o,d=Ar(u,QI,o)*u%o,f=Ar(d,g9,o)*r%o,p=Ar(f,y9,o)*f%o,v=Ar(p,e,o)*p%o,E=Ar(v,n,o)*v%o,S=Ar(E,i,o)*E%o,R=Ar(S,s,o)*S%o,T=Ar(R,s,o)*S%o,M=Ar(T,e,o)*p%o;return{pow_p_5_8:Ar(M,QI,o)*r%o,b2:u}}function E9(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const XI=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function _9(r,e){const n=V1,i=Br(e*e*e,n),s=Br(i*i*e,n),o=v9(r*s).pow_p_5_8;let l=Br(r*i*o,n);const u=Br(e*l*l,n),d=l,f=Br(l*XI,n),p=u===r,v=u===Br(-r,n),E=u===Br(-r*XI,n);return p&&(l=d),(v||E)&&(l=f),t9(l,n)&&(l=Br(-l,n)),{isValid:p||v,value:l}}const b9=ec(Hk.p,{isLE:!0}),S9={...Hk,Fp:b9,hash:HF,adjustScalarBytes:E9,uvRatio:_9},Lu=m9(S9);var xp={exports:{}},I9=xp.exports,ZI;function Gk(){return ZI||(ZI=1,(function(r){(function(e,n){function i(I,y){if(!I)throw new Error(y||"Assertion failed")}function s(I,y){I.super_=y;var x=function(){};x.prototype=y.prototype,I.prototype=new x,I.prototype.constructor=I}function o(I,y,x){if(o.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((y==="le"||y==="be")&&(x=y,y=10),this._init(I||0,y||10,x||"be"))}typeof e=="object"?e.exports=o:n.BN=o,o.BN=o,o.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=pk.Buffer}catch{}o.isBN=function(y){return y instanceof o?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===o.wordSize&&Array.isArray(y.words)},o.max=function(y,x){return y.cmp(x)>0?y:x},o.min=function(y,x){return y.cmp(x)<0?y:x},o.prototype._init=function(y,x,V){if(typeof y=="number")return this._initNumber(y,x,V);if(typeof y=="object")return this._initArray(y,x,V);x==="hex"&&(x=16),i(x===(x|0)&&x>=2&&x<=36),y=y.toString().replace(/\s+/g,"");var J=0;y[0]==="-"&&(J++,this.negative=1),J<y.length&&(x===16?this._parseHex(y,J,V):(this._parseBase(y,x,J),V==="le"&&this._initArray(this.toArray(),x,V)))},o.prototype._initNumber=function(y,x,V){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(i(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),V==="le"&&this._initArray(this.toArray(),x,V)},o.prototype._initArray=function(y,x,V){if(i(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var J=0;J<this.length;J++)this.words[J]=0;var G,re,ae=0;if(V==="be")for(J=y.length-1,G=0;J>=0;J-=3)re=y[J]|y[J-1]<<8|y[J-2]<<16,this.words[G]|=re<<ae&67108863,this.words[G+1]=re>>>26-ae&67108863,ae+=24,ae>=26&&(ae-=26,G++);else if(V==="le")for(J=0,G=0;J<y.length;J+=3)re=y[J]|y[J+1]<<8|y[J+2]<<16,this.words[G]|=re<<ae&67108863,this.words[G+1]=re>>>26-ae&67108863,ae+=24,ae>=26&&(ae-=26,G++);return this._strip()};function u(I,y){var x=I.charCodeAt(y);if(x>=48&&x<=57)return x-48;if(x>=65&&x<=70)return x-55;if(x>=97&&x<=102)return x-87;i(!1,"Invalid character in "+I)}function d(I,y,x){var V=u(I,x);return x-1>=y&&(V|=u(I,x-1)<<4),V}o.prototype._parseHex=function(y,x,V){this.length=Math.ceil((y.length-x)/6),this.words=new Array(this.length);for(var J=0;J<this.length;J++)this.words[J]=0;var G=0,re=0,ae;if(V==="be")for(J=y.length-1;J>=x;J-=2)ae=d(y,x,J)<<G,this.words[re]|=ae&67108863,G>=18?(G-=18,re+=1,this.words[re]|=ae>>>26):G+=8;else{var O=y.length-x;for(J=O%2===0?x+1:x;J<y.length;J+=2)ae=d(y,x,J)<<G,this.words[re]|=ae&67108863,G>=18?(G-=18,re+=1,this.words[re]|=ae>>>26):G+=8}this._strip()};function f(I,y,x,V){for(var J=0,G=0,re=Math.min(I.length,x),ae=y;ae<re;ae++){var O=I.charCodeAt(ae)-48;J*=V,O>=49?G=O-49+10:O>=17?G=O-17+10:G=O,i(O>=0&&G<V,"Invalid character"),J+=G}return J}o.prototype._parseBase=function(y,x,V){this.words=[0],this.length=1;for(var J=0,G=1;G<=67108863;G*=x)J++;J--,G=G/x|0;for(var re=y.length-V,ae=re%J,O=Math.min(re,re-ae)+V,w=0,_=V;_<O;_+=J)w=f(y,_,_+J,x),this.imuln(G),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w);if(ae!==0){var F=1;for(w=f(y,_,y.length,x),_=0;_<ae;_++)F*=x;this.imuln(F),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w)}this._strip()},o.prototype.copy=function(y){y.words=new Array(this.length);for(var x=0;x<this.length;x++)y.words[x]=this.words[x];y.length=this.length,y.negative=this.negative,y.red=this.red};function p(I,y){I.words=y.words,I.length=y.length,I.negative=y.negative,I.red=y.red}if(o.prototype._move=function(y){p(y,this)},o.prototype.clone=function(){var y=new o(null);return this.copy(y),y},o.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=v}catch{o.prototype.inspect=v}else o.prototype.inspect=v;function v(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var E=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],R=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(y,x){y=y||10,x=x|0||1;var V;if(y===16||y==="hex"){V="";for(var J=0,G=0,re=0;re<this.length;re++){var ae=this.words[re],O=((ae<<J|G)&16777215).toString(16);G=ae>>>24-J&16777215,J+=2,J>=26&&(J-=26,re--),G!==0||re!==this.length-1?V=E[6-O.length]+O+V:V=O+V}for(G!==0&&(V=G.toString(16)+V);V.length%x!==0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}if(y===(y|0)&&y>=2&&y<=36){var w=S[y],_=R[y];V="";var F=this.clone();for(F.negative=0;!F.isZero();){var ee=F.modrn(_).toString(y);F=F.idivn(_),F.isZero()?V=ee+V:V=E[w-ee.length]+ee+V}for(this.isZero()&&(V="0"+V);V.length%x!==0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},o.prototype.toJSON=function(){return this.toString(16,2)},l&&(o.prototype.toBuffer=function(y,x){return this.toArrayLike(l,y,x)}),o.prototype.toArray=function(y,x){return this.toArrayLike(Array,y,x)};var T=function(y,x){return y.allocUnsafe?y.allocUnsafe(x):new y(x)};o.prototype.toArrayLike=function(y,x,V){this._strip();var J=this.byteLength(),G=V||Math.max(1,J);i(J<=G,"byte array longer than desired length"),i(G>0,"Requested array length <= 0");var re=T(y,G),ae=x==="le"?"LE":"BE";return this["_toArrayLike"+ae](re,J),re},o.prototype._toArrayLikeLE=function(y,x){for(var V=0,J=0,G=0,re=0;G<this.length;G++){var ae=this.words[G]<<re|J;y[V++]=ae&255,V<y.length&&(y[V++]=ae>>8&255),V<y.length&&(y[V++]=ae>>16&255),re===6?(V<y.length&&(y[V++]=ae>>24&255),J=0,re=0):(J=ae>>>24,re+=2)}if(V<y.length)for(y[V++]=J;V<y.length;)y[V++]=0},o.prototype._toArrayLikeBE=function(y,x){for(var V=y.length-1,J=0,G=0,re=0;G<this.length;G++){var ae=this.words[G]<<re|J;y[V--]=ae&255,V>=0&&(y[V--]=ae>>8&255),V>=0&&(y[V--]=ae>>16&255),re===6?(V>=0&&(y[V--]=ae>>24&255),J=0,re=0):(J=ae>>>24,re+=2)}if(V>=0)for(y[V--]=J;V>=0;)y[V--]=0},Math.clz32?o.prototype._countBits=function(y){return 32-Math.clz32(y)}:o.prototype._countBits=function(y){var x=y,V=0;return x>=4096&&(V+=13,x>>>=13),x>=64&&(V+=7,x>>>=7),x>=8&&(V+=4,x>>>=4),x>=2&&(V+=2,x>>>=2),V+x},o.prototype._zeroBits=function(y){if(y===0)return 26;var x=y,V=0;return(x&8191)===0&&(V+=13,x>>>=13),(x&127)===0&&(V+=7,x>>>=7),(x&15)===0&&(V+=4,x>>>=4),(x&3)===0&&(V+=2,x>>>=2),(x&1)===0&&V++,V},o.prototype.bitLength=function(){var y=this.words[this.length-1],x=this._countBits(y);return(this.length-1)*26+x};function M(I){for(var y=new Array(I.bitLength()),x=0;x<y.length;x++){var V=x/26|0,J=x%26;y[x]=I.words[V]>>>J&1}return y}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,x=0;x<this.length;x++){var V=this._zeroBits(this.words[x]);if(y+=V,V!==26)break}return y},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},o.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var x=0;x<y.length;x++)this.words[x]=this.words[x]|y.words[x];return this._strip()},o.prototype.ior=function(y){return i((this.negative|y.negative)===0),this.iuor(y)},o.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},o.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},o.prototype.iuand=function(y){var x;this.length>y.length?x=y:x=this;for(var V=0;V<x.length;V++)this.words[V]=this.words[V]&y.words[V];return this.length=x.length,this._strip()},o.prototype.iand=function(y){return i((this.negative|y.negative)===0),this.iuand(y)},o.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},o.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},o.prototype.iuxor=function(y){var x,V;this.length>y.length?(x=this,V=y):(x=y,V=this);for(var J=0;J<V.length;J++)this.words[J]=x.words[J]^V.words[J];if(this!==x)for(;J<x.length;J++)this.words[J]=x.words[J];return this.length=x.length,this._strip()},o.prototype.ixor=function(y){return i((this.negative|y.negative)===0),this.iuxor(y)},o.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},o.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},o.prototype.inotn=function(y){i(typeof y=="number"&&y>=0);var x=Math.ceil(y/26)|0,V=y%26;this._expand(x),V>0&&x--;for(var J=0;J<x;J++)this.words[J]=~this.words[J]&67108863;return V>0&&(this.words[J]=~this.words[J]&67108863>>26-V),this._strip()},o.prototype.notn=function(y){return this.clone().inotn(y)},o.prototype.setn=function(y,x){i(typeof y=="number"&&y>=0);var V=y/26|0,J=y%26;return this._expand(V+1),x?this.words[V]=this.words[V]|1<<J:this.words[V]=this.words[V]&~(1<<J),this._strip()},o.prototype.iadd=function(y){var x;if(this.negative!==0&&y.negative===0)return this.negative=0,x=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,x=this.isub(y),y.negative=1,x._normSign();var V,J;this.length>y.length?(V=this,J=y):(V=y,J=this);for(var G=0,re=0;re<J.length;re++)x=(V.words[re]|0)+(J.words[re]|0)+G,this.words[re]=x&67108863,G=x>>>26;for(;G!==0&&re<V.length;re++)x=(V.words[re]|0)+G,this.words[re]=x&67108863,G=x>>>26;if(this.length=V.length,G!==0)this.words[this.length]=G,this.length++;else if(V!==this)for(;re<V.length;re++)this.words[re]=V.words[re];return this},o.prototype.add=function(y){var x;return y.negative!==0&&this.negative===0?(y.negative=0,x=this.sub(y),y.negative^=1,x):y.negative===0&&this.negative!==0?(this.negative=0,x=y.sub(this),this.negative=1,x):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},o.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var x=this.iadd(y);return y.negative=1,x._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var V=this.cmp(y);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;var J,G;V>0?(J=this,G=y):(J=y,G=this);for(var re=0,ae=0;ae<G.length;ae++)x=(J.words[ae]|0)-(G.words[ae]|0)+re,re=x>>26,this.words[ae]=x&67108863;for(;re!==0&&ae<J.length;ae++)x=(J.words[ae]|0)+re,re=x>>26,this.words[ae]=x&67108863;if(re===0&&ae<J.length&&J!==this)for(;ae<J.length;ae++)this.words[ae]=J.words[ae];return this.length=Math.max(this.length,ae),J!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(y){return this.clone().isub(y)};function W(I,y,x){x.negative=y.negative^I.negative;var V=I.length+y.length|0;x.length=V,V=V-1|0;var J=I.words[0]|0,G=y.words[0]|0,re=J*G,ae=re&67108863,O=re/67108864|0;x.words[0]=ae;for(var w=1;w<V;w++){for(var _=O>>>26,F=O&67108863,ee=Math.min(w,y.length-1),ce=Math.max(0,w-I.length+1);ce<=ee;ce++){var we=w-ce|0;J=I.words[we]|0,G=y.words[ce]|0,re=J*G+F,_+=re/67108864|0,F=re&67108863}x.words[w]=F|0,O=_|0}return O!==0?x.words[w]=O|0:x.length--,x._strip()}var z=function(y,x,V){var J=y.words,G=x.words,re=V.words,ae=0,O,w,_,F=J[0]|0,ee=F&8191,ce=F>>>13,we=J[1]|0,Oe=we&8191,ze=we>>>13,At=J[2]|0,qt=At&8191,rn=At>>>13,qn=J[3]|0,un=qn&8191,kn=qn>>>13,$r=J[4]|0,_n=$r&8191,xn=$r>>>13,ir=J[5]|0,dn=ir&8191,hn=ir>>>13,Qn=J[6]|0,gn=Qn&8191,vn=Qn>>>13,sr=J[7]|0,Qt=sr&8191,Y=sr>>>13,C=J[8]|0,N=C&8191,oe=C>>>13,ye=J[9]|0,be=ye&8191,Pe=ye>>>13,Vt=G[0]|0,Et=Vt&8191,Rt=Vt>>>13,on=G[1]|0,xt=on&8191,mn=on>>>13,qr=G[2]|0,fn=qr&8191,bn=qr>>>13,fi=G[3]|0,Gt=fi&8191,Sn=fi>>>13,_r=G[4]|0,Ln=_r&8191,In=_r>>>13,pi=G[5]|0,Zt=pi&8191,an=pi>>>13,hr=G[6]|0,L=hr&8191,X=hr>>>13,te=G[7]|0,A=te&8191,ne=te>>>13,_e=G[8]|0,ve=_e&8191,De=_e>>>13,Ge=G[9]|0,st=Ge&8191,He=Ge>>>13;V.negative=y.negative^x.negative,V.length=19,O=Math.imul(ee,Et),w=Math.imul(ee,Rt),w=w+Math.imul(ce,Et)|0,_=Math.imul(ce,Rt);var sn=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(sn>>>26)|0,sn&=67108863,O=Math.imul(Oe,Et),w=Math.imul(Oe,Rt),w=w+Math.imul(ze,Et)|0,_=Math.imul(ze,Rt),O=O+Math.imul(ee,xt)|0,w=w+Math.imul(ee,mn)|0,w=w+Math.imul(ce,xt)|0,_=_+Math.imul(ce,mn)|0;var pt=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(pt>>>26)|0,pt&=67108863,O=Math.imul(qt,Et),w=Math.imul(qt,Rt),w=w+Math.imul(rn,Et)|0,_=Math.imul(rn,Rt),O=O+Math.imul(Oe,xt)|0,w=w+Math.imul(Oe,mn)|0,w=w+Math.imul(ze,xt)|0,_=_+Math.imul(ze,mn)|0,O=O+Math.imul(ee,fn)|0,w=w+Math.imul(ee,bn)|0,w=w+Math.imul(ce,fn)|0,_=_+Math.imul(ce,bn)|0;var Nt=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,O=Math.imul(un,Et),w=Math.imul(un,Rt),w=w+Math.imul(kn,Et)|0,_=Math.imul(kn,Rt),O=O+Math.imul(qt,xt)|0,w=w+Math.imul(qt,mn)|0,w=w+Math.imul(rn,xt)|0,_=_+Math.imul(rn,mn)|0,O=O+Math.imul(Oe,fn)|0,w=w+Math.imul(Oe,bn)|0,w=w+Math.imul(ze,fn)|0,_=_+Math.imul(ze,bn)|0,O=O+Math.imul(ee,Gt)|0,w=w+Math.imul(ee,Sn)|0,w=w+Math.imul(ce,Gt)|0,_=_+Math.imul(ce,Sn)|0;var Dt=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,O=Math.imul(_n,Et),w=Math.imul(_n,Rt),w=w+Math.imul(xn,Et)|0,_=Math.imul(xn,Rt),O=O+Math.imul(un,xt)|0,w=w+Math.imul(un,mn)|0,w=w+Math.imul(kn,xt)|0,_=_+Math.imul(kn,mn)|0,O=O+Math.imul(qt,fn)|0,w=w+Math.imul(qt,bn)|0,w=w+Math.imul(rn,fn)|0,_=_+Math.imul(rn,bn)|0,O=O+Math.imul(Oe,Gt)|0,w=w+Math.imul(Oe,Sn)|0,w=w+Math.imul(ze,Gt)|0,_=_+Math.imul(ze,Sn)|0,O=O+Math.imul(ee,Ln)|0,w=w+Math.imul(ee,In)|0,w=w+Math.imul(ce,Ln)|0,_=_+Math.imul(ce,In)|0;var jt=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(jt>>>26)|0,jt&=67108863,O=Math.imul(dn,Et),w=Math.imul(dn,Rt),w=w+Math.imul(hn,Et)|0,_=Math.imul(hn,Rt),O=O+Math.imul(_n,xt)|0,w=w+Math.imul(_n,mn)|0,w=w+Math.imul(xn,xt)|0,_=_+Math.imul(xn,mn)|0,O=O+Math.imul(un,fn)|0,w=w+Math.imul(un,bn)|0,w=w+Math.imul(kn,fn)|0,_=_+Math.imul(kn,bn)|0,O=O+Math.imul(qt,Gt)|0,w=w+Math.imul(qt,Sn)|0,w=w+Math.imul(rn,Gt)|0,_=_+Math.imul(rn,Sn)|0,O=O+Math.imul(Oe,Ln)|0,w=w+Math.imul(Oe,In)|0,w=w+Math.imul(ze,Ln)|0,_=_+Math.imul(ze,In)|0,O=O+Math.imul(ee,Zt)|0,w=w+Math.imul(ee,an)|0,w=w+Math.imul(ce,Zt)|0,_=_+Math.imul(ce,an)|0;var Kt=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,O=Math.imul(gn,Et),w=Math.imul(gn,Rt),w=w+Math.imul(vn,Et)|0,_=Math.imul(vn,Rt),O=O+Math.imul(dn,xt)|0,w=w+Math.imul(dn,mn)|0,w=w+Math.imul(hn,xt)|0,_=_+Math.imul(hn,mn)|0,O=O+Math.imul(_n,fn)|0,w=w+Math.imul(_n,bn)|0,w=w+Math.imul(xn,fn)|0,_=_+Math.imul(xn,bn)|0,O=O+Math.imul(un,Gt)|0,w=w+Math.imul(un,Sn)|0,w=w+Math.imul(kn,Gt)|0,_=_+Math.imul(kn,Sn)|0,O=O+Math.imul(qt,Ln)|0,w=w+Math.imul(qt,In)|0,w=w+Math.imul(rn,Ln)|0,_=_+Math.imul(rn,In)|0,O=O+Math.imul(Oe,Zt)|0,w=w+Math.imul(Oe,an)|0,w=w+Math.imul(ze,Zt)|0,_=_+Math.imul(ze,an)|0,O=O+Math.imul(ee,L)|0,w=w+Math.imul(ee,X)|0,w=w+Math.imul(ce,L)|0,_=_+Math.imul(ce,X)|0;var Wt=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,O=Math.imul(Qt,Et),w=Math.imul(Qt,Rt),w=w+Math.imul(Y,Et)|0,_=Math.imul(Y,Rt),O=O+Math.imul(gn,xt)|0,w=w+Math.imul(gn,mn)|0,w=w+Math.imul(vn,xt)|0,_=_+Math.imul(vn,mn)|0,O=O+Math.imul(dn,fn)|0,w=w+Math.imul(dn,bn)|0,w=w+Math.imul(hn,fn)|0,_=_+Math.imul(hn,bn)|0,O=O+Math.imul(_n,Gt)|0,w=w+Math.imul(_n,Sn)|0,w=w+Math.imul(xn,Gt)|0,_=_+Math.imul(xn,Sn)|0,O=O+Math.imul(un,Ln)|0,w=w+Math.imul(un,In)|0,w=w+Math.imul(kn,Ln)|0,_=_+Math.imul(kn,In)|0,O=O+Math.imul(qt,Zt)|0,w=w+Math.imul(qt,an)|0,w=w+Math.imul(rn,Zt)|0,_=_+Math.imul(rn,an)|0,O=O+Math.imul(Oe,L)|0,w=w+Math.imul(Oe,X)|0,w=w+Math.imul(ze,L)|0,_=_+Math.imul(ze,X)|0,O=O+Math.imul(ee,A)|0,w=w+Math.imul(ee,ne)|0,w=w+Math.imul(ce,A)|0,_=_+Math.imul(ce,ne)|0;var ft=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(ft>>>26)|0,ft&=67108863,O=Math.imul(N,Et),w=Math.imul(N,Rt),w=w+Math.imul(oe,Et)|0,_=Math.imul(oe,Rt),O=O+Math.imul(Qt,xt)|0,w=w+Math.imul(Qt,mn)|0,w=w+Math.imul(Y,xt)|0,_=_+Math.imul(Y,mn)|0,O=O+Math.imul(gn,fn)|0,w=w+Math.imul(gn,bn)|0,w=w+Math.imul(vn,fn)|0,_=_+Math.imul(vn,bn)|0,O=O+Math.imul(dn,Gt)|0,w=w+Math.imul(dn,Sn)|0,w=w+Math.imul(hn,Gt)|0,_=_+Math.imul(hn,Sn)|0,O=O+Math.imul(_n,Ln)|0,w=w+Math.imul(_n,In)|0,w=w+Math.imul(xn,Ln)|0,_=_+Math.imul(xn,In)|0,O=O+Math.imul(un,Zt)|0,w=w+Math.imul(un,an)|0,w=w+Math.imul(kn,Zt)|0,_=_+Math.imul(kn,an)|0,O=O+Math.imul(qt,L)|0,w=w+Math.imul(qt,X)|0,w=w+Math.imul(rn,L)|0,_=_+Math.imul(rn,X)|0,O=O+Math.imul(Oe,A)|0,w=w+Math.imul(Oe,ne)|0,w=w+Math.imul(ze,A)|0,_=_+Math.imul(ze,ne)|0,O=O+Math.imul(ee,ve)|0,w=w+Math.imul(ee,De)|0,w=w+Math.imul(ce,ve)|0,_=_+Math.imul(ce,De)|0;var Ft=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,O=Math.imul(be,Et),w=Math.imul(be,Rt),w=w+Math.imul(Pe,Et)|0,_=Math.imul(Pe,Rt),O=O+Math.imul(N,xt)|0,w=w+Math.imul(N,mn)|0,w=w+Math.imul(oe,xt)|0,_=_+Math.imul(oe,mn)|0,O=O+Math.imul(Qt,fn)|0,w=w+Math.imul(Qt,bn)|0,w=w+Math.imul(Y,fn)|0,_=_+Math.imul(Y,bn)|0,O=O+Math.imul(gn,Gt)|0,w=w+Math.imul(gn,Sn)|0,w=w+Math.imul(vn,Gt)|0,_=_+Math.imul(vn,Sn)|0,O=O+Math.imul(dn,Ln)|0,w=w+Math.imul(dn,In)|0,w=w+Math.imul(hn,Ln)|0,_=_+Math.imul(hn,In)|0,O=O+Math.imul(_n,Zt)|0,w=w+Math.imul(_n,an)|0,w=w+Math.imul(xn,Zt)|0,_=_+Math.imul(xn,an)|0,O=O+Math.imul(un,L)|0,w=w+Math.imul(un,X)|0,w=w+Math.imul(kn,L)|0,_=_+Math.imul(kn,X)|0,O=O+Math.imul(qt,A)|0,w=w+Math.imul(qt,ne)|0,w=w+Math.imul(rn,A)|0,_=_+Math.imul(rn,ne)|0,O=O+Math.imul(Oe,ve)|0,w=w+Math.imul(Oe,De)|0,w=w+Math.imul(ze,ve)|0,_=_+Math.imul(ze,De)|0,O=O+Math.imul(ee,st)|0,w=w+Math.imul(ee,He)|0,w=w+Math.imul(ce,st)|0,_=_+Math.imul(ce,He)|0;var mt=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(mt>>>26)|0,mt&=67108863,O=Math.imul(be,xt),w=Math.imul(be,mn),w=w+Math.imul(Pe,xt)|0,_=Math.imul(Pe,mn),O=O+Math.imul(N,fn)|0,w=w+Math.imul(N,bn)|0,w=w+Math.imul(oe,fn)|0,_=_+Math.imul(oe,bn)|0,O=O+Math.imul(Qt,Gt)|0,w=w+Math.imul(Qt,Sn)|0,w=w+Math.imul(Y,Gt)|0,_=_+Math.imul(Y,Sn)|0,O=O+Math.imul(gn,Ln)|0,w=w+Math.imul(gn,In)|0,w=w+Math.imul(vn,Ln)|0,_=_+Math.imul(vn,In)|0,O=O+Math.imul(dn,Zt)|0,w=w+Math.imul(dn,an)|0,w=w+Math.imul(hn,Zt)|0,_=_+Math.imul(hn,an)|0,O=O+Math.imul(_n,L)|0,w=w+Math.imul(_n,X)|0,w=w+Math.imul(xn,L)|0,_=_+Math.imul(xn,X)|0,O=O+Math.imul(un,A)|0,w=w+Math.imul(un,ne)|0,w=w+Math.imul(kn,A)|0,_=_+Math.imul(kn,ne)|0,O=O+Math.imul(qt,ve)|0,w=w+Math.imul(qt,De)|0,w=w+Math.imul(rn,ve)|0,_=_+Math.imul(rn,De)|0,O=O+Math.imul(Oe,st)|0,w=w+Math.imul(Oe,He)|0,w=w+Math.imul(ze,st)|0,_=_+Math.imul(ze,He)|0;var bt=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(bt>>>26)|0,bt&=67108863,O=Math.imul(be,fn),w=Math.imul(be,bn),w=w+Math.imul(Pe,fn)|0,_=Math.imul(Pe,bn),O=O+Math.imul(N,Gt)|0,w=w+Math.imul(N,Sn)|0,w=w+Math.imul(oe,Gt)|0,_=_+Math.imul(oe,Sn)|0,O=O+Math.imul(Qt,Ln)|0,w=w+Math.imul(Qt,In)|0,w=w+Math.imul(Y,Ln)|0,_=_+Math.imul(Y,In)|0,O=O+Math.imul(gn,Zt)|0,w=w+Math.imul(gn,an)|0,w=w+Math.imul(vn,Zt)|0,_=_+Math.imul(vn,an)|0,O=O+Math.imul(dn,L)|0,w=w+Math.imul(dn,X)|0,w=w+Math.imul(hn,L)|0,_=_+Math.imul(hn,X)|0,O=O+Math.imul(_n,A)|0,w=w+Math.imul(_n,ne)|0,w=w+Math.imul(xn,A)|0,_=_+Math.imul(xn,ne)|0,O=O+Math.imul(un,ve)|0,w=w+Math.imul(un,De)|0,w=w+Math.imul(kn,ve)|0,_=_+Math.imul(kn,De)|0,O=O+Math.imul(qt,st)|0,w=w+Math.imul(qt,He)|0,w=w+Math.imul(rn,st)|0,_=_+Math.imul(rn,He)|0;var ot=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(ot>>>26)|0,ot&=67108863,O=Math.imul(be,Gt),w=Math.imul(be,Sn),w=w+Math.imul(Pe,Gt)|0,_=Math.imul(Pe,Sn),O=O+Math.imul(N,Ln)|0,w=w+Math.imul(N,In)|0,w=w+Math.imul(oe,Ln)|0,_=_+Math.imul(oe,In)|0,O=O+Math.imul(Qt,Zt)|0,w=w+Math.imul(Qt,an)|0,w=w+Math.imul(Y,Zt)|0,_=_+Math.imul(Y,an)|0,O=O+Math.imul(gn,L)|0,w=w+Math.imul(gn,X)|0,w=w+Math.imul(vn,L)|0,_=_+Math.imul(vn,X)|0,O=O+Math.imul(dn,A)|0,w=w+Math.imul(dn,ne)|0,w=w+Math.imul(hn,A)|0,_=_+Math.imul(hn,ne)|0,O=O+Math.imul(_n,ve)|0,w=w+Math.imul(_n,De)|0,w=w+Math.imul(xn,ve)|0,_=_+Math.imul(xn,De)|0,O=O+Math.imul(un,st)|0,w=w+Math.imul(un,He)|0,w=w+Math.imul(kn,st)|0,_=_+Math.imul(kn,He)|0;var yt=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(yt>>>26)|0,yt&=67108863,O=Math.imul(be,Ln),w=Math.imul(be,In),w=w+Math.imul(Pe,Ln)|0,_=Math.imul(Pe,In),O=O+Math.imul(N,Zt)|0,w=w+Math.imul(N,an)|0,w=w+Math.imul(oe,Zt)|0,_=_+Math.imul(oe,an)|0,O=O+Math.imul(Qt,L)|0,w=w+Math.imul(Qt,X)|0,w=w+Math.imul(Y,L)|0,_=_+Math.imul(Y,X)|0,O=O+Math.imul(gn,A)|0,w=w+Math.imul(gn,ne)|0,w=w+Math.imul(vn,A)|0,_=_+Math.imul(vn,ne)|0,O=O+Math.imul(dn,ve)|0,w=w+Math.imul(dn,De)|0,w=w+Math.imul(hn,ve)|0,_=_+Math.imul(hn,De)|0,O=O+Math.imul(_n,st)|0,w=w+Math.imul(_n,He)|0,w=w+Math.imul(xn,st)|0,_=_+Math.imul(xn,He)|0;var _t=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(_t>>>26)|0,_t&=67108863,O=Math.imul(be,Zt),w=Math.imul(be,an),w=w+Math.imul(Pe,Zt)|0,_=Math.imul(Pe,an),O=O+Math.imul(N,L)|0,w=w+Math.imul(N,X)|0,w=w+Math.imul(oe,L)|0,_=_+Math.imul(oe,X)|0,O=O+Math.imul(Qt,A)|0,w=w+Math.imul(Qt,ne)|0,w=w+Math.imul(Y,A)|0,_=_+Math.imul(Y,ne)|0,O=O+Math.imul(gn,ve)|0,w=w+Math.imul(gn,De)|0,w=w+Math.imul(vn,ve)|0,_=_+Math.imul(vn,De)|0,O=O+Math.imul(dn,st)|0,w=w+Math.imul(dn,He)|0,w=w+Math.imul(hn,st)|0,_=_+Math.imul(hn,He)|0;var lt=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(lt>>>26)|0,lt&=67108863,O=Math.imul(be,L),w=Math.imul(be,X),w=w+Math.imul(Pe,L)|0,_=Math.imul(Pe,X),O=O+Math.imul(N,A)|0,w=w+Math.imul(N,ne)|0,w=w+Math.imul(oe,A)|0,_=_+Math.imul(oe,ne)|0,O=O+Math.imul(Qt,ve)|0,w=w+Math.imul(Qt,De)|0,w=w+Math.imul(Y,ve)|0,_=_+Math.imul(Y,De)|0,O=O+Math.imul(gn,st)|0,w=w+Math.imul(gn,He)|0,w=w+Math.imul(vn,st)|0,_=_+Math.imul(vn,He)|0;var xe=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(xe>>>26)|0,xe&=67108863,O=Math.imul(be,A),w=Math.imul(be,ne),w=w+Math.imul(Pe,A)|0,_=Math.imul(Pe,ne),O=O+Math.imul(N,ve)|0,w=w+Math.imul(N,De)|0,w=w+Math.imul(oe,ve)|0,_=_+Math.imul(oe,De)|0,O=O+Math.imul(Qt,st)|0,w=w+Math.imul(Qt,He)|0,w=w+Math.imul(Y,st)|0,_=_+Math.imul(Y,He)|0;var Ce=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,O=Math.imul(be,ve),w=Math.imul(be,De),w=w+Math.imul(Pe,ve)|0,_=Math.imul(Pe,De),O=O+Math.imul(N,st)|0,w=w+Math.imul(N,He)|0,w=w+Math.imul(oe,st)|0,_=_+Math.imul(oe,He)|0;var Fe=(ae+O|0)+((w&8191)<<13)|0;ae=(_+(w>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,O=Math.imul(be,st),w=Math.imul(be,He),w=w+Math.imul(Pe,st)|0,_=Math.imul(Pe,He);var Ue=(ae+O|0)+((w&8191)<<13)|0;return ae=(_+(w>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,re[0]=sn,re[1]=pt,re[2]=Nt,re[3]=Dt,re[4]=jt,re[5]=Kt,re[6]=Wt,re[7]=ft,re[8]=Ft,re[9]=mt,re[10]=bt,re[11]=ot,re[12]=yt,re[13]=_t,re[14]=lt,re[15]=xe,re[16]=Ce,re[17]=Fe,re[18]=Ue,ae!==0&&(re[19]=ae,V.length++),V};Math.imul||(z=W);function j(I,y,x){x.negative=y.negative^I.negative,x.length=I.length+y.length;for(var V=0,J=0,G=0;G<x.length-1;G++){var re=J;J=0;for(var ae=V&67108863,O=Math.min(G,y.length-1),w=Math.max(0,G-I.length+1);w<=O;w++){var _=G-w,F=I.words[_]|0,ee=y.words[w]|0,ce=F*ee,we=ce&67108863;re=re+(ce/67108864|0)|0,we=we+ae|0,ae=we&67108863,re=re+(we>>>26)|0,J+=re>>>26,re&=67108863}x.words[G]=ae,V=re,re=J}return V!==0?x.words[G]=V:x.length--,x._strip()}function se(I,y,x){return j(I,y,x)}o.prototype.mulTo=function(y,x){var V,J=this.length+y.length;return this.length===10&&y.length===10?V=z(this,y,x):J<63?V=W(this,y,x):J<1024?V=j(this,y,x):V=se(this,y,x),V},o.prototype.mul=function(y){var x=new o(null);return x.words=new Array(this.length+y.length),this.mulTo(y,x)},o.prototype.mulf=function(y){var x=new o(null);return x.words=new Array(this.length+y.length),se(this,y,x)},o.prototype.imul=function(y){return this.clone().mulTo(y,this)},o.prototype.imuln=function(y){var x=y<0;x&&(y=-y),i(typeof y=="number"),i(y<67108864);for(var V=0,J=0;J<this.length;J++){var G=(this.words[J]|0)*y,re=(G&67108863)+(V&67108863);V>>=26,V+=G/67108864|0,V+=re>>>26,this.words[J]=re&67108863}return V!==0&&(this.words[J]=V,this.length++),this.length=y===0?1:this.length,x?this.ineg():this},o.prototype.muln=function(y){return this.clone().imuln(y)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(y){var x=M(y);if(x.length===0)return new o(1);for(var V=this,J=0;J<x.length&&x[J]===0;J++,V=V.sqr());if(++J<x.length)for(var G=V.sqr();J<x.length;J++,G=G.sqr())x[J]!==0&&(V=V.mul(G));return V},o.prototype.iushln=function(y){i(typeof y=="number"&&y>=0);var x=y%26,V=(y-x)/26,J=67108863>>>26-x<<26-x,G;if(x!==0){var re=0;for(G=0;G<this.length;G++){var ae=this.words[G]&J,O=(this.words[G]|0)-ae<<x;this.words[G]=O|re,re=ae>>>26-x}re&&(this.words[G]=re,this.length++)}if(V!==0){for(G=this.length-1;G>=0;G--)this.words[G+V]=this.words[G];for(G=0;G<V;G++)this.words[G]=0;this.length+=V}return this._strip()},o.prototype.ishln=function(y){return i(this.negative===0),this.iushln(y)},o.prototype.iushrn=function(y,x,V){i(typeof y=="number"&&y>=0);var J;x?J=(x-x%26)/26:J=0;var G=y%26,re=Math.min((y-G)/26,this.length),ae=67108863^67108863>>>G<<G,O=V;if(J-=re,J=Math.max(0,J),O){for(var w=0;w<re;w++)O.words[w]=this.words[w];O.length=re}if(re!==0)if(this.length>re)for(this.length-=re,w=0;w<this.length;w++)this.words[w]=this.words[w+re];else this.words[0]=0,this.length=1;var _=0;for(w=this.length-1;w>=0&&(_!==0||w>=J);w--){var F=this.words[w]|0;this.words[w]=_<<26-G|F>>>G,_=F&ae}return O&&_!==0&&(O.words[O.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(y,x,V){return i(this.negative===0),this.iushrn(y,x,V)},o.prototype.shln=function(y){return this.clone().ishln(y)},o.prototype.ushln=function(y){return this.clone().iushln(y)},o.prototype.shrn=function(y){return this.clone().ishrn(y)},o.prototype.ushrn=function(y){return this.clone().iushrn(y)},o.prototype.testn=function(y){i(typeof y=="number"&&y>=0);var x=y%26,V=(y-x)/26,J=1<<x;if(this.length<=V)return!1;var G=this.words[V];return!!(G&J)},o.prototype.imaskn=function(y){i(typeof y=="number"&&y>=0);var x=y%26,V=(y-x)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=V)return this;if(x!==0&&V++,this.length=Math.min(V,this.length),x!==0){var J=67108863^67108863>>>x<<x;this.words[this.length-1]&=J}return this._strip()},o.prototype.maskn=function(y){return this.clone().imaskn(y)},o.prototype.iaddn=function(y){return i(typeof y=="number"),i(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<=y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},o.prototype._iaddn=function(y){this.words[0]+=y;for(var x=0;x<this.length&&this.words[x]>=67108864;x++)this.words[x]-=67108864,x===this.length-1?this.words[x+1]=1:this.words[x+1]++;return this.length=Math.max(this.length,x+1),this},o.prototype.isubn=function(y){if(i(typeof y=="number"),i(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var x=0;x<this.length&&this.words[x]<0;x++)this.words[x]+=67108864,this.words[x+1]-=1;return this._strip()},o.prototype.addn=function(y){return this.clone().iaddn(y)},o.prototype.subn=function(y){return this.clone().isubn(y)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(y,x,V){var J=y.length+V,G;this._expand(J);var re,ae=0;for(G=0;G<y.length;G++){re=(this.words[G+V]|0)+ae;var O=(y.words[G]|0)*x;re-=O&67108863,ae=(re>>26)-(O/67108864|0),this.words[G+V]=re&67108863}for(;G<this.length-V;G++)re=(this.words[G+V]|0)+ae,ae=re>>26,this.words[G+V]=re&67108863;if(ae===0)return this._strip();for(i(ae===-1),ae=0,G=0;G<this.length;G++)re=-(this.words[G]|0)+ae,ae=re>>26,this.words[G]=re&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(y,x){var V=this.length-y.length,J=this.clone(),G=y,re=G.words[G.length-1]|0,ae=this._countBits(re);V=26-ae,V!==0&&(G=G.ushln(V),J.iushln(V),re=G.words[G.length-1]|0);var O=J.length-G.length,w;if(x!=="mod"){w=new o(null),w.length=O+1,w.words=new Array(w.length);for(var _=0;_<w.length;_++)w.words[_]=0}var F=J.clone()._ishlnsubmul(G,1,O);F.negative===0&&(J=F,w&&(w.words[O]=1));for(var ee=O-1;ee>=0;ee--){var ce=(J.words[G.length+ee]|0)*67108864+(J.words[G.length+ee-1]|0);for(ce=Math.min(ce/re|0,67108863),J._ishlnsubmul(G,ce,ee);J.negative!==0;)ce--,J.negative=0,J._ishlnsubmul(G,1,ee),J.isZero()||(J.negative^=1);w&&(w.words[ee]=ce)}return w&&w._strip(),J._strip(),x!=="div"&&V!==0&&J.iushrn(V),{div:w||null,mod:J}},o.prototype.divmod=function(y,x,V){if(i(!y.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var J,G,re;return this.negative!==0&&y.negative===0?(re=this.neg().divmod(y,x),x!=="mod"&&(J=re.div.neg()),x!=="div"&&(G=re.mod.neg(),V&&G.negative!==0&&G.iadd(y)),{div:J,mod:G}):this.negative===0&&y.negative!==0?(re=this.divmod(y.neg(),x),x!=="mod"&&(J=re.div.neg()),{div:J,mod:re.mod}):(this.negative&y.negative)!==0?(re=this.neg().divmod(y.neg(),x),x!=="div"&&(G=re.mod.neg(),V&&G.negative!==0&&G.isub(y)),{div:re.div,mod:G}):y.length>this.length||this.cmp(y)<0?{div:new o(0),mod:this}:y.length===1?x==="div"?{div:this.divn(y.words[0]),mod:null}:x==="mod"?{div:null,mod:new o(this.modrn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new o(this.modrn(y.words[0]))}:this._wordDiv(y,x)},o.prototype.div=function(y){return this.divmod(y,"div",!1).div},o.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},o.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},o.prototype.divRound=function(y){var x=this.divmod(y);if(x.mod.isZero())return x.div;var V=x.div.negative!==0?x.mod.isub(y):x.mod,J=y.ushrn(1),G=y.andln(1),re=V.cmp(J);return re<0||G===1&&re===0?x.div:x.div.negative!==0?x.div.isubn(1):x.div.iaddn(1)},o.prototype.modrn=function(y){var x=y<0;x&&(y=-y),i(y<=67108863);for(var V=(1<<26)%y,J=0,G=this.length-1;G>=0;G--)J=(V*J+(this.words[G]|0))%y;return x?-J:J},o.prototype.modn=function(y){return this.modrn(y)},o.prototype.idivn=function(y){var x=y<0;x&&(y=-y),i(y<=67108863);for(var V=0,J=this.length-1;J>=0;J--){var G=(this.words[J]|0)+V*67108864;this.words[J]=G/y|0,V=G%y}return this._strip(),x?this.ineg():this},o.prototype.divn=function(y){return this.clone().idivn(y)},o.prototype.egcd=function(y){i(y.negative===0),i(!y.isZero());var x=this,V=y.clone();x.negative!==0?x=x.umod(y):x=x.clone();for(var J=new o(1),G=new o(0),re=new o(0),ae=new o(1),O=0;x.isEven()&&V.isEven();)x.iushrn(1),V.iushrn(1),++O;for(var w=V.clone(),_=x.clone();!x.isZero();){for(var F=0,ee=1;(x.words[0]&ee)===0&&F<26;++F,ee<<=1);if(F>0)for(x.iushrn(F);F-- >0;)(J.isOdd()||G.isOdd())&&(J.iadd(w),G.isub(_)),J.iushrn(1),G.iushrn(1);for(var ce=0,we=1;(V.words[0]&we)===0&&ce<26;++ce,we<<=1);if(ce>0)for(V.iushrn(ce);ce-- >0;)(re.isOdd()||ae.isOdd())&&(re.iadd(w),ae.isub(_)),re.iushrn(1),ae.iushrn(1);x.cmp(V)>=0?(x.isub(V),J.isub(re),G.isub(ae)):(V.isub(x),re.isub(J),ae.isub(G))}return{a:re,b:ae,gcd:V.iushln(O)}},o.prototype._invmp=function(y){i(y.negative===0),i(!y.isZero());var x=this,V=y.clone();x.negative!==0?x=x.umod(y):x=x.clone();for(var J=new o(1),G=new o(0),re=V.clone();x.cmpn(1)>0&&V.cmpn(1)>0;){for(var ae=0,O=1;(x.words[0]&O)===0&&ae<26;++ae,O<<=1);if(ae>0)for(x.iushrn(ae);ae-- >0;)J.isOdd()&&J.iadd(re),J.iushrn(1);for(var w=0,_=1;(V.words[0]&_)===0&&w<26;++w,_<<=1);if(w>0)for(V.iushrn(w);w-- >0;)G.isOdd()&&G.iadd(re),G.iushrn(1);x.cmp(V)>=0?(x.isub(V),J.isub(G)):(V.isub(x),G.isub(J))}var F;return x.cmpn(1)===0?F=J:F=G,F.cmpn(0)<0&&F.iadd(y),F},o.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var x=this.clone(),V=y.clone();x.negative=0,V.negative=0;for(var J=0;x.isEven()&&V.isEven();J++)x.iushrn(1),V.iushrn(1);do{for(;x.isEven();)x.iushrn(1);for(;V.isEven();)V.iushrn(1);var G=x.cmp(V);if(G<0){var re=x;x=V,V=re}else if(G===0||V.cmpn(1)===0)break;x.isub(V)}while(!0);return V.iushln(J)},o.prototype.invm=function(y){return this.egcd(y).a.umod(y)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(y){return this.words[0]&y},o.prototype.bincn=function(y){i(typeof y=="number");var x=y%26,V=(y-x)/26,J=1<<x;if(this.length<=V)return this._expand(V+1),this.words[V]|=J,this;for(var G=J,re=V;G!==0&&re<this.length;re++){var ae=this.words[re]|0;ae+=G,G=ae>>>26,ae&=67108863,this.words[re]=ae}return G!==0&&(this.words[re]=G,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(y){var x=y<0;if(this.negative!==0&&!x)return-1;if(this.negative===0&&x)return 1;this._strip();var V;if(this.length>1)V=1;else{x&&(y=-y),i(y<=67108863,"Number is too big");var J=this.words[0]|0;V=J===y?0:J<y?-1:1}return this.negative!==0?-V|0:V},o.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var x=this.ucmp(y);return this.negative!==0?-x|0:x},o.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var x=0,V=this.length-1;V>=0;V--){var J=this.words[V]|0,G=y.words[V]|0;if(J!==G){J<G?x=-1:J>G&&(x=1);break}}return x},o.prototype.gtn=function(y){return this.cmpn(y)===1},o.prototype.gt=function(y){return this.cmp(y)===1},o.prototype.gten=function(y){return this.cmpn(y)>=0},o.prototype.gte=function(y){return this.cmp(y)>=0},o.prototype.ltn=function(y){return this.cmpn(y)===-1},o.prototype.lt=function(y){return this.cmp(y)===-1},o.prototype.lten=function(y){return this.cmpn(y)<=0},o.prototype.lte=function(y){return this.cmp(y)<=0},o.prototype.eqn=function(y){return this.cmpn(y)===0},o.prototype.eq=function(y){return this.cmp(y)===0},o.red=function(y){return new q(y)},o.prototype.toRed=function(y){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(y){return this.red=y,this},o.prototype.forceRed=function(y){return i(!this.red,"Already a number in reduction context"),this._forceRed(y)},o.prototype.redAdd=function(y){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},o.prototype.redIAdd=function(y){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},o.prototype.redSub=function(y){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},o.prototype.redISub=function(y){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},o.prototype.redShl=function(y){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},o.prototype.redMul=function(y){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},o.prototype.redIMul=function(y){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(y){return i(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var le={k256:null,p224:null,p192:null,p25519:null};function de(I,y){this.name=I,this.p=new o(y,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}de.prototype._tmp=function(){var y=new o(null);return y.words=new Array(Math.ceil(this.n/13)),y},de.prototype.ireduce=function(y){var x=y,V;do this.split(x,this.tmp),x=this.imulK(x),x=x.iadd(this.tmp),V=x.bitLength();while(V>this.n);var J=V<this.n?-1:x.ucmp(this.p);return J===0?(x.words[0]=0,x.length=1):J>0?x.isub(this.p):x.strip!==void 0?x.strip():x._strip(),x},de.prototype.split=function(y,x){y.iushrn(this.n,0,x)},de.prototype.imulK=function(y){return y.imul(this.k)};function Z(){de.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Z,de),Z.prototype.split=function(y,x){for(var V=4194303,J=Math.min(y.length,9),G=0;G<J;G++)x.words[G]=y.words[G];if(x.length=J,y.length<=9){y.words[0]=0,y.length=1;return}var re=y.words[9];for(x.words[x.length++]=re&V,G=10;G<y.length;G++){var ae=y.words[G]|0;y.words[G-10]=(ae&V)<<4|re>>>22,re=ae}re>>>=22,y.words[G-10]=re,re===0&&y.length>10?y.length-=10:y.length-=9},Z.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var x=0,V=0;V<y.length;V++){var J=y.words[V]|0;x+=J*977,y.words[V]=x&67108863,x=J*64+(x/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function $(){de.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s($,de);function D(){de.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(D,de);function U(){de.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(U,de),U.prototype.imulK=function(y){for(var x=0,V=0;V<y.length;V++){var J=(y.words[V]|0)*19+x,G=J&67108863;J>>>=26,y.words[V]=G,x=J}return x!==0&&(y.words[y.length++]=x),y},o._prime=function(y){if(le[y])return le[y];var x;if(y==="k256")x=new Z;else if(y==="p224")x=new $;else if(y==="p192")x=new D;else if(y==="p25519")x=new U;else throw new Error("Unknown prime "+y);return le[y]=x,x};function q(I){if(typeof I=="string"){var y=o._prime(I);this.m=y.p,this.prime=y}else i(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}q.prototype._verify1=function(y){i(y.negative===0,"red works only with positives"),i(y.red,"red works only with red numbers")},q.prototype._verify2=function(y,x){i((y.negative|x.negative)===0,"red works only with positives"),i(y.red&&y.red===x.red,"red works only with red numbers")},q.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):(p(y,y.umod(this.m)._forceRed(this)),y)},q.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},q.prototype.add=function(y,x){this._verify2(y,x);var V=y.add(x);return V.cmp(this.m)>=0&&V.isub(this.m),V._forceRed(this)},q.prototype.iadd=function(y,x){this._verify2(y,x);var V=y.iadd(x);return V.cmp(this.m)>=0&&V.isub(this.m),V},q.prototype.sub=function(y,x){this._verify2(y,x);var V=y.sub(x);return V.cmpn(0)<0&&V.iadd(this.m),V._forceRed(this)},q.prototype.isub=function(y,x){this._verify2(y,x);var V=y.isub(x);return V.cmpn(0)<0&&V.iadd(this.m),V},q.prototype.shl=function(y,x){return this._verify1(y),this.imod(y.ushln(x))},q.prototype.imul=function(y,x){return this._verify2(y,x),this.imod(y.imul(x))},q.prototype.mul=function(y,x){return this._verify2(y,x),this.imod(y.mul(x))},q.prototype.isqr=function(y){return this.imul(y,y.clone())},q.prototype.sqr=function(y){return this.mul(y,y)},q.prototype.sqrt=function(y){if(y.isZero())return y.clone();var x=this.m.andln(3);if(i(x%2===1),x===3){var V=this.m.add(new o(1)).iushrn(2);return this.pow(y,V)}for(var J=this.m.subn(1),G=0;!J.isZero()&&J.andln(1)===0;)G++,J.iushrn(1);i(!J.isZero());var re=new o(1).toRed(this),ae=re.redNeg(),O=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new o(2*w*w).toRed(this);this.pow(w,O).cmp(ae)!==0;)w.redIAdd(ae);for(var _=this.pow(w,J),F=this.pow(y,J.addn(1).iushrn(1)),ee=this.pow(y,J),ce=G;ee.cmp(re)!==0;){for(var we=ee,Oe=0;we.cmp(re)!==0;Oe++)we=we.redSqr();i(Oe<ce);var ze=this.pow(_,new o(1).iushln(ce-Oe-1));F=F.redMul(ze),_=ze.redSqr(),ee=ee.redMul(_),ce=Oe}return F},q.prototype.invm=function(y){var x=y._invmp(this.m);return x.negative!==0?(x.negative=0,this.imod(x).redNeg()):this.imod(x)},q.prototype.pow=function(y,x){if(x.isZero())return new o(1).toRed(this);if(x.cmpn(1)===0)return y.clone();var V=4,J=new Array(1<<V);J[0]=new o(1).toRed(this),J[1]=y;for(var G=2;G<J.length;G++)J[G]=this.mul(J[G-1],y);var re=J[0],ae=0,O=0,w=x.bitLength()%26;for(w===0&&(w=26),G=x.length-1;G>=0;G--){for(var _=x.words[G],F=w-1;F>=0;F--){var ee=_>>F&1;if(re!==J[0]&&(re=this.sqr(re)),ee===0&&ae===0){O=0;continue}ae<<=1,ae|=ee,O++,!(O!==V&&(G!==0||F!==0))&&(re=this.mul(re,J[ae]),O=0,ae=0)}w=26}return re},q.prototype.convertTo=function(y){var x=y.umod(this.m);return x===y?x.clone():x},q.prototype.convertFrom=function(y){var x=y.clone();return x.red=null,x},o.mont=function(y){return new H(y)};function H(I){q.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(H,q),H.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},H.prototype.convertFrom=function(y){var x=this.imod(y.mul(this.rinv));return x.red=null,x},H.prototype.imul=function(y,x){if(y.isZero()||x.isZero())return y.words[0]=0,y.length=1,y;var V=y.imul(x),J=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=V.isub(J).iushrn(this.shift),re=G;return G.cmp(this.m)>=0?re=G.isub(this.m):G.cmpn(0)<0&&(re=G.iadd(this.m)),re._forceRed(this)},H.prototype.mul=function(y,x){if(y.isZero()||x.isZero())return new o(0)._forceRed(this);var V=y.mul(x),J=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=V.isub(J).iushrn(this.shift),re=G;return G.cmp(this.m)>=0?re=G.isub(this.m):G.cmpn(0)<0&&(re=G.iadd(this.m)),re._forceRed(this)},H.prototype.invm=function(y){var x=this.imod(y._invmp(this.m).mul(this.r2));return x._forceRed(this)}})(r,I9)})(xp)),xp.exports}var A9=Gk();const eA=nl(A9);var rp={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var tA;function Yk(){return tA||(tA=1,(function(r,e){var n=P1(),i=n.Buffer;function s(l,u){for(var d in l)u[d]=l[d]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=n:(s(n,e),e.Buffer=o);function o(l,u,d){return i(l,u,d)}o.prototype=Object.create(i.prototype),s(i,o),o.from=function(l,u,d){if(typeof l=="number")throw new TypeError("Argument must not be a number");return i(l,u,d)},o.alloc=function(l,u,d){if(typeof l!="number")throw new TypeError("Argument must be a number");var f=i(l);return u!==void 0?typeof d=="string"?f.fill(u,d):f.fill(u):f.fill(0),f},o.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return i(l)},o.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(l)}})(rp,rp.exports)),rp.exports}var vy,nA;function x9(){if(nA)return vy;nA=1;var r=Yk().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var i=new Uint8Array(256),s=0;s<i.length;s++)i[s]=255;for(var o=0;o<n.length;o++){var l=n.charAt(o),u=l.charCodeAt(0);if(i[u]!==255)throw new TypeError(l+" is ambiguous");i[u]=o}var d=n.length,f=n.charAt(0),p=Math.log(d)/Math.log(256),v=Math.log(256)/Math.log(d);function E(T){if((Array.isArray(T)||T instanceof Uint8Array)&&(T=r.from(T)),!r.isBuffer(T))throw new TypeError("Expected Buffer");if(T.length===0)return"";for(var M=0,W=0,z=0,j=T.length;z!==j&&T[z]===0;)z++,M++;for(var se=(j-z)*v+1>>>0,le=new Uint8Array(se);z!==j;){for(var de=T[z],Z=0,$=se-1;(de!==0||Z<W)&&$!==-1;$--,Z++)de+=256*le[$]>>>0,le[$]=de%d>>>0,de=de/d>>>0;if(de!==0)throw new Error("Non-zero carry");W=Z,z++}for(var D=se-W;D!==se&&le[D]===0;)D++;for(var U=f.repeat(M);D<se;++D)U+=n.charAt(le[D]);return U}function S(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return r.alloc(0);for(var M=0,W=0,z=0;T[M]===f;)W++,M++;for(var j=(T.length-M)*p+1>>>0,se=new Uint8Array(j);M<T.length;){var le=T.charCodeAt(M);if(le>255)return;var de=i[le];if(de===255)return;for(var Z=0,$=j-1;(de!==0||Z<z)&&$!==-1;$--,Z++)de+=d*se[$]>>>0,se[$]=de%256>>>0,de=de/256>>>0;if(de!==0)throw new Error("Non-zero carry");z=Z,M++}for(var D=j-z;D!==j&&se[D]===0;)D++;var U=r.allocUnsafe(W+(j-D));U.fill(0,0,W);for(var q=W;D!==j;)U[q++]=se[D++];return U}function R(T){var M=S(T);if(M)return M;throw new Error("Non-base"+d+" character")}return{encode:E,decodeUnsafe:S,decode:R}}return vy=e,vy}var Ey,rA;function T9(){if(rA)return Ey;rA=1;var r=x9(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Ey=r(e),Ey}var R9=T9();const ci=nl(R9),iA=Tk;var Gn={},_y,sA;function k9(){if(sA)return _y;sA=1;var r=Yk().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var i=new Uint8Array(256),s=0;s<i.length;s++)i[s]=255;for(var o=0;o<n.length;o++){var l=n.charAt(o),u=l.charCodeAt(0);if(i[u]!==255)throw new TypeError(l+" is ambiguous");i[u]=o}var d=n.length,f=n.charAt(0),p=Math.log(d)/Math.log(256),v=Math.log(256)/Math.log(d);function E(T){if((Array.isArray(T)||T instanceof Uint8Array)&&(T=r.from(T)),!r.isBuffer(T))throw new TypeError("Expected Buffer");if(T.length===0)return"";for(var M=0,W=0,z=0,j=T.length;z!==j&&T[z]===0;)z++,M++;for(var se=(j-z)*v+1>>>0,le=new Uint8Array(se);z!==j;){for(var de=T[z],Z=0,$=se-1;(de!==0||Z<W)&&$!==-1;$--,Z++)de+=256*le[$]>>>0,le[$]=de%d>>>0,de=de/d>>>0;if(de!==0)throw new Error("Non-zero carry");W=Z,z++}for(var D=se-W;D!==se&&le[D]===0;)D++;for(var U=f.repeat(M);D<se;++D)U+=n.charAt(le[D]);return U}function S(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return r.alloc(0);for(var M=0,W=0,z=0;T[M]===f;)W++,M++;for(var j=(T.length-M)*p+1>>>0,se=new Uint8Array(j);M<T.length;){var le=T.charCodeAt(M);if(le>255)return;var de=i[le];if(de===255)return;for(var Z=0,$=j-1;(de!==0||Z<z)&&$!==-1;$--,Z++)de+=d*se[$]>>>0,se[$]=de%256>>>0,de=de/256>>>0;if(de!==0)throw new Error("Non-zero carry");z=Z,M++}for(var D=j-z;D!==j&&se[D]===0;)D++;var U=r.allocUnsafe(W+(j-D));U.fill(0,0,W);for(var q=W;D!==j;)U[q++]=se[D++];return U}function R(T){var M=S(T);if(M)return M;throw new Error("Non-base"+d+" character")}return{encode:E,decodeUnsafe:S,decode:R}}return _y=e,_y}var by,oA;function C9(){if(oA)return by;oA=1;var r=k9(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return by=r(e),by}function zo(r,e,n){return e<=r&&r<=n}function Gm(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function P9(r){for(var e=String(r),n=e.length,i=0,s=[];i<n;){var o=e.charCodeAt(i);if(o<55296||o>57343)s.push(o);else if(56320<=o&&o<=57343)s.push(65533);else if(55296<=o&&o<=56319)if(i===n-1)s.push(65533);else{var l=r.charCodeAt(i+1);if(56320<=l&&l<=57343){var u=o&1023,d=l&1023;s.push(65536+(u<<10)+d),i+=1}else s.push(65533)}i+=1}return s}function M9(r){for(var e="",n=0;n<r.length;++n){var i=r[n];i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode((i>>10)+55296,(i&1023)+56320))}return e}var lm=-1;function F1(r){this.tokens=[].slice.call(r)}F1.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():lm},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var _u=-1;function Sy(r,e){if(r)throw TypeError("Decoder error");return e||65533}var cm="utf-8";function um(r,e){if(!(this instanceof um))return new um(r,e);if(r=r!==void 0?String(r).toLowerCase():cm,r!==cm)throw new Error("Encoding not supported. Only utf-8 is supported");e=Gm(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}um.prototype={decode:function(e,n){var i;typeof e=="object"&&e instanceof ArrayBuffer?i=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):i=new Uint8Array(0),n=Gm(n),this._streaming||(this._decoder=new N9({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var s=new F1(i),o=[],l;!s.endOfStream()&&(l=this._decoder.handler(s,s.read()),l!==_u);)l!==null&&(Array.isArray(l)?o.push.apply(o,l):o.push(l));if(!this._streaming){do{if(l=this._decoder.handler(s,s.read()),l===_u)break;l!==null&&(Array.isArray(l)?o.push.apply(o,l):o.push(l))}while(!s.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),M9(o)}};function dm(r,e){if(!(this instanceof dm))return new dm(r,e);if(r=r!==void 0?String(r).toLowerCase():cm,r!==cm)throw new Error("Encoding not supported. Only utf-8 is supported");e=Gm(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}dm.prototype={encode:function(e,n){e=e?String(e):"",n=Gm(n),this._streaming||(this._encoder=new O9(this._options)),this._streaming=!!n.stream;for(var i=[],s=new F1(P9(e)),o;!s.endOfStream()&&(o=this._encoder.handler(s,s.read()),o!==_u);)Array.isArray(o)?i.push.apply(i,o):i.push(o);if(!this._streaming){for(;o=this._encoder.handler(s,s.read()),o!==_u;)Array.isArray(o)?i.push.apply(i,o):i.push(o);this._encoder=null}return new Uint8Array(i)}};function N9(r){var e=r.fatal,n=0,i=0,s=0,o=128,l=191;this.handler=function(u,d){if(d===lm&&s!==0)return s=0,Sy(e);if(d===lm)return _u;if(s===0){if(zo(d,0,127))return d;if(zo(d,194,223))s=1,n=d-192;else if(zo(d,224,239))d===224&&(o=160),d===237&&(l=159),s=2,n=d-224;else if(zo(d,240,244))d===240&&(o=144),d===244&&(l=143),s=3,n=d-240;else return Sy(e);return n=n<<6*s,null}if(!zo(d,o,l))return n=s=i=0,o=128,l=191,u.prepend(d),Sy(e);if(o=128,l=191,i+=1,n+=d-128<<6*(s-i),i!==s)return null;var f=n;return n=s=i=0,f}}function O9(r){r.fatal,this.handler=function(e,n){if(n===lm)return _u;if(zo(n,0,127))return n;var i,s;zo(n,128,2047)?(i=1,s=192):zo(n,2048,65535)?(i=2,s=224):zo(n,65536,1114111)&&(i=3,s=240);for(var o=[(n>>6*i)+s];i>0;){var l=n>>6*(i-1);o.push(128|l&63),i-=1}return o}}const D9=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:um,TextEncoder:dm},Symbol.toStringTag,{value:"Module"})),L9=ph(D9);var aA;function B9(){if(aA)return Gn;aA=1;var r=Gn&&Gn.__createBinding||(Object.create?(function(D,U,q,H){H===void 0&&(H=q),Object.defineProperty(D,H,{enumerable:!0,get:function(){return U[q]}})}):(function(D,U,q,H){H===void 0&&(H=q),D[H]=U[q]})),e=Gn&&Gn.__setModuleDefault||(Object.create?(function(D,U){Object.defineProperty(D,"default",{enumerable:!0,value:U})}):function(D,U){D.default=U}),n=Gn&&Gn.__decorate||function(D,U,q,H){var I=arguments.length,y=I<3?U:H===null?H=Object.getOwnPropertyDescriptor(U,q):H,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(D,U,q,H);else for(var V=D.length-1;V>=0;V--)(x=D[V])&&(y=(I<3?x(y):I>3?x(U,q,y):x(U,q))||y);return I>3&&y&&Object.defineProperty(U,q,y),y},i=Gn&&Gn.__importStar||function(D){if(D&&D.__esModule)return D;var U={};if(D!=null)for(var q in D)q!=="default"&&Object.hasOwnProperty.call(D,q)&&r(U,D,q);return e(U,D),U},s=Gn&&Gn.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.deserializeUnchecked=Gn.deserialize=Gn.serialize=Gn.BinaryReader=Gn.BinaryWriter=Gn.BorshError=Gn.baseDecode=Gn.baseEncode=void 0;const o=s(Gk()),l=s(C9()),u=i(L9),d=typeof TextDecoder!="function"?u.TextDecoder:TextDecoder,f=new d("utf-8",{fatal:!0});function p(D){return typeof D=="string"&&(D=Buffer.from(D,"utf8")),l.default.encode(Buffer.from(D))}Gn.baseEncode=p;function v(D){return Buffer.from(l.default.decode(D))}Gn.baseDecode=v;const E=1024;class S extends Error{constructor(U){super(U),this.fieldPath=[],this.originalMessage=U}addToFieldPath(U){this.fieldPath.splice(0,0,U),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Gn.BorshError=S;class R{constructor(){this.buf=Buffer.alloc(E),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(E)]))}writeU8(U){this.maybeResize(),this.buf.writeUInt8(U,this.length),this.length+=1}writeU16(U){this.maybeResize(),this.buf.writeUInt16LE(U,this.length),this.length+=2}writeU32(U){this.maybeResize(),this.buf.writeUInt32LE(U,this.length),this.length+=4}writeU64(U){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(U).toArray("le",8)))}writeU128(U){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(U).toArray("le",16)))}writeU256(U){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(U).toArray("le",32)))}writeU512(U){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(U).toArray("le",64)))}writeBuffer(U){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),U,Buffer.alloc(E)]),this.length+=U.length}writeString(U){this.maybeResize();const q=Buffer.from(U,"utf8");this.writeU32(q.length),this.writeBuffer(q)}writeFixedArray(U){this.writeBuffer(Buffer.from(U))}writeArray(U,q){this.maybeResize(),this.writeU32(U.length);for(const H of U)this.maybeResize(),q(H)}toArray(){return this.buf.subarray(0,this.length)}}Gn.BinaryWriter=R;function T(D,U,q){const H=q.value;q.value=function(...I){try{return H.apply(this,I)}catch(y){if(y instanceof RangeError){const x=y.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(x)>=0)throw new S("Reached the end of buffer when deserializing")}throw y}}}class M{constructor(U){this.buf=U,this.offset=0}readU8(){const U=this.buf.readUInt8(this.offset);return this.offset+=1,U}readU16(){const U=this.buf.readUInt16LE(this.offset);return this.offset+=2,U}readU32(){const U=this.buf.readUInt32LE(this.offset);return this.offset+=4,U}readU64(){const U=this.readBuffer(8);return new o.default(U,"le")}readU128(){const U=this.readBuffer(16);return new o.default(U,"le")}readU256(){const U=this.readBuffer(32);return new o.default(U,"le")}readU512(){const U=this.readBuffer(64);return new o.default(U,"le")}readBuffer(U){if(this.offset+U>this.buf.length)throw new S(`Expected buffer length ${U} isn't within bounds`);const q=this.buf.slice(this.offset,this.offset+U);return this.offset+=U,q}readString(){const U=this.readU32(),q=this.readBuffer(U);try{return f.decode(q)}catch(H){throw new S(`Error decoding UTF-8 string: ${H}`)}}readFixedArray(U){return new Uint8Array(this.readBuffer(U))}readArray(U){const q=this.readU32(),H=Array();for(let I=0;I<q;++I)H.push(U());return H}}n([T],M.prototype,"readU8",null),n([T],M.prototype,"readU16",null),n([T],M.prototype,"readU32",null),n([T],M.prototype,"readU64",null),n([T],M.prototype,"readU128",null),n([T],M.prototype,"readU256",null),n([T],M.prototype,"readU512",null),n([T],M.prototype,"readString",null),n([T],M.prototype,"readFixedArray",null),n([T],M.prototype,"readArray",null),Gn.BinaryReader=M;function W(D){return D.charAt(0).toUpperCase()+D.slice(1)}function z(D,U,q,H,I){try{if(typeof H=="string")I[`write${W(H)}`](q);else if(H instanceof Array)if(typeof H[0]=="number"){if(q.length!==H[0])throw new S(`Expecting byte array of length ${H[0]}, but got ${q.length} bytes`);I.writeFixedArray(q)}else if(H.length===2&&typeof H[1]=="number"){if(q.length!==H[1])throw new S(`Expecting byte array of length ${H[1]}, but got ${q.length} bytes`);for(let y=0;y<H[1];y++)z(D,null,q[y],H[0],I)}else I.writeArray(q,y=>{z(D,U,y,H[0],I)});else if(H.kind!==void 0)switch(H.kind){case"option":{q==null?I.writeU8(0):(I.writeU8(1),z(D,U,q,H.type,I));break}case"map":{I.writeU32(q.size),q.forEach((y,x)=>{z(D,U,x,H.key,I),z(D,U,y,H.value,I)});break}default:throw new S(`FieldType ${H} unrecognized`)}else j(D,q,I)}catch(y){throw y instanceof S&&y.addToFieldPath(U),y}}function j(D,U,q){if(typeof U.borshSerialize=="function"){U.borshSerialize(q);return}const H=D.get(U.constructor);if(!H)throw new S(`Class ${U.constructor.name} is missing in schema`);if(H.kind==="struct")H.fields.map(([I,y])=>{z(D,I,U[I],y,q)});else if(H.kind==="enum"){const I=U[H.field];for(let y=0;y<H.values.length;++y){const[x,V]=H.values[y];if(x===I){q.writeU8(y),z(D,x,U[x],V,q);break}}}else throw new S(`Unexpected schema kind: ${H.kind} for ${U.constructor.name}`)}function se(D,U,q=R){const H=new q;return j(D,U,H),H.toArray()}Gn.serialize=se;function le(D,U,q,H){try{if(typeof q=="string")return H[`read${W(q)}`]();if(q instanceof Array){if(typeof q[0]=="number")return H.readFixedArray(q[0]);if(typeof q[1]=="number"){const I=[];for(let y=0;y<q[1];y++)I.push(le(D,null,q[0],H));return I}else return H.readArray(()=>le(D,U,q[0],H))}if(q.kind==="option")return H.readU8()?le(D,U,q.type,H):void 0;if(q.kind==="map"){let I=new Map;const y=H.readU32();for(let x=0;x<y;x++){const V=le(D,U,q.key,H),J=le(D,U,q.value,H);I.set(V,J)}return I}return de(D,q,H)}catch(I){throw I instanceof S&&I.addToFieldPath(U),I}}function de(D,U,q){if(typeof U.borshDeserialize=="function")return U.borshDeserialize(q);const H=D.get(U);if(!H)throw new S(`Class ${U.name} is missing in schema`);if(H.kind==="struct"){const I={};for(const[y,x]of D.get(U).fields)I[y]=le(D,y,x,q);return new U(I)}if(H.kind==="enum"){const I=q.readU8();if(I>=H.values.length)throw new S(`Enum index: ${I} is out of range`);const[y,x]=H.values[I],V=le(D,y,x,q);return new U({[y]:V})}throw new S(`Unexpected schema kind: ${H.kind} for ${U.constructor.name}`)}function Z(D,U,q,H=M){const I=new H(q),y=de(D,U,I);if(I.offset<q.length)throw new S(`Unexpected ${q.length-I.offset} bytes after deserialized data`);return y}Gn.deserialize=Z;function $(D,U,q,H=M){const I=new H(q);return de(D,U,I)}return Gn.deserializeUnchecked=$,Gn}var Iy=B9(),ke={},lA;function U9(){if(lA)return ke;lA=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.s16=ke.s8=ke.nu64be=ke.u48be=ke.u40be=ke.u32be=ke.u24be=ke.u16be=ke.nu64=ke.u48=ke.u40=ke.u32=ke.u24=ke.u16=ke.u8=ke.offset=ke.greedy=ke.Constant=ke.UTF8=ke.CString=ke.Blob=ke.Boolean=ke.BitField=ke.BitStructure=ke.VariantLayout=ke.Union=ke.UnionLayoutDiscriminator=ke.UnionDiscriminator=ke.Structure=ke.Sequence=ke.DoubleBE=ke.Double=ke.FloatBE=ke.Float=ke.NearInt64BE=ke.NearInt64=ke.NearUInt64BE=ke.NearUInt64=ke.IntBE=ke.Int=ke.UIntBE=ke.UInt=ke.OffsetLayout=ke.GreedyCount=ke.ExternalLayout=ke.bindConstructorLayout=ke.nameWithProperty=ke.Layout=ke.uint8ArrayToBuffer=ke.checkUint8Array=void 0,ke.constant=ke.utf8=ke.cstr=ke.blob=ke.unionLayoutDiscriminator=ke.union=ke.seq=ke.bits=ke.struct=ke.f64be=ke.f64=ke.f32be=ke.f32=ke.ns64be=ke.s48be=ke.s40be=ke.s32be=ke.s24be=ke.s16be=ke.ns64=ke.s48=ke.s40=ke.s32=ke.s24=void 0;const r=P1();function e(w){if(!(w instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ke.checkUint8Array=e;function n(w){return e(w),r.Buffer.from(w.buffer,w.byteOffset,w.length)}ke.uint8ArrayToBuffer=n;let i=class{constructor(_,F){if(!Number.isInteger(_))throw new TypeError("span must be an integer");this.span=_,this.property=F}makeDestinationObject(){return{}}getSpan(_,F){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(_){const F=Object.create(this.constructor.prototype);return Object.assign(F,this),F.property=_,F}fromArray(_){}};ke.Layout=i;function s(w,_){return _.property?w+"["+_.property+"]":w}ke.nameWithProperty=s;function o(w,_){if(typeof w!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(w,"layout_"))throw new Error("Class is already bound to a layout");if(!(_&&_ instanceof i))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(_,"boundConstructor_"))throw new Error("layout is already bound to a constructor");w.layout_=_,_.boundConstructor_=w,_.makeDestinationObject=(()=>new w),Object.defineProperty(w.prototype,"encode",{value(F,ee){return _.encode(this,F,ee)},writable:!0}),Object.defineProperty(w,"decode",{value(F,ee){return _.decode(F,ee)},writable:!0})}ke.bindConstructorLayout=o;class l extends i{isCount(){throw new Error("ExternalLayout is abstract")}}ke.ExternalLayout=l;class u extends l{constructor(_=1,F){if(!Number.isInteger(_)||0>=_)throw new TypeError("elementSpan must be a (positive) integer");super(-1,F),this.elementSpan=_}isCount(){return!0}decode(_,F=0){e(_);const ee=_.length-F;return Math.floor(ee/this.elementSpan)}encode(_,F,ee){return 0}}ke.GreedyCount=u;class d extends l{constructor(_,F=0,ee){if(!(_ instanceof i))throw new TypeError("layout must be a Layout");if(!Number.isInteger(F))throw new TypeError("offset must be integer or undefined");super(_.span,ee||_.property),this.layout=_,this.offset=F}isCount(){return this.layout instanceof f||this.layout instanceof p}decode(_,F=0){return this.layout.decode(_,F+this.offset)}encode(_,F,ee=0){return this.layout.encode(_,F,ee+this.offset)}}ke.OffsetLayout=d;class f extends i{constructor(_,F){if(super(_,F),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,F=0){return n(_).readUIntLE(F,this.span)}encode(_,F,ee=0){return n(F).writeUIntLE(_,ee,this.span),this.span}}ke.UInt=f;class p extends i{constructor(_,F){if(super(_,F),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,F=0){return n(_).readUIntBE(F,this.span)}encode(_,F,ee=0){return n(F).writeUIntBE(_,ee,this.span),this.span}}ke.UIntBE=p;class v extends i{constructor(_,F){if(super(_,F),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,F=0){return n(_).readIntLE(F,this.span)}encode(_,F,ee=0){return n(F).writeIntLE(_,ee,this.span),this.span}}ke.Int=v;class E extends i{constructor(_,F){if(super(_,F),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(_,F=0){return n(_).readIntBE(F,this.span)}encode(_,F,ee=0){return n(F).writeIntBE(_,ee,this.span),this.span}}ke.IntBE=E;const S=Math.pow(2,32);function R(w){const _=Math.floor(w/S),F=w-_*S;return{hi32:_,lo32:F}}function T(w,_){return w*S+_}class M extends i{constructor(_){super(8,_)}decode(_,F=0){const ee=n(_),ce=ee.readUInt32LE(F),we=ee.readUInt32LE(F+4);return T(we,ce)}encode(_,F,ee=0){const ce=R(_),we=n(F);return we.writeUInt32LE(ce.lo32,ee),we.writeUInt32LE(ce.hi32,ee+4),8}}ke.NearUInt64=M;class W extends i{constructor(_){super(8,_)}decode(_,F=0){const ee=n(_),ce=ee.readUInt32BE(F),we=ee.readUInt32BE(F+4);return T(ce,we)}encode(_,F,ee=0){const ce=R(_),we=n(F);return we.writeUInt32BE(ce.hi32,ee),we.writeUInt32BE(ce.lo32,ee+4),8}}ke.NearUInt64BE=W;class z extends i{constructor(_){super(8,_)}decode(_,F=0){const ee=n(_),ce=ee.readUInt32LE(F),we=ee.readInt32LE(F+4);return T(we,ce)}encode(_,F,ee=0){const ce=R(_),we=n(F);return we.writeUInt32LE(ce.lo32,ee),we.writeInt32LE(ce.hi32,ee+4),8}}ke.NearInt64=z;class j extends i{constructor(_){super(8,_)}decode(_,F=0){const ee=n(_),ce=ee.readInt32BE(F),we=ee.readUInt32BE(F+4);return T(ce,we)}encode(_,F,ee=0){const ce=R(_),we=n(F);return we.writeInt32BE(ce.hi32,ee),we.writeUInt32BE(ce.lo32,ee+4),8}}ke.NearInt64BE=j;class se extends i{constructor(_){super(4,_)}decode(_,F=0){return n(_).readFloatLE(F)}encode(_,F,ee=0){return n(F).writeFloatLE(_,ee),4}}ke.Float=se;class le extends i{constructor(_){super(4,_)}decode(_,F=0){return n(_).readFloatBE(F)}encode(_,F,ee=0){return n(F).writeFloatBE(_,ee),4}}ke.FloatBE=le;class de extends i{constructor(_){super(8,_)}decode(_,F=0){return n(_).readDoubleLE(F)}encode(_,F,ee=0){return n(F).writeDoubleLE(_,ee),8}}ke.Double=de;class Z extends i{constructor(_){super(8,_)}decode(_,F=0){return n(_).readDoubleBE(F)}encode(_,F,ee=0){return n(F).writeDoubleBE(_,ee),8}}ke.DoubleBE=Z;class $ extends i{constructor(_,F,ee){if(!(_ instanceof i))throw new TypeError("elementLayout must be a Layout");if(!(F instanceof l&&F.isCount()||Number.isInteger(F)&&0<=F))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let ce=-1;!(F instanceof l)&&0<_.span&&(ce=F*_.span),super(ce,ee),this.elementLayout=_,this.count=F}getSpan(_,F=0){if(0<=this.span)return this.span;let ee=0,ce=this.count;if(ce instanceof l&&(ce=ce.decode(_,F)),0<this.elementLayout.span)ee=ce*this.elementLayout.span;else{let we=0;for(;we<ce;)ee+=this.elementLayout.getSpan(_,F+ee),++we}return ee}decode(_,F=0){const ee=[];let ce=0,we=this.count;for(we instanceof l&&(we=we.decode(_,F));ce<we;)ee.push(this.elementLayout.decode(_,F)),F+=this.elementLayout.getSpan(_,F),ce+=1;return ee}encode(_,F,ee=0){const ce=this.elementLayout,we=_.reduce((Oe,ze)=>Oe+ce.encode(ze,F,ee+Oe),0);return this.count instanceof l&&this.count.encode(_.length,F,ee),we}}ke.Sequence=$;class D extends i{constructor(_,F,ee){if(!(Array.isArray(_)&&_.reduce((we,Oe)=>we&&Oe instanceof i,!0)))throw new TypeError("fields must be array of Layout instances");typeof F=="boolean"&&ee===void 0&&(ee=F,F=void 0);for(const we of _)if(0>we.span&&we.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let ce=-1;try{ce=_.reduce((we,Oe)=>we+Oe.getSpan(),0)}catch{}super(ce,F),this.fields=_,this.decodePrefixes=!!ee}getSpan(_,F=0){if(0<=this.span)return this.span;let ee=0;try{ee=this.fields.reduce((ce,we)=>{const Oe=we.getSpan(_,F);return F+=Oe,ce+Oe},0)}catch{throw new RangeError("indeterminate span")}return ee}decode(_,F=0){e(_);const ee=this.makeDestinationObject();for(const ce of this.fields)if(ce.property!==void 0&&(ee[ce.property]=ce.decode(_,F)),F+=ce.getSpan(_,F),this.decodePrefixes&&_.length===F)break;return ee}encode(_,F,ee=0){const ce=ee;let we=0,Oe=0;for(const ze of this.fields){let At=ze.span;if(Oe=0<At?At:0,ze.property!==void 0){const qt=_[ze.property];qt!==void 0&&(Oe=ze.encode(qt,F,ee),0>At&&(At=ze.getSpan(F,ee)))}we=ee,ee+=At}return we+Oe-ce}fromArray(_){const F=this.makeDestinationObject();for(const ee of this.fields)ee.property!==void 0&&0<_.length&&(F[ee.property]=_.shift());return F}layoutFor(_){if(typeof _!="string")throw new TypeError("property must be string");for(const F of this.fields)if(F.property===_)return F}offsetOf(_){if(typeof _!="string")throw new TypeError("property must be string");let F=0;for(const ee of this.fields){if(ee.property===_)return F;0>ee.span?F=-1:0<=F&&(F+=ee.span)}}}ke.Structure=D;class U{constructor(_){this.property=_}decode(_,F){throw new Error("UnionDiscriminator is abstract")}encode(_,F,ee){throw new Error("UnionDiscriminator is abstract")}}ke.UnionDiscriminator=U;class q extends U{constructor(_,F){if(!(_ instanceof l&&_.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(F||_.property||"variant"),this.layout=_}decode(_,F){return this.layout.decode(_,F)}encode(_,F,ee){return this.layout.encode(_,F,ee)}}ke.UnionLayoutDiscriminator=q;class H extends i{constructor(_,F,ee){let ce;if(_ instanceof f||_ instanceof p)ce=new q(new d(_));else if(_ instanceof l&&_.isCount())ce=new q(_);else if(_ instanceof U)ce=_;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(F===void 0&&(F=null),!(F===null||F instanceof i))throw new TypeError("defaultLayout must be null or a Layout");if(F!==null){if(0>F.span)throw new Error("defaultLayout must have constant span");F.property===void 0&&(F=F.replicate("content"))}let we=-1;F&&(we=F.span,0<=we&&(_ instanceof f||_ instanceof p)&&(we+=ce.layout.span)),super(we,ee),this.discriminator=ce,this.usesPrefixDiscriminator=_ instanceof f||_ instanceof p,this.defaultLayout=F,this.registry={};let Oe=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ze){return Oe(ze)},this.configGetSourceVariant=function(ze){Oe=ze.bind(this)}}getSpan(_,F=0){if(0<=this.span)return this.span;const ee=this.getVariant(_,F);if(!ee)throw new Error("unable to determine span for unrecognized variant");return ee.getSpan(_,F)}defaultGetSourceVariant(_){if(Object.prototype.hasOwnProperty.call(_,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(_,this.defaultLayout.property))return;const F=this.registry[_[this.discriminator.property]];if(F&&(!F.layout||F.property&&Object.prototype.hasOwnProperty.call(_,F.property)))return F}else for(const F in this.registry){const ee=this.registry[F];if(ee.property&&Object.prototype.hasOwnProperty.call(_,ee.property))return ee}throw new Error("unable to infer src variant")}decode(_,F=0){let ee;const ce=this.discriminator,we=ce.decode(_,F),Oe=this.registry[we];if(Oe===void 0){const ze=this.defaultLayout;let At=0;this.usesPrefixDiscriminator&&(At=ce.layout.span),ee=this.makeDestinationObject(),ee[ce.property]=we,ee[ze.property]=ze.decode(_,F+At)}else ee=Oe.decode(_,F);return ee}encode(_,F,ee=0){const ce=this.getSourceVariant(_);if(ce===void 0){const we=this.discriminator,Oe=this.defaultLayout;let ze=0;return this.usesPrefixDiscriminator&&(ze=we.layout.span),we.encode(_[we.property],F,ee),ze+Oe.encode(_[Oe.property],F,ee+ze)}return ce.encode(_,F,ee)}addVariant(_,F,ee){const ce=new I(this,_,F,ee);return this.registry[_]=ce,ce}getVariant(_,F=0){let ee;return _ instanceof Uint8Array?ee=this.discriminator.decode(_,F):ee=_,this.registry[ee]}}ke.Union=H;class I extends i{constructor(_,F,ee,ce){if(!(_ instanceof H))throw new TypeError("union must be a Union");if(!Number.isInteger(F)||0>F)throw new TypeError("variant must be a (non-negative) integer");if(typeof ee=="string"&&ce===void 0&&(ce=ee,ee=null),ee){if(!(ee instanceof i))throw new TypeError("layout must be a Layout");if(_.defaultLayout!==null&&0<=ee.span&&ee.span>_.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof ce!="string")throw new TypeError("variant must have a String property")}let we=_.span;0>_.span&&(we=ee?ee.span:0,0<=we&&_.usesPrefixDiscriminator&&(we+=_.discriminator.layout.span)),super(we,ce),this.union=_,this.variant=F,this.layout=ee||null}getSpan(_,F=0){if(0<=this.span)return this.span;let ee=0;this.union.usesPrefixDiscriminator&&(ee=this.union.discriminator.layout.span);let ce=0;return this.layout&&(ce=this.layout.getSpan(_,F+ee)),ee+ce}decode(_,F=0){const ee=this.makeDestinationObject();if(this!==this.union.getVariant(_,F))throw new Error("variant mismatch");let ce=0;return this.union.usesPrefixDiscriminator&&(ce=this.union.discriminator.layout.span),this.layout?ee[this.property]=this.layout.decode(_,F+ce):this.property?ee[this.property]=!0:this.union.usesPrefixDiscriminator&&(ee[this.union.discriminator.property]=this.variant),ee}encode(_,F,ee=0){let ce=0;if(this.union.usesPrefixDiscriminator&&(ce=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(_,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,F,ee);let we=ce;if(this.layout&&(this.layout.encode(_[this.property],F,ee+ce),we+=this.layout.getSpan(F,ee+ce),0<=this.union.span&&we>this.union.span))throw new Error("encoded variant overruns containing union");return we}fromArray(_){if(this.layout)return this.layout.fromArray(_)}}ke.VariantLayout=I;function y(w){return 0>w&&(w+=4294967296),w}class x extends i{constructor(_,F,ee){if(!(_ instanceof f||_ instanceof p))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof F=="string"&&ee===void 0&&(ee=F,F=!1),4<_.span)throw new RangeError("word cannot exceed 32 bits");super(_.span,ee),this.word=_,this.msb=!!F,this.fields=[];let ce=0;this._packedSetValue=function(we){return ce=y(we),this},this._packedGetValue=function(){return ce}}decode(_,F=0){const ee=this.makeDestinationObject(),ce=this.word.decode(_,F);this._packedSetValue(ce);for(const we of this.fields)we.property!==void 0&&(ee[we.property]=we.decode(_));return ee}encode(_,F,ee=0){const ce=this.word.decode(F,ee);this._packedSetValue(ce);for(const we of this.fields)if(we.property!==void 0){const Oe=_[we.property];Oe!==void 0&&we.encode(Oe)}return this.word.encode(this._packedGetValue(),F,ee)}addField(_,F){const ee=new V(this,_,F);return this.fields.push(ee),ee}addBoolean(_){const F=new J(this,_);return this.fields.push(F),F}fieldFor(_){if(typeof _!="string")throw new TypeError("property must be string");for(const F of this.fields)if(F.property===_)return F}}ke.BitStructure=x;class V{constructor(_,F,ee){if(!(_ instanceof x))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(F)||0>=F)throw new TypeError("bits must be positive integer");const ce=8*_.span,we=_.fields.reduce((Oe,ze)=>Oe+ze.bits,0);if(F+we>ce)throw new Error("bits too long for span remainder ("+(ce-we)+" of "+ce+" remain)");this.container=_,this.bits=F,this.valueMask=(1<<F)-1,F===32&&(this.valueMask=4294967295),this.start=we,this.container.msb&&(this.start=ce-we-F),this.wordMask=y(this.valueMask<<this.start),this.property=ee}decode(_,F){const ee=this.container._packedGetValue();return y(ee&this.wordMask)>>>this.start}encode(_){if(typeof _!="number"||!Number.isInteger(_)||_!==y(_&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const F=this.container._packedGetValue(),ee=y(_<<this.start);this.container._packedSetValue(y(F&~this.wordMask)|ee)}}ke.BitField=V;class J extends V{constructor(_,F){super(_,1,F)}decode(_,F){return!!super.decode(_,F)}encode(_){typeof _=="boolean"&&(_=+_),super.encode(_)}}ke.Boolean=J;class G extends i{constructor(_,F){if(!(_ instanceof l&&_.isCount()||Number.isInteger(_)&&0<=_))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let ee=-1;_ instanceof l||(ee=_),super(ee,F),this.length=_}getSpan(_,F){let ee=this.span;return 0>ee&&(ee=this.length.decode(_,F)),ee}decode(_,F=0){let ee=this.span;return 0>ee&&(ee=this.length.decode(_,F)),n(_).slice(F,F+ee)}encode(_,F,ee){let ce=this.length;if(this.length instanceof l&&(ce=_.length),!(_ instanceof Uint8Array&&ce===_.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+ce+") Uint8Array as src");if(ee+ce>F.length)throw new RangeError("encoding overruns Uint8Array");const we=n(_);return n(F).write(we.toString("hex"),ee,ce,"hex"),this.length instanceof l&&this.length.encode(ce,F,ee),ce}}ke.Blob=G;class re extends i{constructor(_){super(-1,_)}getSpan(_,F=0){e(_);let ee=F;for(;ee<_.length&&_[ee]!==0;)ee+=1;return 1+ee-F}decode(_,F=0){const ee=this.getSpan(_,F);return n(_).slice(F,F+ee-1).toString("utf-8")}encode(_,F,ee=0){typeof _!="string"&&(_=String(_));const ce=r.Buffer.from(_,"utf8"),we=ce.length;if(ee+we>F.length)throw new RangeError("encoding overruns Buffer");const Oe=n(F);return ce.copy(Oe,ee),Oe[ee+we]=0,we+1}}ke.CString=re;class ae extends i{constructor(_,F){if(typeof _=="string"&&F===void 0&&(F=_,_=void 0),_===void 0)_=-1;else if(!Number.isInteger(_))throw new TypeError("maxSpan must be an integer");super(-1,F),this.maxSpan=_}getSpan(_,F=0){return e(_),_.length-F}decode(_,F=0){const ee=this.getSpan(_,F);if(0<=this.maxSpan&&this.maxSpan<ee)throw new RangeError("text length exceeds maxSpan");return n(_).slice(F,F+ee).toString("utf-8")}encode(_,F,ee=0){typeof _!="string"&&(_=String(_));const ce=r.Buffer.from(_,"utf8"),we=ce.length;if(0<=this.maxSpan&&this.maxSpan<we)throw new RangeError("text length exceeds maxSpan");if(ee+we>F.length)throw new RangeError("encoding overruns Buffer");return ce.copy(n(F),ee),we}}ke.UTF8=ae;class O extends i{constructor(_,F){super(0,F),this.value=_}decode(_,F){return this.value}encode(_,F,ee){return 0}}return ke.Constant=O,ke.greedy=((w,_)=>new u(w,_)),ke.offset=((w,_,F)=>new d(w,_,F)),ke.u8=(w=>new f(1,w)),ke.u16=(w=>new f(2,w)),ke.u24=(w=>new f(3,w)),ke.u32=(w=>new f(4,w)),ke.u40=(w=>new f(5,w)),ke.u48=(w=>new f(6,w)),ke.nu64=(w=>new M(w)),ke.u16be=(w=>new p(2,w)),ke.u24be=(w=>new p(3,w)),ke.u32be=(w=>new p(4,w)),ke.u40be=(w=>new p(5,w)),ke.u48be=(w=>new p(6,w)),ke.nu64be=(w=>new W(w)),ke.s8=(w=>new v(1,w)),ke.s16=(w=>new v(2,w)),ke.s24=(w=>new v(3,w)),ke.s32=(w=>new v(4,w)),ke.s40=(w=>new v(5,w)),ke.s48=(w=>new v(6,w)),ke.ns64=(w=>new z(w)),ke.s16be=(w=>new E(2,w)),ke.s24be=(w=>new E(3,w)),ke.s32be=(w=>new E(4,w)),ke.s40be=(w=>new E(5,w)),ke.s48be=(w=>new E(6,w)),ke.ns64be=(w=>new j(w)),ke.f32=(w=>new se(w)),ke.f32be=(w=>new le(w)),ke.f64=(w=>new de(w)),ke.f64be=(w=>new Z(w)),ke.struct=((w,_,F)=>new D(w,_,F)),ke.bits=((w,_,F)=>new x(w,_,F)),ke.seq=((w,_,F)=>new $(w,_,F)),ke.union=((w,_,F)=>new H(w,_,F)),ke.unionLayoutDiscriminator=((w,_)=>new q(w,_)),ke.blob=((w,_)=>new G(w,_)),ke.cstr=(w=>new re(w)),ke.utf8=((w,_)=>new ae(w,_)),ke.constant=((w,_)=>new O(w,_)),ke}var he=U9(),V9=8078e3,F9=8078001,z9=8078004,W9=8078005,j9=8078006,$9=8078011;function Jk(r){return Array.isArray(r)?"%5B"+r.map(Jk).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function q9([r,e]){return`${r}=${Jk(e)}`}function K9(r){const e=Object.entries(r).map(q9).join("&");return btoa(e)}function H9(r,e={}){{let n=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(n+=` '${K9(e)}'`),`${n}\``}}var su=class extends Error{cause=this.cause;context;constructor(...[r,e]){let n,i;if(e){const{cause:o,...l}=e;o&&(i={cause:o}),Object.keys(l).length>0&&(n=l)}const s=H9(r,n);super(s,i),this.context={__code:r,...n},this.name="SolanaError"}};function G9(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function Y9(r){return Object.freeze({...r,encode:e=>{const n=new Uint8Array(G9(e,r));return r.write(e,n,0),n}})}function J9(r){return Object.freeze({...r,decode:(e,n=0)=>r.read(e,n)[0]})}function Fc(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function Q9(r,e){if(Fc(r)!==Fc(e))throw new su(z9);if(Fc(r)&&Fc(e)&&r.fixedSize!==e.fixedSize)throw new su(W9,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!Fc(r)&&!Fc(e)&&r.maxSize!==e.maxSize)throw new su(j9,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function X9(r,e,n=0){if(e.length-n<=0)throw new su(V9,{codecDescription:r})}function Z9(r,e,n,i=0){const s=n.length-i;if(s<e)throw new su(F9,{bytesLength:s,codecDescription:r,expected:e})}function ez(r,e,n,i){if(i<e||i>n)throw new su($9,{codecDescription:r,max:n,min:e,value:i})}function Qk(r){return r?.endian!==1}function tz(r){return Y9({fixedSize:r.size,write(e,n,i){r.range&&ez(r.name,r.range[0],r.range[1],e);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),e,Qk(r.config)),n.set(new Uint8Array(s),i),i+r.size}})}function nz(r){return J9({fixedSize:r.size,read(e,n=0){X9(r.name,e,n),Z9(r.name,r.size,e,n);const i=new DataView(rz(e,n,r.size));return[r.get(i,Qk(r.config)),n+r.size]}})}function rz(r,e,n){const i=r.byteOffset+(e??0),s=n??r.byteLength;return r.buffer.slice(i,i+s)}var Xk=(r={})=>tz({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,i)=>e.setBigUint64(0,BigInt(n),i),size:8}),iz=(r={})=>nz({config:r,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),sz=(r={})=>Q9(Xk(r),iz(r));class oz extends TypeError{constructor(e,n){let i;const{message:s,explanation:o,...l}=e,{path:u}=e,d=u.length===0?s:`At path: ${u.join(".")} -- ${s}`;super(o??d),o!=null&&(this.cause=d),Object.assign(this,l),this.name=this.constructor.name,this.failures=()=>i??(i=[e,...n()])}}function az(r){return Dh(r)&&typeof r[Symbol.iterator]=="function"}function Dh(r){return typeof r=="object"&&r!=null}function hm(r){return Dh(r)&&!Array.isArray(r)}function js(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function lz(r){const{done:e,value:n}=r.next();return e?void 0:n}function cz(r,e,n,i){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:o}=e,{type:l}=n,{refinement:u,message:d=`Expected a value of type \`${l}\`${u?` with refinement \`${u}\``:""}, but received: \`${js(i)}\``}=r;return{value:i,type:l,refinement:u,key:s[s.length-1],path:s,branch:o,...r,message:d}}function*cA(r,e,n,i){az(r)||(r=[r]);for(const s of r){const o=cz(s,e,n,i);o&&(yield o)}}function*z1(r,e,n={}){const{path:i=[],branch:s=[r],coerce:o=!1,mask:l=!1}=n,u={path:i,branch:s,mask:l};o&&(r=e.coercer(r,u));let d="valid";for(const f of e.validator(r,u))f.explanation=n.message,d="not_valid",yield[f,void 0];for(let[f,p,v]of e.entries(r,u)){const E=z1(p,v,{path:f===void 0?i:[...i,f],branch:f===void 0?s:[...s,p],coerce:o,mask:l,message:n.message});for(const S of E)S[0]?(d=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):o&&(p=S[1],f===void 0?r=p:r instanceof Map?r.set(f,p):r instanceof Set?r.add(p):Dh(r)&&(p!==void 0||f in r)&&(r[f]=p))}if(d!=="not_valid")for(const f of e.refiner(r,u))f.explanation=n.message,d="not_refined",yield[f,void 0];d==="valid"&&(yield[void 0,r])}let Io=class{constructor(e){const{type:n,schema:i,validator:s,refiner:o,coercer:l=d=>d,entries:u=function*(){}}=e;this.type=n,this.schema=i,this.entries=u,this.coercer=l,s?this.validator=(d,f)=>{const p=s(d,f);return cA(p,f,this,d)}:this.validator=()=>[],o?this.refiner=(d,f)=>{const p=o(d,f);return cA(p,f,this,d)}:this.refiner=()=>[]}assert(e,n){return Zk(e,this,n)}create(e,n){return gt(e,this,n)}is(e){return eC(e,this)}mask(e,n){return uz(e,this,n)}validate(e,n={}){return Lh(e,this,n)}};function Zk(r,e,n){const i=Lh(r,e,{message:n});if(i[0])throw i[0]}function gt(r,e,n){const i=Lh(r,e,{coerce:!0,message:n});if(i[0])throw i[0];return i[1]}function uz(r,e,n){const i=Lh(r,e,{coerce:!0,mask:!0,message:n});if(i[0])throw i[0];return i[1]}function eC(r,e){return!Lh(r,e)[0]}function Lh(r,e,n={}){const i=z1(r,e,n),s=lz(i);return s[0]?[new oz(s[0],function*(){for(const l of i)l[0]&&(yield l[0])}),void 0]:[void 0,s[1]]}function tc(r,e){return new Io({type:r,schema:null,validator:e})}function dz(){return tc("any",()=>!0)}function wt(r){return new Io({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[n,i]of e.entries())yield[n,i,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${js(e)}`}})}function bo(){return tc("boolean",r=>typeof r=="boolean")}function W1(r){return tc("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${js(e)}`)}function gr(r){const e=js(r),n=typeof r;return new Io({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?r:null,validator(i){return i===r||`Expected the literal \`${e}\`, but received: ${js(i)}`}})}function hz(){return tc("never",()=>!1)}function vt(r){return new Io({...r,validator:(e,n)=>e===null||r.validator(e,n),refiner:(e,n)=>e===null||r.refiner(e,n)})}function Ae(){return tc("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${js(r)}`)}function Ht(r){return new Io({...r,validator:(e,n)=>e===void 0||r.validator(e,n),refiner:(e,n)=>e===void 0||r.refiner(e,n)})}function tC(r,e){return new Io({type:"record",schema:null,*entries(n){if(Dh(n))for(const i in n){const s=n[i];yield[i,i,r],yield[i,s,e]}},validator(n){return hm(n)||`Expected an object, but received: ${js(n)}`},coercer(n){return hm(n)?{...n}:n}})}function ct(){return tc("string",r=>typeof r=="string"||`Expected a string, but received: ${js(r)}`)}function j1(r){const e=hz();return new Io({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const i=Math.max(r.length,n.length);for(let s=0;s<i;s++)yield[s,n[s],r[s]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${js(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function tt(r){const e=Object.keys(r);return new Io({type:"type",schema:r,*entries(n){if(Dh(n))for(const i of e)yield[i,n[i],r[i]]},validator(n){return hm(n)||`Expected an object, but received: ${js(n)}`},coercer(n){return hm(n)?{...n}:n}})}function Di(r){const e=r.map(n=>n.type).join(" | ");return new Io({type:"union",schema:null,coercer(n,i){for(const s of r){const[o,l]=s.validate(n,{coerce:!0,mask:i.mask});if(!o)return l}return n},validator(n,i){const s=[];for(const o of r){const[...l]=z1(n,o,i),[u]=l;if(u[0])for(const[d]of l)d&&s.push(d);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${js(n)}`,...s]}})}function Bu(){return tc("unknown",()=>!0)}function Bh(r,e,n){return new Io({...r,coercer:(i,s)=>eC(i,e)?r.coercer(n(i,s),s):r.coercer(i,s)})}var ip,fz=new Uint8Array(16);function nC(){if(!ip&&(ip=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ip))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ip(fz)}const pz=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ym(r){return typeof r=="string"&&pz.test(r)}var si=[];for(var Ay=0;Ay<256;++Ay)si.push((Ay+256).toString(16).substr(1));function Jm(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(si[r[e+0]]+si[r[e+1]]+si[r[e+2]]+si[r[e+3]]+"-"+si[r[e+4]]+si[r[e+5]]+"-"+si[r[e+6]]+si[r[e+7]]+"-"+si[r[e+8]]+si[r[e+9]]+"-"+si[r[e+10]]+si[r[e+11]]+si[r[e+12]]+si[r[e+13]]+si[r[e+14]]+si[r[e+15]]).toLowerCase();if(!Ym(n))throw TypeError("Stringified UUID is invalid");return n}var uA,xy,Ty=0,Ry=0;function mz(r,e,n){var i=e&&n||0,s=e||new Array(16);r=r||{};var o=r.node||uA,l=r.clockseq!==void 0?r.clockseq:xy;if(o==null||l==null){var u=r.random||(r.rng||nC)();o==null&&(o=uA=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),l==null&&(l=xy=(u[6]<<8|u[7])&16383)}var d=r.msecs!==void 0?r.msecs:Date.now(),f=r.nsecs!==void 0?r.nsecs:Ry+1,p=d-Ty+(f-Ry)/1e4;if(p<0&&r.clockseq===void 0&&(l=l+1&16383),(p<0||d>Ty)&&r.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ty=d,Ry=f,xy=l,d+=122192928e5;var v=((d&268435455)*1e4+f)%4294967296;s[i++]=v>>>24&255,s[i++]=v>>>16&255,s[i++]=v>>>8&255,s[i++]=v&255;var E=d/4294967296*1e4&268435455;s[i++]=E>>>8&255,s[i++]=E&255,s[i++]=E>>>24&15|16,s[i++]=E>>>16&255,s[i++]=l>>>8|128,s[i++]=l&255;for(var S=0;S<6;++S)s[i+S]=o[S];return e||Jm(s)}function rC(r){if(!Ym(r))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(r.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(r.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(r.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(r.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function gz(r){r=unescape(encodeURIComponent(r));for(var e=[],n=0;n<r.length;++n)e.push(r.charCodeAt(n));return e}var yz="6ba7b810-9dad-11d1-80b4-00c04fd430c8",wz="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function iC(r,e,n){function i(s,o,l,u){if(typeof s=="string"&&(s=gz(s)),typeof o=="string"&&(o=rC(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+s.length);if(d.set(o),d.set(s,o.length),d=n(d),d[6]=d[6]&15|e,d[8]=d[8]&63|128,l){u=u||0;for(var f=0;f<16;++f)l[u+f]=d[f];return l}return Jm(d)}try{i.name=r}catch{}return i.DNS=yz,i.URL=wz,i}function vz(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var n=0;n<e.length;++n)r[n]=e.charCodeAt(n)}return Ez(_z(bz(r),r.length*8))}function Ez(r){for(var e=[],n=r.length*32,i="0123456789abcdef",s=0;s<n;s+=8){var o=r[s>>5]>>>s%32&255,l=parseInt(i.charAt(o>>>4&15)+i.charAt(o&15),16);e.push(l)}return e}function sC(r){return(r+64>>>9<<4)+14+1}function _z(r,e){r[e>>5]|=128<<e%32,r[sC(e)-1]=e;for(var n=1732584193,i=-271733879,s=-1732584194,o=271733878,l=0;l<r.length;l+=16){var u=n,d=i,f=s,p=o;n=_i(n,i,s,o,r[l],7,-680876936),o=_i(o,n,i,s,r[l+1],12,-389564586),s=_i(s,o,n,i,r[l+2],17,606105819),i=_i(i,s,o,n,r[l+3],22,-1044525330),n=_i(n,i,s,o,r[l+4],7,-176418897),o=_i(o,n,i,s,r[l+5],12,1200080426),s=_i(s,o,n,i,r[l+6],17,-1473231341),i=_i(i,s,o,n,r[l+7],22,-45705983),n=_i(n,i,s,o,r[l+8],7,1770035416),o=_i(o,n,i,s,r[l+9],12,-1958414417),s=_i(s,o,n,i,r[l+10],17,-42063),i=_i(i,s,o,n,r[l+11],22,-1990404162),n=_i(n,i,s,o,r[l+12],7,1804603682),o=_i(o,n,i,s,r[l+13],12,-40341101),s=_i(s,o,n,i,r[l+14],17,-1502002290),i=_i(i,s,o,n,r[l+15],22,1236535329),n=bi(n,i,s,o,r[l+1],5,-165796510),o=bi(o,n,i,s,r[l+6],9,-1069501632),s=bi(s,o,n,i,r[l+11],14,643717713),i=bi(i,s,o,n,r[l],20,-373897302),n=bi(n,i,s,o,r[l+5],5,-701558691),o=bi(o,n,i,s,r[l+10],9,38016083),s=bi(s,o,n,i,r[l+15],14,-660478335),i=bi(i,s,o,n,r[l+4],20,-405537848),n=bi(n,i,s,o,r[l+9],5,568446438),o=bi(o,n,i,s,r[l+14],9,-1019803690),s=bi(s,o,n,i,r[l+3],14,-187363961),i=bi(i,s,o,n,r[l+8],20,1163531501),n=bi(n,i,s,o,r[l+13],5,-1444681467),o=bi(o,n,i,s,r[l+2],9,-51403784),s=bi(s,o,n,i,r[l+7],14,1735328473),i=bi(i,s,o,n,r[l+12],20,-1926607734),n=Si(n,i,s,o,r[l+5],4,-378558),o=Si(o,n,i,s,r[l+8],11,-2022574463),s=Si(s,o,n,i,r[l+11],16,1839030562),i=Si(i,s,o,n,r[l+14],23,-35309556),n=Si(n,i,s,o,r[l+1],4,-1530992060),o=Si(o,n,i,s,r[l+4],11,1272893353),s=Si(s,o,n,i,r[l+7],16,-155497632),i=Si(i,s,o,n,r[l+10],23,-1094730640),n=Si(n,i,s,o,r[l+13],4,681279174),o=Si(o,n,i,s,r[l],11,-358537222),s=Si(s,o,n,i,r[l+3],16,-722521979),i=Si(i,s,o,n,r[l+6],23,76029189),n=Si(n,i,s,o,r[l+9],4,-640364487),o=Si(o,n,i,s,r[l+12],11,-421815835),s=Si(s,o,n,i,r[l+15],16,530742520),i=Si(i,s,o,n,r[l+2],23,-995338651),n=Ii(n,i,s,o,r[l],6,-198630844),o=Ii(o,n,i,s,r[l+7],10,1126891415),s=Ii(s,o,n,i,r[l+14],15,-1416354905),i=Ii(i,s,o,n,r[l+5],21,-57434055),n=Ii(n,i,s,o,r[l+12],6,1700485571),o=Ii(o,n,i,s,r[l+3],10,-1894986606),s=Ii(s,o,n,i,r[l+10],15,-1051523),i=Ii(i,s,o,n,r[l+1],21,-2054922799),n=Ii(n,i,s,o,r[l+8],6,1873313359),o=Ii(o,n,i,s,r[l+15],10,-30611744),s=Ii(s,o,n,i,r[l+6],15,-1560198380),i=Ii(i,s,o,n,r[l+13],21,1309151649),n=Ii(n,i,s,o,r[l+4],6,-145523070),o=Ii(o,n,i,s,r[l+11],10,-1120210379),s=Ii(s,o,n,i,r[l+2],15,718787259),i=Ii(i,s,o,n,r[l+9],21,-343485551),n=Va(n,u),i=Va(i,d),s=Va(s,f),o=Va(o,p)}return[n,i,s,o]}function bz(r){if(r.length===0)return[];for(var e=r.length*8,n=new Uint32Array(sC(e)),i=0;i<e;i+=8)n[i>>5]|=(r[i/8]&255)<<i%32;return n}function Va(r,e){var n=(r&65535)+(e&65535),i=(r>>16)+(e>>16)+(n>>16);return i<<16|n&65535}function Sz(r,e){return r<<e|r>>>32-e}function Qm(r,e,n,i,s,o){return Va(Sz(Va(Va(e,r),Va(i,o)),s),n)}function _i(r,e,n,i,s,o,l){return Qm(e&n|~e&i,r,e,s,o,l)}function bi(r,e,n,i,s,o,l){return Qm(e&i|n&~i,r,e,s,o,l)}function Si(r,e,n,i,s,o,l){return Qm(e^n^i,r,e,s,o,l)}function Ii(r,e,n,i,s,o,l){return Qm(n^(e|~i),r,e,s,o,l)}var Iz=iC("v3",48,vz);function Az(r,e,n){r=r||{};var i=r.random||(r.rng||nC)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=i[s];return e}return Jm(i)}function xz(r,e,n,i){switch(r){case 0:return e&n^~e&i;case 1:return e^n^i;case 2:return e&n^e&i^n&i;case 3:return e^n^i}}function ky(r,e){return r<<e|r>>>32-e}function Tz(r){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var i=unescape(encodeURIComponent(r));r=[];for(var s=0;s<i.length;++s)r.push(i.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var o=r.length/4+2,l=Math.ceil(o/16),u=new Array(l),d=0;d<l;++d){for(var f=new Uint32Array(16),p=0;p<16;++p)f[p]=r[d*64+p*4]<<24|r[d*64+p*4+1]<<16|r[d*64+p*4+2]<<8|r[d*64+p*4+3];u[d]=f}u[l-1][14]=(r.length-1)*8/Math.pow(2,32),u[l-1][14]=Math.floor(u[l-1][14]),u[l-1][15]=(r.length-1)*8&4294967295;for(var v=0;v<l;++v){for(var E=new Uint32Array(80),S=0;S<16;++S)E[S]=u[v][S];for(var R=16;R<80;++R)E[R]=ky(E[R-3]^E[R-8]^E[R-14]^E[R-16],1);for(var T=n[0],M=n[1],W=n[2],z=n[3],j=n[4],se=0;se<80;++se){var le=Math.floor(se/20),de=ky(T,5)+xz(le,M,W,z)+j+e[le]+E[se]>>>0;j=z,z=W,W=ky(M,30)>>>0,M=T,T=de}n[0]=n[0]+T>>>0,n[1]=n[1]+M>>>0,n[2]=n[2]+W>>>0,n[3]=n[3]+z>>>0,n[4]=n[4]+j>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var Rz=iC("v5",80,Tz);const kz="00000000-0000-0000-0000-000000000000";function Cz(r){if(!Ym(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const Pz=Object.freeze(Object.defineProperty({__proto__:null,NIL:kz,parse:rC,stringify:Jm,v1:mz,v3:Iz,v4:Az,v5:Rz,validate:Ym,version:Cz},Symbol.toStringTag,{value:"Module"})),oC=ph(Pz);var Cy,dA;function Mz(){if(dA)return Cy;dA=1;const r=oC.v4;return Cy=function(n,i,s,o){if(typeof n!="string")throw new TypeError(n+" must be a string");o=o||{};const l=typeof o.version=="number"?o.version:2;if(l!==1&&l!==2)throw new TypeError(l+" must be 1 or 2");const u={method:n};if(l===2&&(u.jsonrpc="2.0"),i){if(typeof i!="object"&&!Array.isArray(i))throw new TypeError(i+" must be an object, array or omitted");u.params=i}if(typeof s>"u"){const d=typeof o.generator=="function"?o.generator:function(){return r()};u.id=d(u,o)}else l===2&&s===null?o.notificationIdNull&&(u.id=null):u.id=s;return u},Cy}var Py,hA;function Nz(){if(hA)return Py;hA=1;const r=oC.v4,e=Mz(),n=function(i,s){if(!(this instanceof n))return new n(i,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return r()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=i};return Py=n,n.prototype.request=function(i,s,o,l){const u=this;let d=null;const f=Array.isArray(i)&&typeof s=="function";if(this.options.version===1&&f)throw new TypeError("JSON-RPC 1.0 does not support batching");if(f||!f&&i&&typeof i=="object"&&typeof s=="function")l=s,d=i;else{typeof o=="function"&&(l=o,o=void 0);const E=typeof l=="function";try{d=e(i,s,o,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(S){if(E)return l(S);throw S}if(!E)return d}let v;try{v=JSON.stringify(d,this.options.replacer)}catch(E){return l(E)}return this.callServer(v,function(E,S){u._parseResponse(E,S,l)}),d},n.prototype._parseResponse=function(i,s,o){if(i){o(i);return}if(!s)return o();let l;try{l=JSON.parse(s,this.options.reviver)}catch(u){return o(u)}if(o.length===3)if(Array.isArray(l)){const u=function(f){return typeof f.error<"u"},d=function(f){return!u(f)};return o(null,l.filter(u),l.filter(d))}else return o(null,l.error,l.result);o(null,l)},Py}var Oz=Nz();const Dz=nl(Oz);var My={exports:{}},fA;function aC(){return fA||(fA=1,(function(r){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function s(d,f,p){this.fn=d,this.context=f,this.once=p||!1}function o(d,f,p,v,E){if(typeof p!="function")throw new TypeError("The listener must be a function");var S=new s(p,v||d,E),R=n?n+f:f;return d._events[R]?d._events[R].fn?d._events[R]=[d._events[R],S]:d._events[R].push(S):(d._events[R]=S,d._eventsCount++),d}function l(d,f){--d._eventsCount===0?d._events=new i:delete d._events[f]}function u(){this._events=new i,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],p,v;if(this._eventsCount===0)return f;for(v in p=this._events)e.call(p,v)&&f.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},u.prototype.listeners=function(f){var p=n?n+f:f,v=this._events[p];if(!v)return[];if(v.fn)return[v.fn];for(var E=0,S=v.length,R=new Array(S);E<S;E++)R[E]=v[E].fn;return R},u.prototype.listenerCount=function(f){var p=n?n+f:f,v=this._events[p];return v?v.fn?1:v.length:0},u.prototype.emit=function(f,p,v,E,S,R){var T=n?n+f:f;if(!this._events[T])return!1;var M=this._events[T],W=arguments.length,z,j;if(M.fn){switch(M.once&&this.removeListener(f,M.fn,void 0,!0),W){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,p),!0;case 3:return M.fn.call(M.context,p,v),!0;case 4:return M.fn.call(M.context,p,v,E),!0;case 5:return M.fn.call(M.context,p,v,E,S),!0;case 6:return M.fn.call(M.context,p,v,E,S,R),!0}for(j=1,z=new Array(W-1);j<W;j++)z[j-1]=arguments[j];M.fn.apply(M.context,z)}else{var se=M.length,le;for(j=0;j<se;j++)switch(M[j].once&&this.removeListener(f,M[j].fn,void 0,!0),W){case 1:M[j].fn.call(M[j].context);break;case 2:M[j].fn.call(M[j].context,p);break;case 3:M[j].fn.call(M[j].context,p,v);break;case 4:M[j].fn.call(M[j].context,p,v,E);break;default:if(!z)for(le=1,z=new Array(W-1);le<W;le++)z[le-1]=arguments[le];M[j].fn.apply(M[j].context,z)}}return!0},u.prototype.on=function(f,p,v){return o(this,f,p,v,!1)},u.prototype.once=function(f,p,v){return o(this,f,p,v,!0)},u.prototype.removeListener=function(f,p,v,E){var S=n?n+f:f;if(!this._events[S])return this;if(!p)return l(this,S),this;var R=this._events[S];if(R.fn)R.fn===p&&(!E||R.once)&&(!v||R.context===v)&&l(this,S);else{for(var T=0,M=[],W=R.length;T<W;T++)(R[T].fn!==p||E&&!R[T].once||v&&R[T].context!==v)&&M.push(R[T]);M.length?this._events[S]=M.length===1?M[0]:M:l(this,S)}return this},u.prototype.removeAllListeners=function(f){var p;return f?(p=n?n+f:f,this._events[p]&&l(this,p)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,r.exports=u})(My)),My.exports}var Lz=aC();const $1=nl(Lz);var Bz=class extends $1{socket;constructor(r,e,n){super(),this.socket=new window.WebSocket(r,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(r,e,n){const i=n||e;try{this.socket.send(r),i()}catch(s){i(s)}}close(r,e){this.socket.close(r,e)}addEventListener(r,e,n){this.socket.addEventListener(r,e,n)}};function Uz(r,e){return new Bz(r,e)}var Vz=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Fz=class extends $1{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(r,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...l}={},u,d){super(),this.webSocketFactory=r,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=l,this.current_reconnects=0,this.generate_request_id=u||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),d?this.dataPack=d:this.dataPack=new Vz,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(r,e,n,i){return!i&&typeof n=="object"&&(i=n,n=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const l=this.generate_request_id(r,e),u={jsonrpc:"2.0",method:r,params:e||void 0,id:l};this.socket.send(this.dataPack.encode(u),i,d=>{if(d)return o(d);this.queue[l]={promise:[s,o]},n&&(this.queue[l].timeout=setTimeout(()=>{delete this.queue[l],o(new Error("reply timeout"))},n))})})}async login(r){const e=await this.call("rpc.login",r);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(r,e){return new Promise((n,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:r,params:e};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);n()})})}async subscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.on",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed subscribing to an event '"+r+"' with: "+e[r]);return e}async unsubscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.off",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(r,e){this.socket.close(r||1e3,e)}setAutoReconnect(r){this.reconnect=r}setReconnectInterval(r){this.reconnect_interval=r}setMaxReconnects(r){this.max_reconnects=r}_connect(r,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(r,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=zt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const i=[n.notification];if(n.params.constructor===Object)i.push(n.params);else for(let s=0;s<n.params.length;s++)i.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n?.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",n,i),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(r,e),this.reconnect_interval)))})}};const zz=BigInt(0),_d=BigInt(1),Wz=BigInt(2),jz=BigInt(7),$z=BigInt(256),qz=BigInt(113),lC=[],cC=[],uC=[];for(let r=0,e=_d,n=1,i=0;r<24;r++){[n,i]=[i,(2*n+3*i)%5],lC.push(2*(5*i+n)),cC.push((r+1)*(r+2)/2%64);let s=zz;for(let o=0;o<7;o++)e=(e<<_d^(e>>jz)*qz)%$z,e&Wz&&(s^=_d<<(_d<<BigInt(o))-_d);uC.push(s)}const dC=Ak(uC,!0),Kz=dC[0],Hz=dC[1],pA=(r,e,n)=>n>32?OF(r,e,n):MF(r,e,n),mA=(r,e,n)=>n>32?DF(r,e,n):NF(r,e,n);function Gz(r,e=24){const n=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let l=0;l<10;l++)n[l]=r[l]^r[l+10]^r[l+20]^r[l+30]^r[l+40];for(let l=0;l<10;l+=2){const u=(l+8)%10,d=(l+2)%10,f=n[d],p=n[d+1],v=pA(f,p,1)^n[u],E=mA(f,p,1)^n[u+1];for(let S=0;S<50;S+=10)r[l+S]^=v,r[l+S+1]^=E}let s=r[2],o=r[3];for(let l=0;l<24;l++){const u=cC[l],d=pA(s,o,u),f=mA(s,o,u),p=lC[l];s=r[p],o=r[p+1],r[p]=d,r[p+1]=f}for(let l=0;l<50;l+=10){for(let u=0;u<10;u++)n[u]=r[l+u];for(let u=0;u<10;u++)r[l+u]^=~n[(u+2)%10]&n[(u+4)%10]}r[0]^=Kz[i],r[1]^=Hz[i]}tl(n)}class q1 extends N1{constructor(e,n,i,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=i,this.enableXOF=s,this.rounds=o,ah(i),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=bF(this.state)}clone(){return this._cloneInto()}keccak(){FI(this.state32),Gz(this.state32,this.rounds),FI(this.state32),this.posOut=0,this.pos=0}update(e){vu(this),e=Km(e),na(e);const{blockLen:n,state:i}=this,s=e.length;for(let o=0;o<s;){const l=Math.min(n-this.pos,s-o);for(let u=0;u<l;u++)i[this.pos++]^=e[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:i,blockLen:s}=this;e[i]^=n,(n&128)!==0&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){vu(this,!1),na(e),this.finish();const n=this.state,{blockLen:i}=this;for(let s=0,o=e.length;s<o;){this.posOut>=i&&this.keccak();const l=Math.min(i-this.posOut,o-s);e.set(n.subarray(this.posOut,this.posOut+l),s),this.posOut+=l,s+=l}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ah(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(bk(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,tl(this.state)}_cloneInto(e){const{blockLen:n,suffix:i,outputLen:s,rounds:o,enableXOF:l}=this;return e||(e=new q1(n,i,s,l,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=i,e.outputLen=s,e.enableXOF=l,e.destroyed=this.destroyed,e}}const Yz=(r,e,n)=>O1(()=>new q1(e,r,n)),gA=Yz(1,136,256/8);class hC extends N1{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,_k(e);const i=Km(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(i.length>s?e.create().update(i).digest():i);for(let l=0;l<o.length;l++)o[l]^=54;this.iHash.update(o),this.oHash=e.create();for(let l=0;l<o.length;l++)o[l]^=106;this.oHash.update(o),tl(o)}update(e){return vu(this),this.iHash.update(e),this}digestInto(e){vu(this),na(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:i,finished:s,destroyed:o,blockLen:l,outputLen:u}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=l,e.outputLen=u,e.oHash=n._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const fC=(r,e,n)=>new hC(r,e).update(n).digest();fC.create=(r,e)=>new hC(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yA=(r,e)=>(r+(r>=0?e:-e)/pC)/e;function Jz(r,e,n){const[[i,s],[o,l]]=e,u=yA(l*r,n),d=yA(-s*r,n);let f=r-u*i-d*o,p=-u*s-d*l;const v=f<Ko,E=p<Ko;v&&(f=-f),E&&(p=-p);const S=Nh(Math.ceil(Ck(n)/2))+ou;if(f<Ko||f>=S||p<Ko||p>=S)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:v,k1:f,k2neg:E,k2:p}}function fv(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function Ny(r,e){const n={};for(let i of Object.keys(e))n[i]=r[i]===void 0?e[i]:r[i];return ql(n.lowS,"lowS"),ql(n.prehash,"prehash"),n.format!==void 0&&fv(n.format),n}class Qz extends Error{constructor(e=""){super(e)}}const Fo={Err:Qz,_tlv:{encode:(r,e)=>{const{Err:n}=Fo;if(r<0||r>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const i=e.length/2,s=np(i);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=i>127?np(s.length/2|128):"";return np(r)+o+s+e},decode(r,e){const{Err:n}=Fo;let i=0;if(r<0||r>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[i++]!==r)throw new n("tlv.decode: wrong tlv");const s=e[i++],o=!!(s&128);let l=0;if(!o)l=s;else{const d=s&127;if(!d)throw new n("tlv.decode(long): indefinite length not supported");if(d>4)throw new n("tlv.decode(long): byte length is too big");const f=e.subarray(i,i+d);if(f.length!==d)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const p of f)l=l<<8|p;if(i+=d,l<128)throw new n("tlv.decode(long): not minimal encoding")}const u=e.subarray(i,i+l);if(u.length!==l)throw new n("tlv.decode: wrong value length");return{v:u,l:e.subarray(i+l)}}},_int:{encode(r){const{Err:e}=Fo;if(r<Ko)throw new e("integer: negative integers are not allowed");let n=np(r);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(r){const{Err:e}=Fo;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Hm(r)}},toSig(r){const{Err:e,_int:n,_tlv:i}=Fo,s=xr("signature",r),{v:o,l}=i.decode(48,s);if(l.length)throw new e("invalid signature: left bytes after parsing");const{v:u,l:d}=i.decode(2,o),{v:f,l:p}=i.decode(2,d);if(p.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(u),s:n.decode(f)}},hexFromSig(r){const{_tlv:e,_int:n}=Fo,i=e.encode(2,n.encode(r.r)),s=e.encode(2,n.encode(r.s)),o=i+s;return e.encode(48,o)}},Ko=BigInt(0),ou=BigInt(1),pC=BigInt(2),sp=BigInt(3),Xz=BigInt(4);function Gc(r,e){const{BYTES:n}=r;let i;if(typeof e=="bigint")i=e;else{let s=xr("private key",e);try{i=r.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!r.isValidNot0(i))throw new Error("invalid private key: out of range [1..N-1]");return i}function Zz(r,e={}){const n=Kk("weierstrass",r,e),{Fp:i,Fn:s}=n;let o=n.CURVE;const{h:l,n:u}=o;Oh(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:d}=e;if(d&&(!i.is0(o.a)||typeof d.beta!="bigint"||!Array.isArray(d.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=gC(i,s);function p(){if(!i.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function v(H,I,y){const{x,y:V}=I.toAffine(),J=i.toBytes(x);if(ql(y,"isCompressed"),y){p();const G=!i.isOdd(V);return co(mC(G),J)}else return co(Uint8Array.of(4),J,i.toBytes(V))}function E(H){Fs(H,void 0,"Point");const{publicKey:I,publicKeyUncompressed:y}=f,x=H.length,V=H[0],J=H.subarray(1);if(x===I&&(V===2||V===3)){const G=i.fromBytes(J);if(!i.isValid(G))throw new Error("bad point: is not on curve, wrong x");const re=T(G);let ae;try{ae=i.sqrt(re)}catch(_){const F=_ instanceof Error?": "+_.message:"";throw new Error("bad point: is not on curve, sqrt error"+F)}p();const O=i.isOdd(ae);return(V&1)===1!==O&&(ae=i.neg(ae)),{x:G,y:ae}}else if(x===y&&V===4){const G=i.BYTES,re=i.fromBytes(J.subarray(0,G)),ae=i.fromBytes(J.subarray(G,G*2));if(!M(re,ae))throw new Error("bad point: is not on curve");return{x:re,y:ae}}else throw new Error(`bad point: got length ${x}, expected compressed=${I} or uncompressed=${y}`)}const S=e.toBytes||v,R=e.fromBytes||E;function T(H){const I=i.sqr(H),y=i.mul(I,H);return i.add(i.add(y,i.mul(H,o.a)),o.b)}function M(H,I){const y=i.sqr(I),x=T(H);return i.eql(y,x)}if(!M(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const W=i.mul(i.pow(o.a,sp),Xz),z=i.mul(i.sqr(o.b),BigInt(27));if(i.is0(i.add(W,z)))throw new Error("bad curve params: a or b");function j(H,I,y=!1){if(!i.isValid(I)||y&&i.is0(I))throw new Error(`bad point coordinate ${H}`);return I}function se(H){if(!(H instanceof D))throw new Error("ProjectivePoint expected")}function le(H){if(!d||!d.basises)throw new Error("no endo");return Jz(H,d.basises,s.ORDER)}const de=om((H,I)=>{const{X:y,Y:x,Z:V}=H;if(i.eql(V,i.ONE))return{x:y,y:x};const J=H.is0();I==null&&(I=J?i.ONE:i.inv(V));const G=i.mul(y,I),re=i.mul(x,I),ae=i.mul(V,I);if(J)return{x:i.ZERO,y:i.ZERO};if(!i.eql(ae,i.ONE))throw new Error("invZ was invalid");return{x:G,y:re}}),Z=om(H=>{if(H.is0()){if(e.allowInfinityPoint&&!i.is0(H.Y))return;throw new Error("bad point: ZERO")}const{x:I,y}=H.toAffine();if(!i.isValid(I)||!i.isValid(y))throw new Error("bad point: x or y not field elements");if(!M(I,y))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function $(H,I,y,x,V){return y=new D(i.mul(y.X,H),y.Y,y.Z),I=am(x,I),y=am(V,y),I.add(y)}class D{constructor(I,y,x){this.X=j("x",I),this.Y=j("y",y,!0),this.Z=j("z",x),Object.freeze(this)}static CURVE(){return o}static fromAffine(I){const{x:y,y:x}=I||{};if(!I||!i.isValid(y)||!i.isValid(x))throw new Error("invalid affine point");if(I instanceof D)throw new Error("projective point not allowed");return i.is0(y)&&i.is0(x)?D.ZERO:new D(y,x,i.ONE)}static fromBytes(I){const y=D.fromAffine(R(Fs(I,void 0,"point")));return y.assertValidity(),y}static fromHex(I){return D.fromBytes(xr("pointHex",I))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(I=8,y=!0){return q.createCache(this,I),y||this.multiply(sp),this}assertValidity(){Z(this)}hasEvenY(){const{y:I}=this.toAffine();if(!i.isOdd)throw new Error("Field doesn't support isOdd");return!i.isOdd(I)}equals(I){se(I);const{X:y,Y:x,Z:V}=this,{X:J,Y:G,Z:re}=I,ae=i.eql(i.mul(y,re),i.mul(J,V)),O=i.eql(i.mul(x,re),i.mul(G,V));return ae&&O}negate(){return new D(this.X,i.neg(this.Y),this.Z)}double(){const{a:I,b:y}=o,x=i.mul(y,sp),{X:V,Y:J,Z:G}=this;let re=i.ZERO,ae=i.ZERO,O=i.ZERO,w=i.mul(V,V),_=i.mul(J,J),F=i.mul(G,G),ee=i.mul(V,J);return ee=i.add(ee,ee),O=i.mul(V,G),O=i.add(O,O),re=i.mul(I,O),ae=i.mul(x,F),ae=i.add(re,ae),re=i.sub(_,ae),ae=i.add(_,ae),ae=i.mul(re,ae),re=i.mul(ee,re),O=i.mul(x,O),F=i.mul(I,F),ee=i.sub(w,F),ee=i.mul(I,ee),ee=i.add(ee,O),O=i.add(w,w),w=i.add(O,w),w=i.add(w,F),w=i.mul(w,ee),ae=i.add(ae,w),F=i.mul(J,G),F=i.add(F,F),w=i.mul(F,ee),re=i.sub(re,w),O=i.mul(F,_),O=i.add(O,O),O=i.add(O,O),new D(re,ae,O)}add(I){se(I);const{X:y,Y:x,Z:V}=this,{X:J,Y:G,Z:re}=I;let ae=i.ZERO,O=i.ZERO,w=i.ZERO;const _=o.a,F=i.mul(o.b,sp);let ee=i.mul(y,J),ce=i.mul(x,G),we=i.mul(V,re),Oe=i.add(y,x),ze=i.add(J,G);Oe=i.mul(Oe,ze),ze=i.add(ee,ce),Oe=i.sub(Oe,ze),ze=i.add(y,V);let At=i.add(J,re);return ze=i.mul(ze,At),At=i.add(ee,we),ze=i.sub(ze,At),At=i.add(x,V),ae=i.add(G,re),At=i.mul(At,ae),ae=i.add(ce,we),At=i.sub(At,ae),w=i.mul(_,ze),ae=i.mul(F,we),w=i.add(ae,w),ae=i.sub(ce,w),w=i.add(ce,w),O=i.mul(ae,w),ce=i.add(ee,ee),ce=i.add(ce,ee),we=i.mul(_,we),ze=i.mul(F,ze),ce=i.add(ce,we),we=i.sub(ee,we),we=i.mul(_,we),ze=i.add(ze,we),ee=i.mul(ce,ze),O=i.add(O,ee),ee=i.mul(At,ze),ae=i.mul(Oe,ae),ae=i.sub(ae,ee),ee=i.mul(Oe,ce),w=i.mul(At,w),w=i.add(w,ee),new D(ae,O,w)}subtract(I){return this.add(I.negate())}is0(){return this.equals(D.ZERO)}multiply(I){const{endo:y}=e;if(!s.isValidNot0(I))throw new Error("invalid scalar: out of range");let x,V;const J=G=>q.cached(this,G,re=>Cl(D,re));if(y){const{k1neg:G,k1:re,k2neg:ae,k2:O}=le(I),{p:w,f:_}=J(re),{p:F,f:ee}=J(O);V=_.add(ee),x=$(y.beta,w,F,G,ae)}else{const{p:G,f:re}=J(I);x=G,V=re}return Cl(D,[x,V])[0]}multiplyUnsafe(I){const{endo:y}=e,x=this;if(!s.isValid(I))throw new Error("invalid scalar: out of range");if(I===Ko||x.is0())return D.ZERO;if(I===ou)return x;if(q.hasCache(this))return this.multiply(I);if(y){const{k1neg:V,k1:J,k2neg:G,k2:re}=le(I),{p1:ae,p2:O}=l9(D,x,J,re);return $(y.beta,ae,O,V,G)}else return q.unsafe(x,I)}multiplyAndAddUnsafe(I,y,x){const V=this.multiplyUnsafe(y).add(I.multiplyUnsafe(x));return V.is0()?void 0:V}toAffine(I){return de(this,I)}isTorsionFree(){const{isTorsionFree:I}=e;return l===ou?!0:I?I(D,this):q.unsafe(this,u).is0()}clearCofactor(){const{clearCofactor:I}=e;return l===ou?this:I?I(D,this):this.multiplyUnsafe(l)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}toBytes(I=!0){return ql(I,"isCompressed"),this.assertValidity(),S(D,this,I)}toHex(I=!0){return Ul(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(I=!0){return this.toBytes(I)}_setWindowSize(I){this.precompute(I)}static normalizeZ(I){return Cl(D,I)}static msm(I,y){return qk(D,s,I,y)}static fromPrivateKey(I){return D.BASE.multiply(Gc(s,I))}}D.BASE=new D(o.Gx,o.Gy,i.ONE),D.ZERO=new D(i.ZERO,i.ONE,i.ZERO),D.Fp=i,D.Fn=s;const U=s.BITS,q=new $k(D,e.endo?Math.ceil(U/2):U);return D.BASE.precompute(8),D}function mC(r){return Uint8Array.of(r?2:3)}function gC(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function e7(r,e={}){const{Fn:n}=r,i=e.randomBytes||D1,s=Object.assign(gC(r.Fp,n),{seed:zk(n.ORDER)});function o(S){try{return!!Gc(n,S)}catch{return!1}}function l(S,R){const{publicKey:T,publicKeyUncompressed:M}=s;try{const W=S.length;return R===!0&&W!==T||R===!1&&W!==M?!1:!!r.fromBytes(S)}catch{return!1}}function u(S=i(s.seed)){return s9(Fs(S,s.seed,"seed"),n.ORDER)}function d(S,R=!0){return r.BASE.multiply(Gc(n,S)).toBytes(R)}function f(S){const R=u(S);return{secretKey:R,publicKey:d(R)}}function p(S){if(typeof S=="bigint")return!1;if(S instanceof r)return!0;const{secretKey:R,publicKey:T,publicKeyUncompressed:M}=s;if(n.allowedLengths||R===T)return;const W=xr("key",S).length;return W===T||W===M}function v(S,R,T=!0){if(p(S)===!0)throw new Error("first arg must be private key");if(p(R)===!1)throw new Error("second arg must be public key");const M=Gc(n,S);return r.fromHex(R).multiply(M).toBytes(T)}return Object.freeze({getPublicKey:d,getSharedSecret:v,keygen:f,Point:r,utils:{isValidSecretKey:o,isValidPublicKey:l,randomSecretKey:u,isValidPrivateKey:o,randomPrivateKey:u,normPrivateKeyToScalar:S=>Gc(n,S),precompute(S=8,R=r.BASE){return R.precompute(S,!1)}},lengths:s})}function t7(r,e,n={}){_k(e),Oh(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const i=n.randomBytes||D1,s=n.hmac||((y,...x)=>fC(e,y,co(...x))),{Fp:o,Fn:l}=r,{ORDER:u,BITS:d}=l,{keygen:f,getPublicKey:p,getSharedSecret:v,utils:E,lengths:S}=e7(r,n),R={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},T="compact";function M(y){const x=u>>ou;return y>x}function W(y,x){if(!l.isValidNot0(x))throw new Error(`invalid signature ${y}: out of range 1..Point.Fn.ORDER`);return x}function z(y,x){fv(x);const V=S.signature,J=x==="compact"?V:x==="recovered"?V+1:void 0;return Fs(y,J,`${x} signature`)}class j{constructor(x,V,J){this.r=W("r",x),this.s=W("s",V),J!=null&&(this.recovery=J),Object.freeze(this)}static fromBytes(x,V=T){z(x,V);let J;if(V==="der"){const{r:O,s:w}=Fo.toSig(Fs(x));return new j(O,w)}V==="recovered"&&(J=x[0],V="compact",x=x.subarray(1));const G=l.BYTES,re=x.subarray(0,G),ae=x.subarray(G,G*2);return new j(l.fromBytes(re),l.fromBytes(ae),J)}static fromHex(x,V){return this.fromBytes(sm(x),V)}addRecoveryBit(x){return new j(this.r,this.s,x)}recoverPublicKey(x){const V=o.ORDER,{r:J,s:G,recovery:re}=this;if(re==null||![0,1,2,3].includes(re))throw new Error("recovery id invalid");if(u*pC<V&&re>1)throw new Error("recovery id is ambiguous for h>1 curve");const O=re===2||re===3?J+u:J;if(!o.isValid(O))throw new Error("recovery id 2 or 3 invalid");const w=o.toBytes(O),_=r.fromBytes(co(mC((re&1)===0),w)),F=l.inv(O),ee=le(xr("msgHash",x)),ce=l.create(-ee*F),we=l.create(G*F),Oe=r.BASE.multiplyUnsafe(ce).add(_.multiplyUnsafe(we));if(Oe.is0())throw new Error("point at infinify");return Oe.assertValidity(),Oe}hasHighS(){return M(this.s)}toBytes(x=T){if(fv(x),x==="der")return sm(Fo.hexFromSig(this));const V=l.toBytes(this.r),J=l.toBytes(this.s);if(x==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return co(Uint8Array.of(this.recovery),V,J)}return co(V,J)}toHex(x){return Ul(this.toBytes(x))}assertValidity(){}static fromCompact(x){return j.fromBytes(xr("sig",x),"compact")}static fromDER(x){return j.fromBytes(xr("sig",x),"der")}normalizeS(){return this.hasHighS()?new j(this.r,l.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ul(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ul(this.toBytes("compact"))}}const se=n.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const V=Hm(x),J=x.length*8-d;return J>0?V>>BigInt(J):V},le=n.bits2int_modN||function(x){return l.create(se(x))},de=Nh(d);function Z(y){return hv("num < 2^"+d,y,Ko,de),l.toBytes(y)}function $(y,x){return Fs(y,void 0,"message"),x?Fs(e(y),void 0,"prehashed message"):y}function D(y,x,V){if(["recovered","canonical"].some(ce=>ce in V))throw new Error("sign() legacy options not supported");const{lowS:J,prehash:G,extraEntropy:re}=Ny(V,R);y=$(y,G);const ae=le(y),O=Gc(l,x),w=[Z(O),Z(ae)];if(re!=null&&re!==!1){const ce=re===!0?i(S.secretKey):re;w.push(xr("extraEntropy",ce))}const _=co(...w),F=ae;function ee(ce){const we=se(ce);if(!l.isValidNot0(we))return;const Oe=l.inv(we),ze=r.BASE.multiply(we).toAffine(),At=l.create(ze.x);if(At===Ko)return;const qt=l.create(Oe*l.create(F+At*O));if(qt===Ko)return;let rn=(ze.x===At?0:2)|Number(ze.y&ou),qn=qt;return J&&M(qt)&&(qn=l.neg(qt),rn^=1),new j(At,qn,rn)}return{seed:_,k2sig:ee}}function U(y,x,V={}){y=xr("message",y);const{seed:J,k2sig:G}=D(y,x,V);return YF(e.outputLen,l.BYTES,s)(J,G)}function q(y){let x;const V=typeof y=="string"||Mh(y),J=!V&&y!==null&&typeof y=="object"&&typeof y.r=="bigint"&&typeof y.s=="bigint";if(!V&&!J)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(J)x=new j(y.r,y.s);else if(V){try{x=j.fromBytes(xr("sig",y),"der")}catch(G){if(!(G instanceof Fo.Err))throw G}if(!x)try{x=j.fromBytes(xr("sig",y),"compact")}catch{return!1}}return x||!1}function H(y,x,V,J={}){const{lowS:G,prehash:re,format:ae}=Ny(J,R);if(V=xr("publicKey",V),x=$(xr("message",x),re),"strict"in J)throw new Error("options.strict was renamed to lowS");const O=ae===void 0?q(y):j.fromBytes(xr("sig",y),ae);if(O===!1)return!1;try{const w=r.fromBytes(V);if(G&&O.hasHighS())return!1;const{r:_,s:F}=O,ee=le(x),ce=l.inv(F),we=l.create(ee*ce),Oe=l.create(_*ce),ze=r.BASE.multiplyUnsafe(we).add(w.multiplyUnsafe(Oe));return ze.is0()?!1:l.create(ze.x)===_}catch{return!1}}function I(y,x,V={}){const{prehash:J}=Ny(V,R);return x=$(x,J),j.fromBytes(y,"recovered").recoverPublicKey(x).toBytes()}return Object.freeze({keygen:f,getPublicKey:p,getSharedSecret:v,utils:E,lengths:S,Point:r,sign:U,verify:H,recoverPublicKey:I,Signature:j,hash:e})}function n7(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},n=r.Fp;let i=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(l=>Math.ceil(l/2)))):void 0;const s=ec(e.n,{BITS:r.nBitLength,allowedLengths:i,modFromBytes:r.wrapPrivateKey}),o={Fp:n,Fn:s,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:o}}function r7(r){const{CURVE:e,curveOpts:n}=n7(r),i={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:n,hash:r.hash,ecdsaOpts:i}}function i7(r,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},r,Vk(n.Fn.ORDER,n.Fn.BITS))})}function s7(r){const{CURVE:e,curveOpts:n,hash:i,ecdsaOpts:s}=r7(r),o=Zz(e,n),l=t7(o,i,s);return i7(r,l)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function o7(r,e){const n=i=>s7({...r,hash:i});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const K1={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},a7={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},wA=BigInt(2);function l7(r){const e=K1.p,n=BigInt(3),i=BigInt(6),s=BigInt(11),o=BigInt(22),l=BigInt(23),u=BigInt(44),d=BigInt(88),f=r*r*r%e,p=f*f*r%e,v=Ar(p,n,e)*p%e,E=Ar(v,n,e)*p%e,S=Ar(E,wA,e)*f%e,R=Ar(S,s,e)*S%e,T=Ar(R,o,e)*R%e,M=Ar(T,u,e)*T%e,W=Ar(M,d,e)*M%e,z=Ar(W,u,e)*T%e,j=Ar(z,n,e)*p%e,se=Ar(j,l,e)*R%e,le=Ar(se,i,e)*f%e,de=Ar(le,wA,e);if(!pv.eql(pv.sqr(de),r))throw new Error("Cannot find square root");return de}const pv=ec(K1.p,{sqrt:l7}),H1=o7({...K1,Fp:pv,lowS:!0,endo:a7},Tk),c7=Lu.utils.randomPrivateKey,vA=()=>{const r=Lu.utils.randomPrivateKey(),e=fm(r),n=new Uint8Array(64);return n.set(r),n.set(e,32),{publicKey:e,secretKey:n}},fm=Lu.getPublicKey;function EA(r){try{return Lu.ExtendedPoint.fromHex(r),!0}catch{return!1}}const G1=(r,e)=>Lu.sign(r,e.slice(0,32)),u7=Lu.verify,wn=r=>zt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?zt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):zt.Buffer.from(r);class Y1{constructor(e){Object.assign(this,e)}encode(){return zt.Buffer.from(Iy.serialize(Hd,this))}static decode(e){return Iy.deserialize(Hd,this,e)}static decodeUnchecked(e){return Iy.deserializeUnchecked(Hd,this,e)}}class d7 extends Y1{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(n=>{this.enum=n})}}const Hd=new Map;var yC;const wC=32,Eo=32;function h7(r){return r._bn!==void 0}let _A=1;class ut extends Y1{constructor(e){if(super({}),this._bn=void 0,h7(e))this._bn=e._bn;else{if(typeof e=="string"){const n=ci.decode(e);if(n.length!=Eo)throw new Error("Invalid public key input");this._bn=new eA(n)}else this._bn=new eA(e);if(this._bn.byteLength()>Eo)throw new Error("Invalid public key input")}}static unique(){const e=new ut(_A);return _A+=1,new ut(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return ci.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(zt.Buffer);if(e.length===Eo)return e;const n=zt.Buffer.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,i){const s=zt.Buffer.concat([e.toBuffer(),zt.Buffer.from(n),i.toBuffer()]),o=iA(s);return new ut(o)}static createProgramAddressSync(e,n){let i=zt.Buffer.alloc(0);e.forEach(function(o){if(o.length>wC)throw new TypeError("Max seed length exceeded");i=zt.Buffer.concat([i,wn(o)])}),i=zt.Buffer.concat([i,n.toBuffer(),zt.Buffer.from("ProgramDerivedAddress")]);const s=iA(i);if(EA(s))throw new Error("Invalid seeds, address must fall off the curve");return new ut(s)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let i=255,s;for(;i!=0;){try{const o=e.concat(zt.Buffer.from([i]));s=this.createProgramAddressSync(o,n)}catch(o){if(o instanceof TypeError)throw o;i--;continue}return[s,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new ut(e);return EA(n.toBytes())}}yC=ut;ut.default=new yC("11111111111111111111111111111111");Hd.set(ut,{kind:"struct",fields:[["_bn","u256"]]});class f7{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const n=wn(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=n.slice(32,64),this._secretKey=n.slice(0,32)}else this._secretKey=wn(c7()),this._publicKey=wn(fm(this._secretKey))}get publicKey(){return new ut(this._publicKey)}get secretKey(){return zt.Buffer.concat([this._secretKey,this._publicKey],64)}}const p7=new ut("BPFLoader1111111111111111111111111111111111"),Ga=1232,Xm=127,ch=64;class J1 extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(J1.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Q1 extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Q1.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Yc extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Yc.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class uh{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const i=new Map;this.keySegments().flat().forEach((o,l)=>{i.set(o.toBase58(),l)});const s=o=>{const l=i.get(o.toBase58());if(l===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return l};return e.map(o=>({programIdIndex:s(o.programId),accountKeyIndexes:o.keys.map(l=>s(l.pubkey)),data:o.data}))}}const Rn=(r="publicKey")=>he.blob(32,r),m7=(r="signature")=>he.blob(64,r),Pl=(r="string")=>{const e=he.struct([he.u32("length"),he.u32("lengthPadding"),he.blob(he.offset(he.u32(),-8),"chars")],r),n=e.decode.bind(e),i=e.encode.bind(e),s=e;return s.decode=(o,l)=>n(o,l).chars.toString(),s.encode=(o,l,u)=>{const d={chars:zt.Buffer.from(o,"utf8")};return i(d,l,u)},s.alloc=o=>he.u32().span+he.u32().span+zt.Buffer.from(o,"utf8").length,s},g7=(r="authorized")=>he.struct([Rn("staker"),Rn("withdrawer")],r),y7=(r="lockup")=>he.struct([he.ns64("unixTimestamp"),he.ns64("epoch"),Rn("custodian")],r),w7=(r="voteInit")=>he.struct([Rn("nodePubkey"),Rn("authorizedVoter"),Rn("authorizedWithdrawer"),he.u8("commission")],r),v7=(r="voteAuthorizeWithSeedArgs")=>he.struct([he.u32("voteAuthorizationType"),Rn("currentAuthorityDerivedKeyOwnerPubkey"),Pl("currentAuthorityDerivedKeySeed"),Rn("newAuthorized")],r);function vC(r,e){const n=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const o=e[s.property];if(Array.isArray(o))return o.length*n(s.elementLayout)}else if("fields"in s)return vC({layout:s},e[s.property]);return 0};let i=0;return r.layout.fields.forEach(s=>{i+=n(s)}),i}function Hi(r){let e=0,n=0;for(;;){let i=r.shift();if(e|=(i&127)<<n*7,n+=1,(i&128)===0)break}return e}function os(r,e){let n=e;for(;;){let i=n&127;if(n>>=7,n==0){r.push(i);break}else i|=128,r.push(i)}}function zn(r,e){if(!r)throw new Error(e||"Assertion failed")}class Zm{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const i=new Map,s=l=>{const u=l.toBase58();let d=i.get(u);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},i.set(u,d)),d},o=s(n);o.isSigner=!0,o.isWritable=!0;for(const l of e){s(l.programId).isInvoked=!0;for(const u of l.keys){const d=s(u.pubkey);d.isSigner||=u.isSigner,d.isWritable||=u.isWritable}}return new Zm(n,i)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];zn(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,d])=>d.isSigner&&d.isWritable),i=e.filter(([,d])=>d.isSigner&&!d.isWritable),s=e.filter(([,d])=>!d.isSigner&&d.isWritable),o=e.filter(([,d])=>!d.isSigner&&!d.isWritable),l={numRequiredSignatures:n.length+i.length,numReadonlySignedAccounts:i.length,numReadonlyUnsignedAccounts:o.length};{zn(n.length>0,"Expected at least one writable signer key");const[d]=n[0];zn(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...n.map(([d])=>new ut(d)),...i.map(([d])=>new ut(d)),...s.map(([d])=>new ut(d)),...o.map(([d])=>new ut(d))];return[l,u]}extractTableLookup(e){const[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,l=>!l.isSigner&&!l.isInvoked&&l.isWritable),[s,o]=this.drainKeysFoundInLookupTable(e.state.addresses,l=>!l.isSigner&&!l.isInvoked&&!l.isWritable);if(!(n.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:s},{writable:i,readonly:o}]}drainKeysFoundInLookupTable(e,n){const i=new Array,s=new Array;for(const[o,l]of this.keyMetaMap.entries())if(n(l)){const u=new ut(o),d=e.findIndex(f=>f.equals(u));d>=0&&(zn(d<256,"Max lookup table index exceeded"),i.push(d),s.push(u),this.keyMetaMap.delete(o))}return[i,s]}}const EC="Reached end of buffer unexpectedly";function uo(r){if(r.length===0)throw new Error(EC);return r.shift()}function Gi(r,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>r.length:n>=r.length)throw new Error(EC);return r.splice(...e)}class $s{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new ut(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ci.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new uh(this.staticAccountKeys)}static compile(e){const n=Zm.compile(e.instructions,e.payerKey),[i,s]=n.getMessageComponents(),l=new uh(s).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:ci.encode(u.data)}));return new $s({header:i,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:l})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const i=e-n,o=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];os(n,e);const i=this.instructions.map(v=>{const{accounts:E,programIdIndex:S}=v,R=Array.from(ci.decode(v.data));let T=[];os(T,E.length);let M=[];return os(M,R.length),{programIdIndex:S,keyIndicesCount:zt.Buffer.from(T),keyIndices:E,dataLength:zt.Buffer.from(M),data:R}});let s=[];os(s,i.length);let o=zt.Buffer.alloc(Ga);zt.Buffer.from(s).copy(o);let l=s.length;i.forEach(v=>{const S=he.struct([he.u8("programIdIndex"),he.blob(v.keyIndicesCount.length,"keyIndicesCount"),he.seq(he.u8("keyIndex"),v.keyIndices.length,"keyIndices"),he.blob(v.dataLength.length,"dataLength"),he.seq(he.u8("userdatum"),v.data.length,"data")]).encode(v,o,l);l+=S}),o=o.slice(0,l);const u=he.struct([he.blob(1,"numRequiredSignatures"),he.blob(1,"numReadonlySignedAccounts"),he.blob(1,"numReadonlyUnsignedAccounts"),he.blob(n.length,"keyCount"),he.seq(Rn("key"),e,"keys"),Rn("recentBlockhash")]),d={numRequiredSignatures:zt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:zt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:zt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:zt.Buffer.from(n),keys:this.accountKeys.map(v=>wn(v.toBytes())),recentBlockhash:ci.decode(this.recentBlockhash)};let f=zt.Buffer.alloc(2048);const p=u.encode(d,f);return o.copy(f,p),f.slice(0,p+o.length)}static from(e){let n=[...e];const i=uo(n);if(i!==(i&Xm))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=uo(n),o=uo(n),l=Hi(n);let u=[];for(let E=0;E<l;E++){const S=Gi(n,0,Eo);u.push(new ut(zt.Buffer.from(S)))}const d=Gi(n,0,Eo),f=Hi(n);let p=[];for(let E=0;E<f;E++){const S=uo(n),R=Hi(n),T=Gi(n,0,R),M=Hi(n),W=Gi(n,0,M),z=ci.encode(zt.Buffer.from(W));p.push({programIdIndex:S,accounts:T,data:z})}const v={header:{numRequiredSignatures:i,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:o},recentBlockhash:ci.encode(zt.Buffer.from(d)),accountKeys:u,instructions:p};return new $s(v)}}class Kl{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new uh(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,i=this.staticAccountKeys.length;if(e>=i){const s=e-i,o=this.addressTableLookups.reduce((l,u)=>l+u.writableIndexes.length,0);return s<o}else if(e>=this.header.numRequiredSignatures){const s=e-n,l=i-n-this.header.numReadonlyUnsignedAccounts;return s<l}else{const s=n-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const i of this.addressTableLookups){const s=e.find(o=>o.key.equals(i.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${i.accountKey.toBase58()}`);for(const o of i.writableIndexes)if(o<s.state.addresses.length)n.writable.push(s.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${i.accountKey.toBase58()}`);for(const o of i.readonlyIndexes)if(o<s.state.addresses.length)n.readonly.push(s.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${i.accountKey.toBase58()}`)}return n}static compile(e){const n=Zm.compile(e.instructions,e.payerKey),i=new Array,s={writable:new Array,readonly:new Array},o=e.addressLookupTableAccounts||[];for(const p of o){const v=n.extractTableLookup(p);if(v!==void 0){const[E,{writable:S,readonly:R}]=v;i.push(E),s.writable.push(...S),s.readonly.push(...R)}}const[l,u]=n.getMessageComponents(),f=new uh(u,s).compileInstructions(e.instructions);return new Kl({header:l,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:f,addressTableLookups:i})}serialize(){const e=Array();os(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),i=Array();os(i,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),o=Array();os(o,this.addressTableLookups.length);const l=he.struct([he.u8("prefix"),he.struct([he.u8("numRequiredSignatures"),he.u8("numReadonlySignedAccounts"),he.u8("numReadonlyUnsignedAccounts")],"header"),he.blob(e.length,"staticAccountKeysLength"),he.seq(Rn(),this.staticAccountKeys.length,"staticAccountKeys"),Rn("recentBlockhash"),he.blob(i.length,"instructionsLength"),he.blob(n.length,"serializedInstructions"),he.blob(o.length,"addressTableLookupsLength"),he.blob(s.length,"serializedAddressTableLookups")]),u=new Uint8Array(Ga),f=l.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(p=>p.toBytes()),recentBlockhash:ci.decode(this.recentBlockhash),instructionsLength:new Uint8Array(i),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:s},u);return u.slice(0,f)}serializeInstructions(){let e=0;const n=new Uint8Array(Ga);for(const i of this.compiledInstructions){const s=Array();os(s,i.accountKeyIndexes.length);const o=Array();os(o,i.data.length);const l=he.struct([he.u8("programIdIndex"),he.blob(s.length,"encodedAccountKeyIndexesLength"),he.seq(he.u8(),i.accountKeyIndexes.length,"accountKeyIndexes"),he.blob(o.length,"encodedDataLength"),he.blob(i.data.length,"data")]);e+=l.encode({programIdIndex:i.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:i.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:i.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(Ga);for(const i of this.addressTableLookups){const s=Array();os(s,i.writableIndexes.length);const o=Array();os(o,i.readonlyIndexes.length);const l=he.struct([Rn("accountKey"),he.blob(s.length,"encodedWritableIndexesLength"),he.seq(he.u8(),i.writableIndexes.length,"writableIndexes"),he.blob(o.length,"encodedReadonlyIndexesLength"),he.seq(he.u8(),i.readonlyIndexes.length,"readonlyIndexes")]);e+=l.encode({accountKey:i.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:i.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:i.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const i=uo(n),s=i&Xm;zn(i!==s,"Expected versioned message but received legacy message");const o=s;zn(o===0,`Expected versioned message with version 0 but found version ${o}`);const l={numRequiredSignatures:uo(n),numReadonlySignedAccounts:uo(n),numReadonlyUnsignedAccounts:uo(n)},u=[],d=Hi(n);for(let R=0;R<d;R++)u.push(new ut(Gi(n,0,Eo)));const f=ci.encode(Gi(n,0,Eo)),p=Hi(n),v=[];for(let R=0;R<p;R++){const T=uo(n),M=Hi(n),W=Gi(n,0,M),z=Hi(n),j=new Uint8Array(Gi(n,0,z));v.push({programIdIndex:T,accountKeyIndexes:W,data:j})}const E=Hi(n),S=[];for(let R=0;R<E;R++){const T=new ut(Gi(n,0,Eo)),M=Hi(n),W=Gi(n,0,M),z=Hi(n),j=Gi(n,0,z);S.push({accountKey:T,writableIndexes:W,readonlyIndexes:j})}return new Kl({header:l,staticAccountKeys:u,recentBlockhash:f,compiledInstructions:v,addressTableLookups:S})}}const X1={deserializeMessageVersion(r){const e=r[0],n=e&Xm;return n===e?"legacy":n},deserialize:r=>{const e=X1.deserializeMessageVersion(r);if(e==="legacy")return $s.from(r);if(e===0)return Kl.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Vo=(function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r})({});const E7=zt.Buffer.alloc(ch).fill(0);class Xn{constructor(e){this.keys=void 0,this.programId=void 0,this.data=zt.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:i})=>({pubkey:e.toJSON(),isSigner:n,isWritable:i})),programId:this.programId.toJSON(),data:[...this.data]}}}class Un{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:i}=e;this.minNonceContextSlot=n,this.nonceInfo=i}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:i}=e;this.recentBlockhash=n,this.lastValidBlockHeight=i}else{const{recentBlockhash:n,nonceInfo:i}=e;i&&(this.nonceInfo=i),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new Xn(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let i;if(this.feePayer)i=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)i=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let T=0;T<n.length;T++)if(n[T].programId===void 0)throw new Error(`Transaction instruction index ${T} has undefined program id`);const s=[],o=[];n.forEach(T=>{T.keys.forEach(W=>{o.push({...W})});const M=T.programId.toString();s.includes(M)||s.push(M)}),s.forEach(T=>{o.push({pubkey:new ut(T),isSigner:!1,isWritable:!1})});const l=[];o.forEach(T=>{const M=T.pubkey.toString(),W=l.findIndex(z=>z.pubkey.toString()===M);W>-1?(l[W].isWritable=l[W].isWritable||T.isWritable,l[W].isSigner=l[W].isSigner||T.isSigner):l.push(T)}),l.sort(function(T,M){if(T.isSigner!==M.isSigner)return T.isSigner?-1:1;if(T.isWritable!==M.isWritable)return T.isWritable?-1:1;const W={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return T.pubkey.toBase58().localeCompare(M.pubkey.toBase58(),"en",W)});const u=l.findIndex(T=>T.pubkey.equals(i));if(u>-1){const[T]=l.splice(u,1);T.isSigner=!0,T.isWritable=!0,l.unshift(T)}else l.unshift({pubkey:i,isSigner:!0,isWritable:!0});for(const T of this.signatures){const M=l.findIndex(W=>W.pubkey.equals(T.publicKey));if(M>-1)l[M].isSigner||(l[M].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${T.publicKey.toString()}`)}let d=0,f=0,p=0;const v=[],E=[];l.forEach(({pubkey:T,isSigner:M,isWritable:W})=>{M?(v.push(T.toString()),d+=1,W||(f+=1)):(E.push(T.toString()),W||(p+=1))});const S=v.concat(E),R=n.map(T=>{const{data:M,programId:W}=T;return{programIdIndex:S.indexOf(W.toString()),accounts:T.keys.map(z=>S.indexOf(z.pubkey.toString())),data:ci.encode(M)}});return R.forEach(T=>{zn(T.programIdIndex>=0),T.accounts.forEach(M=>zn(M>=0))}),new $s({header:{numRequiredSignatures:d,numReadonlySignedAccounts:f,numReadonlyUnsignedAccounts:p},accountKeys:S,recentBlockhash:e,instructions:R})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((s,o)=>n[o].equals(s.publicKey))||(this.signatures=n.map(i=>({signature:null,publicKey:i}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(i=>{const s=i.toString();return n.has(s)?!1:(n.add(s),!0)}).map(i=>({signature:null,publicKey:i}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,i=[];for(const o of e){const l=o.publicKey.toString();n.has(l)||(n.add(l),i.push(o))}this.signatures=i.map(o=>({signature:null,publicKey:o.publicKey}));const s=this._compile();this._partialSign(s,...i)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,i=[];for(const o of e){const l=o.publicKey.toString();n.has(l)||(n.add(l),i.push(o))}const s=this._compile();this._partialSign(s,...i)}_partialSign(e,...n){const i=e.serialize();n.forEach(s=>{const o=G1(i,s.secretKey);this._addSignature(s.publicKey,wn(o))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){zn(n.length===64);const i=this.signatures.findIndex(s=>e.equals(s.publicKey));if(i<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[i].signature=zt.Buffer.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const i={};for(const{signature:s,publicKey:o}of this.signatures)s===null?n&&(i.missing||=[]).push(o):u7(s,e,o.toBytes())||(i.invalid||=[]).push(o);return i.invalid||i.missing?i:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:i}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(i){const o=this._getMessageSignednessErrors(s,n);if(o){let l="Signature verification failed.";throw o.invalid&&(l+=`
Invalid signature for public key${o.invalid.length===1?"":"(s)"} [\`${o.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),o.missing&&(l+=`
Missing signature for public key${o.missing.length===1?"":"(s)"} [\`${o.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(l)}}return this._serialize(s)}_serialize(e){const{signatures:n}=this,i=[];os(i,n.length);const s=i.length+n.length*64+e.length,o=zt.Buffer.alloc(s);return zn(n.length<256),zt.Buffer.from(i).copy(o,0),n.forEach(({signature:l},u)=>{l!==null&&(zn(l.length===64,"signature has invalid length"),zt.Buffer.from(l).copy(o,i.length+u*64))}),e.copy(o,i.length+n.length*64),zn(o.length<=Ga,`Transaction too large: ${o.length} > ${Ga}`),o}get keys(){return zn(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return zn(this.instructions.length===1),this.instructions[0].programId}get data(){return zn(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const i=Hi(n);let s=[];for(let o=0;o<i;o++){const l=Gi(n,0,ch);s.push(ci.encode(zt.Buffer.from(l)))}return Un.populate($s.from(n),s)}static populate(e,n=[]){const i=new Un;return i.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(i.feePayer=e.accountKeys[0]),n.forEach((s,o)=>{const l={signature:s==ci.encode(E7)?null:ci.decode(s),publicKey:e.accountKeys[o]};i.signatures.push(l)}),e.instructions.forEach(s=>{const o=s.accounts.map(l=>{const u=e.accountKeys[l];return{pubkey:u,isSigner:i.signatures.some(d=>d.publicKey.toString()===u.toString())||e.isAccountSigner(l),isWritable:e.isAccountWritable(l)}});i.instructions.push(new Xn({keys:o,programId:e.accountKeys[s.programIdIndex],data:ci.decode(s.data)}))}),i._message=e,i._json=i.toJSON(),i}}class Z1{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,n){const{header:i,compiledInstructions:s,recentBlockhash:o}=e,{numRequiredSignatures:l,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:d}=i,f=l-u;zn(f>0,"Message header is invalid");const p=e.staticAccountKeys.length-l-d;zn(p>=0,"Message header is invalid");const v=e.getAccountKeys(n),E=v.get(0);if(E===void 0)throw new Error("Failed to decompile message because no account keys were found");const S=[];for(const R of s){const T=[];for(const W of R.accountKeyIndexes){const z=v.get(W);if(z===void 0)throw new Error(`Failed to find key for account key index ${W}`);const j=W<l;let se;j?se=W<f:W<v.staticAccountKeys.length?se=W-l<p:se=W-v.staticAccountKeys.length<v.accountKeysFromLookups.writable.length,T.push({pubkey:z,isSigner:W<i.numRequiredSignatures,isWritable:se})}const M=v.get(R.programIdIndex);if(M===void 0)throw new Error(`Failed to find program id for program id index ${R.programIdIndex}`);S.push(new Xn({programId:M,data:wn(R.data),keys:T}))}return new Z1({payerKey:E,instructions:S,recentBlockhash:o})}compileToLegacyMessage(){return $s.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Kl.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class dh{get version(){return this.message.version}constructor(e,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)zn(n.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const i=[];for(let s=0;s<e.header.numRequiredSignatures;s++)i.push(new Uint8Array(ch));this.signatures=i}this.message=e}serialize(){const e=this.message.serialize(),n=Array();os(n,this.signatures.length);const i=he.struct([he.blob(n.length,"encodedSignaturesLength"),he.seq(m7(),this.signatures.length,"signatures"),he.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),o=i.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,o)}static deserialize(e){let n=[...e];const i=[],s=Hi(n);for(let l=0;l<s;l++)i.push(new Uint8Array(Gi(n,0,ch)));const o=X1.deserialize(new Uint8Array(n));return new dh(o,i)}sign(e){const n=this.message.serialize(),i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const o=i.findIndex(l=>l.equals(s.publicKey));zn(o>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[o]=G1(n,s.secretKey)}}addSignature(e,n){zn(n.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(e));zn(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=n}}const _7=160,b7=64,S7=_7/b7,_C=1e3/S7,ao=new ut("SysvarC1ock11111111111111111111111111111111"),I7=new ut("SysvarEpochSchedu1e111111111111111111111111"),A7=new ut("Sysvar1nstructions1111111111111111111111111"),Tp=new ut("SysvarRecentB1ockHashes11111111111111111111"),bu=new ut("SysvarRent111111111111111111111111111111111"),x7=new ut("SysvarRewards111111111111111111111111111111"),T7=new ut("SysvarS1otHashes111111111111111111111111111"),R7=new ut("SysvarS1otHistory11111111111111111111111111"),Rp=new ut("SysvarStakeHistory1111111111111111111111111");class hh extends Error{constructor({action:e,signature:n,transactionMessage:i,logs:s}){const o=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",l="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let u;switch(e){case"send":u=`Transaction ${n} resulted in an error. 
${i}. `+o+l;break;case"simulate":u=`Simulation failed. 
Message: ${i}. 
`+o+l;break;default:u=`Unknown action '${(d=>d)(e)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=i,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,i)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const o=s.meta.logMessages;this.transactionLogs=o,n(o)}else i(new Error("Log messages not found"))}).catch(i)})),await this.transactionLogs}}const k7={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Ut extends Error{constructor({code:e,message:n,data:i},s){super(s!=null?`${s}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=i,this.name="SolanaJSONRPCError"}}async function mv(r,e,n,i){const s=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,maxRetries:i.maxRetries,minContextSlot:i.minContextSlot},o=await r.sendTransaction(e,n,s);let l;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)l=(await r.confirmTransaction({abortSignal:i?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},i&&i.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,d=u.keys[0].pubkey;l=(await r.confirmTransaction({abortSignal:i?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:e.nonceInfo.nonce,signature:o},i&&i.commitment)).value}else i?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),l=(await r.confirmTransaction(o,i&&i.commitment)).value;if(l.err)throw o!=null?new hh({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(l)})`}):new Error(`Transaction ${o} failed (${JSON.stringify(l)})`);return o}function Il(r){return new Promise(e=>setTimeout(e,r))}function Dn(r,e){const n=r.layout.span>=0?r.layout.span:vC(r,e),i=zt.Buffer.alloc(n),s=Object.assign({instruction:r.index},e);return r.layout.encode(s,i),i}function jn(r,e){let n;try{n=r.layout.decode(e)}catch(i){throw new Error("invalid instruction; "+i)}if(n.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${n.instruction} != ${r.index}`);return n}const bC=he.nu64("lamportsPerSignature"),SC=he.struct([he.u32("version"),he.u32("state"),Rn("authorizedPubkey"),Rn("nonce"),he.struct([bC],"feeCalculator")]),gv=SC.span;class eg{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=SC.decode(wn(e),0);return new eg({authorizedPubkey:new ut(n.authorizedPubkey),nonce:new ut(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function Su(r){const e=he.blob(8,r),n=e.decode.bind(e),i=e.encode.bind(e),s=e,o=sz();return s.decode=(l,u)=>{const d=n(l,u);return o.decode(d)},s.encode=(l,u,d)=>{const f=o.encode(l);return i(f,u,d)},s}class C7{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const i=he.u32("instruction").decode(e.data);let s;for(const[o,l]of Object.entries(nr))if(l.index==i){s=o;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:n,space:i,programId:s}=jn(nr.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:n,space:i,programId:new ut(s)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:n}=jn(nr.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:n}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:n,seed:i,programId:s}=jn(nr.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:n,seed:i,programId:new ut(s)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:n}=jn(nr.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:n}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:n,seed:i,space:s,programId:o}=jn(nr.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ut(n),seed:i,space:s,programId:new ut(o)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:n}=jn(nr.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new ut(n)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:n,seed:i,programId:s}=jn(nr.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ut(n),seed:i,programId:new ut(s)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:n,seed:i,lamports:s,space:o,programId:l}=jn(nr.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new ut(n),seed:i,lamports:s,space:o,programId:new ut(l)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:n}=jn(nr.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new ut(n)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),jn(nr.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:n}=jn(nr.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:n}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:n}=jn(nr.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new ut(n)}}static checkProgramId(e){if(!e.equals(Zr.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}const nr=Object.freeze({Create:{index:0,layout:he.struct([he.u32("instruction"),he.ns64("lamports"),he.ns64("space"),Rn("programId")])},Assign:{index:1,layout:he.struct([he.u32("instruction"),Rn("programId")])},Transfer:{index:2,layout:he.struct([he.u32("instruction"),Su("lamports")])},CreateWithSeed:{index:3,layout:he.struct([he.u32("instruction"),Rn("base"),Pl("seed"),he.ns64("lamports"),he.ns64("space"),Rn("programId")])},AdvanceNonceAccount:{index:4,layout:he.struct([he.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:he.struct([he.u32("instruction"),he.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:he.struct([he.u32("instruction"),Rn("authorized")])},AuthorizeNonceAccount:{index:7,layout:he.struct([he.u32("instruction"),Rn("authorized")])},Allocate:{index:8,layout:he.struct([he.u32("instruction"),he.ns64("space")])},AllocateWithSeed:{index:9,layout:he.struct([he.u32("instruction"),Rn("base"),Pl("seed"),he.ns64("space"),Rn("programId")])},AssignWithSeed:{index:10,layout:he.struct([he.u32("instruction"),Rn("base"),Pl("seed"),Rn("programId")])},TransferWithSeed:{index:11,layout:he.struct([he.u32("instruction"),Su("lamports"),Pl("seed"),Rn("programId")])},UpgradeNonceAccount:{index:12,layout:he.struct([he.u32("instruction")])}});class Zr{constructor(){}static createAccount(e){const n=nr.Create,i=Dn(n,{lamports:e.lamports,space:e.space,programId:wn(e.programId.toBuffer())});return new Xn({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:i})}static transfer(e){let n,i;if("basePubkey"in e){const s=nr.TransferWithSeed;n=Dn(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:wn(e.programId.toBuffer())}),i=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=nr.Transfer;n=Dn(s,{lamports:BigInt(e.lamports)}),i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Xn({keys:i,programId:this.programId,data:n})}static assign(e){let n,i;if("basePubkey"in e){const s=nr.AssignWithSeed;n=Dn(s,{base:wn(e.basePubkey.toBuffer()),seed:e.seed,programId:wn(e.programId.toBuffer())}),i=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=nr.Assign;n=Dn(s,{programId:wn(e.programId.toBuffer())}),i=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Xn({keys:i,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=nr.CreateWithSeed,i=Dn(n,{base:wn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:wn(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Xn({keys:s,programId:this.programId,data:i})}static createNonceAccount(e){const n=new Un;"basePubkey"in e&&"seed"in e?n.add(Zr.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:gv,programId:this.programId})):n.add(Zr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:gv,programId:this.programId}));const i={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(i)),n}static nonceInitialize(e){const n=nr.InitializeNonceAccount,i=Dn(n,{authorized:wn(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Tp,isSigner:!1,isWritable:!1},{pubkey:bu,isSigner:!1,isWritable:!1}],programId:this.programId,data:i};return new Xn(s)}static nonceAdvance(e){const n=nr.AdvanceNonceAccount,i=Dn(n),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Tp,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new Xn(s)}static nonceWithdraw(e){const n=nr.WithdrawNonceAccount,i=Dn(n,{lamports:e.lamports});return new Xn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Tp,isSigner:!1,isWritable:!1},{pubkey:bu,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static nonceAuthorize(e){const n=nr.AuthorizeNonceAccount,i=Dn(n,{authorized:wn(e.newAuthorizedPubkey.toBuffer())});return new Xn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static allocate(e){let n,i;if("basePubkey"in e){const s=nr.AllocateWithSeed;n=Dn(s,{base:wn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:wn(e.programId.toBuffer())}),i=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=nr.Allocate;n=Dn(s,{space:e.space}),i=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Xn({keys:i,programId:this.programId,data:n})}}Zr.programId=new ut("11111111111111111111111111111111");const P7=Ga-300;class Hl{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Hl.chunkSize)+1+1)}static async load(e,n,i,s,o){{const v=await e.getMinimumBalanceForRentExemption(o.length),E=await e.getAccountInfo(i.publicKey,"confirmed");let S=null;if(E!==null){if(E.executable)return console.error("Program load failed, account is already executable"),!1;E.data.length!==o.length&&(S=S||new Un,S.add(Zr.allocate({accountPubkey:i.publicKey,space:o.length}))),E.owner.equals(s)||(S=S||new Un,S.add(Zr.assign({accountPubkey:i.publicKey,programId:s}))),E.lamports<v&&(S=S||new Un,S.add(Zr.transfer({fromPubkey:n.publicKey,toPubkey:i.publicKey,lamports:v-E.lamports})))}else S=new Un().add(Zr.createAccount({fromPubkey:n.publicKey,newAccountPubkey:i.publicKey,lamports:v>0?v:1,space:o.length,programId:s}));S!==null&&await mv(e,S,[n,i],{commitment:"confirmed"})}const l=he.struct([he.u32("instruction"),he.u32("offset"),he.u32("bytesLength"),he.u32("bytesLengthPadding"),he.seq(he.u8("byte"),he.offset(he.u32(),-8),"bytes")]),u=Hl.chunkSize;let d=0,f=o,p=[];for(;f.length>0;){const v=f.slice(0,u),E=zt.Buffer.alloc(u+16);l.encode({instruction:0,offset:d,bytes:v,bytesLength:0,bytesLengthPadding:0},E);const S=new Un().add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:E});p.push(mv(e,S,[n,i],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Il(1e3/4),d+=u,f=f.slice(u)}await Promise.all(p);{const v=he.struct([he.u32("instruction")]),E=zt.Buffer.alloc(v.span);v.encode({instruction:1},E);const S=new Un().add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:bu,isSigner:!1,isWritable:!1}],programId:s,data:E}),R="processed",T=await e.sendTransaction(S,[n,i],{preflightCommitment:R}),{context:M,value:W}=await e.confirmTransaction({signature:T,lastValidBlockHeight:S.lastValidBlockHeight,blockhash:S.recentBlockhash},R);if(W.err)throw new Error(`Transaction ${T} failed (${JSON.stringify(W)})`);for(;;){try{if(await e.getSlot({commitment:R})>M.slot)break}catch{}await new Promise(z=>setTimeout(z,Math.round(_C/2)))}}return!0}}Hl.chunkSize=P7;const M7=new ut("BPFLoader2111111111111111111111111111111111");class N7{static getMinNumSignatures(e){return Hl.getMinNumSignatures(e)}static load(e,n,i,s,o){return Hl.load(e,n,i,o,s)}}function O7(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Oy,bA;function D7(){if(bA)return Oy;bA=1;var r=Object.prototype.toString,e=Object.keys||function(i){var s=[];for(var o in i)s.push(o);return s};function n(i,s){var o,l,u,d,f,p,v;if(i===!0)return"true";if(i===!1)return"false";switch(typeof i){case"object":if(i===null)return null;if(i.toJSON&&typeof i.toJSON=="function")return n(i.toJSON(),s);if(v=r.call(i),v==="[object Array]"){for(u="[",l=i.length-1,o=0;o<l;o++)u+=n(i[o],!0)+",";return l>-1&&(u+=n(i[o],!0)),u+"]"}else if(v==="[object Object]"){for(d=e(i).sort(),l=d.length,u="",o=0;o<l;)f=d[o],p=n(i[f],!1),p!==void 0&&(u&&(u+=","),u+=JSON.stringify(f)+":"+p),o++;return"{"+u+"}"}else return JSON.stringify(i);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(i);default:return isFinite(i)?i:null}}return Oy=function(i){var s=n(i,!1);if(s!==void 0)return""+s},Oy}var L7=D7(),SA=O7(L7);const bd=32;function Dy(r){let e=0;for(;r>1;)r/=2,e++;return e}function B7(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class IC{constructor(e,n,i,s,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=i,this.firstNormalEpoch=s,this.firstNormalSlot=o}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=Dy(B7(e+bd+1))-Dy(bd)-1,i=this.getSlotsInEpoch(n),s=e-(i-bd);return[n,s]}else{const n=e-this.firstNormalSlot,i=Math.floor(n/this.slotsPerEpoch),s=this.firstNormalEpoch+i,o=n%this.slotsPerEpoch;return[s,o]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*bd:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Dy(bd)):this.slotsPerEpoch}}var U7=globalThis.fetch;class V7 extends Fz{constructor(e,n,i){const s=o=>{const l=Uz(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in l?this.underlyingSocket=l.socket:this.underlyingSocket=l,l};super(s,e,n,i),this.underlyingSocket=void 0}call(...e){const n=this.underlyingSocket?.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){const n=this.underlyingSocket?.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function F7(r,e){let n;try{n=r.layout.decode(e)}catch(i){throw new Error("invalid instruction; "+i)}if(n.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${r.index}`);return n}const IA=56;class yv{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=F7(z7,e),i=e.length-IA;zn(i>=0,"lookup table is invalid"),zn(i%32===0,"lookup table is invalid");const s=i/32,{addresses:o}=he.struct([he.seq(Rn(),s,"addresses")]).decode(e.slice(IA));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new ut(n.authority[0]):void 0,addresses:o.map(l=>new ut(l))}}}const z7={index:1,layout:he.struct([he.u32("typeIndex"),Su("deactivationSlot"),he.nu64("lastExtendedSlot"),he.u8("lastExtendedStartIndex"),he.u8(),he.seq(Rn(),he.offset(he.u8(),-1),"authority")])},W7=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function j7(r){const e=r.match(W7);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[n,i,s,o]=e,l=r.startsWith("https:")?"wss:":"ws:",u=s==null?null:parseInt(s.slice(1),10),d=u==null?"":`:${u+1}`;return`${l}//${i}${d}${o}`}const Er=Bh(W1(ut),ct(),r=>new ut(r)),AC=j1([ct(),gr("base64")]),eE=Bh(W1(zt.Buffer),AC,r=>zt.Buffer.from(r[0],"base64")),xC=30*1e3;function $7(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function tr(r){let e,n;if(typeof r=="string")e=r;else if(r){const{commitment:i,...s}=r;e=i,n=s}return{commitment:e,config:n}}function AA(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function TC(r){return Di([tt({jsonrpc:gr("2.0"),id:ct(),result:r}),tt({jsonrpc:gr("2.0"),id:ct(),error:tt({code:Bu(),message:ct(),data:Ht(dz())})})])}const q7=TC(Bu());function yn(r){return Bh(TC(r),q7,e=>"error"in e?e:{...e,result:gt(e.result,r)})}function Cr(r){return yn(tt({context:tt({slot:Ae()}),value:r}))}function tg(r){return tt({context:tt({slot:Ae()}),value:r})}function Ly(r,e){return r===0?new Kl({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new ut(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:ci.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new $s(e)}const K7=tt({foundation:Ae(),foundationTerm:Ae(),initial:Ae(),taper:Ae(),terminal:Ae()}),H7=yn(wt(vt(tt({epoch:Ae(),effectiveSlot:Ae(),amount:Ae(),postBalance:Ae(),commission:Ht(vt(Ae()))})))),G7=wt(tt({slot:Ae(),prioritizationFee:Ae()})),Y7=tt({total:Ae(),validator:Ae(),foundation:Ae(),epoch:Ae()}),J7=tt({epoch:Ae(),slotIndex:Ae(),slotsInEpoch:Ae(),absoluteSlot:Ae(),blockHeight:Ht(Ae()),transactionCount:Ht(Ae())}),Q7=tt({slotsPerEpoch:Ae(),leaderScheduleSlotOffset:Ae(),warmup:bo(),firstNormalEpoch:Ae(),firstNormalSlot:Ae()}),X7=tC(ct(),wt(Ae())),nc=vt(Di([tt({}),ct()])),Z7=tt({err:nc}),eW=gr("receivedSignature"),tW=tt({"solana-core":ct(),"feature-set":Ht(Ae())}),nW=tt({program:ct(),programId:Er,parsed:Bu()}),rW=tt({programId:Er,accounts:wt(Er),data:ct()}),xA=Cr(tt({err:vt(Di([tt({}),ct()])),logs:vt(wt(ct())),accounts:Ht(vt(wt(vt(tt({executable:bo(),owner:ct(),lamports:Ae(),data:wt(ct()),rentEpoch:Ht(Ae())}))))),unitsConsumed:Ht(Ae()),returnData:Ht(vt(tt({programId:ct(),data:j1([ct(),gr("base64")])}))),innerInstructions:Ht(vt(wt(tt({index:Ae(),instructions:wt(Di([nW,rW]))}))))})),iW=Cr(tt({byIdentity:tC(ct(),wt(Ae())),range:tt({firstSlot:Ae(),lastSlot:Ae()})}));function sW(r,e,n,i,s,o){const l=n||U7;let u;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return i&&(d=async(p,v)=>{const E=await new Promise((S,R)=>{try{i(p,v,(T,M)=>S([T,M]))}catch(T){R(T)}});return await l(...E)}),new Dz(async(p,v)=>{const E={method:"POST",body:p,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},sj)};try{let S=5,R,T=500;for(;d?R=await d(r,E):R=await l(r,E),!(R.status!==429||s===!0||(S-=1,S===0));)console.error(`Server responded with ${R.status} ${R.statusText}.  Retrying after ${T}ms delay...`),await Il(T),T*=2;const M=await R.text();R.ok?v(null,M):v(new Error(`${R.status} ${R.statusText}: ${M}`))}catch(S){S instanceof Error&&v(S)}},{})}function oW(r){return(e,n)=>new Promise((i,s)=>{r.request(e,n,(o,l)=>{if(o){s(o);return}i(l)})})}function aW(r){return e=>new Promise((n,i)=>{e.length===0&&n([]);const s=e.map(o=>r.request(o.methodName,o.args));r.request(s,(o,l)=>{if(o){i(o);return}n(l)})})}const lW=yn(K7),cW=yn(Y7),uW=yn(G7),dW=yn(J7),hW=yn(Q7),fW=yn(X7),pW=yn(Ae()),mW=Cr(tt({total:Ae(),circulating:Ae(),nonCirculating:Ae(),nonCirculatingAccounts:wt(Er)})),wv=tt({amount:ct(),uiAmount:vt(Ae()),decimals:Ae(),uiAmountString:Ht(ct())}),gW=Cr(wt(tt({address:Er,amount:ct(),uiAmount:vt(Ae()),decimals:Ae(),uiAmountString:Ht(ct())}))),yW=Cr(wt(tt({pubkey:Er,account:tt({executable:bo(),owner:Er,lamports:Ae(),data:eE,rentEpoch:Ae()})}))),vv=tt({program:ct(),parsed:Bu(),space:Ae()}),wW=Cr(wt(tt({pubkey:Er,account:tt({executable:bo(),owner:Er,lamports:Ae(),data:vv,rentEpoch:Ae()})}))),vW=Cr(wt(tt({lamports:Ae(),address:Er}))),fh=tt({executable:bo(),owner:Er,lamports:Ae(),data:eE,rentEpoch:Ae()}),EW=tt({pubkey:Er,account:fh}),_W=Bh(Di([W1(zt.Buffer),vv]),Di([AC,vv]),r=>Array.isArray(r)?gt(r,eE):r),Ev=tt({executable:bo(),owner:Er,lamports:Ae(),data:_W,rentEpoch:Ae()}),bW=tt({pubkey:Er,account:Ev}),SW=tt({state:Di([gr("active"),gr("inactive"),gr("activating"),gr("deactivating")]),active:Ae(),inactive:Ae()}),IW=yn(wt(tt({signature:ct(),slot:Ae(),err:nc,memo:vt(ct()),blockTime:Ht(vt(Ae()))}))),AW=yn(wt(tt({signature:ct(),slot:Ae(),err:nc,memo:vt(ct()),blockTime:Ht(vt(Ae()))}))),xW=tt({subscription:Ae(),result:tg(fh)}),TW=tt({pubkey:Er,account:fh}),RW=tt({subscription:Ae(),result:tg(TW)}),kW=tt({parent:Ae(),slot:Ae(),root:Ae()}),CW=tt({subscription:Ae(),result:kW}),PW=Di([tt({type:Di([gr("firstShredReceived"),gr("completed"),gr("optimisticConfirmation"),gr("root")]),slot:Ae(),timestamp:Ae()}),tt({type:gr("createdBank"),parent:Ae(),slot:Ae(),timestamp:Ae()}),tt({type:gr("frozen"),slot:Ae(),timestamp:Ae(),stats:tt({numTransactionEntries:Ae(),numSuccessfulTransactions:Ae(),numFailedTransactions:Ae(),maxTransactionsPerEntry:Ae()})}),tt({type:gr("dead"),slot:Ae(),timestamp:Ae(),err:ct()})]),MW=tt({subscription:Ae(),result:PW}),NW=tt({subscription:Ae(),result:tg(Di([Z7,eW]))}),OW=tt({subscription:Ae(),result:Ae()}),DW=tt({pubkey:ct(),gossip:vt(ct()),tpu:vt(ct()),rpc:vt(ct()),version:vt(ct())}),TA=tt({votePubkey:ct(),nodePubkey:ct(),activatedStake:Ae(),epochVoteAccount:bo(),epochCredits:wt(j1([Ae(),Ae(),Ae()])),commission:Ae(),lastVote:Ae(),rootSlot:vt(Ae())}),LW=yn(tt({current:wt(TA),delinquent:wt(TA)})),BW=Di([gr("processed"),gr("confirmed"),gr("finalized")]),UW=tt({slot:Ae(),confirmations:vt(Ae()),err:nc,confirmationStatus:Ht(BW)}),VW=Cr(wt(vt(UW))),FW=yn(Ae()),RC=tt({accountKey:Er,writableIndexes:wt(Ae()),readonlyIndexes:wt(Ae())}),tE=tt({signatures:wt(ct()),message:tt({accountKeys:wt(ct()),header:tt({numRequiredSignatures:Ae(),numReadonlySignedAccounts:Ae(),numReadonlyUnsignedAccounts:Ae()}),instructions:wt(tt({accounts:wt(Ae()),data:ct(),programIdIndex:Ae()})),recentBlockhash:ct(),addressTableLookups:Ht(wt(RC))})}),kC=tt({pubkey:Er,signer:bo(),writable:bo(),source:Ht(Di([gr("transaction"),gr("lookupTable")]))}),CC=tt({accountKeys:wt(kC),signatures:wt(ct())}),PC=tt({parsed:Bu(),program:ct(),programId:Er}),MC=tt({accounts:wt(Er),data:ct(),programId:Er}),zW=Di([MC,PC]),WW=Di([tt({parsed:Bu(),program:ct(),programId:ct()}),tt({accounts:wt(ct()),data:ct(),programId:ct()})]),NC=Bh(zW,WW,r=>"accounts"in r?gt(r,MC):gt(r,PC)),OC=tt({signatures:wt(ct()),message:tt({accountKeys:wt(kC),instructions:wt(NC),recentBlockhash:ct(),addressTableLookups:Ht(vt(wt(RC)))})}),pm=tt({accountIndex:Ae(),mint:ct(),owner:Ht(ct()),programId:Ht(ct()),uiTokenAmount:wv}),DC=tt({writable:wt(Er),readonly:wt(Er)}),ng=tt({err:nc,fee:Ae(),innerInstructions:Ht(vt(wt(tt({index:Ae(),instructions:wt(tt({accounts:wt(Ae()),data:ct(),programIdIndex:Ae()}))})))),preBalances:wt(Ae()),postBalances:wt(Ae()),logMessages:Ht(vt(wt(ct()))),preTokenBalances:Ht(vt(wt(pm))),postTokenBalances:Ht(vt(wt(pm))),loadedAddresses:Ht(DC),computeUnitsConsumed:Ht(Ae()),costUnits:Ht(Ae())}),nE=tt({err:nc,fee:Ae(),innerInstructions:Ht(vt(wt(tt({index:Ae(),instructions:wt(NC)})))),preBalances:wt(Ae()),postBalances:wt(Ae()),logMessages:Ht(vt(wt(ct()))),preTokenBalances:Ht(vt(wt(pm))),postTokenBalances:Ht(vt(wt(pm))),loadedAddresses:Ht(DC),computeUnitsConsumed:Ht(Ae()),costUnits:Ht(Ae())}),Uu=Di([gr(0),gr("legacy")]),rc=tt({pubkey:ct(),lamports:Ae(),postBalance:vt(Ae()),rewardType:vt(ct()),commission:Ht(vt(Ae()))}),jW=yn(vt(tt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Ae(),transactions:wt(tt({transaction:tE,meta:vt(ng),version:Ht(Uu)})),rewards:Ht(wt(rc)),blockTime:vt(Ae()),blockHeight:vt(Ae())}))),$W=yn(vt(tt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Ae(),rewards:Ht(wt(rc)),blockTime:vt(Ae()),blockHeight:vt(Ae())}))),qW=yn(vt(tt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Ae(),transactions:wt(tt({transaction:CC,meta:vt(ng),version:Ht(Uu)})),rewards:Ht(wt(rc)),blockTime:vt(Ae()),blockHeight:vt(Ae())}))),KW=yn(vt(tt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Ae(),transactions:wt(tt({transaction:OC,meta:vt(nE),version:Ht(Uu)})),rewards:Ht(wt(rc)),blockTime:vt(Ae()),blockHeight:vt(Ae())}))),HW=yn(vt(tt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Ae(),transactions:wt(tt({transaction:CC,meta:vt(nE),version:Ht(Uu)})),rewards:Ht(wt(rc)),blockTime:vt(Ae()),blockHeight:vt(Ae())}))),GW=yn(vt(tt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Ae(),rewards:Ht(wt(rc)),blockTime:vt(Ae()),blockHeight:vt(Ae())}))),YW=yn(vt(tt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Ae(),transactions:wt(tt({transaction:tE,meta:vt(ng)})),rewards:Ht(wt(rc)),blockTime:vt(Ae())}))),RA=yn(vt(tt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Ae(),signatures:wt(ct()),blockTime:vt(Ae())}))),By=yn(vt(tt({slot:Ae(),meta:vt(ng),blockTime:Ht(vt(Ae())),transaction:tE,version:Ht(Uu)}))),op=yn(vt(tt({slot:Ae(),transaction:OC,meta:vt(nE),blockTime:Ht(vt(Ae())),version:Ht(Uu)}))),JW=Cr(tt({blockhash:ct(),lastValidBlockHeight:Ae()})),QW=Cr(bo()),XW=tt({slot:Ae(),numTransactions:Ae(),numSlots:Ae(),samplePeriodSecs:Ae()}),ZW=yn(wt(XW)),ej=Cr(vt(tt({feeCalculator:tt({lamportsPerSignature:Ae()})}))),tj=yn(ct()),nj=yn(ct()),rj=tt({err:nc,logs:wt(ct()),signature:ct()}),ij=tt({result:tg(rj),subscription:Ae()}),sj={"solana-client":"js/1.0.0-maintenance"};class LC{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const f={};return async p=>{const{commitment:v,config:E}=tr(p),S=this._buildArgs([],v,void 0,E),R=SA(S);return f[R]=f[R]??(async()=>{try{const T=await this._rpcRequest("getBlockHeight",S),M=gt(T,yn(Ae()));if("error"in M)throw new Ut(M.error,"failed to get block height information");return M.result}finally{delete f[R]}})(),await f[R]}})();let i,s,o,l,u,d;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,i=n.wsEndpoint,s=n.httpHeaders,o=n.fetch,l=n.fetchMiddleware,u=n.disableRetryOnRateLimit,d=n.httpAgent),this._rpcEndpoint=$7(e),this._rpcWsEndpoint=i||j7(e),this._rpcClient=sW(e,s,o,l,u,d),this._rpcRequest=oW(this._rpcClient),this._rpcBatchRequest=aW(this._rpcClient),this._rpcWebSocket=new V7(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:i,config:s}=tr(n),o=this._buildArgs([e.toBase58()],i,void 0,s),l=await this._rpcRequest("getBalance",o),u=gt(l,Cr(Ae()));if("error"in u)throw new Ut(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(i=>i.value).catch(i=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+i)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),i=gt(n,yn(vt(Ae())));if("error"in i)throw new Ut(i.error,`failed to get block time for slot ${e}`);return i.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=gt(e,yn(Ae()));if("error"in n)throw new Ut(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=gt(e,pW);if("error"in n)throw new Ut(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const i=await this._rpcRequest("getSupply",[n]),s=gt(i,mW);if("error"in s)throw new Ut(s.error,"failed to get supply");return s.result}async getTokenSupply(e,n){const i=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenSupply",i),o=gt(s,Cr(wv));if("error"in o)throw new Ut(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(e,n){const i=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenAccountBalance",i),o=gt(s,Cr(wv));if("error"in o)throw new Ut(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(e,n,i){const{commitment:s,config:o}=tr(i);let l=[e.toBase58()];"mint"in n?l.push({mint:n.mint.toBase58()}):l.push({programId:n.programId.toBase58()});const u=this._buildArgs(l,s,"base64",o),d=await this._rpcRequest("getTokenAccountsByOwner",u),f=gt(d,yW);if("error"in f)throw new Ut(f.error,`failed to get token accounts owned by account ${e.toBase58()}`);return f.result}async getParsedTokenAccountsByOwner(e,n,i){let s=[e.toBase58()];"mint"in n?s.push({mint:n.mint.toBase58()}):s.push({programId:n.programId.toBase58()});const o=this._buildArgs(s,i,"jsonParsed"),l=await this._rpcRequest("getTokenAccountsByOwner",o),u=gt(l,wW);if("error"in u)throw new Ut(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},i=n.filter||n.commitment?[n]:[],s=await this._rpcRequest("getLargestAccounts",i),o=gt(s,vW);if("error"in o)throw new Ut(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(e,n){const i=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenLargestAccounts",i),o=gt(s,gW);if("error"in o)throw new Ut(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(e,n){const{commitment:i,config:s}=tr(n),o=this._buildArgs([e.toBase58()],i,"base64",s),l=await this._rpcRequest("getAccountInfo",o),u=gt(l,Cr(vt(fh)));if("error"in u)throw new Ut(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,n){const{commitment:i,config:s}=tr(n),o=this._buildArgs([e.toBase58()],i,"jsonParsed",s),l=await this._rpcRequest("getAccountInfo",o),u=gt(l,Cr(vt(Ev)));if("error"in u)throw new Ut(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(i){throw new Error("failed to get info about account "+e.toBase58()+": "+i)}}async getMultipleParsedAccounts(e,n){const{commitment:i,config:s}=tr(n),o=e.map(f=>f.toBase58()),l=this._buildArgs([o],i,"jsonParsed",s),u=await this._rpcRequest("getMultipleAccounts",l),d=gt(u,Cr(wt(vt(Ev))));if("error"in d)throw new Ut(d.error,`failed to get info for accounts ${o}`);return d.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:i,config:s}=tr(n),o=e.map(f=>f.toBase58()),l=this._buildArgs([o],i,"base64",s),u=await this._rpcRequest("getMultipleAccounts",l),d=gt(u,Cr(wt(vt(fh))));if("error"in d)throw new Ut(d.error,`failed to get info for accounts ${o}`);return d.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,i){const{commitment:s,config:o}=tr(n),l=this._buildArgs([e.toBase58()],s,void 0,{...o,epoch:i??o?.epoch}),u=await this._rpcRequest("getStakeActivation",l),d=gt(u,yn(SW));if("error"in d)throw new Ut(d.error,`failed to get Stake Activation ${e.toBase58()}`);return d.result}async getProgramAccounts(e,n){const{commitment:i,config:s}=tr(n),{encoding:o,...l}=s||{},u=this._buildArgs([e.toBase58()],i,o||"base64",{...l,...l.filters?{filters:AA(l.filters)}:null}),d=await this._rpcRequest("getProgramAccounts",u),f=wt(EW),p=l.withContext===!0?gt(d,Cr(f)):gt(d,yn(f));if("error"in p)throw new Ut(p.error,`failed to get accounts owned by program ${e.toBase58()}`);return p.result}async getParsedProgramAccounts(e,n){const{commitment:i,config:s}=tr(n),o=this._buildArgs([e.toBase58()],i,"jsonParsed",s),l=await this._rpcRequest("getProgramAccounts",o),u=gt(l,yn(wt(bW)));if("error"in u)throw new Ut(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,n){let i;if(typeof e=="string")i=e;else{const o=e;if(o.abortSignal?.aborted)return Promise.reject(o.abortSignal.reason);i=o.signature}let s;try{s=ci.decode(i)}catch{throw new Error("signature must be base58 encoded: "+i)}return zn(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:i}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,i)=>{e!=null&&(e.aborted?i(e.reason):e.addEventListener("abort",()=>{i(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let i,s,o=!1;const l=new Promise((d,f)=>{try{i=this.onSignature(n,(v,E)=>{i=void 0;const S={context:E,value:v};d({__type:Vo.PROCESSED,response:S})},e);const p=new Promise(v=>{i==null?v():s=this._onSubscriptionStateChange(i,E=>{E==="subscribed"&&v()})});(async()=>{if(await p,o)return;const v=await this.getSignatureStatus(n);if(o||v==null)return;const{context:E,value:S}=v;if(S!=null)if(S?.err)f(S.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(S.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(S.confirmationStatus==="processed"||S.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,d({__type:Vo.PROCESSED,response:{context:E,value:S}})}})()}catch(p){f(p)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),i!=null&&(this.removeSignatureListener(i),i=void 0)},confirmationPromise:l}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:i,signature:s}}){let o=!1;const l=new Promise(v=>{const E=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let S=await E();if(!o){for(;S<=i;)if(await Il(1e3),o||(S=await E(),o))return;v({__type:Vo.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),f=this.getCancellationPromise(n);let p;try{const v=await Promise.race([f,d,l]);if(v.__type===Vo.PROCESSED)p=v.response;else throw new J1(s)}finally{o=!0,u()}return p}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:i,nonceAccountPubkey:s,nonceValue:o,signature:l}}){let u=!1;const d=new Promise(S=>{let R=o,T=null;const M=async()=>{try{const{context:W,value:z}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:i});return T=W.slot,z?.nonce}catch{return R}};(async()=>{if(R=await M(),!u)for(;;){if(o!==R){S({__type:Vo.NONCE_INVALID,slotInWhichNonceDidAdvance:T});return}if(await Il(2e3),u||(R=await M(),u))return}})()}),{abortConfirmation:f,confirmationPromise:p}=this.getTransactionConfirmationPromise({commitment:e,signature:l}),v=this.getCancellationPromise(n);let E;try{const S=await Promise.race([v,p,d]);if(S.__type===Vo.PROCESSED)E=S.response;else{let R;for(;;){const T=await this.getSignatureStatus(l);if(T==null)break;if(T.context.slot<(S.slotInWhichNonceDidAdvance??i)){await Il(400);continue}R=T;break}if(R?.value){const T=e||"finalized",{confirmationStatus:M}=R.value;switch(T){case"processed":case"recent":if(M!=="processed"&&M!=="confirmed"&&M!=="finalized")throw new Yc(l);break;case"confirmed":case"single":case"singleGossip":if(M!=="confirmed"&&M!=="finalized")throw new Yc(l);break;case"finalized":case"max":case"root":if(M!=="finalized")throw new Yc(l);break;default:}E={context:R.context,value:{err:R.value.err}}}else throw new Yc(l)}}finally{u=!0,f()}return E}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let i;const s=new Promise(d=>{let f=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{f=this._confirmTransactionInitialTimeout||3e4;break}}i=setTimeout(()=>d({__type:Vo.TIMED_OUT,timeoutMs:f}),f)}),{abortConfirmation:o,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let u;try{const d=await Promise.race([l,s]);if(d.__type===Vo.PROCESSED)u=d.response;else throw new Q1(n,d.timeoutMs/1e3)}finally{clearTimeout(i),o()}return u}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=gt(e,yn(wt(DW)));if("error"in n)throw new Ut(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),i=await this._rpcRequest("getVoteAccounts",n),s=gt(i,LW);if("error"in s)throw new Ut(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:n,config:i}=tr(e),s=this._buildArgs([],n,void 0,i),o=await this._rpcRequest("getSlot",s),l=gt(o,yn(Ae()));if("error"in l)throw new Ut(l.error,"failed to get slot");return l.result}async getSlotLeader(e){const{commitment:n,config:i}=tr(e),s=this._buildArgs([],n,void 0,i),o=await this._rpcRequest("getSlotLeader",s),l=gt(o,yn(ct()));if("error"in l)throw new Ut(l.error,"failed to get slot leader");return l.result}async getSlotLeaders(e,n){const i=[e,n],s=await this._rpcRequest("getSlotLeaders",i),o=gt(s,yn(wt(Er)));if("error"in o)throw new Ut(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(e,n){const{context:i,value:s}=await this.getSignatureStatuses([e],n);zn(s.length===1);const o=s[0];return{context:i,value:o}}async getSignatureStatuses(e,n){const i=[e];n&&i.push(n);const s=await this._rpcRequest("getSignatureStatuses",i),o=gt(s,VW);if("error"in o)throw new Ut(o.error,"failed to get signature status");return o.result}async getTransactionCount(e){const{commitment:n,config:i}=tr(e),s=this._buildArgs([],n,void 0,i),o=await this._rpcRequest("getTransactionCount",s),l=gt(o,yn(Ae()));if("error"in l)throw new Ut(l.error,"failed to get transaction count");return l.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),i=await this._rpcRequest("getInflationGovernor",n),s=gt(i,lW);if("error"in s)throw new Ut(s.error,"failed to get inflation");return s.result}async getInflationReward(e,n,i){const{commitment:s,config:o}=tr(i),l=this._buildArgs([e.map(f=>f.toBase58())],s,void 0,{...o,epoch:n??o?.epoch}),u=await this._rpcRequest("getInflationReward",l),d=gt(u,H7);if("error"in d)throw new Ut(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=gt(e,cW);if("error"in n)throw new Ut(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:i}=tr(e),s=this._buildArgs([],n,void 0,i),o=await this._rpcRequest("getEpochInfo",s),l=gt(o,dW);if("error"in l)throw new Ut(l.error,"failed to get epoch info");return l.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=gt(e,hW);if("error"in n)throw new Ut(n.error,"failed to get epoch schedule");const i=n.result;return new IC(i.slotsPerEpoch,i.leaderScheduleSlotOffset,i.warmup,i.firstNormalEpoch,i.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=gt(e,fW);if("error"in n)throw new Ut(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const i=this._buildArgs([e],n),s=await this._rpcRequest("getMinimumBalanceForRentExemption",i),o=gt(s,FW);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:i}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:i,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),i=gt(n,ZW);if("error"in i)throw new Ut(i.error,"failed to get recent performance samples");return i.result}async getFeeCalculatorForBlockhash(e,n){const i=this._buildArgs([e],n),s=await this._rpcRequest("getFeeCalculatorForBlockhash",i),o=gt(s,ej);if("error"in o)throw new Ut(o.error,"failed to get fee calculator");const{context:l,value:u}=o.result;return{context:l,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,n){const i=wn(e.serialize()).toString("base64"),s=this._buildArgs([i],n),o=await this._rpcRequest("getFeeForMessage",s),l=gt(o,Cr(vt(Ae())));if("error"in l)throw new Ut(l.error,"failed to get fee for message");if(l.result===null)throw new Error("invalid blockhash");return l.result}async getRecentPrioritizationFees(e){const n=e?.lockedWritableAccounts?.map(l=>l.toBase58()),i=n?.length?[n]:[],s=await this._rpcRequest("getRecentPrioritizationFees",i),o=gt(s,uW);if("error"in o)throw new Ut(o.error,"failed to get recent prioritization fees");return o.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:i}=tr(e),s=this._buildArgs([],n,void 0,i),o=await this._rpcRequest("getLatestBlockhash",s),l=gt(o,JW);if("error"in l)throw new Ut(l.error,"failed to get latest blockhash");return l.result}async isBlockhashValid(e,n){const{commitment:i,config:s}=tr(n),o=this._buildArgs([e],i,void 0,s),l=await this._rpcRequest("isBlockhashValid",o),u=gt(l,QW);if("error"in u)throw new Ut(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=gt(e,yn(tW));if("error"in n)throw new Ut(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=gt(e,yn(ct()));if("error"in n)throw new Ut(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:i,config:s}=tr(n),o=this._buildArgsAtLeastConfirmed([e],i,void 0,s),l=await this._rpcRequest("getBlock",o);try{switch(s?.transactionDetails){case"accounts":{const u=gt(l,qW);if("error"in u)throw u.error;return u.result}case"none":{const u=gt(l,$W);if("error"in u)throw u.error;return u.result}default:{const u=gt(l,jW);if("error"in u)throw u.error;const{result:d}=u;return d?{...d,transactions:d.transactions.map(({transaction:f,meta:p,version:v})=>({meta:p,transaction:{...f,message:Ly(v,f.message)},version:v}))}:null}}}catch(u){throw new Ut(u,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:i,config:s}=tr(n),o=this._buildArgsAtLeastConfirmed([e],i,"jsonParsed",s),l=await this._rpcRequest("getBlock",o);try{switch(s?.transactionDetails){case"accounts":{const u=gt(l,HW);if("error"in u)throw u.error;return u.result}case"none":{const u=gt(l,GW);if("error"in u)throw u.error;return u.result}default:{const u=gt(l,KW);if("error"in u)throw u.error;return u.result}}}catch(u){throw new Ut(u,"failed to get block")}}async getBlockProduction(e){let n,i;if(typeof e=="string")i=e;else if(e){const{commitment:u,...d}=e;i=u,n=d}const s=this._buildArgs([],i,"base64",n),o=await this._rpcRequest("getBlockProduction",s),l=gt(o,iW);if("error"in l)throw new Ut(l.error,"failed to get block production information");return l.result}async getTransaction(e,n){const{commitment:i,config:s}=tr(n),o=this._buildArgsAtLeastConfirmed([e],i,void 0,s),l=await this._rpcRequest("getTransaction",o),u=gt(l,By);if("error"in u)throw new Ut(u.error,"failed to get transaction");const d=u.result;return d&&{...d,transaction:{...d.transaction,message:Ly(d.version,d.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:i,config:s}=tr(n),o=this._buildArgsAtLeastConfirmed([e],i,"jsonParsed",s),l=await this._rpcRequest("getTransaction",o),u=gt(l,op);if("error"in u)throw new Ut(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,n){const{commitment:i,config:s}=tr(n),o=e.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],i,"jsonParsed",s)}));return(await this._rpcBatchRequest(o)).map(d=>{const f=gt(d,op);if("error"in f)throw new Ut(f.error,"failed to get transactions");return f.result})}async getTransactions(e,n){const{commitment:i,config:s}=tr(n),o=e.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],i,void 0,s)}));return(await this._rpcBatchRequest(o)).map(d=>{const f=gt(d,By);if("error"in f)throw new Ut(f.error,"failed to get transactions");const p=f.result;return p&&{...p,transaction:{...p.transaction,message:Ly(p.version,p.transaction.message)}}})}async getConfirmedBlock(e,n){const i=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getBlock",i),o=gt(s,YW);if("error"in o)throw new Ut(o.error,"failed to get confirmed block");const l=o.result;if(!l)throw new Error("Confirmed block "+e+" not found");const u={...l,transactions:l.transactions.map(({transaction:d,meta:f})=>{const p=new $s(d.message);return{meta:f,transaction:{...d,message:p}}})};return{...u,transactions:u.transactions.map(({transaction:d,meta:f})=>({meta:f,transaction:Un.populate(d.message,d.signatures)}))}}async getBlocks(e,n,i){const s=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],i),o=await this._rpcRequest("getBlocks",s),l=gt(o,yn(wt(Ae())));if("error"in l)throw new Ut(l.error,"failed to get blocks");return l.result}async getBlockSignatures(e,n){const i=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",i),o=gt(s,RA);if("error"in o)throw new Ut(o.error,"failed to get block");const l=o.result;if(!l)throw new Error("Block "+e+" not found");return l}async getConfirmedBlockSignatures(e,n){const i=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",i),o=gt(s,RA);if("error"in o)throw new Ut(o.error,"failed to get confirmed block");const l=o.result;if(!l)throw new Error("Confirmed block "+e+" not found");return l}async getConfirmedTransaction(e,n){const i=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getTransaction",i),o=gt(s,By);if("error"in o)throw new Ut(o.error,"failed to get transaction");const l=o.result;if(!l)return l;const u=new $s(l.transaction.message),d=l.transaction.signatures;return{...l,transaction:Un.populate(u,d)}}async getParsedConfirmedTransaction(e,n){const i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),s=await this._rpcRequest("getTransaction",i),o=gt(s,op);if("error"in o)throw new Ut(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(e,n){const i=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],n,"jsonParsed")}));return(await this._rpcBatchRequest(i)).map(l=>{const u=gt(l,op);if("error"in u)throw new Ut(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,n,i){let s={},o=await this.getFirstAvailableBlock();for(;!("until"in s)&&(n--,!(n<=0||n<o));)try{const d=await this.getConfirmedBlockSignatures(n,"finalized");d.signatures.length>0&&(s.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let l=await this.getSlot("finalized");for(;!("before"in s)&&(i++,!(i>l));)try{const d=await this.getConfirmedBlockSignatures(i);d.signatures.length>0&&(s.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(e,n,i){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],i,void 0,n),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),l=gt(o,IW);if("error"in l)throw new Ut(l.error,"failed to get confirmed signatures for address");return l.result}async getSignaturesForAddress(e,n,i){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],i,void 0,n),o=await this._rpcRequest("getSignaturesForAddress",s),l=gt(o,AW);if("error"in l)throw new Ut(l.error,"failed to get signatures for address");return l.result}async getAddressLookupTable(e,n){const{context:i,value:s}=await this.getAccountInfoAndContext(e,n);let o=null;return s!==null&&(o=new yv({key:e,state:yv.deserialize(s.data)})),{context:i,value:o}}async getNonceAndContext(e,n){const{context:i,value:s}=await this.getAccountInfoAndContext(e,n);let o=null;return s!==null&&(o=eg.fromAccountData(s.data)),{context:i,value:o}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(i=>i.value).catch(i=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+i)})}async requestAirdrop(e,n){const i=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),s=gt(i,tj);if("error"in s)throw new Ut(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Il(100);const i=Date.now()-this._blockhashInfo.lastFetch>=xC;if(this._blockhashInfo.latestBlockhash!==null&&!i)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,i=n?n.blockhash:null;for(let s=0;s<50;s++){const o=await this.getLatestBlockhash("finalized");if(i!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await Il(_C/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:i}=tr(e),s=this._buildArgs([],n,"base64",i),o=await this._rpcRequest("getStakeMinimumDelegation",s),l=gt(o,Cr(Ae()));if("error"in l)throw new Ut(l.error,"failed to get stake minimum delegation");return l.result}async simulateTransaction(e,n,i){if("message"in e){const T=e.serialize(),M=zt.Buffer.from(T).toString("base64");if(Array.isArray(n)||i!==void 0)throw new Error("Invalid arguments");const W=n||{};W.encoding="base64","commitment"in W||(W.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(W.innerInstructions=n.innerInstructions);const z=[M,W],j=await this._rpcRequest("simulateTransaction",z),se=gt(j,xA);if("error"in se)throw new Error("failed to simulate transaction: "+se.error.message);return se.result}let s;if(e instanceof Un){let R=e;s=new Un,s.feePayer=R.feePayer,s.instructions=e.instructions,s.nonceInfo=R.nonceInfo,s.signatures=R.signatures}else s=Un.populate(e),s._message=s._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const o=n;if(s.nonceInfo&&o)s.sign(...o);else{let R=this._disableBlockhashCaching;for(;;){const T=await this._blockhashWithExpiryBlockHeight(R);if(s.lastValidBlockHeight=T.lastValidBlockHeight,s.recentBlockhash=T.blockhash,!o)break;if(s.sign(...o),!s.signature)throw new Error("!signature");const M=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(M)&&!this._blockhashInfo.transactionSignatures.includes(M)){this._blockhashInfo.simulatedSignatures.push(M);break}else R=!0}}const l=s._compile(),u=l.serialize(),f=s._serialize(u).toString("base64"),p={encoding:"base64",commitment:this.commitment};if(i){const R=(Array.isArray(i)?i:l.nonProgramIds()).map(T=>T.toBase58());p.accounts={encoding:"base64",addresses:R}}o&&(p.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(p.innerInstructions=n.innerInstructions);const v=[f,p],E=await this._rpcRequest("simulateTransaction",v),S=gt(E,xA);if("error"in S){let R;if("data"in S.error&&(R=S.error.data.logs,R&&Array.isArray(R))){const T=`
    `,M=T+R.join(T);console.error(S.error.message,M)}throw new hh({action:"simulate",signature:"",transactionMessage:S.error.message,logs:R})}return S.result}async sendTransaction(e,n,i){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const l=e.serialize();return await this.sendRawTransaction(l,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(e.nonceInfo)e.sign(...s);else{let l=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(l);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const d=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))l=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const o=e.serialize();return await this.sendRawTransaction(o,i)}async sendRawTransaction(e,n){const i=wn(e).toString("base64");return await this.sendEncodedTransaction(i,n)}async sendEncodedTransaction(e,n){const i={encoding:"base64"},s=n&&n.skipPreflight,o=s===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(i.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(i.minContextSlot=n.minContextSlot),s&&(i.skipPreflight=s),o&&(i.preflightCommitment=o);const l=[e,i],u=await this._rpcRequest("sendTransaction",l),d=gt(u,nj);if("error"in d){let f;throw"data"in d.error&&(f=d.error.data.logs),new hh({action:s?"send":"simulate",signature:"",transactionMessage:d.error.message,logs:f})}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,i])=>{this._setSubscription(n,{...i,state:"pending"})})}_setSubscription(e,n){const i=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=n,i!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){const i=this._subscriptionHashByClientSubscriptionId[e];if(i==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[i]||=new Set;return s.add(n),()=>{s.delete(n),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[i]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(i){i instanceof Error&&console.log(`Error when closing socket connection: ${i.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async i=>{const s=this._subscriptionsByHash[i];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[i],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:o,method:l}=s;try{this._setSubscription(i,{...s,state:"subscribing"});const u=await this._rpcWebSocket.call(l,o);this._setSubscription(i,{...s,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=s.callbacks,await this._updateSubscriptions()}catch(u){if(console.error(`Received ${u instanceof Error?"":"JSON-RPC "}error calling \`${l}\``,{args:o,error:u}),!n())return;this._setSubscription(i,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:o,unsubscribeMethod:l}=s;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(i,{...s,state:"unsubscribing"}),this._setSubscription(i,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(l,[o])}catch(u){if(u instanceof Error&&console.error(`${l} error:`,u.message),!n())return;this._setSubscription(i,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(i,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const i=this._subscriptionCallbacksByServerSubscriptionId[e];i!==void 0&&i.forEach(s=>{try{s(...n)}catch(o){console.error(o)}})}_wsOnAccountNotification(e){const{result:n,subscription:i}=gt(e,xW);this._handleServerNotification(i,[n.value,n.context])}_makeSubscription(e,n){const i=this._nextClientSubscriptionId++,s=SA([e.method,n]),o=this._subscriptionsByHash[s];return o===void 0?this._subscriptionsByHash[s]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:o.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[i]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[i]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[i],delete this._subscriptionHashByClientSubscriptionId[i];const l=this._subscriptionsByHash[s];zn(l!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${i}`),l.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),i}onAccountChange(e,n,i){const{commitment:s,config:o}=tr(i),l=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},l)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:i}=gt(e,RW);this._handleServerNotification(i,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,i,s){const{commitment:o,config:l}=tr(i),u=this._buildArgs([e.toBase58()],o||this._commitment||"finalized","base64",l||(s?{filters:AA(s)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,i){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],i||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:i}=gt(e,ij);this._handleServerNotification(i,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:i}=gt(e,CW);this._handleServerNotification(i,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:i}=gt(e,MW);this._handleServerNotification(i,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const i=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];i?await i():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,i,s){const o=n||this._commitment;if(o||i||s){let l={};i&&(l.encoding=i),o&&(l.commitment=o),s&&(l=Object.assign(l,s)),e.push(l)}return e}_buildArgsAtLeastConfirmed(e,n,i,s){const o=n||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,i,s)}_wsOnSignatureNotification(e){const{result:n,subscription:i}=gt(e,NW);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(i),this._handleServerNotification(i,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,i){const s=this._buildArgs([e],i||this._commitment||"finalized"),o=this._makeSubscription({callback:(l,u)=>{if(l.type==="status"){n(l.result,u);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}onSignatureWithOptions(e,n,i){const{commitment:s,...o}={...i,commitment:i&&i.commitment||this._commitment||"finalized"},l=this._buildArgs([e],s,void 0,o),u=this._makeSubscription({callback:(d,f)=>{n(d,f);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},l);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:i}=gt(e,OW);this._handleServerNotification(i,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class au{constructor(e){this._keypair=void 0,this._keypair=e??vA()}static generate(){return new au(vA())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const i=e.slice(32,64);if(!n||!n.skipValidation){const s=e.slice(0,32),o=fm(s);for(let l=0;l<32;l++)if(i[l]!==o[l])throw new Error("provided secretKey is invalid")}return new au({publicKey:i,secretKey:e})}static fromSeed(e){const n=fm(e),i=new Uint8Array(64);return i.set(e),i.set(n,32),new au({publicKey:n,secretKey:i})}get publicKey(){return new ut(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Wo=Object.freeze({CreateLookupTable:{index:0,layout:he.struct([he.u32("instruction"),Su("recentSlot"),he.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:he.struct([he.u32("instruction")])},ExtendLookupTable:{index:2,layout:he.struct([he.u32("instruction"),Su(),he.seq(Rn(),he.offset(he.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:he.struct([he.u32("instruction")])},CloseLookupTable:{index:4,layout:he.struct([he.u32("instruction")])}});class oj{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const i=he.u32("instruction").decode(e.data);let s;for(const[o,l]of Object.entries(Wo))if(l.index==i){s=o;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:n}=jn(Wo.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(n)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:n}=jn(Wo.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:n.map(i=>new ut(i))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(rE.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}class rE{constructor(){}static createLookupTable(e){const[n,i]=ut.findProgramAddressSync([e.authority.toBuffer(),Xk().encode(e.recentSlot)],this.programId),s=Wo.CreateLookupTable,o=Dn(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:i}),l=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Zr.programId,isSigner:!1,isWritable:!1}];return[new Xn({programId:this.programId,keys:l,data:o}),n]}static freezeLookupTable(e){const n=Wo.FreezeLookupTable,i=Dn(n),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Xn({programId:this.programId,keys:s,data:i})}static extendLookupTable(e){const n=Wo.ExtendLookupTable,i=Dn(n,{addresses:e.addresses.map(o=>o.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Zr.programId,isSigner:!1,isWritable:!1}),new Xn({programId:this.programId,keys:s,data:i})}static deactivateLookupTable(e){const n=Wo.DeactivateLookupTable,i=Dn(n),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Xn({programId:this.programId,keys:s,data:i})}static closeLookupTable(e){const n=Wo.CloseLookupTable,i=Dn(n),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Xn({programId:this.programId,keys:s,data:i})}}rE.programId=new ut("AddressLookupTab1e1111111111111111111111111");class aj{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const i=he.u8("instruction").decode(e.data);let s;for(const[o,l]of Object.entries(ho))if(l.index==i){s=o;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:n,additionalFee:i}=jn(ho.RequestUnits,e.data);return{units:n,additionalFee:i}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:n}=jn(ho.RequestHeapFrame,e.data);return{bytes:n}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:n}=jn(ho.SetComputeUnitLimit,e.data);return{units:n}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:n}=jn(ho.SetComputeUnitPrice,e.data);return{microLamports:n}}static checkProgramId(e){if(!e.equals(iE.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const ho=Object.freeze({RequestUnits:{index:0,layout:he.struct([he.u8("instruction"),he.u32("units"),he.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:he.struct([he.u8("instruction"),he.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:he.struct([he.u8("instruction"),he.u32("units")])},SetComputeUnitPrice:{index:3,layout:he.struct([he.u8("instruction"),Su("microLamports")])}});class iE{constructor(){}static requestUnits(e){const n=ho.RequestUnits,i=Dn(n,e);return new Xn({keys:[],programId:this.programId,data:i})}static requestHeapFrame(e){const n=ho.RequestHeapFrame,i=Dn(n,e);return new Xn({keys:[],programId:this.programId,data:i})}static setComputeUnitLimit(e){const n=ho.SetComputeUnitLimit,i=Dn(n,e);return new Xn({keys:[],programId:this.programId,data:i})}static setComputeUnitPrice(e){const n=ho.SetComputeUnitPrice,i=Dn(n,{microLamports:BigInt(e.microLamports)});return new Xn({keys:[],programId:this.programId,data:i})}}iE.programId=new ut("ComputeBudget111111111111111111111111111111");const kA=64,CA=32,PA=64,MA=he.struct([he.u8("numSignatures"),he.u8("padding"),he.u16("signatureOffset"),he.u16("signatureInstructionIndex"),he.u16("publicKeyOffset"),he.u16("publicKeyInstructionIndex"),he.u16("messageDataOffset"),he.u16("messageDataSize"),he.u16("messageInstructionIndex")]);class rg{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:n,message:i,signature:s,instructionIndex:o}=e;zn(n.length===CA,`Public Key must be ${CA} bytes but received ${n.length} bytes`),zn(s.length===PA,`Signature must be ${PA} bytes but received ${s.length} bytes`);const l=MA.span,u=l+n.length,d=u+s.length,f=1,p=zt.Buffer.alloc(d+i.length),v=o??65535;return MA.encode({numSignatures:f,padding:0,signatureOffset:u,signatureInstructionIndex:v,publicKeyOffset:l,publicKeyInstructionIndex:v,messageDataOffset:d,messageDataSize:i.length,messageInstructionIndex:v},p),p.fill(n,l),p.fill(s,u),p.fill(i,d),new Xn({keys:[],programId:rg.programId,data:p})}static createInstructionWithPrivateKey(e){const{privateKey:n,message:i,instructionIndex:s}=e;zn(n.length===kA,`Private key must be ${kA} bytes but received ${n.length} bytes`);try{const o=au.fromSecretKey(n),l=o.publicKey.toBytes(),u=G1(i,o.secretKey);return this.createInstructionWithPublicKey({publicKey:l,message:i,signature:u,instructionIndex:s})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}}rg.programId=new ut("Ed25519SigVerify111111111111111111111111111");const lj=(r,e)=>{const n=H1.sign(r,e);return[n.toCompactRawBytes(),n.recovery]};H1.utils.isValidPrivateKey;const cj=H1.getPublicKey,NA=32,Uy=20,OA=64,uj=11,Vy=he.struct([he.u8("numSignatures"),he.u16("signatureOffset"),he.u8("signatureInstructionIndex"),he.u16("ethAddressOffset"),he.u8("ethAddressInstructionIndex"),he.u16("messageDataOffset"),he.u16("messageDataSize"),he.u8("messageInstructionIndex"),he.blob(20,"ethAddress"),he.blob(64,"signature"),he.u8("recoveryId")]);class lu{constructor(){}static publicKeyToEthAddress(e){zn(e.length===OA,`Public key must be ${OA} bytes but received ${e.length} bytes`);try{return zt.Buffer.from(gA(wn(e))).slice(-Uy)}catch(n){throw new Error(`Error constructing Ethereum address: ${n}`)}}static createInstructionWithPublicKey(e){const{publicKey:n,message:i,signature:s,recoveryId:o,instructionIndex:l}=e;return lu.createInstructionWithEthAddress({ethAddress:lu.publicKeyToEthAddress(n),message:i,signature:s,recoveryId:o,instructionIndex:l})}static createInstructionWithEthAddress(e){const{ethAddress:n,message:i,signature:s,recoveryId:o,instructionIndex:l=0}=e;let u;typeof n=="string"?n.startsWith("0x")?u=zt.Buffer.from(n.substr(2),"hex"):u=zt.Buffer.from(n,"hex"):u=n,zn(u.length===Uy,`Address must be ${Uy} bytes but received ${u.length} bytes`);const d=1+uj,f=d,p=d+u.length,v=p+s.length+1,E=1,S=zt.Buffer.alloc(Vy.span+i.length);return Vy.encode({numSignatures:E,signatureOffset:p,signatureInstructionIndex:l,ethAddressOffset:f,ethAddressInstructionIndex:l,messageDataOffset:v,messageDataSize:i.length,messageInstructionIndex:l,signature:wn(s),ethAddress:wn(u),recoveryId:o},S),S.fill(wn(i),Vy.span),new Xn({keys:[],programId:lu.programId,data:S})}static createInstructionWithPrivateKey(e){const{privateKey:n,message:i,instructionIndex:s}=e;zn(n.length===NA,`Private key must be ${NA} bytes but received ${n.length} bytes`);try{const o=wn(n),l=cj(o,!1).slice(1),u=zt.Buffer.from(gA(wn(i))),[d,f]=lj(u,o);return this.createInstructionWithPublicKey({publicKey:l,message:i,signature:d,recoveryId:f,instructionIndex:s})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}}lu.programId=new ut("KeccakSecp256k11111111111111111111111111111");var BC;const UC=new ut("StakeConfig11111111111111111111111111111111");class VC{constructor(e,n){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=n}}class Uh{constructor(e,n,i){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=i}}BC=Uh;Uh.default=new BC(0,0,ut.default);class dj{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const i=he.u32("instruction").decode(e.data);let s;for(const[o,l]of Object.entries(Xr))if(l.index==i){s=o;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:n,lockup:i}=jn(Xr.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new VC(new ut(n.staker),new ut(n.withdrawer)),lockup:new Uh(i.unixTimestamp,i.epoch,new ut(i.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),jn(Xr.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:n,stakeAuthorizationType:i}=jn(Xr.Authorize,e.data),s={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ut(n),stakeAuthorizationType:{index:i}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:n,stakeAuthorizationType:i,authoritySeed:s,authorityOwner:o}=jn(Xr.AuthorizeWithSeed,e.data),l={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:s,authorityOwner:new ut(o),newAuthorizedPubkey:new ut(n),stakeAuthorizationType:{index:i}};return e.keys.length>3&&(l.custodianPubkey=e.keys[3].pubkey),l}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:n}=jn(Xr.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:n}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),jn(Xr.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:n}=jn(Xr.Withdraw,e.data),i={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:n};return e.keys.length>5&&(i.custodianPubkey=e.keys[5].pubkey),i}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),jn(Xr.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(ig.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}const Xr=Object.freeze({Initialize:{index:0,layout:he.struct([he.u32("instruction"),g7(),y7()])},Authorize:{index:1,layout:he.struct([he.u32("instruction"),Rn("newAuthorized"),he.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:he.struct([he.u32("instruction")])},Split:{index:3,layout:he.struct([he.u32("instruction"),he.ns64("lamports")])},Withdraw:{index:4,layout:he.struct([he.u32("instruction"),he.ns64("lamports")])},Deactivate:{index:5,layout:he.struct([he.u32("instruction")])},Merge:{index:7,layout:he.struct([he.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:he.struct([he.u32("instruction"),Rn("newAuthorized"),he.u32("stakeAuthorizationType"),Pl("authoritySeed"),Rn("authorityOwner")])}}),hj=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ig{constructor(){}static initialize(e){const{stakePubkey:n,authorized:i,lockup:s}=e,o=s||Uh.default,l=Xr.Initialize,u=Dn(l,{authorized:{staker:wn(i.staker.toBuffer()),withdrawer:wn(i.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:wn(o.custodian.toBuffer())}}),d={keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:bu,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new Xn(d)}static createAccountWithSeed(e){const n=new Un;n.add(Zr.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:i,authorized:s,lockup:o}=e;return n.add(this.initialize({stakePubkey:i,authorized:s,lockup:o}))}static createAccount(e){const n=new Un;n.add(Zr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:i,authorized:s,lockup:o}=e;return n.add(this.initialize({stakePubkey:i,authorized:s,lockup:o}))}static delegate(e){const{stakePubkey:n,authorizedPubkey:i,votePubkey:s}=e,o=Xr.Delegate,l=Dn(o);return new Un().add({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:ao,isSigner:!1,isWritable:!1},{pubkey:Rp,isSigner:!1,isWritable:!1},{pubkey:UC,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:l})}static authorize(e){const{stakePubkey:n,authorizedPubkey:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:l}=e,u=Xr.Authorize,d=Dn(u,{newAuthorized:wn(s.toBuffer()),stakeAuthorizationType:o.index}),f=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ao,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1}];return l&&f.push({pubkey:l,isSigner:!0,isWritable:!1}),new Un().add({keys:f,programId:this.programId,data:d})}static authorizeWithSeed(e){const{stakePubkey:n,authorityBase:i,authoritySeed:s,authorityOwner:o,newAuthorizedPubkey:l,stakeAuthorizationType:u,custodianPubkey:d}=e,f=Xr.AuthorizeWithSeed,p=Dn(f,{newAuthorized:wn(l.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:s,authorityOwner:wn(o.toBuffer())}),v=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:ao,isSigner:!1,isWritable:!1}];return d&&v.push({pubkey:d,isSigner:!0,isWritable:!1}),new Un().add({keys:v,programId:this.programId,data:p})}static splitInstruction(e){const{stakePubkey:n,authorizedPubkey:i,splitStakePubkey:s,lamports:o}=e,l=Xr.Split,u=Dn(l,{lamports:o});return new Xn({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e,n){const i=new Un;return i.add(Zr.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:n,space:this.space,programId:this.programId})),i.add(this.splitInstruction(e))}static splitWithSeed(e,n){const{stakePubkey:i,authorizedPubkey:s,splitStakePubkey:o,basePubkey:l,seed:u,lamports:d}=e,f=new Un;return f.add(Zr.allocate({accountPubkey:o,basePubkey:l,seed:u,space:this.space,programId:this.programId})),n&&n>0&&f.add(Zr.transfer({fromPubkey:e.authorizedPubkey,toPubkey:o,lamports:n})),f.add(this.splitInstruction({stakePubkey:i,authorizedPubkey:s,splitStakePubkey:o,lamports:d}))}static merge(e){const{stakePubkey:n,sourceStakePubKey:i,authorizedPubkey:s}=e,o=Xr.Merge,l=Dn(o);return new Un().add({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:ao,isSigner:!1,isWritable:!1},{pubkey:Rp,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:l})}static withdraw(e){const{stakePubkey:n,authorizedPubkey:i,toPubkey:s,lamports:o,custodianPubkey:l}=e,u=Xr.Withdraw,d=Dn(u,{lamports:o}),f=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:ao,isSigner:!1,isWritable:!1},{pubkey:Rp,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}];return l&&f.push({pubkey:l,isSigner:!0,isWritable:!1}),new Un().add({keys:f,programId:this.programId,data:d})}static deactivate(e){const{stakePubkey:n,authorizedPubkey:i}=e,s=Xr.Deactivate,o=Dn(s);return new Un().add({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ao,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}}ig.programId=new ut("Stake11111111111111111111111111111111111111");ig.space=200;class FC{constructor(e,n,i,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=n,this.authorizedWithdrawer=i,this.commission=s}}class fj{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const i=he.u32("instruction").decode(e.data);let s;for(const[o,l]of Object.entries(fo))if(l.index==i){s=o;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:n}=jn(fo.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new FC(new ut(n.nodePubkey),new ut(n.authorizedVoter),new ut(n.authorizedWithdrawer),n.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:n,voteAuthorizationType:i}=jn(fo.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ut(n),voteAuthorizationType:{index:i}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorized:s,voteAuthorizationType:o}}=jn(fo.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ut(n),currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:new ut(s),voteAuthorizationType:{index:o},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:n}=jn(fo.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:n,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Vu.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}const fo=Object.freeze({InitializeAccount:{index:0,layout:he.struct([he.u32("instruction"),w7()])},Authorize:{index:1,layout:he.struct([he.u32("instruction"),Rn("newAuthorized"),he.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:he.struct([he.u32("instruction"),he.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:he.struct([he.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:he.struct([he.u32("instruction"),v7()])}}),pj=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Vu{constructor(){}static initializeAccount(e){const{votePubkey:n,nodePubkey:i,voteInit:s}=e,o=fo.InitializeAccount,l=Dn(o,{voteInit:{nodePubkey:wn(s.nodePubkey.toBuffer()),authorizedVoter:wn(s.authorizedVoter.toBuffer()),authorizedWithdrawer:wn(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),u={keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:bu,isSigner:!1,isWritable:!1},{pubkey:ao,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:l};return new Xn(u)}static createAccount(e){const n=new Un;return n.add(Zr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),n.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:n,authorizedPubkey:i,newAuthorizedPubkey:s,voteAuthorizationType:o}=e,l=fo.Authorize,u=Dn(l,{newAuthorized:wn(s.toBuffer()),voteAuthorizationType:o.index}),d=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ao,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}];return new Un().add({keys:d,programId:this.programId,data:u})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:n,currentAuthorityDerivedKeyOwnerPubkey:i,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:o,voteAuthorizationType:l,votePubkey:u}=e,d=fo.AuthorizeWithSeed,f=Dn(d,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:wn(i.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:wn(o.toBuffer()),voteAuthorizationType:l.index}}),p=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:ao,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Un().add({keys:p,programId:this.programId,data:f})}static withdraw(e){const{votePubkey:n,authorizedWithdrawerPubkey:i,lamports:s,toPubkey:o}=e,l=fo.Withdraw,u=Dn(l,{lamports:s}),d=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1}];return new Un().add({keys:d,programId:this.programId,data:u})}static safeWithdraw(e,n,i){if(e.lamports>n-i)throw new Error("Withdraw will leave vote account with insufficient funds.");return Vu.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:n,authorizedWithdrawerPubkey:i,nodePubkey:s}=e,o=fo.UpdateValidatorIdentity,l=Dn(o),u=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}];return new Un().add({keys:u,programId:this.programId,data:l})}}Vu.programId=new ut("Vote111111111111111111111111111111111111111");Vu.space=3762;const zC=new ut("Va1idator1nfo111111111111111111111111111111"),mj=tt({name:ct(),website:Ht(ct()),details:Ht(ct()),iconUrl:Ht(ct()),keybaseUsername:Ht(ct())});class sE{constructor(e,n){this.key=void 0,this.info=void 0,this.key=e,this.info=n}static fromConfigData(e){let n=[...e];if(Hi(n)!==2)return null;const s=[];for(let o=0;o<2;o++){const l=new ut(Gi(n,0,Eo)),u=uo(n)===1;s.push({publicKey:l,isSigner:u})}if(s[0].publicKey.equals(zC)&&s[1].isSigner){const o=Pl().decode(zt.Buffer.from(n)),l=JSON.parse(o);return Zk(l,mj),new sE(s[1].publicKey,l)}return null}}const gj=new ut("Vote111111111111111111111111111111111111111"),yj=he.struct([Rn("nodePubkey"),Rn("authorizedWithdrawer"),he.u8("commission"),he.nu64(),he.seq(he.struct([he.nu64("slot"),he.u32("confirmationCount")]),he.offset(he.u32(),-8),"votes"),he.u8("rootSlotValid"),he.nu64("rootSlot"),he.nu64(),he.seq(he.struct([he.nu64("epoch"),Rn("authorizedVoter")]),he.offset(he.u32(),-8),"authorizedVoters"),he.struct([he.seq(he.struct([Rn("authorizedPubkey"),he.nu64("epochOfLastAuthorizedSwitch"),he.nu64("targetEpoch")]),32,"buf"),he.nu64("idx"),he.u8("isEmpty")],"priorVoters"),he.nu64(),he.seq(he.struct([he.nu64("epoch"),he.nu64("credits"),he.nu64("prevCredits")]),he.offset(he.u32(),-8),"epochCredits"),he.struct([he.nu64("slot"),he.nu64("timestamp")],"lastTimestamp")]);class oE{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const i=yj.decode(wn(e),4);let s=i.rootSlot;return i.rootSlotValid||(s=null),new oE({nodePubkey:new ut(i.nodePubkey),authorizedWithdrawer:new ut(i.authorizedWithdrawer),commission:i.commission,votes:i.votes,rootSlot:s,authorizedVoters:i.authorizedVoters.map(wj),priorVoters:vj(i.priorVoters),epochCredits:i.epochCredits,lastTimestamp:i.lastTimestamp})}}function wj({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new ut(r)}}function DA({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:n}){return{authorizedPubkey:new ut(r),epochOfLastAuthorizedSwitch:e,targetEpoch:n}}function vj({buf:r,idx:e,isEmpty:n}){return n?[]:[...r.slice(e+1).map(DA),...r.slice(0,e).map(DA)]}const LA={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Ej(r,e){const n=e===!1?"http":"https";if(!r)return LA[n].devnet;const i=LA[n][r];if(!i)throw new Error(`Unknown ${n} cluster: ${r}`);return i}async function _j(r,e,n,i){let s,o;n&&Object.prototype.hasOwnProperty.call(n,"lastValidBlockHeight")||n&&Object.prototype.hasOwnProperty.call(n,"nonceValue")?(s=n,o=i):o=n;const l=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},u=await r.sendRawTransaction(e,l),d=o&&o.commitment,p=(await(s?r.confirmTransaction(s,d):r.confirmTransaction(u,d))).value;if(p.err)throw u!=null?new hh({action:l?.skipPreflight?"send":"simulate",signature:u,transactionMessage:`Status: (${JSON.stringify(p)})`}):new Error(`Raw transaction ${u} failed (${JSON.stringify(p)})`);return u}const bj=1e9,Sj=Object.freeze(Object.defineProperty({__proto__:null,Account:f7,AddressLookupTableAccount:yv,AddressLookupTableInstruction:oj,AddressLookupTableProgram:rE,Authorized:VC,BLOCKHASH_CACHE_TIMEOUT_MS:xC,BPF_LOADER_DEPRECATED_PROGRAM_ID:p7,BPF_LOADER_PROGRAM_ID:M7,BpfLoader:N7,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:ho,ComputeBudgetInstruction:aj,ComputeBudgetProgram:iE,Connection:LC,Ed25519Program:rg,Enum:d7,EpochSchedule:IC,FeeCalculatorLayout:bC,Keypair:au,LAMPORTS_PER_SOL:bj,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Wo,Loader:Hl,Lockup:Uh,MAX_SEED_LENGTH:wC,Message:$s,MessageAccountKeys:uh,MessageV0:Kl,NONCE_ACCOUNT_LENGTH:gv,NonceAccount:eg,PACKET_DATA_SIZE:Ga,PUBLIC_KEY_LENGTH:Eo,PublicKey:ut,SIGNATURE_LENGTH_IN_BYTES:ch,SOLANA_SCHEMA:Hd,STAKE_CONFIG_ID:UC,STAKE_INSTRUCTION_LAYOUTS:Xr,SYSTEM_INSTRUCTION_LAYOUTS:nr,SYSVAR_CLOCK_PUBKEY:ao,SYSVAR_EPOCH_SCHEDULE_PUBKEY:I7,SYSVAR_INSTRUCTIONS_PUBKEY:A7,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Tp,SYSVAR_RENT_PUBKEY:bu,SYSVAR_REWARDS_PUBKEY:x7,SYSVAR_SLOT_HASHES_PUBKEY:T7,SYSVAR_SLOT_HISTORY_PUBKEY:R7,SYSVAR_STAKE_HISTORY_PUBKEY:Rp,Secp256k1Program:lu,SendTransactionError:hh,SolanaJSONRPCError:Ut,SolanaJSONRPCErrorCode:k7,StakeAuthorizationLayout:hj,StakeInstruction:dj,StakeProgram:ig,Struct:Y1,SystemInstruction:C7,SystemProgram:Zr,Transaction:Un,TransactionExpiredBlockheightExceededError:J1,TransactionExpiredNonceInvalidError:Yc,TransactionExpiredTimeoutError:Q1,TransactionInstruction:Xn,TransactionMessage:Z1,TransactionStatus:Vo,VALIDATOR_INFO_KEY:zC,VERSION_PREFIX_MASK:Xm,VOTE_PROGRAM_ID:gj,ValidatorInfo:sE,VersionedMessage:X1,VersionedTransaction:dh,VoteAccount:oE,VoteAuthorizationLayout:pj,VoteInit:FC,VoteInstruction:fj,VoteProgram:Vu,clusterApiUrl:Ej,sendAndConfirmRawTransaction:_j,sendAndConfirmTransaction:mv},Symbol.toStringTag,{value:"Module"})),WC=pe.createContext({});function Ij(){return pe.useContext(WC)}const Aj=({children:r,endpoint:e,config:n={commitment:"confirmed"}})=>{const i=pe.useMemo(()=>new LC(e,n),[e,n]);return it.createElement(WC.Provider,{value:{connection:i}},r)};class Ci extends Error{constructor(e,n){super(e),this.error=n}}class mm extends Ci{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class Ld extends Ci{constructor(){super(...arguments),this.name="WalletConfigError"}}class jC extends Ci{constructor(){super(...arguments),this.name="WalletConnectionError"}}class $C extends Ci{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class qC extends Ci{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Ml extends Ci{constructor(){super(...arguments),this.name="WalletAccountError"}}class _v extends Ci{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class as extends Ci{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Nl extends Ci{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Fa extends Ci{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class KC extends Ci{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class BA extends Ci{constructor(){super(...arguments),this.name="WalletSignInError"}}var mr;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(mr||(mr={}));class HC extends $1{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,n,i={}){const s=this.publicKey;if(!s)throw new as;return e.feePayer=e.feePayer||s,e.recentBlockhash=e.recentBlockhash||(await n.getLatestBlockhash({commitment:i.preflightCommitment,minContextSlot:i.minContextSlot})).blockhash,e}}function xj(r){if(typeof window>"u"||typeof document>"u")return;const e=[];function n(){if(r())for(const o of e)o()}const i=setInterval(n,1e3);e.push(()=>clearInterval(i)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",n,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",n))),document.readyState!=="complete"&&(window.addEventListener("load",n,{once:!0}),e.push(()=>window.removeEventListener("load",n))),n()}function Tj(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),e=r.includes("iphone")||r.includes("ipad"),n=r.includes("safari");return e&&n}function za(r){return"version"in r}class Rj extends HC{async sendTransaction(e,n,i={}){let s=!0;try{if(za(e)){if(!this.supportedTransactionVersions)throw new Nl("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new Nl(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const o=e.serialize();return await n.sendRawTransaction(o,i)}catch(o){throw o instanceof Fa?(s=!1,o):new Nl(o?.message,o)}}else try{const{signers:o,...l}=i;e=await this.prepareTransaction(e,n,l),o?.length&&e.partialSign(...o),e=await this.signTransaction(e);const u=e.serialize();return await n.sendRawTransaction(u,l)}catch(o){throw o instanceof Fa?(s=!1,o):new Nl(o?.message,o)}}catch(o){throw s&&this.emit("error",o),o}}async signAllTransactions(e){for(const i of e)if(za(i)){if(!this.supportedTransactionVersions)throw new Fa("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(i.version))throw new Fa(`Signing transaction version ${i.version} isn't supported by this wallet`)}const n=[];for(const i of e)n.push(await this.signTransaction(i));return n}}class kj extends Rj{}const La="solana:signAndSendTransaction",Fy="solana:signIn",Sd="solana:signMessage",oi="solana:signTransaction",GC="standard:connect",UA="standard:disconnect",YC="standard:events";function Cj(r){return GC in r.features&&YC in r.features&&(La in r.features||oi in r.features)}class VA extends Ci{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const Pj=[],sg={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Ls("call","select")},connect(){return Promise.reject(Ls("call","connect"))},disconnect(){return Promise.reject(Ls("call","disconnect"))},sendTransaction(){return Promise.reject(Ls("call","sendTransaction"))},signTransaction(){return Promise.reject(Ls("call","signTransaction"))},signAllTransactions(){return Promise.reject(Ls("call","signAllTransactions"))},signMessage(){return Promise.reject(Ls("call","signMessage"))},signIn(){return Promise.reject(Ls("call","signIn"))}};Object.defineProperty(sg,"wallets",{get(){return Ls("read","wallets"),Pj}});Object.defineProperty(sg,"wallet",{get(){return Ls("read","wallet"),null}});Object.defineProperty(sg,"publicKey",{get(){return Ls("read","publicKey"),null}});function Ls(r,e){const n=new Error(`You have tried to ${r} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(n),n}const JC=pe.createContext(sg);function Mj(){return pe.useContext(JC)}function Nj(r,e){const n=pe.useState(()=>{try{const o=localStorage.getItem(r);if(o)return JSON.parse(o)}catch(o){typeof window<"u"&&console.error(o)}return e}),i=n[0],s=pe.useRef(!0);return pe.useEffect(()=>{if(s.current){s.current=!1;return}try{i===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(i))}catch(o){typeof window<"u"&&console.error(o)}},[i,r]),n}var io={},vl={},Oi={},En={},FA;function aE(){if(FA)return En;FA=1,Object.defineProperty(En,"__esModule",{value:!0}),En.WalletWindowClosedError=En.WalletWindowBlockedError=En.WalletTimeoutError=En.WalletSignInError=En.WalletSignMessageError=En.WalletSignTransactionError=En.WalletSendTransactionError=En.WalletNotConnectedError=En.WalletKeypairError=En.WalletPublicKeyError=En.WalletAccountError=En.WalletDisconnectionError=En.WalletDisconnectedError=En.WalletConnectionError=En.WalletConfigError=En.WalletLoadError=En.WalletNotReadyError=En.WalletError=void 0;class r extends Error{constructor(j,se){super(j),this.error=se}}En.WalletError=r;class e extends r{constructor(){super(...arguments),this.name="WalletNotReadyError"}}En.WalletNotReadyError=e;class n extends r{constructor(){super(...arguments),this.name="WalletLoadError"}}En.WalletLoadError=n;class i extends r{constructor(){super(...arguments),this.name="WalletConfigError"}}En.WalletConfigError=i;class s extends r{constructor(){super(...arguments),this.name="WalletConnectionError"}}En.WalletConnectionError=s;class o extends r{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}En.WalletDisconnectedError=o;class l extends r{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}En.WalletDisconnectionError=l;class u extends r{constructor(){super(...arguments),this.name="WalletAccountError"}}En.WalletAccountError=u;class d extends r{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}En.WalletPublicKeyError=d;class f extends r{constructor(){super(...arguments),this.name="WalletKeypairError"}}En.WalletKeypairError=f;class p extends r{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}En.WalletNotConnectedError=p;class v extends r{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}En.WalletSendTransactionError=v;class E extends r{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}En.WalletSignTransactionError=E;class S extends r{constructor(){super(...arguments),this.name="WalletSignMessageError"}}En.WalletSignMessageError=S;class R extends r{constructor(){super(...arguments),this.name="WalletSignInError"}}En.WalletSignInError=R;class T extends r{constructor(){super(...arguments),this.name="WalletTimeoutError"}}En.WalletTimeoutError=T;class M extends r{constructor(){super(...arguments),this.name="WalletWindowBlockedError"}}En.WalletWindowBlockedError=M;class W extends r{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}return En.WalletWindowClosedError=W,En}var zA;function QC(){if(zA)return Oi;zA=1;var r=Oi&&Oi.__awaiter||function(d,f,p,v){function E(S){return S instanceof p?S:new p(function(R){R(S)})}return new(p||(p=Promise))(function(S,R){function T(z){try{W(v.next(z))}catch(j){R(j)}}function M(z){try{W(v.throw(z))}catch(j){R(j)}}function W(z){z.done?S(z.value):E(z.value).then(T,M)}W((v=v.apply(d,f||[])).next())})},e=Oi&&Oi.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.BaseWalletAdapter=Oi.WalletReadyState=Oi.EventEmitter=void 0,Oi.scopePollingDetectionStrategy=l,Oi.isIosAndRedirectable=u;const n=e(aC());Oi.EventEmitter=n.default;const i=aE();var s;(function(d){d.Installed="Installed",d.NotDetected="NotDetected",d.Loadable="Loadable",d.Unsupported="Unsupported"})(s||(Oi.WalletReadyState=s={}));class o extends n.default{get connected(){return!!this.publicKey}autoConnect(){return r(this,void 0,void 0,function*(){yield this.connect()})}prepareTransaction(f,p){return r(this,arguments,void 0,function*(v,E,S={}){const R=this.publicKey;if(!R)throw new i.WalletNotConnectedError;return v.feePayer=v.feePayer||R,v.recentBlockhash=v.recentBlockhash||(yield E.getLatestBlockhash({commitment:S.preflightCommitment,minContextSlot:S.minContextSlot})).blockhash,v})}}Oi.BaseWalletAdapter=o;function l(d){if(typeof window>"u"||typeof document>"u")return;const f=[];function p(){if(d())for(const S of f)S()}const v=setInterval(p,1e3);f.push(()=>clearInterval(v)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",p,{once:!0}),f.push(()=>document.removeEventListener("DOMContentLoaded",p))),document.readyState!=="complete"&&(window.addEventListener("load",p,{once:!0}),f.push(()=>window.removeEventListener("load",p))),p()}function u(){if(!navigator)return!1;const d=navigator.userAgent.toLowerCase(),f=d.includes("iphone")||d.includes("ipad"),p=d.includes("safari");return f&&p}return Oi}var rs={},ap={},WA;function XC(){if(WA)return ap;WA=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.isVersionedTransaction=r;function r(e){return"version"in e}return ap}var jA;function Oj(){if(jA)return rs;jA=1;var r=rs&&rs.__awaiter||function(d,f,p,v){function E(S){return S instanceof p?S:new p(function(R){R(S)})}return new(p||(p=Promise))(function(S,R){function T(z){try{W(v.next(z))}catch(j){R(j)}}function M(z){try{W(v.throw(z))}catch(j){R(j)}}function W(z){z.done?S(z.value):E(z.value).then(T,M)}W((v=v.apply(d,f||[])).next())})},e=rs&&rs.__rest||function(d,f){var p={};for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&f.indexOf(v)<0&&(p[v]=d[v]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,v=Object.getOwnPropertySymbols(d);E<v.length;E++)f.indexOf(v[E])<0&&Object.prototype.propertyIsEnumerable.call(d,v[E])&&(p[v[E]]=d[v[E]]);return p};Object.defineProperty(rs,"__esModule",{value:!0}),rs.BaseSignInMessageSignerWalletAdapter=rs.BaseMessageSignerWalletAdapter=rs.BaseSignerWalletAdapter=void 0;const n=QC(),i=aE(),s=XC();class o extends n.BaseWalletAdapter{sendTransaction(f,p){return r(this,arguments,void 0,function*(v,E,S={}){let R=!0;try{if((0,s.isVersionedTransaction)(v)){if(!this.supportedTransactionVersions)throw new i.WalletSendTransactionError("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(v.version))throw new i.WalletSendTransactionError(`Sending transaction version ${v.version} isn't supported by this wallet`);try{v=yield this.signTransaction(v);const T=v.serialize();return yield E.sendRawTransaction(T,S)}catch(T){throw T instanceof i.WalletSignTransactionError?(R=!1,T):new i.WalletSendTransactionError(T?.message,T)}}else try{const{signers:T}=S,M=e(S,["signers"]);v=yield this.prepareTransaction(v,E,M),T?.length&&v.partialSign(...T),v=yield this.signTransaction(v);const W=v.serialize();return yield E.sendRawTransaction(W,M)}catch(T){throw T instanceof i.WalletSignTransactionError?(R=!1,T):new i.WalletSendTransactionError(T?.message,T)}}catch(T){throw R&&this.emit("error",T),T}})}signAllTransactions(f){return r(this,void 0,void 0,function*(){for(const v of f)if((0,s.isVersionedTransaction)(v)){if(!this.supportedTransactionVersions)throw new i.WalletSignTransactionError("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(v.version))throw new i.WalletSignTransactionError(`Signing transaction version ${v.version} isn't supported by this wallet`)}const p=[];for(const v of f)p.push(yield this.signTransaction(v));return p})}}rs.BaseSignerWalletAdapter=o;class l extends o{}rs.BaseMessageSignerWalletAdapter=l;class u extends l{}return rs.BaseSignInMessageSignerWalletAdapter=u,rs}var lp={},El={},Id={},$A;function Dj(){return $A||($A=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.SolanaSignAndSendTransaction=void 0,Id.SolanaSignAndSendTransaction="solana:signAndSendTransaction"),Id}var Ad={},qA;function Lj(){return qA||(qA=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.SolanaSignIn=void 0,Ad.SolanaSignIn="solana:signIn"),Ad}var xd={},KA;function Bj(){return KA||(KA=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.SolanaSignMessage=void 0,xd.SolanaSignMessage="solana:signMessage"),xd}var Td={},HA;function Uj(){return HA||(HA=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.SolanaSignTransaction=void 0,Td.SolanaSignTransaction="solana:signTransaction"),Td}var Rd={},GA;function Vj(){return GA||(GA=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.SignAndSendAllTransactions=void 0,Rd.SignAndSendAllTransactions="solana:signAndSendAllTransactions"),Rd}var YA;function lE(){return YA||(YA=1,(function(r){var e=El&&El.__createBinding||(Object.create?(function(i,s,o,l){l===void 0&&(l=o);var u=Object.getOwnPropertyDescriptor(s,o);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,l,u)}):(function(i,s,o,l){l===void 0&&(l=o),i[l]=s[o]})),n=El&&El.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,i,o)};Object.defineProperty(r,"__esModule",{value:!0}),n(Dj(),r),n(Lj(),r),n(Bj(),r),n(Uj(),r),n(Vj(),r)})(El)),El}var _l={},zy={},JA;function Fj(){return JA||(JA=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Connect=r.StandardConnect=void 0,r.StandardConnect="standard:connect",r.Connect=r.StandardConnect})(zy)),zy}var Wy={},QA;function zj(){return QA||(QA=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Disconnect=r.StandardDisconnect=void 0,r.StandardDisconnect="standard:disconnect",r.Disconnect=r.StandardDisconnect})(Wy)),Wy}var jy={},XA;function Wj(){return XA||(XA=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Events=r.StandardEvents=void 0,r.StandardEvents="standard:events",r.Events=r.StandardEvents})(jy)),jy}var ZA;function ZC(){return ZA||(ZA=1,(function(r){var e=_l&&_l.__createBinding||(Object.create?(function(i,s,o,l){l===void 0&&(l=o);var u=Object.getOwnPropertyDescriptor(s,o);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,l,u)}):(function(i,s,o,l){l===void 0&&(l=o),i[l]=s[o]})),n=_l&&_l.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,i,o)};Object.defineProperty(r,"__esModule",{value:!0}),n(Fj(),r),n(zj(),r),n(Wj(),r)})(_l)),_l}var ex;function jj(){if(ex)return lp;ex=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.isWalletAdapterCompatibleStandardWallet=n;const r=lE(),e=ZC();function n(i){return e.StandardConnect in i.features&&e.StandardEvents in i.features&&(r.SolanaSignAndSendTransaction in i.features||r.SolanaSignTransaction in i.features)}return lp}var kd={},tx;function $j(){if(tx)return kd;tx=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.WalletAdapterNetwork=void 0;var r;return(function(e){e.Mainnet="mainnet-beta",e.Testnet="testnet",e.Devnet="devnet"})(r||(kd.WalletAdapterNetwork=r={})),kd}var nx;function qj(){return nx||(nx=1,(function(r){var e=vl&&vl.__createBinding||(Object.create?(function(i,s,o,l){l===void 0&&(l=o);var u=Object.getOwnPropertyDescriptor(s,o);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,l,u)}):(function(i,s,o,l){l===void 0&&(l=o),i[l]=s[o]})),n=vl&&vl.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,i,o)};Object.defineProperty(r,"__esModule",{value:!0}),n(QC(),r),n(aE(),r),n(Oj(),r),n(jj(),r),n(XC(),r),n($j(),r)})(vl)),vl}const Kj=ph(Sj);var Os={},zc={},$y,rx;function Hj(){return rx||(rx=1,$y=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),$y}var qy={},ka={},ix;function ic(){if(ix)return ka;ix=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ka.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},ka.getSymbolTotalCodewords=function(i){return e[i]},ka.getBCHDigit=function(n){let i=0;for(;n!==0;)i++,n>>>=1;return i},ka.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');r=i},ka.isKanjiModeEnabled=function(){return typeof r<"u"},ka.toSJIS=function(i){return r(i)},ka}var Ky={},sx;function cE(){return sx||(sx=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+n)}}r.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},r.from=function(i,s){if(r.isValid(i))return i;try{return e(i)}catch{return s}}})(Ky)),Ky}var Hy,ox;function Gj(){if(ox)return Hy;ox=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let i=0;i<n;i++)this.putBit((e>>>n-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},Hy=r,Hy}var Gy,ax;function Yj(){if(ax)return Gy;ax=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,n,i,s){const o=e*this.size+n;this.data[o]=i,s&&(this.reservedBit[o]=!0)},r.prototype.get=function(e,n){return this.data[e*this.size+n]},r.prototype.xor=function(e,n,i){this.data[e*this.size+n]^=i},r.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]},Gy=r,Gy}var Yy={},lx;function Jj(){return lx||(lx=1,(function(r){const e=ic().getSymbolSize;r.getRowColCoords=function(i){if(i===1)return[];const s=Math.floor(i/7)+2,o=e(i),l=o===145?26:Math.ceil((o-13)/(2*s-2))*2,u=[o-7];for(let d=1;d<s-1;d++)u[d]=u[d-1]-l;return u.push(6),u.reverse()},r.getPositions=function(i){const s=[],o=r.getRowColCoords(i),l=o.length;for(let u=0;u<l;u++)for(let d=0;d<l;d++)u===0&&d===0||u===0&&d===l-1||u===l-1&&d===0||s.push([o[u],o[d]]);return s}})(Yy)),Yy}var Jy={},cx;function Qj(){if(cx)return Jy;cx=1;const r=ic().getSymbolSize,e=7;return Jy.getPositions=function(i){const s=r(i);return[[0,0],[s-e,0],[0,s-e]]},Jy}var Qy={},ux;function Xj(){return ux||(ux=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const o=s.size;let l=0,u=0,d=0,f=null,p=null;for(let v=0;v<o;v++){u=d=0,f=p=null;for(let E=0;E<o;E++){let S=s.get(v,E);S===f?u++:(u>=5&&(l+=e.N1+(u-5)),f=S,u=1),S=s.get(E,v),S===p?d++:(d>=5&&(l+=e.N1+(d-5)),p=S,d=1)}u>=5&&(l+=e.N1+(u-5)),d>=5&&(l+=e.N1+(d-5))}return l},r.getPenaltyN2=function(s){const o=s.size;let l=0;for(let u=0;u<o-1;u++)for(let d=0;d<o-1;d++){const f=s.get(u,d)+s.get(u,d+1)+s.get(u+1,d)+s.get(u+1,d+1);(f===4||f===0)&&l++}return l*e.N2},r.getPenaltyN3=function(s){const o=s.size;let l=0,u=0,d=0;for(let f=0;f<o;f++){u=d=0;for(let p=0;p<o;p++)u=u<<1&2047|s.get(f,p),p>=10&&(u===1488||u===93)&&l++,d=d<<1&2047|s.get(p,f),p>=10&&(d===1488||d===93)&&l++}return l*e.N3},r.getPenaltyN4=function(s){let o=0;const l=s.data.length;for(let d=0;d<l;d++)o+=s.data[d];return Math.abs(Math.ceil(o*100/l/5)-10)*e.N4};function n(i,s,o){switch(i){case r.Patterns.PATTERN000:return(s+o)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return o%3===0;case r.Patterns.PATTERN011:return(s+o)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(o/3))%2===0;case r.Patterns.PATTERN101:return s*o%2+s*o%3===0;case r.Patterns.PATTERN110:return(s*o%2+s*o%3)%2===0;case r.Patterns.PATTERN111:return(s*o%3+(s+o)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}r.applyMask=function(s,o){const l=o.size;for(let u=0;u<l;u++)for(let d=0;d<l;d++)o.isReserved(d,u)||o.xor(d,u,n(s,d,u))},r.getBestMask=function(s,o){const l=Object.keys(r.Patterns).length;let u=0,d=1/0;for(let f=0;f<l;f++){o(f),r.applyMask(f,s);const p=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(f,s),p<d&&(d=p,u=f)}return u}})(Qy)),Qy}var cp={},dx;function eP(){if(dx)return cp;dx=1;const r=cE(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return cp.getBlocksCount=function(s,o){switch(o){case r.L:return e[(s-1)*4+0];case r.M:return e[(s-1)*4+1];case r.Q:return e[(s-1)*4+2];case r.H:return e[(s-1)*4+3];default:return}},cp.getTotalCodewordsCount=function(s,o){switch(o){case r.L:return n[(s-1)*4+0];case r.M:return n[(s-1)*4+1];case r.Q:return n[(s-1)*4+2];case r.H:return n[(s-1)*4+3];default:return}},cp}var Xy={},Cd={},hx;function Zj(){if(hx)return Cd;hx=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let i=1;for(let s=0;s<255;s++)r[s]=i,e[i]=s,i<<=1,i&256&&(i^=285);for(let s=255;s<512;s++)r[s]=r[s-255]})(),Cd.log=function(i){if(i<1)throw new Error("log("+i+")");return e[i]},Cd.exp=function(i){return r[i]},Cd.mul=function(i,s){return i===0||s===0?0:r[e[i]+e[s]]},Cd}var fx;function e$(){return fx||(fx=1,(function(r){const e=Zj();r.mul=function(i,s){const o=new Uint8Array(i.length+s.length-1);for(let l=0;l<i.length;l++)for(let u=0;u<s.length;u++)o[l+u]^=e.mul(i[l],s[u]);return o},r.mod=function(i,s){let o=new Uint8Array(i);for(;o.length-s.length>=0;){const l=o[0];for(let d=0;d<s.length;d++)o[d]^=e.mul(s[d],l);let u=0;for(;u<o.length&&o[u]===0;)u++;o=o.slice(u)}return o},r.generateECPolynomial=function(i){let s=new Uint8Array([1]);for(let o=0;o<i;o++)s=r.mul(s,new Uint8Array([1,e.exp(o)]));return s}})(Xy)),Xy}var Zy,px;function t$(){if(px)return Zy;px=1;const r=e$();function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(i){this.degree=i,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(i.length+this.degree);s.set(i);const o=r.mod(s,this.genPoly),l=this.degree-o.length;if(l>0){const u=new Uint8Array(this.degree);return u.set(o,l),u}return o},Zy=e,Zy}var ew={},tw={},nw={},mx;function tP(){return mx||(mx=1,nw.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),nw}var so={},gx;function nP(){if(gx)return so;gx=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;so.KANJI=new RegExp(n,"g"),so.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),so.BYTE=new RegExp(i,"g"),so.NUMERIC=new RegExp(r,"g"),so.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+n+"$"),o=new RegExp("^"+r+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return so.testKanji=function(d){return s.test(d)},so.testNumeric=function(d){return o.test(d)},so.testAlphanumeric=function(d){return l.test(d)},so}var yx;function sc(){return yx||(yx=1,(function(r){const e=tP(),n=nP();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(o,l){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?o.ccBits[0]:l<27?o.ccBits[1]:o.ccBits[2]},r.getBestModeForData=function(o){return n.testNumeric(o)?r.NUMERIC:n.testAlphanumeric(o)?r.ALPHANUMERIC:n.testKanji(o)?r.KANJI:r.BYTE},r.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},r.isValid=function(o){return o&&o.bit&&o.ccBits};function i(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(o,l){if(r.isValid(o))return o;try{return i(o)}catch{return l}}})(tw)),tw}var wx;function n$(){return wx||(wx=1,(function(r){const e=ic(),n=eP(),i=cE(),s=sc(),o=tP(),l=7973,u=e.getBCHDigit(l);function d(E,S,R){for(let T=1;T<=40;T++)if(S<=r.getCapacity(T,R,E))return T}function f(E,S){return s.getCharCountIndicator(E,S)+4}function p(E,S){let R=0;return E.forEach(function(T){const M=f(T.mode,S);R+=M+T.getBitsLength()}),R}function v(E,S){for(let R=1;R<=40;R++)if(p(E,R)<=r.getCapacity(R,S,s.MIXED))return R}r.from=function(S,R){return o.isValid(S)?parseInt(S,10):R},r.getCapacity=function(S,R,T){if(!o.isValid(S))throw new Error("Invalid QR Code version");typeof T>"u"&&(T=s.BYTE);const M=e.getSymbolTotalCodewords(S),W=n.getTotalCodewordsCount(S,R),z=(M-W)*8;if(T===s.MIXED)return z;const j=z-f(T,S);switch(T){case s.NUMERIC:return Math.floor(j/10*3);case s.ALPHANUMERIC:return Math.floor(j/11*2);case s.KANJI:return Math.floor(j/13);case s.BYTE:default:return Math.floor(j/8)}},r.getBestVersionForData=function(S,R){let T;const M=i.from(R,i.M);if(Array.isArray(S)){if(S.length>1)return v(S,M);if(S.length===0)return 1;T=S[0]}else T=S;return d(T.mode,T.getLength(),M)},r.getEncodedBits=function(S){if(!o.isValid(S)||S<7)throw new Error("Invalid QR Code version");let R=S<<12;for(;e.getBCHDigit(R)-u>=0;)R^=l<<e.getBCHDigit(R)-u;return S<<12|R}})(ew)),ew}var rw={},vx;function r$(){if(vx)return rw;vx=1;const r=ic(),e=1335,n=21522,i=r.getBCHDigit(e);return rw.getEncodedBits=function(o,l){const u=o.bit<<3|l;let d=u<<10;for(;r.getBCHDigit(d)-i>=0;)d^=e<<r.getBCHDigit(d)-i;return(u<<10|d)^n},rw}var iw={},sw,Ex;function i$(){if(Ex)return sw;Ex=1;const r=sc();function e(n){this.mode=r.NUMERIC,this.data=n.toString()}return e.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let s,o,l;for(s=0;s+3<=this.data.length;s+=3)o=this.data.substr(s,3),l=parseInt(o,10),i.put(l,10);const u=this.data.length-s;u>0&&(o=this.data.substr(s),l=parseInt(o,10),i.put(l,u*3+1))},sw=e,sw}var ow,_x;function s$(){if(_x)return ow;_x=1;const r=sc(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(i){this.mode=r.ALPHANUMERIC,this.data=i}return n.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(s){let o;for(o=0;o+2<=this.data.length;o+=2){let l=e.indexOf(this.data[o])*45;l+=e.indexOf(this.data[o+1]),s.put(l,11)}this.data.length%2&&s.put(e.indexOf(this.data[o]),6)},ow=n,ow}var aw,bx;function o$(){if(bx)return aw;bx=1;const r=sc();function e(n){this.mode=r.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return e.getBitsLength=function(i){return i*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){for(let i=0,s=this.data.length;i<s;i++)n.put(this.data[i],8)},aw=e,aw}var lw,Sx;function a$(){if(Sx)return lw;Sx=1;const r=sc(),e=ic();function n(i){this.mode=r.KANJI,this.data=i}return n.getBitsLength=function(s){return s*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(i){let s;for(s=0;s<this.data.length;s++){let o=e.toSJIS(this.data[s]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),i.put(o,13)}},lw=n,lw}var cw={exports:{}},Ix;function l$(){return Ix||(Ix=1,(function(r){var e={single_source_shortest_paths:function(n,i,s){var o={},l={};l[i]=0;var u=e.PriorityQueue.make();u.push(i,0);for(var d,f,p,v,E,S,R,T,M;!u.empty();){d=u.pop(),f=d.value,v=d.cost,E=n[f]||{};for(p in E)E.hasOwnProperty(p)&&(S=E[p],R=v+S,T=l[p],M=typeof l[p]>"u",(M||T>R)&&(l[p]=R,u.push(p,R),o[p]=f))}if(typeof s<"u"&&typeof l[s]>"u"){var W=["Could not find a path from ",i," to ",s,"."].join("");throw new Error(W)}return o},extract_shortest_path_from_predecessor_list:function(n,i){for(var s=[],o=i;o;)s.push(o),n[o],o=n[o];return s.reverse(),s},find_path:function(n,i,s){var o=e.single_source_shortest_paths(n,i,s);return e.extract_shortest_path_from_predecessor_list(o,s)},PriorityQueue:{make:function(n){var i=e.PriorityQueue,s={},o;n=n||{};for(o in i)i.hasOwnProperty(o)&&(s[o]=i[o]);return s.queue=[],s.sorter=n.sorter||i.default_sorter,s},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var s={value:n,cost:i};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(cw)),cw.exports}var Ax;function c$(){return Ax||(Ax=1,(function(r){const e=sc(),n=i$(),i=s$(),s=o$(),o=a$(),l=nP(),u=ic(),d=l$();function f(W){return unescape(encodeURIComponent(W)).length}function p(W,z,j){const se=[];let le;for(;(le=W.exec(j))!==null;)se.push({data:le[0],index:le.index,mode:z,length:le[0].length});return se}function v(W){const z=p(l.NUMERIC,e.NUMERIC,W),j=p(l.ALPHANUMERIC,e.ALPHANUMERIC,W);let se,le;return u.isKanjiModeEnabled()?(se=p(l.BYTE,e.BYTE,W),le=p(l.KANJI,e.KANJI,W)):(se=p(l.BYTE_KANJI,e.BYTE,W),le=[]),z.concat(j,se,le).sort(function(Z,$){return Z.index-$.index}).map(function(Z){return{data:Z.data,mode:Z.mode,length:Z.length}})}function E(W,z){switch(z){case e.NUMERIC:return n.getBitsLength(W);case e.ALPHANUMERIC:return i.getBitsLength(W);case e.KANJI:return o.getBitsLength(W);case e.BYTE:return s.getBitsLength(W)}}function S(W){return W.reduce(function(z,j){const se=z.length-1>=0?z[z.length-1]:null;return se&&se.mode===j.mode?(z[z.length-1].data+=j.data,z):(z.push(j),z)},[])}function R(W){const z=[];for(let j=0;j<W.length;j++){const se=W[j];switch(se.mode){case e.NUMERIC:z.push([se,{data:se.data,mode:e.ALPHANUMERIC,length:se.length},{data:se.data,mode:e.BYTE,length:se.length}]);break;case e.ALPHANUMERIC:z.push([se,{data:se.data,mode:e.BYTE,length:se.length}]);break;case e.KANJI:z.push([se,{data:se.data,mode:e.BYTE,length:f(se.data)}]);break;case e.BYTE:z.push([{data:se.data,mode:e.BYTE,length:f(se.data)}])}}return z}function T(W,z){const j={},se={start:{}};let le=["start"];for(let de=0;de<W.length;de++){const Z=W[de],$=[];for(let D=0;D<Z.length;D++){const U=Z[D],q=""+de+D;$.push(q),j[q]={node:U,lastCount:0},se[q]={};for(let H=0;H<le.length;H++){const I=le[H];j[I]&&j[I].node.mode===U.mode?(se[I][q]=E(j[I].lastCount+U.length,U.mode)-E(j[I].lastCount,U.mode),j[I].lastCount+=U.length):(j[I]&&(j[I].lastCount=U.length),se[I][q]=E(U.length,U.mode)+4+e.getCharCountIndicator(U.mode,z))}}le=$}for(let de=0;de<le.length;de++)se[le[de]].end=0;return{map:se,table:j}}function M(W,z){let j;const se=e.getBestModeForData(W);if(j=e.from(z,se),j!==e.BYTE&&j.bit<se.bit)throw new Error('"'+W+'" cannot be encoded with mode '+e.toString(j)+`.
 Suggested mode is: `+e.toString(se));switch(j===e.KANJI&&!u.isKanjiModeEnabled()&&(j=e.BYTE),j){case e.NUMERIC:return new n(W);case e.ALPHANUMERIC:return new i(W);case e.KANJI:return new o(W);case e.BYTE:return new s(W)}}r.fromArray=function(z){return z.reduce(function(j,se){return typeof se=="string"?j.push(M(se,null)):se.data&&j.push(M(se.data,se.mode)),j},[])},r.fromString=function(z,j){const se=v(z,u.isKanjiModeEnabled()),le=R(se),de=T(le,j),Z=d.find_path(de.map,"start","end"),$=[];for(let D=1;D<Z.length-1;D++)$.push(de.table[Z[D]].node);return r.fromArray(S($))},r.rawSplit=function(z){return r.fromArray(v(z,u.isKanjiModeEnabled()))}})(iw)),iw}var xx;function u$(){if(xx)return qy;xx=1;const r=ic(),e=cE(),n=Gj(),i=Yj(),s=Jj(),o=Qj(),l=Xj(),u=eP(),d=t$(),f=n$(),p=r$(),v=sc(),E=c$();function S(de,Z){const $=de.size,D=o.getPositions(Z);for(let U=0;U<D.length;U++){const q=D[U][0],H=D[U][1];for(let I=-1;I<=7;I++)if(!(q+I<=-1||$<=q+I))for(let y=-1;y<=7;y++)H+y<=-1||$<=H+y||(I>=0&&I<=6&&(y===0||y===6)||y>=0&&y<=6&&(I===0||I===6)||I>=2&&I<=4&&y>=2&&y<=4?de.set(q+I,H+y,!0,!0):de.set(q+I,H+y,!1,!0))}}function R(de){const Z=de.size;for(let $=8;$<Z-8;$++){const D=$%2===0;de.set($,6,D,!0),de.set(6,$,D,!0)}}function T(de,Z){const $=s.getPositions(Z);for(let D=0;D<$.length;D++){const U=$[D][0],q=$[D][1];for(let H=-2;H<=2;H++)for(let I=-2;I<=2;I++)H===-2||H===2||I===-2||I===2||H===0&&I===0?de.set(U+H,q+I,!0,!0):de.set(U+H,q+I,!1,!0)}}function M(de,Z){const $=de.size,D=f.getEncodedBits(Z);let U,q,H;for(let I=0;I<18;I++)U=Math.floor(I/3),q=I%3+$-8-3,H=(D>>I&1)===1,de.set(U,q,H,!0),de.set(q,U,H,!0)}function W(de,Z,$){const D=de.size,U=p.getEncodedBits(Z,$);let q,H;for(q=0;q<15;q++)H=(U>>q&1)===1,q<6?de.set(q,8,H,!0):q<8?de.set(q+1,8,H,!0):de.set(D-15+q,8,H,!0),q<8?de.set(8,D-q-1,H,!0):q<9?de.set(8,15-q-1+1,H,!0):de.set(8,15-q-1,H,!0);de.set(D-8,8,1,!0)}function z(de,Z){const $=de.size;let D=-1,U=$-1,q=7,H=0;for(let I=$-1;I>0;I-=2)for(I===6&&I--;;){for(let y=0;y<2;y++)if(!de.isReserved(U,I-y)){let x=!1;H<Z.length&&(x=(Z[H]>>>q&1)===1),de.set(U,I-y,x),q--,q===-1&&(H++,q=7)}if(U+=D,U<0||$<=U){U-=D,D=-D;break}}}function j(de,Z,$){const D=new n;$.forEach(function(y){D.put(y.mode.bit,4),D.put(y.getLength(),v.getCharCountIndicator(y.mode,de)),y.write(D)});const U=r.getSymbolTotalCodewords(de),q=u.getTotalCodewordsCount(de,Z),H=(U-q)*8;for(D.getLengthInBits()+4<=H&&D.put(0,4);D.getLengthInBits()%8!==0;)D.putBit(0);const I=(H-D.getLengthInBits())/8;for(let y=0;y<I;y++)D.put(y%2?17:236,8);return se(D,de,Z)}function se(de,Z,$){const D=r.getSymbolTotalCodewords(Z),U=u.getTotalCodewordsCount(Z,$),q=D-U,H=u.getBlocksCount(Z,$),I=D%H,y=H-I,x=Math.floor(D/H),V=Math.floor(q/H),J=V+1,G=x-V,re=new d(G);let ae=0;const O=new Array(H),w=new Array(H);let _=0;const F=new Uint8Array(de.buffer);for(let ze=0;ze<H;ze++){const At=ze<y?V:J;O[ze]=F.slice(ae,ae+At),w[ze]=re.encode(O[ze]),ae+=At,_=Math.max(_,At)}const ee=new Uint8Array(D);let ce=0,we,Oe;for(we=0;we<_;we++)for(Oe=0;Oe<H;Oe++)we<O[Oe].length&&(ee[ce++]=O[Oe][we]);for(we=0;we<G;we++)for(Oe=0;Oe<H;Oe++)ee[ce++]=w[Oe][we];return ee}function le(de,Z,$,D){let U;if(Array.isArray(de))U=E.fromArray(de);else if(typeof de=="string"){let x=Z;if(!x){const V=E.rawSplit(de);x=f.getBestVersionForData(V,$)}U=E.fromString(de,x||40)}else throw new Error("Invalid data");const q=f.getBestVersionForData(U,$);if(!q)throw new Error("The amount of data is too big to be stored in a QR Code");if(!Z)Z=q;else if(Z<q)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+q+`.
`);const H=j(Z,$,U),I=r.getSymbolSize(Z),y=new i(I);return S(y,Z),R(y),T(y,Z),W(y,$,0),Z>=7&&M(y,Z),z(y,H),isNaN(D)&&(D=l.getBestMask(y,W.bind(null,y,$))),l.applyMask(D,y),W(y,$,D),{modules:y,version:Z,errorCorrectionLevel:$,maskPattern:D,segments:U}}return qy.create=function(Z,$){if(typeof Z>"u"||Z==="")throw new Error("No input text");let D=e.M,U,q;return typeof $<"u"&&(D=e.from($.errorCorrectionLevel,e.M),U=f.from($.version),q=l.from($.maskPattern),$.toSJISFunc&&r.setToSJISFunction($.toSJISFunc)),le(Z,U,D,q)},qy}var uw={},dw={},Tx;function rP(){return Tx||(Tx=1,(function(r){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(o){return[o,o]}))),i.length===6&&i.push("F","F");const s=parseInt(i.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+i.slice(0,6).join("")}}r.getOptions=function(i){i||(i={}),i.color||(i.color={});const s=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,o=i.width&&i.width>=21?i.width:void 0,l=i.scale||4;return{width:o,scale:o?4:l,margin:s,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},r.getScale=function(i,s){return s.width&&s.width>=i+s.margin*2?s.width/(i+s.margin*2):s.scale},r.getImageWidth=function(i,s){const o=r.getScale(i,s);return Math.floor((i+s.margin*2)*o)},r.qrToImageData=function(i,s,o){const l=s.modules.size,u=s.modules.data,d=r.getScale(l,o),f=Math.floor((l+o.margin*2)*d),p=o.margin*d,v=[o.color.light,o.color.dark];for(let E=0;E<f;E++)for(let S=0;S<f;S++){let R=(E*f+S)*4,T=o.color.light;if(E>=p&&S>=p&&E<f-p&&S<f-p){const M=Math.floor((E-p)/d),W=Math.floor((S-p)/d);T=v[u[M*l+W]?1:0]}i[R++]=T.r,i[R++]=T.g,i[R++]=T.b,i[R]=T.a}}})(dw)),dw}var Rx;function d$(){return Rx||(Rx=1,(function(r){const e=rP();function n(s,o,l){s.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=l,o.width=l,o.style.height=l+"px",o.style.width=l+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(o,l,u){let d=u,f=l;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),l||(f=i()),d=e.getOptions(d);const p=e.getImageWidth(o.modules.size,d),v=f.getContext("2d"),E=v.createImageData(p,p);return e.qrToImageData(E.data,o,d),n(v,f,p),v.putImageData(E,0,0),f},r.renderToDataURL=function(o,l,u){let d=u;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),d||(d={});const f=r.render(o,l,d),p=d.type||"image/png",v=d.rendererOpts||{};return f.toDataURL(p,v.quality)}})(uw)),uw}var hw={},kx;function h$(){if(kx)return hw;kx=1;const r=rP();function e(s,o){const l=s.a/255,u=o+'="'+s.hex+'"';return l<1?u+" "+o+'-opacity="'+l.toFixed(2).slice(1)+'"':u}function n(s,o,l){let u=s+o;return typeof l<"u"&&(u+=" "+l),u}function i(s,o,l){let u="",d=0,f=!1,p=0;for(let v=0;v<s.length;v++){const E=Math.floor(v%o),S=Math.floor(v/o);!E&&!f&&(f=!0),s[v]?(p++,v>0&&E>0&&s[v-1]||(u+=f?n("M",E+l,.5+S+l):n("m",d,0),d=0,f=!1),E+1<o&&s[v+1]||(u+=n("h",p),p=0)):d++}return u}return hw.render=function(o,l,u){const d=r.getOptions(l),f=o.modules.size,p=o.modules.data,v=f+d.margin*2,E=d.color.light.a?"<path "+e(d.color.light,"fill")+' d="M0 0h'+v+"v"+v+'H0z"/>':"",S="<path "+e(d.color.dark,"stroke")+' d="'+i(p,f,d.margin)+'"/>',R='viewBox="0 0 '+v+" "+v+'"',M='<svg xmlns="http://www.w3.org/2000/svg" '+(d.width?'width="'+d.width+'" height="'+d.width+'" ':"")+R+' shape-rendering="crispEdges">'+E+S+`</svg>
`;return typeof u=="function"&&u(null,M),M},hw}var Cx;function f$(){if(Cx)return zc;Cx=1;const r=Hj(),e=u$(),n=d$(),i=h$();function s(o,l,u,d,f){const p=[].slice.call(arguments,1),v=p.length,E=typeof p[v-1]=="function";if(!E&&!r())throw new Error("Callback required as last argument");if(E){if(v<2)throw new Error("Too few arguments provided");v===2?(f=u,u=l,l=d=void 0):v===3&&(l.getContext&&typeof f>"u"?(f=d,d=void 0):(f=d,d=u,u=l,l=void 0))}else{if(v<1)throw new Error("Too few arguments provided");return v===1?(u=l,l=d=void 0):v===2&&!l.getContext&&(d=u,u=l,l=void 0),new Promise(function(S,R){try{const T=e.create(u,d);S(o(T,l,d))}catch(T){R(T)}})}try{const S=e.create(u,d);f(null,o(S,l,d))}catch(S){f(S)}}return zc.create=e.create,zc.toCanvas=s.bind(null,n.render),zc.toDataURL=s.bind(null,n.renderToDataURL),zc.toString=s.bind(null,function(o,l,u){return i.render(o,u)}),zc}function fw(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Px="solana:mainnet",p$="solana:devnet",m$="solana:testnet",g$="solana:localnet",y$="https://api.mainnet-beta.solana.com";function w$(r){return r.includes(y$)?Px:/\bdevnet\b/i.test(r)?p$:/\btestnet\b/i.test(r)?m$:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?g$:Px}function v$(r){let e=`${r.domain} wants you to sign in with your Solana account:
`;e+=`${r.address}`,r.statement&&(e+=`

${r.statement}`);const n=[];if(r.uri&&n.push(`URI: ${r.uri}`),r.version&&n.push(`Version: ${r.version}`),r.chainId&&n.push(`Chain ID: ${r.chainId}`),r.nonce&&n.push(`Nonce: ${r.nonce}`),r.issuedAt&&n.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&n.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&n.push(`Not Before: ${r.notBefore}`),r.requestId&&n.push(`Request ID: ${r.requestId}`),r.resources){n.push("Resources:");for(const i of r.resources)n.push(`- ${i}`)}return n.length&&(e+=`

${n.join(`
`)}`),e}const ls={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION",ERROR_BROWSER_NOT_SUPPORTED:"ERROR_BROWSER_NOT_SUPPORTED"};class cs extends Error{constructor(...e){const[n,i,s]=e;super(i),this.code=n,this.data=s,this.name="SolanaMobileWalletAdapterError"}}const E$={ERROR_AUTHORIZATION_FAILED:-1,ERROR_INVALID_PAYLOADS:-2,ERROR_NOT_SIGNED:-3,ERROR_NOT_SUBMITTED:-4,ERROR_TOO_MANY_PAYLOADS:-5,ERROR_ATTEST_ORIGIN_ANDROID:-100};class og extends Error{constructor(...e){const[n,i,s,o]=e;super(s),this.code=i,this.data=o,this.jsonRpcMessageId=n,this.name="SolanaMobileWalletAdapterProtocolError"}}function Jn(r,e,n,i){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{f(i.next(p))}catch(v){l(v)}}function d(p){try{f(i.throw(p))}catch(v){l(v)}}function f(p){p.done?o(p.value):s(p.value).then(u,d)}f((i=i.apply(r,[])).next())})}function _$(r){return window.btoa(r)}function bv(r,e){const n=window.btoa(String.fromCharCode.call(null,...r));return e?n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):n}function b$(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function kp(r,e){return Jn(this,void 0,void 0,function*(){const n=yield crypto.subtle.exportKey("raw",r),i=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,n),s=new Uint8Array(n.byteLength+i.byteLength);return s.set(new Uint8Array(n),0),s.set(new Uint8Array(i),n.byteLength),s})}function S$(r){return v$(r)}function I$(r){return _$(S$(r))}const iP="solana:signTransactions",Sv="solana:cloneAuthorization",A$="solana:signInWithSolana";function sP(r,e){return new Proxy({},{get(n,i){return i==="then"?null:(n[i]==null&&(n[i]=function(s){return Jn(this,void 0,void 0,function*(){const{method:o,params:l}=x$(i,s,r),u=yield e(o,l);return o==="authorize"&&l.sign_in_payload&&!u.sign_in_result&&(u.sign_in_result=yield R$(l.sign_in_payload,u,e)),T$(i,u,r)})}),n[i])},defineProperty(){return!1},deleteProperty(){return!1}})}function x$(r,e,n){let i=e,s=r.toString().replace(/[A-Z]/g,o=>`_${o.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:o}=i;if(n==="legacy"){switch(o){case"solana:testnet":{o="testnet";break}case"solana:devnet":{o="devnet";break}case"solana:mainnet":{o="mainnet-beta";break}default:o=i.cluster}i.cluster=o}else{switch(o){case"testnet":case"devnet":{o=`solana:${o}`;break}case"mainnet-beta":{o="solana:mainnet";break}}i.chain=o}}case"reauthorize":{const{auth_token:o,identity:l}=i;if(o)switch(n){case"legacy":{s="reauthorize",i={auth_token:o,identity:l};break}default:{s="authorize";break}}break}}return{method:s,params:i}}function T$(r,e,n){switch(r){case"getCapabilities":{const i=e;switch(n){case"legacy":{const s=[iP];return i.supports_clone_authorization===!0&&s.push(Sv),Object.assign(Object.assign({},i),{features:s})}case"v1":return Object.assign(Object.assign({},i),{supports_sign_and_send_transactions:!0,supports_clone_authorization:i.features.includes(Sv)})}}}return e}function R$(r,e,n){var i;return Jn(this,void 0,void 0,function*(){const s=(i=r.domain)!==null&&i!==void 0?i:window.location.host,o=e.accounts[0].address,l=I$(Object.assign(Object.assign({},r),{domain:s,address:o})),u=yield n("sign_messages",{addresses:[o],payloads:[l]});return{address:o,signed_message:l,signature:u.signed_payloads[0].slice(l.length)}})}const Ho=4;function k$(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(Ho);return new DataView(e).setUint32(0,r,!1),new Uint8Array(e)}const Iv=12,uE=65;function C$(r,e,n){return Jn(this,void 0,void 0,function*(){const i=k$(e),s=new Uint8Array(Iv);crypto.getRandomValues(s);const o=yield crypto.subtle.encrypt(aP(i,s),n,new TextEncoder().encode(r)),l=new Uint8Array(i.byteLength+s.byteLength+o.byteLength);return l.set(new Uint8Array(i),0),l.set(new Uint8Array(s),i.byteLength),l.set(new Uint8Array(o),i.byteLength+s.byteLength),l})}function oP(r,e){return Jn(this,void 0,void 0,function*(){const n=r.slice(0,Ho),i=r.slice(Ho,Ho+Iv),s=r.slice(Ho+Iv),o=yield crypto.subtle.decrypt(aP(n,i),e,s);return P$().decode(o)})}function aP(r,e){return{additionalData:r,iv:e,name:"AES-GCM",tagLength:128}}let pw;function P$(){return pw===void 0&&(pw=new TextDecoder("utf-8")),pw}function lP(){return Jn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Cp(){return Jn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function cP(r){let e="";const n=new Uint8Array(r),i=n.byteLength;for(let s=0;s<i;s++)e+=String.fromCharCode(n[s]);return window.btoa(e)}function M$(){return uP(49152+Math.floor(Math.random()*16384))}function uP(r){if(r<49152||r>65535)throw new cs(ls.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function dP(r){return r.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const N$="solana-wallet";function Mx(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function hP(r,e){let n=null;if(e){try{n=new URL(e)}catch{}if(n?.protocol!=="https:")throw new cs(ls.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}n||(n=new URL(`${N$}:/`));const i=r.startsWith("/")?r:[...Mx(n.pathname),...Mx(r)].join("/");return new URL(i,n)}function O$(r,e,n,i=["v1"]){return Jn(this,void 0,void 0,function*(){const s=uP(e),o=yield crypto.subtle.exportKey("raw",r),l=cP(o),u=hP("v1/associate/local",n);return u.searchParams.set("association",dP(l)),u.searchParams.set("port",`${s}`),i.forEach(d=>{u.searchParams.set("v",d)}),u})}function D$(r,e,n,i,s=["v1"]){return Jn(this,void 0,void 0,function*(){const o=yield crypto.subtle.exportKey("raw",r),l=cP(o),u=hP("v1/associate/remote",i);return u.searchParams.set("association",dP(l)),u.searchParams.set("reflector",`${e}`),u.searchParams.set("id",`${bv(n,!0)}`),s.forEach(d=>{u.searchParams.set("v",d)}),u})}function fP(r,e){return Jn(this,void 0,void 0,function*(){const n=JSON.stringify(r),i=r.id;return C$(n,i,e)})}function pP(r,e){return Jn(this,void 0,void 0,function*(){const n=yield oP(r,e),i=JSON.parse(n);if(Object.hasOwnProperty.call(i,"error"))throw new og(i.id,i.error.code,i.error.message);return i})}function mP(r,e,n){return Jn(this,void 0,void 0,function*(){const[i,s]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",r.slice(0,uE),{name:"ECDH",namedCurve:"P-256"},!1,[])]),o=yield crypto.subtle.deriveBits({name:"ECDH",public:s},n,256),l=yield crypto.subtle.importKey("raw",o,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(i),info:new Uint8Array},l,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function gP(r,e){return Jn(this,void 0,void 0,function*(){const n=yield oP(r,e),i=JSON.parse(n);let s="legacy";if(Object.hasOwnProperty.call(i,"v"))switch(i.v){case 1:case"1":case"v1":s="v1";break;case"legacy":s="legacy";break;default:throw new cs(ls.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${i.v}`)}return{protocol_version:s}})}const gm={Firefox:0,Other:1};function L$(){return navigator.userAgent.indexOf("Firefox/")!==-1?gm.Firefox:gm.Other}function B$(){return new Promise((r,e)=>{function n(){clearTimeout(s),window.removeEventListener("blur",i)}function i(){n(),r()}window.addEventListener("blur",i);const s=setTimeout(()=>{n(),e()},3e3)})}let Pd=null;function U$(r){Pd==null&&(Pd=document.createElement("iframe"),Pd.style.display="none",document.body.appendChild(Pd)),Pd.contentWindow.location.href=r.toString()}function V$(r){return Jn(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const e=L$();switch(e){case gm.Firefox:U$(r);break;case gm.Other:{const n=B$();window.location.assign(r),yield n;break}default:}}catch{throw new cs(ls.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function F$(r,e){return Jn(this,void 0,void 0,function*(){const n=M$(),i=yield O$(r,n,e);return yield V$(i),n})}const ym={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},yP="com.solana.mobilewalletadapter.v1",Nx="com.solana.mobilewalletadapter.v1.base64";function wP(){if(typeof window>"u"||window.isSecureContext!==!0)throw new cs(ls.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function vP(r){let e;try{e=new URL(r)}catch{throw new cs(ls.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new cs(ls.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function wm(r){return new DataView(r).getUint32(0,!1)}function z$(r){var e=new Uint8Array(r),n=r.byteLength,i=10,s=0,o=0,l;do{if(o>=n||o>i)throw new RangeError("Failed to decode varint");l=e[o++],s|=(l&127)<<7*o}while(l>=128);return{value:s,offset:o}}function W$(r){let{value:e,offset:n}=z$(r);return new Uint8Array(r.slice(n,n+e))}function j$(r,e){return Jn(this,void 0,void 0,function*(){wP();const n=yield lP(),s=`ws://localhost:${yield F$(n.publicKey,e?.baseUri)}/solana-wallet`;let o;const l=(()=>{const p=[...ym.retryDelayScheduleMs];return()=>p.length>1?p.shift():p[0]})();let u=1,d=0,f={__type:"disconnected"};return new Promise((p,v)=>{let E;const S={},R=()=>Jn(this,void 0,void 0,function*(){if(f.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${f.__type}\`.`);return}E.removeEventListener("open",R);const{associationKeypair:le}=f,de=yield Cp();E.send(yield kp(de.publicKey,le.privateKey)),f={__type:"hello_req_sent",associationPublicKey:le.publicKey,ecdhPrivateKey:de.privateKey}}),T=le=>{le.wasClean?f={__type:"disconnected"}:v(new cs(ls.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${le.code}: ${le.reason}).`,{closeEvent:le})),z()},M=le=>Jn(this,void 0,void 0,function*(){z(),Date.now()-o>=ym.timeoutMs?v(new cs(ls.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise(de=>{const Z=l();j=window.setTimeout(de,Z)}),se())}),W=le=>Jn(this,void 0,void 0,function*(){const de=yield le.data.arrayBuffer();switch(f.__type){case"connecting":if(de.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const Z=yield Cp();E.send(yield kp(Z.publicKey,n.privateKey)),f={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:Z.privateKey};break;case"connected":try{const $=de.slice(0,Ho),D=wm($);if(D!==d+1)throw new Error("Encrypted message has invalid sequence number");d=D;const U=yield pP(de,f.sharedSecret),q=S[U.id];delete S[U.id],q.resolve(U.result)}catch($){if($ instanceof og){const D=S[$.jsonRpcMessageId];delete S[$.jsonRpcMessageId],D.reject($)}else throw $}break;case"hello_req_sent":{if(de.byteLength===0){const H=yield Cp();E.send(yield kp(H.publicKey,n.privateKey)),f={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:H.privateKey};break}const $=yield mP(de,f.associationPublicKey,f.ecdhPrivateKey),D=de.slice(uE),U=D.byteLength!==0?yield Jn(this,void 0,void 0,function*(){const H=D.slice(0,Ho),I=wm(H);if(I!==d+1)throw new Error("Encrypted message has invalid sequence number");return d=I,gP(D,$)}):{protocol_version:"legacy"};f={__type:"connected",sharedSecret:$,sessionProperties:U};const q=sP(U.protocol_version,(H,I)=>Jn(this,void 0,void 0,function*(){const y=u++;return E.send(yield fP({id:y,jsonrpc:"2.0",method:H,params:I??{}},$)),new Promise((x,V)=>{S[y]={resolve(J){switch(H){case"authorize":case"reauthorize":{const{wallet_uri_base:G}=J;if(G!=null)try{vP(G)}catch(re){V(re);return}break}}x(J)},reject:V}})}));try{p(yield r(q))}catch(H){v(H)}finally{z(),E.close()}break}}});let z,j;const se=()=>{z&&z(),f={__type:"connecting",associationKeypair:n},o===void 0&&(o=Date.now()),E=new WebSocket(s,[yP]),E.addEventListener("open",R),E.addEventListener("close",T),E.addEventListener("error",M),E.addEventListener("message",W),z=()=>{window.clearTimeout(j),E.removeEventListener("open",R),E.removeEventListener("close",T),E.removeEventListener("error",M),E.removeEventListener("message",W)}};se()})})}function $$(r){return Jn(this,void 0,void 0,function*(){wP();const e=yield lP(),n=`wss://${r?.remoteHostAuthority}/reflect`;let i;const s=(()=>{const T=[...ym.retryDelayScheduleMs];return()=>T.length>1?T.shift():T[0]})();let o=1,l=0,u,d={__type:"disconnected"},f,p,v=T=>Jn(this,void 0,void 0,function*(){if(u=="base64"){const M=yield T.data;return b$(M).buffer}else return yield T.data.arrayBuffer()});const E=yield new Promise((T,M)=>{const W=()=>Jn(this,void 0,void 0,function*(){if(d.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${d.__type}\`.`);return}f.protocol.includes(Nx)?u="base64":u="binary",f.removeEventListener("open",W)}),z=Z=>{Z.wasClean?d={__type:"disconnected"}:M(new cs(ls.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${Z.code}: ${Z.reason}).`,{closeEvent:Z})),p()},j=Z=>Jn(this,void 0,void 0,function*(){p(),Date.now()-i>=ym.timeoutMs?M(new cs(ls.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${n}.`)):(yield new Promise($=>{const D=s();le=window.setTimeout($,D)}),de())}),se=Z=>Jn(this,void 0,void 0,function*(){const $=yield v(Z);if(d.__type==="connecting"){if($.byteLength==0)throw new Error("Encountered unexpected message while connecting");const D=W$($);d={__type:"reflector_id_received",reflectorId:D};const U=yield D$(e.publicKey,r.remoteHostAuthority,D,r?.baseUri);f.removeEventListener("message",se),T(U)}});let le;const de=()=>{p&&p(),d={__type:"connecting",associationKeypair:e},i===void 0&&(i=Date.now()),f=new WebSocket(n,[yP,Nx]),f.addEventListener("open",W),f.addEventListener("close",z),f.addEventListener("error",j),f.addEventListener("message",se),p=()=>{window.clearTimeout(le),f.removeEventListener("open",W),f.removeEventListener("close",z),f.removeEventListener("error",j),f.removeEventListener("message",se)}};de()});let S=!1,R;return{associationUrl:E,close:()=>{f.close(),R()},wallet:new Promise((T,M)=>{const W={},z=j=>Jn(this,void 0,void 0,function*(){const se=yield v(j);switch(d.__type){case"reflector_id_received":if(se.byteLength!==0)throw new Error("Encountered unexpected message while awaiting reflection");const le=yield Cp(),de=yield kp(le.publicKey,e.privateKey);u=="base64"?f.send(bv(de)):f.send(de),d={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:le.privateKey};break;case"connected":try{const Z=se.slice(0,Ho),$=wm(Z);if($!==l+1)throw new Error("Encrypted message has invalid sequence number");l=$;const D=yield pP(se,d.sharedSecret),U=W[D.id];delete W[D.id],U.resolve(D.result)}catch(Z){if(Z instanceof og){const $=W[Z.jsonRpcMessageId];delete W[Z.jsonRpcMessageId],$.reject(Z)}else throw Z}break;case"hello_req_sent":{const Z=yield mP(se,d.associationPublicKey,d.ecdhPrivateKey),$=se.slice(uE),D=$.byteLength!==0?yield Jn(this,void 0,void 0,function*(){const q=$.slice(0,Ho),H=wm(q);if(H!==l+1)throw new Error("Encrypted message has invalid sequence number");return l=H,gP($,Z)}):{protocol_version:"legacy"};d={__type:"connected",sharedSecret:Z,sessionProperties:D};const U=sP(D.protocol_version,(q,H)=>Jn(this,void 0,void 0,function*(){const I=o++,y=yield fP({id:I,jsonrpc:"2.0",method:q,params:H??{}},Z);return u=="base64"?f.send(bv(y)):f.send(y),new Promise((x,V)=>{W[I]={resolve(J){switch(q){case"authorize":case"reauthorize":{const{wallet_uri_base:G}=J;if(G!=null)try{vP(G)}catch(re){V(re);return}break}}x(J)},reject:V}})}));S=!0;try{T(U)}catch(q){M(q)}break}}});f.addEventListener("message",z),R=()=>{f.removeEventListener("message",z),p(),S||M(new cs(ls.ERROR_SESSION_CLOSED,"The wallet session was closed before connection.",{closeEvent:new CloseEvent("socket was closed before connection")}))}})}})}const q$=Object.freeze(Object.defineProperty({__proto__:null,SolanaCloneAuthorization:Sv,SolanaMobileWalletAdapterError:cs,SolanaMobileWalletAdapterErrorCode:ls,SolanaMobileWalletAdapterProtocolError:og,SolanaMobileWalletAdapterProtocolErrorCode:E$,SolanaSignInWithSolana:A$,SolanaSignTransactions:iP,startRemoteScenario:$$,transact:j$},Symbol.toStringTag,{value:"Module"})),K$=ph(q$);var mw={},Ox;function H$(){return Ox||(Ox=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SOLANA_CHAINS=r.SOLANA_LOCALNET_CHAIN=r.SOLANA_TESTNET_CHAIN=r.SOLANA_DEVNET_CHAIN=r.SOLANA_MAINNET_CHAIN=void 0,r.isSolanaChain=e,r.SOLANA_MAINNET_CHAIN="solana:mainnet",r.SOLANA_DEVNET_CHAIN="solana:devnet",r.SOLANA_TESTNET_CHAIN="solana:testnet",r.SOLANA_LOCALNET_CHAIN="solana:localnet",r.SOLANA_CHAINS=[r.SOLANA_MAINNET_CHAIN,r.SOLANA_DEVNET_CHAIN,r.SOLANA_TESTNET_CHAIN,r.SOLANA_LOCALNET_CHAIN];function e(n){return r.SOLANA_CHAINS.includes(n)}})(mw)),mw}var Dx;function G$(){if(Dx)return Os;Dx=1,Object.defineProperty(Os,"__esModule",{value:!0});var r=lE(),e=f$(),n=K$,i=ZC(),s=mk(),o=H$();function l(je){return je&&typeof je=="object"&&"default"in je?je:{default:je}}var u=l(e),d=l(s);function f(je,Re,K,fe){function Me($e){return $e instanceof K?$e:new K(function(Ve){Ve($e)})}return new(K||(K=Promise))(function($e,Ve){function Ze(dt){try{kt(fe.next(dt))}catch(Tn){Ve(Tn)}}function Qe(dt){try{kt(fe.throw(dt))}catch(Tn){Ve(Tn)}}function kt(dt){dt.done?$e(dt.value):Me(dt.value).then(Ze,Qe)}kt((fe=fe.apply(je,[])).next())})}function p(je,Re,K,fe){if(K==="a"&&!fe)throw new TypeError("Private accessor was defined without a getter");if(typeof Re=="function"?je!==Re||!fe:!Re.has(je))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?fe:K==="a"?fe.call(je):fe?fe.value:Re.get(je)}function v(je,Re,K,fe,Me){if(typeof Re=="function"?je!==Re||!0:!Re.has(je))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Re.set(je,K),K}var E,S,R,T,M,W,z,j;const se=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,le=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,de=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class Z{constructor(){E.add(this),S.set(this,null),R.set(this,{}),T.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),p(this,E,"m",W).call(this),p(this,S,"f")&&(p(this,S,"f").style.display="flex")},this.close=(Re=void 0)=>{var K;console.debug("Modal close"),p(this,E,"m",z).call(this),p(this,S,"f")&&(p(this,S,"f").style.display="none"),(K=p(this,R,"f").close)===null||K===void 0||K.forEach(fe=>fe(Re))},j.set(this,Re=>{Re.key==="Escape"&&this.close(Re)}),this.init=this.init.bind(this),v(this,S,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return f(this,void 0,void 0,function*(){console.log("Injecting modal"),p(this,E,"m",M).call(this)})}addEventListener(Re,K){var fe;return!((fe=p(this,R,"f")[Re])===null||fe===void 0)&&fe.push(K)||(p(this,R,"f")[Re]=[K]),()=>this.removeEventListener(Re,K)}removeEventListener(Re,K){var fe;p(this,R,"f")[Re]=(fe=p(this,R,"f")[Re])===null||fe===void 0?void 0:fe.filter(Me=>K!==Me)}}S=new WeakMap,R=new WeakMap,T=new WeakMap,j=new WeakMap,E=new WeakSet,M=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){p(this,S,"f")||v(this,S,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}v(this,S,document.createElement("div")),p(this,S,"f").id="mobile-wallet-adapter-embedded-root-ui",p(this,S,"f").innerHTML=se,p(this,S,"f").style.display="none";const Re=p(this,S,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");Re&&(Re.innerHTML=this.contentHtml);const K=document.createElement("style");K.id="mobile-wallet-adapter-embedded-modal-styles",K.textContent=le+this.contentStyles;const fe=document.createElement("div");fe.innerHTML=de,this.dom=fe.attachShadow({mode:"closed"}),this.dom.appendChild(K),this.dom.appendChild(p(this,S,"f")),document.body.appendChild(fe)},W=function(){if(!p(this,S,"f")||p(this,T,"f"))return;[...p(this,S,"f").querySelectorAll("[data-modal-close]")].forEach(K=>K?.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",p(this,j,"f")),v(this,T,!0)},z=function(){if(!p(this,T,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",p(this,j,"f")),!p(this,S,"f")))return;[...p(this,S,"f").querySelectorAll("[data-modal-close]")].forEach(K=>K?.removeEventListener("click",this.close)),v(this,T,!1)};class $ extends Z{constructor(){super(...arguments),this.contentStyles=U,this.contentHtml=D}initWithQR(Re){const K=Object.create(null,{init:{get:()=>super.init}});return f(this,void 0,void 0,function*(){K.init.call(this),this.populateQRCode(Re)})}populateQRCode(Re){var K;return f(this,void 0,void 0,function*(){const fe=(K=this.dom)===null||K===void 0?void 0:K.getElementById("mobile-wallet-adapter-embedded-modal-qr-code-container");if(fe){const Me=yield u.default.toCanvas(Re,{width:200,margin:0});fe.firstElementChild!==null?fe.replaceChild(Me,fe.firstElementChild):fe.appendChild(Me)}else console.error("QRCode Container not found")})}}const D=`
<div class="mobile-wallet-adapter-embedded-modal-qr-content">
    <div>
        <svg class="mobile-wallet-adapter-embedded-modal-icon" width="100%" height="100%">
            <circle r="52" cx="53" cy="53" fill="#99b3be" stroke="#000000" stroke-width="2"/>
            <path d="m 53,82.7305 c -3.3116,0 -6.1361,-1.169 -8.4735,-3.507 -2.338,-2.338 -3.507,-5.1625 -3.507,-8.4735 0,-3.3116 1.169,-6.1364 3.507,-8.4744 2.3374,-2.338 5.1619,-3.507 8.4735,-3.507 3.3116,0 6.1361,1.169 8.4735,3.507 2.338,2.338 3.507,5.1628 3.507,8.4744 0,3.311 -1.169,6.1355 -3.507,8.4735 -2.3374,2.338 -5.1619,3.507 -8.4735,3.507 z m 0.007,-5.25 c 1.8532,0 3.437,-0.6598 4.7512,-1.9793 1.3149,-1.3195 1.9723,-2.9058 1.9723,-4.7591 0,-1.8526 -0.6598,-3.4364 -1.9793,-4.7512 -1.3195,-1.3149 -2.9055,-1.9723 -4.7582,-1.9723 -1.8533,0 -3.437,0.6598 -4.7513,1.9793 -1.3148,1.3195 -1.9722,2.9058 -1.9722,4.7591 0,1.8527 0.6597,3.4364 1.9792,4.7512 1.3195,1.3149 2.9056,1.9723 4.7583,1.9723 z m -28,-33.5729 -3.85,-3.6347 c 4.1195,-4.025 8.8792,-7.1984 14.2791,-9.52 5.4005,-2.3223 11.2551,-3.4834 17.5639,-3.4834 6.3087,0 12.1634,1.1611 17.5639,3.4834 5.3999,2.3216 10.1596,5.495 14.2791,9.52 l -3.85,3.6347 C 77.2999,40.358 73.0684,37.5726 68.2985,35.5514 63.5292,33.5301 58.4296,32.5195 53,32.5195 c -5.4297,0 -10.5292,1.0106 -15.2985,3.0319 -4.7699,2.0212 -9.0014,4.8066 -12.6945,8.3562 z m 44.625,10.8771 c -2.2709,-2.1046 -4.7962,-3.7167 -7.5758,-4.8361 -2.7795,-1.12 -5.7983,-1.68 -9.0562,-1.68 -3.2579,0 -6.2621,0.56 -9.0125,1.68 -2.7504,1.1194 -5.2903,2.7315 -7.6195,4.8361 L 32.5189,51.15 c 2.8355,-2.6028 5.9777,-4.6086 9.4263,-6.0174 3.4481,-1.4087 7.133,-2.1131 11.0548,-2.1131 3.9217,0 7.5979,0.7044 11.0285,2.1131 3.43,1.4088 6.5631,3.4146 9.3992,6.0174 z"/>
        </svg>
        <div class="mobile-wallet-adapter-embedded-modal-title">Remote Mobile Wallet Adapter</div>
    </div>
    <div>
        <div>
            <h4 class="mobile-wallet-adapter-embedded-modal-qr-label">
                Open your wallet and scan this code
            </h4>
        </div>
        <div id="mobile-wallet-adapter-embedded-modal-qr-code-container" class="mobile-wallet-adapter-embedded-modal-qr-code-container"></div>
    </div>
</div>
<div class="mobile-wallet-adapter-embedded-modal-divider"><hr></div>
<div class="mobile-wallet-adapter-embedded-modal-footer">
    <div class="mobile-wallet-adapter-embedded-modal-subtitle">
        Follow the instructions on your device. When you're finished, this screen will update.
    </div>
    <div class="mobile-wallet-adapter-embedded-modal-progress-badge">
        <div>
            <div class="spinner">
                <div class="leftWrapper">
                    <div class="left">
                        <div class="circle"></div>
                    </div>
                </div>
                <div class="rightWrapper">
                    <div class="right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>
        <div>Waiting for scan</div>
    </div>
</div>
`,U=`
.mobile-wallet-adapter-embedded-modal-qr-content {
    display: flex; 
    margin-top: 10px;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
    display: flex;
    flex-direction: column;
    flex: 2;
    margin-top: auto;
    margin-right: 30px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
    display: flex;
    flex-direction: column;
    flex: 1;
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-footer {
    display: flex;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-icon {}

.mobile-wallet-adapter-embedded-modal-title {
    color: #000000;
    font-size: 2.5em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-qr-label {
    text-align: right;
    color: #000000;
}

.mobile-wallet-adapter-embedded-modal-qr-code-container {
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-divider {
    margin-top: 20px;
    padding-left: 10px;
    padding-right: 10px;
}

.mobile-wallet-adapter-embedded-modal-divider hr {
    border-top: 1px solid #D9DEDE;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: auto;
    margin-right: 60px;
    padding: 20px;
    color: #6E8286;
}

.mobile-wallet-adapter-embedded-modal-progress-badge {
    display: flex;
    background: #F7F8F8;
    height: 56px;
    min-width: 200px;
    margin: auto;
    padding-left: 20px;
    padding-right: 20px;
    border-radius: 18px;
    color: #A8B6B8;
    align-items: center;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:first-child {
    margin-left: auto;
    margin-right: 20px;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:nth-child(2) {
    margin-right: auto;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-card {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
        margin: auto;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
        margin: auto;
        flex: 2 auto;
    }
    .mobile-wallet-adapter-embedded-modal-footer {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-icon {
        display: none;
    }
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: unset;
    }
    .mobile-wallet-adapter-embedded-modal-qr-label {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-code-container {
        margin: auto;
    }
}

/* Spinner */
@keyframes spinLeft {
    0% {
        transform: rotate(20deg);
    }
    50% {
        transform: rotate(160deg);
    }
    100% {
        transform: rotate(20deg);
    }
}
@keyframes spinRight {
    0% {
        transform: rotate(160deg);
    }
    50% {
        transform: rotate(20deg);
    }
    100% {
        transform: rotate(160deg);
    }
}
@keyframes spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(2520deg);
    }
}

.spinner {
    position: relative;
    width: 1.5em;
    height: 1.5em;
    margin: auto;
    animation: spin 10s linear infinite;
}
.spinner::before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}
.right, .rightWrapper, .left, .leftWrapper {
    position: absolute;
    top: 0;
    overflow: hidden;
    width: .75em;
    height: 1.5em;
}
.left, .leftWrapper {
    left: 0;
}
.right {
    left: -12px;
}
.rightWrapper {
    right: 0;
}
.circle {
    border: .125em solid #A8B6B8;
    width: 1.25em; /* 1.5em - 2*0.125em border */
    height: 1.25em; /* 1.5em - 2*0.125em border */
    border-radius: 0.75em; /* 0.5*1.5em spinner size 8 */
}
.left {
    transform-origin: 100% 50%;
    animation: spinLeft 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
.right {
    transform-origin: 100% 50%;
    animation: spinRight 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
`,q="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function H(je){return window.btoa(String.fromCharCode.call(null,...je))}function I(je){return new Uint8Array(window.atob(je).split("").map(Re=>Re.charCodeAt(0)))}var y,x,V,J,G,re,ae,O,w,_,F,ee,ce,we,Oe,ze,At,qt,rn,qn,un,kn,$r,_n,xn,ir,dn,hn,Qn,gn,vn,sr,Qt,Y,C,N,oe,ye,be,Pe,Vt,Et,Rt,on,xt,mn,qr,fn,bn,fi,Gt,Sn,_r,Ln,In,pi,Zt,an,hr,L,X,te,A,ne,_e,ve,De,Ge,st,He;const sn="Mobile Wallet Adapter",pt=64,Nt=[r.SolanaSignAndSendTransaction,r.SolanaSignTransaction,r.SolanaSignMessage,r.SolanaSignIn];class Dt{constructor(Re){y.add(this),x.set(this,{}),V.set(this,"1.0.0"),J.set(this,sn),G.set(this,"https://solanamobile.com/wallets"),re.set(this,q),ae.set(this,void 0),O.set(this,void 0),w.set(this,void 0),_.set(this,!1),F.set(this,0),ee.set(this,[]),ce.set(this,void 0),we.set(this,void 0),Oe.set(this,void 0),ze.set(this,(K,fe)=>{var Me;return!((Me=p(this,x,"f")[K])===null||Me===void 0)&&Me.push(fe)||(p(this,x,"f")[K]=[fe]),()=>p(this,y,"m",qt).call(this,K,fe)}),rn.set(this,({silent:K}={})=>f(this,void 0,void 0,function*(){if(p(this,_,"f")||this.connected)return{accounts:this.accounts};v(this,_,!0);try{if(K){const fe=yield p(this,w,"f").get();if(fe)yield p(this,kn,"f").call(this,fe.capabilities),yield p(this,un,"f").call(this,fe);else return{accounts:this.accounts}}else yield p(this,qn,"f").call(this)}catch(fe){throw new Error(fe instanceof Error&&fe.message||"Unknown error")}finally{v(this,_,!1)}return{accounts:this.accounts}})),qn.set(this,K=>f(this,void 0,void 0,function*(){try{const fe=yield p(this,w,"f").get();if(fe)return p(this,un,"f").call(this,fe),fe;const Me=yield p(this,ce,"f").select(p(this,ee,"f"));return yield p(this,xn,"f").call(this,$e=>f(this,void 0,void 0,function*(){const[Ve,Ze]=yield Promise.all([$e.getCapabilities(),$e.authorize({chain:Me,identity:p(this,ae,"f"),sign_in_payload:K})]),Qe=p(this,dn,"f").call(this,Ze.accounts),kt=Object.assign(Object.assign({},Ze),{accounts:Qe,chain:Me,capabilities:Ve});return Promise.all([p(this,kn,"f").call(this,Ve),p(this,w,"f").set(kt),p(this,un,"f").call(this,kt)]),kt}))}catch(fe){throw new Error(fe instanceof Error&&fe.message||"Unknown error")}})),un.set(this,K=>f(this,void 0,void 0,function*(){var fe;const Me=p(this,O,"f")==null||((fe=p(this,O,"f"))===null||fe===void 0?void 0:fe.accounts.length)!==K.accounts.length||p(this,O,"f").accounts.some(($e,Ve)=>$e.address!==K.accounts[Ve].address);v(this,O,K),Me&&p(this,y,"m",At).call(this,"change",{accounts:this.accounts})})),kn.set(this,K=>f(this,void 0,void 0,function*(){const fe=K.features.includes("solana:signTransactions"),Me=K.supports_sign_and_send_transactions,$e=r.SolanaSignAndSendTransaction in this.features!==Me||r.SolanaSignTransaction in this.features!==fe;v(this,we,Object.assign(Object.assign({},(Me||!Me&&!fe)&&{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:p(this,gn,"f")}}),fe&&{[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:p(this,vn,"f")}})),$e&&p(this,y,"m",At).call(this,"change",{features:this.features})})),$r.set(this,(K,fe,Me)=>f(this,void 0,void 0,function*(){var $e,Ve;try{const[Ze,Qe]=yield Promise.all([(Ve=($e=p(this,O,"f"))===null||$e===void 0?void 0:$e.capabilities)!==null&&Ve!==void 0?Ve:yield K.getCapabilities(),K.authorize({auth_token:fe,identity:p(this,ae,"f"),chain:Me})]),kt=p(this,dn,"f").call(this,Qe.accounts),dt=Object.assign(Object.assign({},Qe),{accounts:kt,chain:Me,capabilities:Ze});Promise.all([p(this,w,"f").set(dt),p(this,un,"f").call(this,dt)])}catch(Ze){throw p(this,_n,"f").call(this),new Error(Ze instanceof Error&&Ze.message||"Unknown error")}})),_n.set(this,()=>f(this,void 0,void 0,function*(){var K;p(this,w,"f").clear(),v(this,_,!1),v(this,F,(K=p(this,F,"f"),K++,K)),v(this,O,void 0),p(this,y,"m",At).call(this,"change",{accounts:this.accounts})})),xn.set(this,K=>f(this,void 0,void 0,function*(){var fe;const Me=(fe=p(this,O,"f"))===null||fe===void 0?void 0:fe.wallet_uri_base,$e=Me?{baseUri:Me}:void 0,Ve=p(this,F,"f");try{return yield n.transact(K,$e)}catch(Ze){throw p(this,F,"f")!==Ve&&(yield new Promise(()=>{})),Ze instanceof Error&&Ze.name==="SolanaMobileWalletAdapterError"&&Ze.code==="ERROR_WALLET_NOT_FOUND"&&(yield p(this,Oe,"f").call(this,this)),Ze}})),ir.set(this,()=>{if(!p(this,O,"f"))throw new Error("Wallet not connected");return{authToken:p(this,O,"f").auth_token,chain:p(this,O,"f").chain}}),dn.set(this,K=>K.map(fe=>{var Me,$e;const Ve=I(fe.address);return{address:d.default.encode(Ve),publicKey:Ve,label:fe.label,icon:fe.icon,chains:(Me=fe.chains)!==null&&Me!==void 0?Me:p(this,ee,"f"),features:($e=fe.features)!==null&&$e!==void 0?$e:Nt}})),hn.set(this,K=>f(this,void 0,void 0,function*(){const{authToken:fe,chain:Me}=p(this,ir,"f").call(this);try{const $e=K.map(Ve=>H(Ve));return yield p(this,xn,"f").call(this,Ve=>f(this,void 0,void 0,function*(){return yield p(this,$r,"f").call(this,Ve,fe,Me),(yield Ve.signTransactions({payloads:$e})).signed_payloads.map(I)}))}catch($e){throw new Error($e instanceof Error&&$e.message||"Unknown error")}})),Qn.set(this,(K,fe)=>f(this,void 0,void 0,function*(){const{authToken:Me,chain:$e}=p(this,ir,"f").call(this);try{return yield p(this,xn,"f").call(this,Ve=>f(this,void 0,void 0,function*(){const[Ze,Qe]=yield Promise.all([Ve.getCapabilities(),p(this,$r,"f").call(this,Ve,Me,$e)]);if(Ze.supports_sign_and_send_transactions){const kt=H(K);return(yield Ve.signAndSendTransactions(Object.assign(Object.assign({},fe),{payloads:[kt]}))).signatures.map(I)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(Ve){throw new Error(Ve instanceof Error&&Ve.message||"Unknown error")}})),gn.set(this,(...K)=>f(this,void 0,void 0,function*(){const fe=[];for(const Me of K){const $e=yield p(this,Qn,"f").call(this,Me.transaction,Me.options);fe.push({signature:$e})}return fe})),vn.set(this,(...K)=>f(this,void 0,void 0,function*(){return(yield p(this,hn,"f").call(this,K.map(({transaction:fe})=>fe))).map(fe=>({signedTransaction:fe}))})),sr.set(this,(...K)=>f(this,void 0,void 0,function*(){const{authToken:fe,chain:Me}=p(this,ir,"f").call(this),$e=K.map(({account:Ze})=>H(Ze.publicKey)),Ve=K.map(({message:Ze})=>H(Ze));try{return yield p(this,xn,"f").call(this,Ze=>f(this,void 0,void 0,function*(){return yield p(this,$r,"f").call(this,Ze,fe,Me),(yield Ze.signMessages({addresses:$e,payloads:Ve})).signed_payloads.map(I).map(kt=>({signedMessage:kt,signature:kt.slice(-pt)}))}))}catch(Ze){throw new Error(Ze instanceof Error&&Ze.message||"Unknown error")}})),Qt.set(this,(...K)=>f(this,void 0,void 0,function*(){const fe=[];if(K.length>1)for(const Me of K)fe.push(yield p(this,Y,"f").call(this,Me));else return[yield p(this,Y,"f").call(this,K[0])];return fe})),Y.set(this,K=>f(this,void 0,void 0,function*(){var fe,Me,$e;v(this,_,!0);try{const Ve=yield p(this,qn,"f").call(this,Object.assign(Object.assign({},K),{domain:(fe=K?.domain)!==null&&fe!==void 0?fe:window.location.host}));if(!Ve.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const Ze=Ve.sign_in_result.address,Qe=Ve.accounts.find(kt=>kt.address==Ze);return{account:Object.assign(Object.assign({},Qe??{address:d.default.encode(I(Ze))}),{publicKey:I(Ze),chains:(Me=Qe?.chains)!==null&&Me!==void 0?Me:p(this,ee,"f"),features:($e=Qe?.features)!==null&&$e!==void 0?$e:Ve.capabilities.features}),signedMessage:I(Ve.sign_in_result.signed_message),signature:I(Ve.sign_in_result.signature)}}catch(Ve){throw new Error(Ve instanceof Error&&Ve.message||"Unknown error")}finally{v(this,_,!1)}})),v(this,w,Re.authorizationCache),v(this,ae,Re.appIdentity),v(this,ee,Re.chains),v(this,ce,Re.chainSelector),v(this,Oe,Re.onWalletNotFound),v(this,we,{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:p(this,gn,"f")},[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:p(this,vn,"f")}})}get version(){return p(this,V,"f")}get name(){return p(this,J,"f")}get url(){return p(this,G,"f")}get icon(){return p(this,re,"f")}get chains(){return p(this,ee,"f")}get features(){return Object.assign({[i.StandardConnect]:{version:"1.0.0",connect:p(this,rn,"f")},[i.StandardDisconnect]:{version:"1.0.0",disconnect:p(this,_n,"f")},[i.StandardEvents]:{version:"1.0.0",on:p(this,ze,"f")},[r.SolanaSignMessage]:{version:"1.0.0",signMessage:p(this,sr,"f")},[r.SolanaSignIn]:{version:"1.0.0",signIn:p(this,Qt,"f")}},p(this,we,"f"))}get accounts(){var Re,K;return(K=(Re=p(this,O,"f"))===null||Re===void 0?void 0:Re.accounts)!==null&&K!==void 0?K:[]}get connected(){return!!p(this,O,"f")}get isAuthorized(){return!!p(this,O,"f")}get currentAuthorization(){return p(this,O,"f")}get cachedAuthorizationResult(){return p(this,w,"f").get()}}x=new WeakMap,V=new WeakMap,J=new WeakMap,G=new WeakMap,re=new WeakMap,ae=new WeakMap,O=new WeakMap,w=new WeakMap,_=new WeakMap,F=new WeakMap,ee=new WeakMap,ce=new WeakMap,we=new WeakMap,Oe=new WeakMap,ze=new WeakMap,rn=new WeakMap,qn=new WeakMap,un=new WeakMap,kn=new WeakMap,$r=new WeakMap,_n=new WeakMap,xn=new WeakMap,ir=new WeakMap,dn=new WeakMap,hn=new WeakMap,Qn=new WeakMap,gn=new WeakMap,vn=new WeakMap,sr=new WeakMap,Qt=new WeakMap,Y=new WeakMap,y=new WeakSet,At=function(Re,...K){var fe;(fe=p(this,x,"f")[Re])===null||fe===void 0||fe.forEach(Me=>Me.apply(null,K))},qt=function(Re,K){var fe;p(this,x,"f")[Re]=(fe=p(this,x,"f")[Re])===null||fe===void 0?void 0:fe.filter(Me=>K!==Me)};class jt{constructor(Re){C.add(this),N.set(this,{}),oe.set(this,"1.0.0"),ye.set(this,sn),be.set(this,"https://solanamobile.com/wallets"),Pe.set(this,q),Vt.set(this,void 0),Et.set(this,void 0),Rt.set(this,void 0),on.set(this,!1),xt.set(this,0),mn.set(this,[]),qr.set(this,void 0),fn.set(this,void 0),bn.set(this,void 0),fi.set(this,void 0),Gt.set(this,void 0),Sn.set(this,(K,fe)=>{var Me;return!((Me=p(this,N,"f")[K])===null||Me===void 0)&&Me.push(fe)||(p(this,N,"f")[K]=[fe]),()=>p(this,C,"m",Ln).call(this,K,fe)}),In.set(this,({silent:K}={})=>f(this,void 0,void 0,function*(){if(p(this,on,"f")||this.connected)return{accounts:this.accounts};v(this,on,!0);try{yield p(this,pi,"f").call(this)}catch(fe){throw new Error(fe instanceof Error&&fe.message||"Unknown error")}finally{v(this,on,!1)}return{accounts:this.accounts}})),pi.set(this,K=>f(this,void 0,void 0,function*(){try{const fe=yield p(this,Rt,"f").get();if(fe)return p(this,Zt,"f").call(this,fe),fe;p(this,Gt,"f")&&v(this,Gt,void 0,"f");const Me=yield p(this,qr,"f").select(p(this,mn,"f"));return yield p(this,X,"f").call(this,$e=>f(this,void 0,void 0,function*(){const[Ve,Ze]=yield Promise.all([$e.getCapabilities(),$e.authorize({chain:Me,identity:p(this,Vt,"f"),sign_in_payload:K})]),Qe=p(this,A,"f").call(this,Ze.accounts),kt=Object.assign(Object.assign({},Ze),{accounts:Qe,chain:Me,capabilities:Ve});return Promise.all([p(this,an,"f").call(this,Ve),p(this,Rt,"f").set(kt),p(this,Zt,"f").call(this,kt)]),kt}))}catch(fe){throw new Error(fe instanceof Error&&fe.message||"Unknown error")}})),Zt.set(this,K=>f(this,void 0,void 0,function*(){var fe;const Me=p(this,Et,"f")==null||((fe=p(this,Et,"f"))===null||fe===void 0?void 0:fe.accounts.length)!==K.accounts.length||p(this,Et,"f").accounts.some(($e,Ve)=>$e.address!==K.accounts[Ve].address);v(this,Et,K),Me&&p(this,C,"m",_r).call(this,"change",{accounts:this.accounts})})),an.set(this,K=>f(this,void 0,void 0,function*(){const fe=K.features.includes("solana:signTransactions"),Me=K.supports_sign_and_send_transactions||K.features.includes("solana:signAndSendTransaction"),$e=r.SolanaSignAndSendTransaction in this.features!==Me||r.SolanaSignTransaction in this.features!==fe;v(this,fn,Object.assign(Object.assign({},Me&&{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:K.supported_transaction_versions,signAndSendTransaction:p(this,ve,"f")}}),fe&&{[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:K.supported_transaction_versions,signTransaction:p(this,De,"f")}})),$e&&p(this,C,"m",_r).call(this,"change",{features:this.features})})),hr.set(this,(K,fe,Me)=>f(this,void 0,void 0,function*(){var $e,Ve;try{const[Ze,Qe]=yield Promise.all([(Ve=($e=p(this,Et,"f"))===null||$e===void 0?void 0:$e.capabilities)!==null&&Ve!==void 0?Ve:yield K.getCapabilities(),K.authorize({auth_token:fe,identity:p(this,Vt,"f"),chain:Me})]),kt=p(this,A,"f").call(this,Qe.accounts),dt=Object.assign(Object.assign({},Qe),{accounts:kt,chain:Me,capabilities:Ze});Promise.all([p(this,Rt,"f").set(dt),p(this,Zt,"f").call(this,dt)])}catch(Ze){throw p(this,L,"f").call(this),new Error(Ze instanceof Error&&Ze.message||"Unknown error")}})),L.set(this,()=>f(this,void 0,void 0,function*(){var K,fe;(K=p(this,Gt,"f"))===null||K===void 0||K.close(),p(this,Rt,"f").clear(),v(this,on,!1),v(this,xt,(fe=p(this,xt,"f"),fe++,fe)),v(this,Et,void 0),v(this,Gt,void 0),p(this,C,"m",_r).call(this,"change",{accounts:this.accounts})})),X.set(this,K=>f(this,void 0,void 0,function*(){var fe;const Me=(fe=p(this,Et,"f"))===null||fe===void 0?void 0:fe.wallet_uri_base,Ve=Object.assign(Object.assign({},Me?{baseUri:Me}:void 0),{remoteHostAuthority:p(this,fi,"f")}),Ze=p(this,xt,"f"),Qe=new $;if(p(this,Gt,"f"))return K(p(this,Gt,"f").wallet);try{const{associationUrl:kt,close:dt,wallet:Tn}=yield n.startRemoteScenario(Ve),Kn=Qe.addEventListener("close",Wn=>{Wn&&dt()});return Qe.initWithQR(kt.toString()),Qe.open(),v(this,Gt,{close:dt,wallet:yield Tn},"f"),Kn(),Qe.close(),yield K(p(this,Gt,"f").wallet)}catch(kt){throw Qe.close(),p(this,xt,"f")!==Ze&&(yield new Promise(()=>{})),kt instanceof Error&&kt.name==="SolanaMobileWalletAdapterError"&&kt.code==="ERROR_WALLET_NOT_FOUND"&&(yield p(this,bn,"f").call(this,this)),kt}})),te.set(this,()=>{if(!p(this,Et,"f"))throw new Error("Wallet not connected");return{authToken:p(this,Et,"f").auth_token,chain:p(this,Et,"f").chain}}),A.set(this,K=>K.map(fe=>{var Me,$e;const Ve=I(fe.address);return{address:d.default.encode(Ve),publicKey:Ve,label:fe.label,icon:fe.icon,chains:(Me=fe.chains)!==null&&Me!==void 0?Me:p(this,mn,"f"),features:($e=fe.features)!==null&&$e!==void 0?$e:Nt}})),ne.set(this,K=>f(this,void 0,void 0,function*(){const{authToken:fe,chain:Me}=p(this,te,"f").call(this);try{return yield p(this,X,"f").call(this,$e=>f(this,void 0,void 0,function*(){return yield p(this,hr,"f").call(this,$e,fe,Me),(yield $e.signTransactions({payloads:K.map(H)})).signed_payloads.map(I)}))}catch($e){throw new Error($e instanceof Error&&$e.message||"Unknown error")}})),_e.set(this,(K,fe)=>f(this,void 0,void 0,function*(){const{authToken:Me,chain:$e}=p(this,te,"f").call(this);try{return yield p(this,X,"f").call(this,Ve=>f(this,void 0,void 0,function*(){const[Ze,Qe]=yield Promise.all([Ve.getCapabilities(),p(this,hr,"f").call(this,Ve,Me,$e)]);if(Ze.supports_sign_and_send_transactions)return(yield Ve.signAndSendTransactions(Object.assign(Object.assign({},fe),{payloads:[H(K)]}))).signatures.map(I)[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(Ve){throw new Error(Ve instanceof Error&&Ve.message||"Unknown error")}})),ve.set(this,(...K)=>f(this,void 0,void 0,function*(){const fe=[];for(const Me of K){const $e=yield p(this,_e,"f").call(this,Me.transaction,Me.options);fe.push({signature:$e})}return fe})),De.set(this,(...K)=>f(this,void 0,void 0,function*(){return(yield p(this,ne,"f").call(this,K.map(({transaction:fe})=>fe))).map(fe=>({signedTransaction:fe}))})),Ge.set(this,(...K)=>f(this,void 0,void 0,function*(){const{authToken:fe,chain:Me}=p(this,te,"f").call(this),$e=K.map(({account:Ze})=>H(Ze.publicKey)),Ve=K.map(({message:Ze})=>H(Ze));try{return yield p(this,X,"f").call(this,Ze=>f(this,void 0,void 0,function*(){return yield p(this,hr,"f").call(this,Ze,fe,Me),(yield Ze.signMessages({addresses:$e,payloads:Ve})).signed_payloads.map(I).map(kt=>({signedMessage:kt,signature:kt.slice(-pt)}))}))}catch(Ze){throw new Error(Ze instanceof Error&&Ze.message||"Unknown error")}})),st.set(this,(...K)=>f(this,void 0,void 0,function*(){const fe=[];if(K.length>1)for(const Me of K)fe.push(yield p(this,He,"f").call(this,Me));else return[yield p(this,He,"f").call(this,K[0])];return fe})),He.set(this,K=>f(this,void 0,void 0,function*(){var fe,Me,$e;v(this,on,!0);try{const Ve=yield p(this,pi,"f").call(this,Object.assign(Object.assign({},K),{domain:(fe=K?.domain)!==null&&fe!==void 0?fe:window.location.host}));if(!Ve.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const Ze=Ve.sign_in_result.address,Qe=Ve.accounts.find(kt=>kt.address==Ze);return{account:Object.assign(Object.assign({},Qe??{address:d.default.encode(I(Ze))}),{publicKey:I(Ze),chains:(Me=Qe?.chains)!==null&&Me!==void 0?Me:p(this,mn,"f"),features:($e=Qe?.features)!==null&&$e!==void 0?$e:Ve.capabilities.features}),signedMessage:I(Ve.sign_in_result.signed_message),signature:I(Ve.sign_in_result.signature)}}catch(Ve){throw new Error(Ve instanceof Error&&Ve.message||"Unknown error")}finally{v(this,on,!1)}})),v(this,Rt,Re.authorizationCache),v(this,Vt,Re.appIdentity),v(this,mn,Re.chains),v(this,qr,Re.chainSelector),v(this,fi,Re.remoteHostAuthority),v(this,bn,Re.onWalletNotFound),v(this,fn,{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:p(this,ve,"f")},[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:p(this,De,"f")}})}get version(){return p(this,oe,"f")}get name(){return p(this,ye,"f")}get url(){return p(this,be,"f")}get icon(){return p(this,Pe,"f")}get chains(){return p(this,mn,"f")}get features(){return Object.assign({[i.StandardConnect]:{version:"1.0.0",connect:p(this,In,"f")},[i.StandardDisconnect]:{version:"1.0.0",disconnect:p(this,L,"f")},[i.StandardEvents]:{version:"1.0.0",on:p(this,Sn,"f")},[r.SolanaSignMessage]:{version:"1.0.0",signMessage:p(this,Ge,"f")},[r.SolanaSignIn]:{version:"1.0.0",signIn:p(this,st,"f")}},p(this,fn,"f"))}get accounts(){var Re,K;return(K=(Re=p(this,Et,"f"))===null||Re===void 0?void 0:Re.accounts)!==null&&K!==void 0?K:[]}get connected(){return!!p(this,Gt,"f")&&!!p(this,Et,"f")}get isAuthorized(){return!!p(this,Et,"f")}get currentAuthorization(){return p(this,Et,"f")}get cachedAuthorizationResult(){return p(this,Rt,"f").get()}}N=new WeakMap,oe=new WeakMap,ye=new WeakMap,be=new WeakMap,Pe=new WeakMap,Vt=new WeakMap,Et=new WeakMap,Rt=new WeakMap,on=new WeakMap,xt=new WeakMap,mn=new WeakMap,qr=new WeakMap,fn=new WeakMap,bn=new WeakMap,fi=new WeakMap,Gt=new WeakMap,Sn=new WeakMap,In=new WeakMap,pi=new WeakMap,Zt=new WeakMap,an=new WeakMap,hr=new WeakMap,L=new WeakMap,X=new WeakMap,te=new WeakMap,A=new WeakMap,ne=new WeakMap,_e=new WeakMap,ve=new WeakMap,De=new WeakMap,Ge=new WeakMap,st=new WeakMap,He=new WeakMap,C=new WeakSet,_r=function(Re,...K){var fe;(fe=p(this,N,"f")[Re])===null||fe===void 0||fe.forEach(Me=>Me.apply(null,K))},Ln=function(Re,K){var fe;p(this,N,"f")[Re]=(fe=p(this,N,"f")[Re])===null||fe===void 0?void 0:fe.filter(Me=>K!==Me)};var Kt=function(je,Re,K,fe,Me){if(fe==="m")throw new TypeError("Private method is not writable");if(fe==="a"&&!Me)throw new TypeError("Private accessor was defined without a setter");if(typeof Re=="function"?je!==Re||!Me:!Re.has(je))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fe==="a"?Me.call(je,K):Me?Me.value=K:Re.set(je,K),K},Wt=function(je,Re,K,fe){if(K==="a"&&!fe)throw new TypeError("Private accessor was defined without a getter");if(typeof Re=="function"?je!==Re||!fe:!Re.has(je))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?fe:K==="a"?fe.call(je):fe?fe.value:Re.get(je)},ft;function Ft(je){const Re=({register:K})=>K(je);try{window.dispatchEvent(new mt(Re))}catch(K){console.error(`wallet-standard:register-wallet event could not be dispatched
`,K)}try{window.addEventListener("wallet-standard:app-ready",({detail:K})=>Re(K))}catch(K){console.error(`wallet-standard:app-ready event listener could not be added
`,K)}}class mt extends Event{constructor(Re){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),ft.set(this,void 0),Kt(this,ft,Re,"f")}get detail(){return Wt(this,ft,"f")}get type(){return"wallet-standard:register-wallet"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}ft=new WeakMap;function bt(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}function ot(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function yt(je){bt()?Ft(new Dt(je)):ot()&&je.remoteHostAuthority!==void 0&&Ft(new jt(Object.assign(Object.assign({},je),{remoteHostAuthority:je.remoteHostAuthority})))}const _t="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",lt="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class xe extends Z{constructor(){super(...arguments),this.contentStyles=Fe,this.contentHtml=Ce}initWithError(Re){super.init(),this.populateError(Re)}populateError(Re){var K,fe;const Me=(K=this.dom)===null||K===void 0?void 0:K.getElementById("mobile-wallet-adapter-error-message"),$e=(fe=this.dom)===null||fe===void 0?void 0:fe.getElementById("mobile-wallet-adapter-error-action");if(Me){if(Re.name==="SolanaMobileWalletAdapterError")switch(Re.code){case"ERROR_WALLET_NOT_FOUND":Me.innerHTML=_t,$e&&$e.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":Me.innerHTML=lt,$e&&($e.style.display="none");return}Me.innerHTML=`An unexpected error occurred: ${Re.message}`}else console.log("Failed to locate error dialog element")}}const Ce=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,Fe=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function Ue(){return f(this,void 0,void 0,function*(){if(typeof window<"u"){const je=window.navigator.userAgent.toLowerCase(),Re=new xe;je.includes("wv")?Re.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):Re.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),Re.open()}})}function We(){return()=>f(this,void 0,void 0,function*(){Ue()})}const Je="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Ot(){let je;try{je=window.localStorage}catch{}return{clear(){return f(this,void 0,void 0,function*(){if(je)try{je.removeItem(Je)}catch{}})},get(){return f(this,void 0,void 0,function*(){if(je)try{const Re=JSON.parse(je.getItem(Je));if(Re&&Re.accounts){const K=Re.accounts.map(fe=>Object.assign(Object.assign({},fe),{publicKey:"publicKey"in fe?new Uint8Array(Object.values(fe.publicKey)):d.default.decode(fe.address)}));return Object.assign(Object.assign({},Re),{accounts:K})}else return Re||void 0}catch{}})},set(Re){return f(this,void 0,void 0,function*(){if(je)try{je.setItem(Je,JSON.stringify(Re))}catch{}})}}}function Xt(){return{select(je){return f(this,void 0,void 0,function*(){return je.length===1?je[0]:je.includes(o.SOLANA_MAINNET_CHAIN)?o.SOLANA_MAINNET_CHAIN:je[0]})}}}return Os.LocalSolanaMobileWalletAdapterWallet=Dt,Os.RemoteSolanaMobileWalletAdapterWallet=jt,Os.SolanaMobileWalletAdapterWalletName=sn,Os.createDefaultAuthorizationCache=Ot,Os.createDefaultChainSelector=Xt,Os.createDefaultWalletNotFoundHandler=We,Os.defaultErrorModalWalletNotFoundHandler=Ue,Os.registerMwa=yt,Os}var Lx;function Y$(){if(Lx)return io;Lx=1,Object.defineProperty(io,"__esModule",{value:!0});var r=qj(),e=Kj,n=lE(),i=G$();function s(O,w,_,F){function ee(ce){return ce instanceof _?ce:new _(function(we){we(ce)})}return new(_||(_=Promise))(function(ce,we){function Oe(qt){try{At(F.next(qt))}catch(rn){we(rn)}}function ze(qt){try{At(F.throw(qt))}catch(rn){we(rn)}}function At(qt){qt.done?ce(qt.value):ee(qt.value).then(Oe,ze)}At((F=F.apply(O,[])).next())})}function o(O,w,_,F){if(_==="a"&&!F)throw new TypeError("Private accessor was defined without a getter");if(typeof w=="function"?O!==w||!F:!w.has(O))throw new TypeError("Cannot read private member from an object whose class did not declare it");return _==="m"?F:_==="a"?F.call(O):F?F.value:w.get(O)}function l(O,w,_,F,ee){if(typeof w=="function"?O!==w||!0:!w.has(O))throw new TypeError("Cannot write private member to an object whose class did not declare it");return w.set(O,_),_}const u="standard:connect",d="standard:disconnect",f="standard:events";function p(O){return window.btoa(String.fromCharCode.call(null,...O))}function v(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var E,S,R,T,M,W,z,j,se,le,de,Z,$;const D="Mobile Wallet Adapter",U=64;function q(O){return"version"in O}function H(O){switch(O){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return O}}class I extends r.BaseSignInMessageSignerWalletAdapter{constructor(w,_){super(),E.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),S.set(this,void 0),R.set(this,!1),T.set(this,v()?r.WalletReadyState.Loadable:r.WalletReadyState.Unsupported),M.set(this,void 0),W.set(this,void 0),z.set(this,void 0),j.set(this,F=>s(this,void 0,void 0,function*(){if(F.accounts&&F.accounts.length>0){o(this,E,"m",le).call(this);const ee=yield o(this,M,"f").call(this,F.accounts);ee!==o(this,W,"f")&&(l(this,W,ee),l(this,z,void 0),this.emit("connect",this.publicKey))}})),l(this,M,F=>s(this,void 0,void 0,function*(){var ee;const ce=yield _.addressSelector.select(F.map(({publicKey:we})=>p(we)));return(ee=F.find(({publicKey:we})=>p(we)===ce))!==null&&ee!==void 0?ee:F[0]})),l(this,S,w),o(this,S,"f").features[f].on("change",o(this,j,"f")),this.name=o(this,S,"f").name,this.icon=o(this,S,"f").icon,this.url=o(this,S,"f").url}get publicKey(){var w;if(!o(this,z,"f")&&o(this,W,"f"))try{l(this,z,new e.PublicKey(o(this,W,"f").publicKey),"f")}catch(_){throw new r.WalletPublicKeyError(_ instanceof Error&&_?.message||"Unknown error",_)}return(w=o(this,z,"f"))!==null&&w!==void 0?w:null}get connected(){return o(this,S,"f").connected}get connecting(){return o(this,R,"f")}get readyState(){return o(this,T,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return s(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return s(this,void 0,void 0,function*(){o(this,E,"m",se).call(this,!0)})}connect(){return s(this,void 0,void 0,function*(){o(this,E,"m",se).call(this)})}performAuthorization(w){return s(this,void 0,void 0,function*(){try{const _=yield o(this,S,"f").cachedAuthorizationResult;return _?(yield o(this,S,"f").features[u].connect({silent:!0}),_):(w?yield o(this,S,"f").features[n.SolanaSignIn].signIn(w):yield o(this,S,"f").features[u].connect(),yield yield o(this,S,"f").cachedAuthorizationResult)}catch(_){throw new r.WalletConnectionError(_ instanceof Error&&_.message||"Unknown error",_)}})}disconnect(){return s(this,void 0,void 0,function*(){return yield o(this,E,"m",$).call(this,()=>s(this,void 0,void 0,function*(){l(this,R,!1),l(this,z,void 0),l(this,W,void 0),yield o(this,S,"f").features[d].disconnect(),this.emit("disconnect")}))})}signIn(w){return s(this,void 0,void 0,function*(){return o(this,E,"m",$).call(this,()=>s(this,void 0,void 0,function*(){var _;if(o(this,T,"f")!==r.WalletReadyState.Installed&&o(this,T,"f")!==r.WalletReadyState.Loadable)throw new r.WalletNotReadyError;l(this,R,!0);try{const F=yield o(this,S,"f").features[n.SolanaSignIn].signIn(Object.assign(Object.assign({},w),{domain:(_=w?.domain)!==null&&_!==void 0?_:window.location.host}));if(F.length>0)return F[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(F){throw new r.WalletConnectionError(F instanceof Error&&F.message||"Unknown error",F)}finally{l(this,R,!1)}}))})}signMessage(w){return s(this,void 0,void 0,function*(){return yield o(this,E,"m",$).call(this,()=>s(this,void 0,void 0,function*(){const _=o(this,E,"m",de).call(this);try{return(yield o(this,S,"f").features[n.SolanaSignMessage].signMessage({account:_,message:w}))[0].signature}catch(F){throw new r.WalletSignMessageError(F?.message,F)}}))})}sendTransaction(w,_,F){return s(this,void 0,void 0,function*(){return yield o(this,E,"m",$).call(this,()=>s(this,void 0,void 0,function*(){const ee=o(this,E,"m",de).call(this);try{let ce=function(){let we;switch(_.commitment){case"confirmed":case"finalized":case"processed":we=_.commitment;break;default:we="finalized"}let Oe;switch(F?.preflightCommitment){case"confirmed":case"finalized":case"processed":Oe=F.preflightCommitment;break;case void 0:Oe=we;break;default:Oe="finalized"}return(Oe==="finalized"?2:Oe==="confirmed"?1:0)<(we==="finalized"?2:we==="confirmed"?1:0)?Oe:we};if(n.SolanaSignAndSendTransaction in o(this,S,"f").features){const we=H(o(this,S,"f").currentAuthorization.chain),[Oe]=(yield o(this,S,"f").features[n.SolanaSignAndSendTransaction].signAndSendTransaction({account:ee,transaction:w.serialize(),chain:we,options:F?{skipPreflight:F.skipPreflight,maxRetries:F.maxRetries}:void 0})).map((ze=>p(ze.signature)));return Oe}else{const[we]=yield o(this,E,"m",Z).call(this,[w]);if(q(we))return yield _.sendTransaction(we);{const Oe=we.serialize();return yield _.sendRawTransaction(Oe,Object.assign(Object.assign({},F),{preflightCommitment:ce()}))}}}catch(ce){throw new r.WalletSendTransactionError(ce?.message,ce)}}))})}signTransaction(w){return s(this,void 0,void 0,function*(){return yield o(this,E,"m",$).call(this,()=>s(this,void 0,void 0,function*(){const[_]=yield o(this,E,"m",Z).call(this,[w]);return _}))})}signAllTransactions(w){return s(this,void 0,void 0,function*(){return yield o(this,E,"m",$).call(this,()=>s(this,void 0,void 0,function*(){return yield o(this,E,"m",Z).call(this,w)}))})}}S=new WeakMap,R=new WeakMap,T=new WeakMap,M=new WeakMap,W=new WeakMap,z=new WeakMap,j=new WeakMap,E=new WeakSet,se=function(w=!1){return s(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield o(this,E,"m",$).call(this,()=>s(this,void 0,void 0,function*(){if(o(this,T,"f")!==r.WalletReadyState.Installed&&o(this,T,"f")!==r.WalletReadyState.Loadable)throw new r.WalletNotReadyError;l(this,R,!0);try{yield o(this,S,"f").features[u].connect({silent:w})}catch(_){throw new r.WalletConnectionError(_ instanceof Error&&_.message||"Unknown error",_)}finally{l(this,R,!1)}}))})},le=function(){o(this,T,"f")!==r.WalletReadyState.Installed&&this.emit("readyStateChange",l(this,T,r.WalletReadyState.Installed))},de=function(){if(!o(this,S,"f").isAuthorized||!o(this,W,"f"))throw new r.WalletNotConnectedError;return o(this,W,"f")},Z=function(w){return s(this,void 0,void 0,function*(){const _=o(this,E,"m",de).call(this);try{if(n.SolanaSignTransaction in o(this,S,"f").features)return o(this,S,"f").features[n.SolanaSignTransaction].signTransaction(...w.map(F=>({account:_,transaction:F.serialize()}))).then(F=>F.map(ee=>{const ce=ee.signedTransaction,Oe=ce[0]*U+1;return e.VersionedMessage.deserializeMessageVersion(ce.slice(Oe,ce.length))==="legacy"?e.Transaction.from(ce):e.VersionedTransaction.deserialize(ce)}));throw new Error("Connected wallet does not support signing transactions")}catch(F){throw new r.WalletSignTransactionError(F?.message,F)}})},$=function(w){return s(this,void 0,void 0,function*(){try{return yield w()}catch(_){throw this.emit("error",_),_}})};class y extends I{constructor(w){var _;const F=H((_=w.chain)!==null&&_!==void 0?_:w.cluster);super(new i.LocalSolanaMobileWalletAdapterWallet({appIdentity:w.appIdentity,authorizationCache:{set:w.authorizationResultCache.set,get:()=>s(this,void 0,void 0,function*(){return yield w.authorizationResultCache.get()}),clear:w.authorizationResultCache.clear},chains:[F],chainSelector:i.createDefaultChainSelector(),onWalletNotFound:()=>s(this,void 0,void 0,function*(){w.onWalletNotFound(this)})}),{addressSelector:w.addressSelector,chain:F})}}class x extends I{constructor(w){const _=H(w.chain);super(new i.RemoteSolanaMobileWalletAdapterWallet({appIdentity:w.appIdentity,authorizationCache:{set:w.authorizationResultCache.set,get:()=>s(this,void 0,void 0,function*(){return yield w.authorizationResultCache.get()}),clear:w.authorizationResultCache.clear},chains:[_],chainSelector:i.createDefaultChainSelector(),remoteHostAuthority:w.remoteHostAuthority,onWalletNotFound:()=>s(this,void 0,void 0,function*(){w.onWalletNotFound(this)})}),{addressSelector:w.addressSelector,chain:_})}}class V extends y{}function J(){return{select(O){return s(this,void 0,void 0,function*(){return O[0]})}}}function G(){return i.createDefaultAuthorizationCache()}function re(O){return s(this,void 0,void 0,function*(){return i.defaultErrorModalWalletNotFoundHandler()})}function ae(){return re}return io.LocalSolanaMobileWalletAdapter=y,io.RemoteSolanaMobileWalletAdapter=x,io.SolanaMobileWalletAdapter=V,io.SolanaMobileWalletAdapterWalletName=D,io.createDefaultAddressSelector=J,io.createDefaultAuthorizationResultCache=G,io.createDefaultWalletNotFoundHandler=ae,io}var Pa=Y$();function J$(r,e){if(r===e)return!0;const n=r.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(r[i]!==e[i])return!1;return!0}function Q$(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<r.length;f++){const p=r.charAt(f),v=p.charCodeAt(0);if(e[v]!==255)throw new TypeError(p+" is ambiguous");e[v]=f}const n=r.length,i=r.charAt(0),s=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function l(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let p=0,v=0,E=0;const S=f.length;for(;E!==S&&f[E]===0;)E++,p++;const R=(S-E)*o+1>>>0,T=new Uint8Array(R);for(;E!==S;){let z=f[E],j=0;for(let se=R-1;(z!==0||j<v)&&se!==-1;se--,j++)z+=256*T[se]>>>0,T[se]=z%n>>>0,z=z/n>>>0;if(z!==0)throw new Error("Non-zero carry");v=j,E++}let M=R-v;for(;M!==R&&T[M]===0;)M++;let W=i.repeat(p);for(;M<R;++M)W+=r.charAt(T[M]);return W}function u(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let p=0,v=0,E=0;for(;f[p]===i;)v++,p++;const S=(f.length-p)*s+1>>>0,R=new Uint8Array(S);for(;p<f.length;){const z=f.charCodeAt(p);if(z>255)return;let j=e[z];if(j===255)return;let se=0;for(let le=S-1;(j!==0||se<E)&&le!==-1;le--,se++)j+=n*R[le]>>>0,R[le]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");E=se,p++}let T=S-E;for(;T!==S&&R[T]===0;)T++;const M=new Uint8Array(v+(S-T));let W=v;for(;T!==S;)M[W++]=R[T++];return M}function d(f){const p=u(f);if(p)return p;throw new Error("Non-base"+n+" character")}return{encode:l,decodeUnsafe:u,decode:d}}var X$="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Z$=Q$(X$);var Bt=function(r,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(r):i?i.value:e.get(r)},Lr=function(r,e,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(r,n):s?s.value=n:e.set(r,n),n},ai,Ki,Ol,Dl,Sl,Bd,vm,Fn,Em,Av,Pp,xv,Gd,Tv,Bx,Ux,Vx,Fx;class eq extends HC{get name(){return Bt(this,Fn,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return Bt(this,Fn,"f").icon}get readyState(){return Bt(this,Em,"f")}get publicKey(){return Bt(this,Ol,"f")}get connecting(){return Bt(this,Dl,"f")}get supportedTransactionVersions(){return Bt(this,vm,"f")}get wallet(){return Bt(this,Fn,"f")}get standard(){return!0}constructor({wallet:e}){super(),ai.add(this),Ki.set(this,void 0),Ol.set(this,void 0),Dl.set(this,void 0),Sl.set(this,void 0),Bd.set(this,void 0),vm.set(this,void 0),Fn.set(this,void 0),Em.set(this,typeof window>"u"||typeof document>"u"?mr.Unsupported:mr.Installed),Tv.set(this,n=>{if("accounts"in n){const i=Bt(this,Fn,"f").accounts[0];Bt(this,Ki,"f")&&!Bt(this,Sl,"f")&&i!==Bt(this,Ki,"f")&&(i?Bt(this,ai,"m",Pp).call(this,i):(this.emit("error",new $C),Bt(this,ai,"m",xv).call(this)))}"features"in n&&Bt(this,ai,"m",Gd).call(this)}),Lr(this,Fn,e,"f"),Lr(this,Ki,null,"f"),Lr(this,Ol,null,"f"),Lr(this,Dl,!1,"f"),Lr(this,Sl,!1,"f"),Lr(this,Bd,Bt(this,Fn,"f").features[YC].on("change",Bt(this,Tv,"f")),"f"),Bt(this,ai,"m",Gd).call(this)}destroy(){Lr(this,Ki,null,"f"),Lr(this,Ol,null,"f"),Lr(this,Dl,!1,"f"),Lr(this,Sl,!1,"f");const e=Bt(this,Bd,"f");e&&(Lr(this,Bd,null,"f"),e())}async autoConnect(){return Bt(this,ai,"m",Av).call(this,{silent:!0})}async connect(){return Bt(this,ai,"m",Av).call(this)}async disconnect(){if(UA in Bt(this,Fn,"f").features)try{Lr(this,Sl,!0,"f"),await Bt(this,Fn,"f").features[UA].disconnect()}catch(e){this.emit("error",new qC(e?.message,e))}finally{Lr(this,Sl,!1,"f")}Bt(this,ai,"m",xv).call(this)}async sendTransaction(e,n,i={}){try{const s=Bt(this,Ki,"f");if(!s)throw new as;let o;if(La in Bt(this,Fn,"f").features)if(s.features.includes(La))o=La;else if(oi in Bt(this,Fn,"f").features&&s.features.includes(oi))o=oi;else throw new Ml;else if(oi in Bt(this,Fn,"f").features){if(!s.features.includes(oi))throw new Ml;o=oi}else throw new Ld;const l=w$(n.rpcEndpoint);if(!s.chains.includes(l))throw new Nl;try{const{signers:u,...d}=i;let f;if(za(e)?(u?.length&&e.sign(u),f=e.serialize()):(e=await this.prepareTransaction(e,n,d),u?.length&&e.partialSign(...u),f=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),o===La){const[p]=await Bt(this,Fn,"f").features[La].signAndSendTransaction({account:s,chain:l,transaction:f,options:{preflightCommitment:fw(d.preflightCommitment||n.commitment),skipPreflight:d.skipPreflight,maxRetries:d.maxRetries,minContextSlot:d.minContextSlot}});return Z$.encode(p.signature)}else{const[p]=await Bt(this,Fn,"f").features[oi].signTransaction({account:s,chain:l,transaction:f,options:{preflightCommitment:fw(d.preflightCommitment||n.commitment),minContextSlot:d.minContextSlot}});return await n.sendRawTransaction(p.signedTransaction,{...d,preflightCommitment:fw(d.preflightCommitment||n.commitment)})}}catch(u){throw u instanceof Ci?u:new Nl(u?.message,u)}}catch(s){throw this.emit("error",s),s}}}Ki=new WeakMap,Ol=new WeakMap,Dl=new WeakMap,Sl=new WeakMap,Bd=new WeakMap,vm=new WeakMap,Fn=new WeakMap,Em=new WeakMap,Tv=new WeakMap,ai=new WeakSet,Av=async function(e){try{if(this.connected||this.connecting)return;if(Bt(this,Em,"f")!==mr.Installed)throw new mm;if(Lr(this,Dl,!0,"f"),!Bt(this,Fn,"f").accounts.length)try{await Bt(this,Fn,"f").features[GC].connect(e)}catch(i){throw new jC(i?.message,i)}const n=Bt(this,Fn,"f").accounts[0];if(!n)throw new Ml;Bt(this,ai,"m",Pp).call(this,n)}catch(n){throw this.emit("error",n),n}finally{Lr(this,Dl,!1,"f")}},Pp=function(e){let n;try{n=new ut(e.address)}catch(i){throw new _v(i?.message,i)}Lr(this,Ki,e,"f"),Lr(this,Ol,n,"f"),Bt(this,ai,"m",Gd).call(this),this.emit("connect",n)},xv=function(){Lr(this,Ki,null,"f"),Lr(this,Ol,null,"f"),Bt(this,ai,"m",Gd).call(this),this.emit("disconnect")},Gd=function(){const e=La in Bt(this,Fn,"f").features?Bt(this,Fn,"f").features[La].supportedTransactionVersions:Bt(this,Fn,"f").features[oi].supportedTransactionVersions;Lr(this,vm,J$(e,["legacy"])?null:new Set(e),"f"),oi in Bt(this,Fn,"f").features&&Bt(this,Ki,"f")?.features.includes(oi)?(this.signTransaction=Bt(this,ai,"m",Bx),this.signAllTransactions=Bt(this,ai,"m",Ux)):(delete this.signTransaction,delete this.signAllTransactions),Sd in Bt(this,Fn,"f").features&&Bt(this,Ki,"f")?.features.includes(Sd)?this.signMessage=Bt(this,ai,"m",Vx):delete this.signMessage,Fy in Bt(this,Fn,"f").features?this.signIn=Bt(this,ai,"m",Fx):delete this.signIn},Bx=async function(e){try{const n=Bt(this,Ki,"f");if(!n)throw new as;if(!(oi in Bt(this,Fn,"f").features))throw new Ld;if(!n.features.includes(oi))throw new Ml;try{const s=(await Bt(this,Fn,"f").features[oi].signTransaction({account:n,transaction:za(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return za(e)?dh.deserialize(s):Un.from(s)}catch(i){throw i instanceof Ci?i:new Fa(i?.message,i)}}catch(n){throw this.emit("error",n),n}},Ux=async function(e){try{const n=Bt(this,Ki,"f");if(!n)throw new as;if(!(oi in Bt(this,Fn,"f").features))throw new Ld;if(!n.features.includes(oi))throw new Ml;try{const i=await Bt(this,Fn,"f").features[oi].signTransaction(...e.map(s=>({account:n,transaction:za(s)?s.serialize():new Uint8Array(s.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((s,o)=>{const l=i[o].signedTransaction;return za(s)?dh.deserialize(l):Un.from(l)})}catch(i){throw new Fa(i?.message,i)}}catch(n){throw this.emit("error",n),n}},Vx=async function(e){try{const n=Bt(this,Ki,"f");if(!n)throw new as;if(!(Sd in Bt(this,Fn,"f").features))throw new Ld;if(!n.features.includes(Sd))throw new Ml;try{return(await Bt(this,Fn,"f").features[Sd].signMessage({account:n,message:e}))[0].signature}catch(i){throw new KC(i?.message,i)}}catch(n){throw this.emit("error",n),n}},Fx=async function(e={}){try{if(!(Fy in Bt(this,Fn,"f").features))throw new Ld;let n;try{[n]=await Bt(this,Fn,"f").features[Fy].signIn(e)}catch(i){throw new BA(i?.message,i)}if(!n)throw new BA;return Bt(this,ai,"m",Pp).call(this,n.account),n}catch(n){throw this.emit("error",n),n}};const tq=Cj;var nq=function(r,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(r):i?i.value:e.get(r)},rq=function(r,e,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(r,n):s?s.value=n:e.set(r,n),n},Mp;let ss;const ag=new Set;function iq(r){Yd=void 0,ag.add(r)}function sq(r){Yd=void 0,ag.delete(r)}const Jc={};function oq(){if(ss||(ss=Object.freeze({register:zx,get:aq,on:lq}),typeof window>"u"))return ss;const r=Object.freeze({register:zx});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(r))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new cq(r))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return ss}function zx(...r){return r=r.filter(e=>!ag.has(e)),r.length?(r.forEach(e=>iq(e)),Jc.register?.forEach(e=>Rv(()=>e(...r))),function(){r.forEach(n=>sq(n)),Jc.unregister?.forEach(n=>Rv(()=>n(...r)))}):()=>{}}let Yd;function aq(){return Yd||(Yd=[...ag]),Yd}function lq(r,e){return Jc[r]?.push(e)||(Jc[r]=[e]),function(){Jc[r]=Jc[r]?.filter(i=>e!==i)}}function Rv(r){try{r()}catch(e){console.error(e)}}class cq extends Event{get detail(){return nq(this,Mp,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),Mp.set(this,void 0),rq(this,Mp,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Mp=new WeakMap;function uq(){if(ss||(ss=oq(),typeof window>"u"))return ss;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),ss;const{register:e}=ss,n=(...i)=>i.forEach(s=>Rv(()=>s({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:n})})}catch{return console.error("window.navigator.wallets could not be set"),ss}return n(...r),ss}function dq(r){const e=Wx(()=>new Set),{get:n,on:i}=Wx(()=>uq()),[s,o]=pe.useState(()=>jx(n()));pe.useEffect(()=>{const u=[i("register",(...d)=>o(f=>[...f,...jx(d)])),i("unregister",(...d)=>o(f=>f.filter(p=>d.some(v=>v===p.wallet))))];return()=>u.forEach(d=>d())},[i]);const l=hq(s);return pe.useEffect(()=>{if(!l)return;const u=new Set(s);new Set(l.filter(f=>!u.has(f))).forEach(f=>f.destroy())},[l,s]),pe.useEffect(()=>()=>s.forEach(u=>u.destroy()),[]),pe.useMemo(()=>[...s,...r.filter(({name:u})=>s.some(d=>d.name===u)?(e.has(u)||(e.add(u),console.warn(`${u} was registered as a Standard Wallet. The Wallet Adapter for ${u} can be removed from your app.`)),!1):!0)],[s,r,e])}function Wx(r){const e=pe.useRef(void 0);return e.current===void 0&&(e.current={value:r()}),e.current.value}function hq(r){const e=pe.useRef(void 0);return pe.useEffect(()=>{e.current=r}),e.current}function jx(r){return r.filter(tq).map(e=>new eq({wallet:e}))}var cu;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(cu||(cu={}));function fq(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function pq({adapters:r,userAgentString:e}){return r.some(n=>n.name!==Pa.SolanaMobileWalletAdapterWalletName&&n.readyState===mr.Installed)?cu.DESKTOP_WEB:e&&/android/i.test(e)&&!fq(e)?cu.MOBILE_WEB:cu.DESKTOP_WEB}function mq(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function gq({children:r,wallets:e,adapter:n,isUnloadingRef:i,onAutoConnectRequest:s,onConnectError:o,onError:l,onSelectWallet:u}){const d=pe.useRef(!1),[f,p]=pe.useState(!1),v=pe.useRef(!1),[E,S]=pe.useState(!1),[R,T]=pe.useState(()=>n?.publicKey??null),[M,W]=pe.useState(()=>n?.connected??!1),z=pe.useRef(l);pe.useEffect(()=>(z.current=l,()=>{z.current=void 0}),[l]);const j=pe.useRef((x,V)=>(i.current||(z.current?z.current(x,V):(console.error(x,V),x instanceof mm&&typeof window<"u"&&V&&window.open(V.url,"_blank"))),x)),[se,le]=pe.useState(()=>e.map(x=>({adapter:x,readyState:x.readyState})).filter(({readyState:x})=>x!==mr.Unsupported));pe.useEffect(()=>{le(V=>e.map((J,G)=>{const re=V[G];return re&&re.adapter===J&&re.readyState===J.readyState?re:{adapter:J,readyState:J.readyState}}).filter(({readyState:J})=>J!==mr.Unsupported));function x(V){le(J=>{const G=J.findIndex(({adapter:ae})=>ae===this);if(G===-1)return J;const{adapter:re}=J[G];return[...J.slice(0,G),{adapter:re,readyState:V},...J.slice(G+1)].filter(({readyState:ae})=>ae!==mr.Unsupported)})}return e.forEach(V=>V.on("readyStateChange",x,V)),()=>{e.forEach(V=>V.off("readyStateChange",x,V))}},[n,e]);const de=pe.useMemo(()=>se.find(x=>x.adapter===n)??null,[n,se]);pe.useEffect(()=>{if(!n)return;const x=G=>{T(G),d.current=!1,p(!1),W(!0),v.current=!1,S(!1)},V=()=>{i.current||(T(null),d.current=!1,p(!1),W(!1),v.current=!1,S(!1))},J=G=>{j.current(G,n)};return n.on("connect",x),n.on("disconnect",V),n.on("error",J),()=>{n.off("connect",x),n.off("disconnect",V),n.off("error",J),V()}},[n,i]);const Z=pe.useRef(!1);pe.useEffect(()=>()=>{Z.current=!1},[n]),pe.useEffect(()=>{Z.current||d.current||M||!s||!(de?.readyState===mr.Installed||de?.readyState===mr.Loadable)||(d.current=!0,p(!0),Z.current=!0,(async function(){try{await s()}catch{o()}finally{p(!1),d.current=!1}})())},[M,s,o,de]);const $=pe.useCallback(async(x,V,J)=>{if(!n)throw j.current(new VA);if(!M)throw j.current(new as,n);return await n.sendTransaction(x,V,J)},[n,M]),D=pe.useMemo(()=>n&&"signTransaction"in n?async x=>{if(!M)throw j.current(new as,n);return await n.signTransaction(x)}:void 0,[n,M]),U=pe.useMemo(()=>n&&"signAllTransactions"in n?async x=>{if(!M)throw j.current(new as,n);return await n.signAllTransactions(x)}:void 0,[n,M]),q=pe.useMemo(()=>n&&"signMessage"in n?async x=>{if(!M)throw j.current(new as,n);return await n.signMessage(x)}:void 0,[n,M]),H=pe.useMemo(()=>n&&"signIn"in n?async x=>await n.signIn(x):void 0,[n]),I=pe.useCallback(async()=>{if(d.current||v.current||de?.adapter.connected)return;if(!de)throw j.current(new VA);const{adapter:x,readyState:V}=de;if(!(V===mr.Installed||V===mr.Loadable))throw j.current(new mm,x);d.current=!0,p(!0);try{await x.connect()}catch(J){throw o(),J}finally{p(!1),d.current=!1}},[o,de]),y=pe.useCallback(async()=>{if(!v.current&&n){v.current=!0,S(!0);try{await n.disconnect()}finally{S(!1),v.current=!1}}},[n]);return it.createElement(JC.Provider,{value:{autoConnect:!!s,wallets:se,wallet:de,publicKey:R,connected:M,connecting:f,disconnecting:E,select:u,connect:I,disconnect:y,sendTransaction:$,signTransaction:D,signAllTransactions:U,signMessage:q,signIn:H}},r)}let gw;function yq(){return gw===void 0&&(gw=globalThis.navigator?.userAgent??null),gw}function $x(r){const e=yq();return pq({adapters:r,userAgentString:e})===cu.MOBILE_WEB}function wq(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function vq({children:r,wallets:e,autoConnect:n,localStorageKey:i="walletName",onError:s}){const{connection:o}=Ij(),l=dq(e),u=pe.useMemo(()=>{if(!$x(l))return null;const z=l.find(j=>j.name===Pa.SolanaMobileWalletAdapterWalletName);return z||new Pa.SolanaMobileWalletAdapter({addressSelector:Pa.createDefaultAddressSelector(),appIdentity:{uri:wq()},authorizationResultCache:Pa.createDefaultAuthorizationResultCache(),cluster:mq(o?.rpcEndpoint),onWalletNotFound:Pa.createDefaultWalletNotFoundHandler()})},[l,o?.rpcEndpoint]),d=pe.useMemo(()=>u==null||l.indexOf(u)!==-1?l:[u,...l],[l,u]),[f,p]=Nj(i,null),v=pe.useMemo(()=>d.find(z=>z.name===f)??null,[d,f]),E=pe.useCallback(z=>{f!==z&&(v&&v.name!==Pa.SolanaMobileWalletAdapterWalletName&&v.disconnect(),p(z))},[v,p,f]);pe.useEffect(()=>{if(!v)return;function z(){T.current||p(null)}return v.on("disconnect",z),()=>{v.off("disconnect",z)}},[v,l,p,f]);const S=pe.useRef(!1),R=pe.useMemo(()=>{if(!(!n||!v))return async()=>{(n===!0||await n(v))&&(S.current?await v.connect():await v.autoConnect())}},[n,v]),T=pe.useRef(!1);pe.useEffect(()=>{if(f===Pa.SolanaMobileWalletAdapterWalletName&&$x(l)){T.current=!1;return}function z(){T.current=!0}return window.addEventListener("beforeunload",z),()=>{window.removeEventListener("beforeunload",z)}},[l,f]);const M=pe.useCallback(()=>{v&&E(null)},[v,E]),W=pe.useCallback(z=>{S.current=!0,E(z)},[E]);return it.createElement(gq,{wallets:d,adapter:v,isUnloadingRef:T,onAutoConnectRequest:R,onConnectError:M,onError:s,onSelectWallet:W},r)}const EP={setVisible(r){console.error(_P("call","setVisible"))},visible:!1};Object.defineProperty(EP,"visible",{get(){return console.error(_P("read","visible")),!1}});function _P(r,e){return`You have tried to  ${r} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const bP=pe.createContext(EP);function Eq(){return pe.useContext(bP)}const _q=r=>it.createElement("button",{className:`wallet-adapter-button ${r.className||""}`,disabled:r.disabled,style:r.style,onClick:r.onClick,tabIndex:r.tabIndex||0,type:"button"},r.startIcon&&it.createElement("i",{className:"wallet-adapter-button-start-icon"},r.startIcon),r.children,r.endIcon&&it.createElement("i",{className:"wallet-adapter-button-end-icon"},r.endIcon)),bq=({wallet:r,...e})=>r&&it.createElement("img",{src:r.adapter.icon,alt:`${r.adapter.name} icon`,...e}),qx=({id:r,children:e,expanded:n=!1})=>{const i=pe.useRef(null),s=pe.useRef(!0),o="height 250ms ease-out",l=()=>{const d=i.current;d&&requestAnimationFrame(()=>{d.style.height=d.scrollHeight+"px"})},u=()=>{const d=i.current;d&&requestAnimationFrame(()=>{d.style.height=d.offsetHeight+"px",d.style.overflow="hidden",requestAnimationFrame(()=>{d.style.height="0"})})};return pe.useLayoutEffect(()=>{n?l():u()},[n]),pe.useLayoutEffect(()=>{const d=i.current;if(!d)return;function f(){d&&(d.style.overflow=n?"initial":"hidden",n&&(d.style.height="auto"))}function p(v){d&&v.target===d&&v.propertyName==="height"&&f()}return s.current&&(f(),s.current=!1),d.addEventListener("transitionend",p),()=>d.removeEventListener("transitionend",p)},[n]),it.createElement("div",{className:"wallet-adapter-collapse",id:r,ref:i,role:"region",style:{height:0,transition:s.current?void 0:o}},e)},yw=({handleClick:r,tabIndex:e,wallet:n})=>it.createElement("li",null,it.createElement(_q,{onClick:r,startIcon:it.createElement(bq,{wallet:n}),tabIndex:e},n.adapter.name,n.readyState===mr.Installed&&it.createElement("span",null,"Detected"))),Sq=()=>it.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},it.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),it.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),it.createElement("g",{clipPath:"url(#clip0_880_5115)"},it.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),it.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),it.createElement("defs",null,it.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},it.createElement("stop",{stopColor:"#9945FF"}),it.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),it.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),it.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),it.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),it.createElement("stop",{offset:"1",stopColor:"#00D18C"})),it.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},it.createElement("stop",{stopColor:"#9945FF"}),it.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),it.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),it.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),it.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),it.createElement("stop",{offset:"1",stopColor:"#00D18C"})),it.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},it.createElement("stop",{stopColor:"#9945FF"}),it.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),it.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),it.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),it.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),it.createElement("stop",{offset:"1",stopColor:"#00D18C"})),it.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},it.createElement("stop",{stopColor:"#9945FF"}),it.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),it.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),it.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),it.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),it.createElement("stop",{offset:"1",stopColor:"#00D18C"})),it.createElement("clipPath",{id:"clip0_880_5115"},it.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),Iq=({className:r="",container:e="body"})=>{const n=pe.useRef(null),{wallets:i,select:s}=Mj(),{setVisible:o}=Eq(),[l,u]=pe.useState(!1),[d,f]=pe.useState(!1),[p,v]=pe.useState(null),[E,S]=pe.useMemo(()=>{const j=[],se=[];for(const le of i)le.readyState===mr.Installed?j.push(le):se.push(le);return j.length?[j,se]:[se,[]]},[i]),R=pe.useCallback(()=>{f(!1),setTimeout(()=>o(!1),150)},[o]),T=pe.useCallback(j=>{j.preventDefault(),R()},[R]),M=pe.useCallback((j,se)=>{s(se),T(j)},[s,T]),W=pe.useCallback(()=>u(!l),[l]),z=pe.useCallback(j=>{const se=n.current;if(!se)return;const le=se.querySelectorAll("button"),de=le[0],Z=le[le.length-1];j.shiftKey?document.activeElement===de&&(Z.focus(),j.preventDefault()):document.activeElement===Z&&(de.focus(),j.preventDefault())},[n]);return pe.useLayoutEffect(()=>{const j=le=>{le.key==="Escape"?R():le.key==="Tab"&&z(le)},{overflow:se}=window.getComputedStyle(document.body);return setTimeout(()=>f(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",j,!1),()=>{document.body.style.overflow=se,window.removeEventListener("keydown",j,!1)}},[R,z]),pe.useLayoutEffect(()=>v(document.querySelector(e)),[e]),p&&nM.createPortal(it.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${d&&"wallet-adapter-modal-fade-in"} ${r}`,ref:n,role:"dialog"},it.createElement("div",{className:"wallet-adapter-modal-container"},it.createElement("div",{className:"wallet-adapter-modal-wrapper"},it.createElement("button",{onClick:T,className:"wallet-adapter-modal-button-close"},it.createElement("svg",{width:"14",height:"14"},it.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),E.length?it.createElement(it.Fragment,null,it.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),it.createElement("ul",{className:"wallet-adapter-modal-list"},E.map(j=>it.createElement(yw,{key:j.adapter.name,handleClick:se=>M(se,j.adapter.name),wallet:j})),S.length?it.createElement(qx,{expanded:l,id:"wallet-adapter-modal-collapse"},S.map(j=>it.createElement(yw,{key:j.adapter.name,handleClick:se=>M(se,j.adapter.name),tabIndex:l?0:-1,wallet:j}))):null),S.length?it.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:W,tabIndex:0},it.createElement("span",null,l?"Less ":"More ","options"),it.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${l?"wallet-adapter-modal-list-more-icon-rotate":""}`},it.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):it.createElement(it.Fragment,null,it.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),it.createElement("div",{className:"wallet-adapter-modal-middle"},it.createElement(Sq,null)),S.length?it.createElement(it.Fragment,null,it.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:W,tabIndex:0},it.createElement("span",null,l?"Hide ":"Already have a wallet? View ","options"),it.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${l?"wallet-adapter-modal-list-more-icon-rotate":""}`},it.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),it.createElement(qx,{expanded:l,id:"wallet-adapter-modal-collapse"},it.createElement("ul",{className:"wallet-adapter-modal-list"},S.map(j=>it.createElement(yw,{key:j.adapter.name,handleClick:se=>M(se,j.adapter.name),tabIndex:l?0:-1,wallet:j}))))):null))),it.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:T})),p)},Aq=({children:r,...e})=>{const[n,i]=pe.useState(!1);return it.createElement(bP.Provider,{value:{visible:n,setVisible:i}},r,n&&it.createElement(Iq,{...e}))},xq="Phantom";class Tq extends kj{constructor(e={}){super(),this.name=xq,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?mr.Unsupported:mr.NotDetected,this._disconnected=()=>{const n=this._wallet;n&&(n.off("disconnect",this._disconnected),n.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new $C),this.emit("disconnect"))},this._accountChanged=n=>{const i=this._publicKey;if(i){try{n=new ut(n.toBytes())}catch(s){this.emit("error",new _v(s?.message,s));return}i.equals(n)||(this._publicKey=n,this.emit("connect",n))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==mr.Unsupported&&(Tj()?(this._readyState=mr.Loadable,this.emit("readyStateChange",this._readyState)):xj(()=>window.phantom?.solana?.isPhantom||window.solana?.isPhantom?(this._readyState=mr.Installed,this.emit("readyStateChange",this._readyState),!0):!1))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===mr.Installed&&await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this.readyState===mr.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==mr.Installed)throw new mm;this._connecting=!0;const e=window.phantom?.solana||window.solana;if(!e.isConnected)try{await e.connect()}catch(i){throw new jC(i?.message,i)}if(!e.publicKey)throw new Ml;let n;try{n=new ut(e.publicKey.toBytes())}catch(i){throw new _v(i?.message,i)}e.on("disconnect",this._disconnected),e.on("accountChanged",this._accountChanged),this._wallet=e,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(n){this.emit("error",new qC(n?.message,n))}}this.emit("disconnect")}async sendTransaction(e,n,i={}){try{const s=this._wallet;if(!s)throw new as;try{const{signers:o,...l}=i;za(e)?o?.length&&e.sign(o):(e=await this.prepareTransaction(e,n,l),o?.length&&e.partialSign(...o)),l.preflightCommitment=l.preflightCommitment||n.commitment;const{signature:u}=await s.signAndSendTransaction(e,l);return u}catch(o){throw o instanceof Ci?o:new Nl(o?.message,o)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const n=this._wallet;if(!n)throw new as;try{return await n.signTransaction(e)||e}catch(i){throw new Fa(i?.message,i)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(e){try{const n=this._wallet;if(!n)throw new as;try{return await n.signAllTransactions(e)||e}catch(i){throw new Fa(i?.message,i)}}catch(n){throw this.emit("error",n),n}}async signMessage(e){try{const n=this._wallet;if(!n)throw new as;try{const{signature:i}=await n.signMessage(e);return i}catch(i){throw new KC(i?.message,i)}}catch(n){throw this.emit("error",n),n}}}const Rq=[new Tq],kq="https://api.mainnet-beta.solana.com";function Cq({children:r}){return me.jsx(Aj,{endpoint:kq,children:me.jsx(vq,{wallets:Rq,autoConnect:!0,children:me.jsx(Aq,{children:r})})})}N6.createRoot(document.getElementById("root")).render(me.jsx(pe.StrictMode,{children:me.jsx(gT,{children:me.jsx(K3,{children:me.jsx(Cq,{children:me.jsx(_F,{})})})})}));export{VI as B,LC as C,ut as P,Zr as S,Un as T,Ba as _,eK as a,Zq as b,Sj as i,me as j,pe as r,wu as t,Xq as u};
